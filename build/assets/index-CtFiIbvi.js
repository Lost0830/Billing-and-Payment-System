function Qb(n,s){for(var a=0;a<s.length;a++){const i=s[a];if(typeof i!="string"&&!Array.isArray(i)){for(const l in i)if(l!=="default"&&!(l in n)){const d=Object.getOwnPropertyDescriptor(i,l);d&&Object.defineProperty(n,l,d.get?d:{enumerable:!0,get:()=>i[l]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const u of d.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function a(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(l){if(l.ep)return;l.ep=!0;const d=a(l);fetch(l.href,d)}})();function ty(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Wu={exports:{}},to={},Ku={exports:{}},bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg;function Xb(){if(bg)return bt;bg=1;var n=Symbol.for("react.element"),s=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),h=Symbol.iterator;function C(A){return A===null||typeof A!="object"?null:(A=h&&A[h]||A["@@iterator"],typeof A=="function"?A:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function b(A,R,H){this.props=A,this.context=R,this.refs=w,this.updater=H||P}b.prototype.isReactComponent={},b.prototype.setState=function(A,R){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,R,"setState")},b.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function E(){}E.prototype=b.prototype;function T(A,R,H){this.props=A,this.context=R,this.refs=w,this.updater=H||P}var z=T.prototype=new E;z.constructor=T,S(z,b.prototype),z.isPureReactComponent=!0;var B=Array.isArray,Q=Object.prototype.hasOwnProperty,X={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function J(A,R,H){var M,ee={},U=null,q=null;if(R!=null)for(M in R.ref!==void 0&&(q=R.ref),R.key!==void 0&&(U=""+R.key),R)Q.call(R,M)&&!G.hasOwnProperty(M)&&(ee[M]=R[M]);var le=arguments.length-2;if(le===1)ee.children=H;else if(1<le){for(var he=Array(le),ve=0;ve<le;ve++)he[ve]=arguments[ve+2];ee.children=he}if(A&&A.defaultProps)for(M in le=A.defaultProps,le)ee[M]===void 0&&(ee[M]=le[M]);return{$$typeof:n,type:A,key:U,ref:q,props:ee,_owner:X.current}}function ue(A,R){return{$$typeof:n,type:A.type,key:R,ref:A.ref,props:A.props,_owner:A._owner}}function ge(A){return typeof A=="object"&&A!==null&&A.$$typeof===n}function Ee(A){var R={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(H){return R[H]})}var xe=/\/+/g;function me(A,R){return typeof A=="object"&&A!==null&&A.key!=null?Ee(""+A.key):R.toString(36)}function fe(A,R,H,M,ee){var U=typeof A;(U==="undefined"||U==="boolean")&&(A=null);var q=!1;if(A===null)q=!0;else switch(U){case"string":case"number":q=!0;break;case"object":switch(A.$$typeof){case n:case s:q=!0}}if(q)return q=A,ee=ee(q),A=M===""?"."+me(q,0):M,B(ee)?(H="",A!=null&&(H=A.replace(xe,"$&/")+"/"),fe(ee,R,H,"",function(ve){return ve})):ee!=null&&(ge(ee)&&(ee=ue(ee,H+(!ee.key||q&&q.key===ee.key?"":(""+ee.key).replace(xe,"$&/")+"/")+A)),R.push(ee)),1;if(q=0,M=M===""?".":M+":",B(A))for(var le=0;le<A.length;le++){U=A[le];var he=M+me(U,le);q+=fe(U,R,H,he,ee)}else if(he=C(A),typeof he=="function")for(A=he.call(A),le=0;!(U=A.next()).done;)U=U.value,he=M+me(U,le++),q+=fe(U,R,H,he,ee);else if(U==="object")throw R=String(A),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.");return q}function F(A,R,H){if(A==null)return A;var M=[],ee=0;return fe(A,M,"","",function(U){return R.call(H,U,ee++)}),M}function ne(A){if(A._status===-1){var R=A._result;R=R(),R.then(function(H){(A._status===0||A._status===-1)&&(A._status=1,A._result=H)},function(H){(A._status===0||A._status===-1)&&(A._status=2,A._result=H)}),A._status===-1&&(A._status=0,A._result=R)}if(A._status===1)return A._result.default;throw A._result}var te={current:null},D={transition:null},L={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:D,ReactCurrentOwner:X};function ce(){throw Error("act(...) is not supported in production builds of React.")}return bt.Children={map:F,forEach:function(A,R,H){F(A,function(){R.apply(this,arguments)},H)},count:function(A){var R=0;return F(A,function(){R++}),R},toArray:function(A){return F(A,function(R){return R})||[]},only:function(A){if(!ge(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},bt.Component=b,bt.Fragment=a,bt.Profiler=l,bt.PureComponent=T,bt.StrictMode=i,bt.Suspense=y,bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,bt.act=ce,bt.cloneElement=function(A,R,H){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var M=S({},A.props),ee=A.key,U=A.ref,q=A._owner;if(R!=null){if(R.ref!==void 0&&(U=R.ref,q=X.current),R.key!==void 0&&(ee=""+R.key),A.type&&A.type.defaultProps)var le=A.type.defaultProps;for(he in R)Q.call(R,he)&&!G.hasOwnProperty(he)&&(M[he]=R[he]===void 0&&le!==void 0?le[he]:R[he])}var he=arguments.length-2;if(he===1)M.children=H;else if(1<he){le=Array(he);for(var ve=0;ve<he;ve++)le[ve]=arguments[ve+2];M.children=le}return{$$typeof:n,type:A.type,key:ee,ref:U,props:M,_owner:q}},bt.createContext=function(A){return A={$$typeof:u,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:d,_context:A},A.Consumer=A},bt.createElement=J,bt.createFactory=function(A){var R=J.bind(null,A);return R.type=A,R},bt.createRef=function(){return{current:null}},bt.forwardRef=function(A){return{$$typeof:f,render:A}},bt.isValidElement=ge,bt.lazy=function(A){return{$$typeof:v,_payload:{_status:-1,_result:A},_init:ne}},bt.memo=function(A,R){return{$$typeof:x,type:A,compare:R===void 0?null:R}},bt.startTransition=function(A){var R=D.transition;D.transition={};try{A()}finally{D.transition=R}},bt.unstable_act=ce,bt.useCallback=function(A,R){return te.current.useCallback(A,R)},bt.useContext=function(A){return te.current.useContext(A)},bt.useDebugValue=function(){},bt.useDeferredValue=function(A){return te.current.useDeferredValue(A)},bt.useEffect=function(A,R){return te.current.useEffect(A,R)},bt.useId=function(){return te.current.useId()},bt.useImperativeHandle=function(A,R,H){return te.current.useImperativeHandle(A,R,H)},bt.useInsertionEffect=function(A,R){return te.current.useInsertionEffect(A,R)},bt.useLayoutEffect=function(A,R){return te.current.useLayoutEffect(A,R)},bt.useMemo=function(A,R){return te.current.useMemo(A,R)},bt.useReducer=function(A,R,H){return te.current.useReducer(A,R,H)},bt.useRef=function(A){return te.current.useRef(A)},bt.useState=function(A){return te.current.useState(A)},bt.useSyncExternalStore=function(A,R,H){return te.current.useSyncExternalStore(A,R,H)},bt.useTransition=function(){return te.current.useTransition()},bt.version="18.3.1",bt}var Ng;function rf(){return Ng||(Ng=1,Ku.exports=Xb()),Ku.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sg;function Zb(){if(Sg)return to;Sg=1;var n=rf(),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function u(f,y,x){var v,h={},C=null,P=null;x!==void 0&&(C=""+x),y.key!==void 0&&(C=""+y.key),y.ref!==void 0&&(P=y.ref);for(v in y)i.call(y,v)&&!d.hasOwnProperty(v)&&(h[v]=y[v]);if(f&&f.defaultProps)for(v in y=f.defaultProps,y)h[v]===void 0&&(h[v]=y[v]);return{$$typeof:s,type:f,key:C,ref:P,props:h,_owner:l.current}}return to.Fragment=a,to.jsx=u,to.jsxs=u,to}var Cg;function e1(){return Cg||(Cg=1,Wu.exports=Zb()),Wu.exports}var e=e1(),Ul={},Gu={exports:{}},$n={},Yu={exports:{}},Ju={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function t1(){return Pg||(Pg=1,(function(n){function s(D,L){var ce=D.length;D.push(L);e:for(;0<ce;){var A=ce-1>>>1,R=D[A];if(0<l(R,L))D[A]=L,D[ce]=R,ce=A;else break e}}function a(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var L=D[0],ce=D.pop();if(ce!==L){D[0]=ce;e:for(var A=0,R=D.length,H=R>>>1;A<H;){var M=2*(A+1)-1,ee=D[M],U=M+1,q=D[U];if(0>l(ee,ce))U<R&&0>l(q,ee)?(D[A]=q,D[U]=ce,A=U):(D[A]=ee,D[M]=ce,A=M);else if(U<R&&0>l(q,ce))D[A]=q,D[U]=ce,A=U;else break e}}return L}function l(D,L){var ce=D.sortIndex-L.sortIndex;return ce!==0?ce:D.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;n.unstable_now=function(){return d.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var y=[],x=[],v=1,h=null,C=3,P=!1,S=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(D){for(var L=a(x);L!==null;){if(L.callback===null)i(x);else if(L.startTime<=D)i(x),L.sortIndex=L.expirationTime,s(y,L);else break;L=a(x)}}function B(D){if(w=!1,z(D),!S)if(a(y)!==null)S=!0,ne(Q);else{var L=a(x);L!==null&&te(B,L.startTime-D)}}function Q(D,L){S=!1,w&&(w=!1,E(J),J=-1),P=!0;var ce=C;try{for(z(L),h=a(y);h!==null&&(!(h.expirationTime>L)||D&&!Ee());){var A=h.callback;if(typeof A=="function"){h.callback=null,C=h.priorityLevel;var R=A(h.expirationTime<=L);L=n.unstable_now(),typeof R=="function"?h.callback=R:h===a(y)&&i(y),z(L)}else i(y);h=a(y)}if(h!==null)var H=!0;else{var M=a(x);M!==null&&te(B,M.startTime-L),H=!1}return H}finally{h=null,C=ce,P=!1}}var X=!1,G=null,J=-1,ue=5,ge=-1;function Ee(){return!(n.unstable_now()-ge<ue)}function xe(){if(G!==null){var D=n.unstable_now();ge=D;var L=!0;try{L=G(!0,D)}finally{L?me():(X=!1,G=null)}}else X=!1}var me;if(typeof T=="function")me=function(){T(xe)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,F=fe.port2;fe.port1.onmessage=xe,me=function(){F.postMessage(null)}}else me=function(){b(xe,0)};function ne(D){G=D,X||(X=!0,me())}function te(D,L){J=b(function(){D(n.unstable_now())},L)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){S||P||(S=!0,ne(Q))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return C},n.unstable_getFirstCallbackNode=function(){return a(y)},n.unstable_next=function(D){switch(C){case 1:case 2:case 3:var L=3;break;default:L=C}var ce=C;C=L;try{return D()}finally{C=ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,L){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var ce=C;C=D;try{return L()}finally{C=ce}},n.unstable_scheduleCallback=function(D,L,ce){var A=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?A+ce:A):ce=A,D){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=ce+R,D={id:v++,callback:L,priorityLevel:D,startTime:ce,expirationTime:R,sortIndex:-1},ce>A?(D.sortIndex=ce,s(x,D),a(y)===null&&D===a(x)&&(w?(E(J),J=-1):w=!0,te(B,ce-A))):(D.sortIndex=R,s(y,D),S||P||(S=!0,ne(Q))),D},n.unstable_shouldYield=Ee,n.unstable_wrapCallback=function(D){var L=C;return function(){var ce=C;C=L;try{return D.apply(this,arguments)}finally{C=ce}}}})(Ju)),Ju}var Eg;function n1(){return Eg||(Eg=1,Yu.exports=t1()),Yu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg;function r1(){if(Dg)return $n;Dg=1;var n=rf(),s=n1();function a(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function d(t,r){u(t,r),u(t+"Capture",r)}function u(t,r){for(l[t]=r,t=0;t<r.length;t++)i.add(r[t])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},h={};function C(t){return y.call(h,t)?!0:y.call(v,t)?!1:x.test(t)?h[t]=!0:(v[t]=!0,!1)}function P(t,r,o,c){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function S(t,r,o,c){if(r===null||typeof r>"u"||P(t,r,o,c))return!0;if(c)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function w(t,r,o,c,m,g,j){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=m,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=g,this.removeEmptyString=j}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){b[t]=new w(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];b[r]=new w(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){b[t]=new w(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){b[t]=new w(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){b[t]=new w(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){b[t]=new w(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){b[t]=new w(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){b[t]=new w(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){b[t]=new w(t,5,!1,t.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function T(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(E,T);b[r]=new w(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(E,T);b[r]=new w(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(E,T);b[r]=new w(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){b[t]=new w(t,1,!1,t.toLowerCase(),null,!1,!1)}),b.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){b[t]=new w(t,1,!1,t.toLowerCase(),null,!0,!0)});function z(t,r,o,c){var m=b.hasOwnProperty(r)?b[r]:null;(m!==null?m.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(S(r,o,m,c)&&(o=null),c||m===null?C(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):m.mustUseProperty?t[m.propertyName]=o===null?m.type===3?!1:"":o:(r=m.attributeName,c=m.attributeNamespace,o===null?t.removeAttribute(r):(m=m.type,o=m===3||m===4&&o===!0?"":""+o,c?t.setAttributeNS(c,r,o):t.setAttribute(r,o))))}var B=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Q=Symbol.for("react.element"),X=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),ue=Symbol.for("react.profiler"),ge=Symbol.for("react.provider"),Ee=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),D=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var ce=Object.assign,A;function R(t){if(A===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);A=r&&r[1]||""}return`
`+A+t}var H=!1;function M(t,r){if(!t||H)return"";H=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(oe){var c=oe}Reflect.construct(t,[],r)}else{try{r.call()}catch(oe){c=oe}t.call(r.prototype)}else{try{throw Error()}catch(oe){c=oe}t()}}catch(oe){if(oe&&c&&typeof oe.stack=="string"){for(var m=oe.stack.split(`
`),g=c.stack.split(`
`),j=m.length-1,_=g.length-1;1<=j&&0<=_&&m[j]!==g[_];)_--;for(;1<=j&&0<=_;j--,_--)if(m[j]!==g[_]){if(j!==1||_!==1)do if(j--,_--,0>_||m[j]!==g[_]){var $=`
`+m[j].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=j&&0<=_);break}}}finally{H=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?R(t):""}function ee(t){switch(t.tag){case 5:return R(t.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return t=M(t.type,!1),t;case 11:return t=M(t.type.render,!1),t;case 1:return t=M(t.type,!0),t;default:return""}}function U(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case X:return"Portal";case ue:return"Profiler";case J:return"StrictMode";case me:return"Suspense";case fe:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ee:return(t.displayName||"Context")+".Consumer";case ge:return(t._context.displayName||"Context")+".Provider";case xe:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case F:return r=t.displayName||null,r!==null?r:U(t.type)||"Memo";case ne:r=t._payload,t=t._init;try{return U(t(r))}catch{}}return null}function q(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(r);case 8:return r===J?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function le(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function he(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ve(t){var r=he(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),c=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,g=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return m.call(this)},set:function(j){c=""+j,g.call(this,j)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(j){c=""+j},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function k(t){t._valueTracker||(t._valueTracker=ve(t))}function Y(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return t&&(c=he(t)?t.checked?"true":"false":t.value),t=c,t!==o?(r.setValue(t),!0):!1}function Ie(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fe(t,r){var o=r.checked;return ce({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function O(t,r){var o=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;o=le(r.value!=null?r.value:o),t._wrapperState={initialChecked:c,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function ze(t,r){r=r.checked,r!=null&&z(t,"checked",r,!1)}function W(t,r){ze(t,r);var o=le(r.value),c=r.type;if(o!=null)c==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(c==="submit"||c==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Re(t,r.type,o):r.hasOwnProperty("defaultValue")&&Re(t,r.type,le(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Ve(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Re(t,r,o){(r!=="number"||Ie(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var $e=Array.isArray;function ot(t,r,o,c){if(t=t.options,r){r={};for(var m=0;m<o.length;m++)r["$"+o[m]]=!0;for(o=0;o<t.length;o++)m=r.hasOwnProperty("$"+t[o].value),t[o].selected!==m&&(t[o].selected=m),m&&c&&(t[o].defaultSelected=!0)}else{for(o=""+le(o),r=null,m=0;m<t.length;m++){if(t[m].value===o){t[m].selected=!0,c&&(t[m].defaultSelected=!0);return}r!==null||t[m].disabled||(r=t[m])}r!==null&&(r.selected=!0)}}function V(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(a(91));return ce({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pe(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(a(92));if($e(o)){if(1<o.length)throw Error(a(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:le(o)}}function we(t,r){var o=le(r.value),c=le(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),c!=null&&(t.defaultValue=""+c)}function mt(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function ct(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dt(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?ct(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xt,Xt=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,c,m){MSApp.execUnsafeLocalFunction(function(){return t(r,o,c,m)})}:t})(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(xt=xt||document.createElement("div"),xt.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=xt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function I(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var Te={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qe=["Webkit","ms","Moz","O"];Object.keys(Te).forEach(function(t){qe.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),Te[r]=Te[t]})});function ft(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||Te.hasOwnProperty(t)&&Te[t]?(""+r).trim():r+"px"}function gt(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var c=o.indexOf("--")===0,m=ft(o,r[o],c);o==="float"&&(o="cssFloat"),c?t.setProperty(o,m):t[o]=m}}var hn=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function St(t,r){if(r){if(hn[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(a(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(a(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(a(61))}if(r.style!=null&&typeof r.style!="object")throw Error(a(62))}}function Ce(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kt=null;function dt(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mt=null,tt=null,kn=null;function Tn(t){if(t=zi(t)){if(typeof Mt!="function")throw Error(a(280));var r=t.stateNode;r&&(r=rl(r),Mt(t.stateNode,t.type,r))}}function N(t){tt?kn?kn.push(t):kn=[t]:tt=t}function ae(){if(tt){var t=tt,r=kn;if(kn=tt=null,Tn(t),r)for(t=0;t<r.length;t++)Tn(r[t])}}function Ne(t,r){return t(r)}function Ae(){}var Me=!1;function je(t,r,o){if(Me)return t(r,o);Me=!0;try{return Ne(t,r,o)}finally{Me=!1,(tt!==null||kn!==null)&&(Ae(),ae())}}function _e(t,r){var o=t.stateNode;if(o===null)return null;var c=rl(o);if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(a(231,r,typeof o));return o}var Oe=!1;if(f)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{Oe=!1}function Ye(t,r,o,c,m,g,j,_,$){var oe=Array.prototype.slice.call(arguments,3);try{r.apply(o,oe)}catch(Se){this.onError(Se)}}var At=!1,It=null,yt=!1,Rt=null,Zt={onError:function(t){At=!0,It=t}};function Pr(t,r,o,c,m,g,j,_,$){At=!1,It=null,Ye.apply(Zt,arguments)}function Qs(t,r,o,c,m,g,j,_,$){if(Pr.apply(this,arguments),At){if(At){var oe=It;At=!1,It=null}else throw Error(a(198));yt||(yt=!0,Rt=oe)}}function Wr(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function Oo(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function fs(t){if(Wr(t)!==t)throw Error(a(188))}function ji(t){var r=t.alternate;if(!r){if(r=Wr(t),r===null)throw Error(a(188));return r!==t?null:t}for(var o=t,c=r;;){var m=o.return;if(m===null)break;var g=m.alternate;if(g===null){if(c=m.return,c!==null){o=c;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===o)return fs(m),t;if(g===c)return fs(m),r;g=g.sibling}throw Error(a(188))}if(o.return!==c.return)o=m,c=g;else{for(var j=!1,_=m.child;_;){if(_===o){j=!0,o=m,c=g;break}if(_===c){j=!0,c=m,o=g;break}_=_.sibling}if(!j){for(_=g.child;_;){if(_===o){j=!0,o=g,c=m;break}if(_===c){j=!0,c=g,o=m;break}_=_.sibling}if(!j)throw Error(a(189))}}if(o.alternate!==c)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?t:r}function Kf(t){return t=ji(t),t!==null?Gf(t):null}function Gf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Gf(t);if(r!==null)return r;t=t.sibling}return null}var Yf=s.unstable_scheduleCallback,Jf=s.unstable_cancelCallback,lj=s.unstable_shouldYield,cj=s.unstable_requestPaint,Jt=s.unstable_now,dj=s.unstable_getCurrentPriorityLevel,md=s.unstable_ImmediatePriority,Qf=s.unstable_UserBlockingPriority,Lo=s.unstable_NormalPriority,uj=s.unstable_LowPriority,Xf=s.unstable_IdlePriority,Fo=null,Er=null;function mj(t){if(Er&&typeof Er.onCommitFiberRoot=="function")try{Er.onCommitFiberRoot(Fo,t,void 0,(t.current.flags&128)===128)}catch{}}var cr=Math.clz32?Math.clz32:hj,fj=Math.log,pj=Math.LN2;function hj(t){return t>>>=0,t===0?32:31-(fj(t)/pj|0)|0}var $o=64,zo=4194304;function bi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bo(t,r){var o=t.pendingLanes;if(o===0)return 0;var c=0,m=t.suspendedLanes,g=t.pingedLanes,j=o&268435455;if(j!==0){var _=j&~m;_!==0?c=bi(_):(g&=j,g!==0&&(c=bi(g)))}else j=o&~m,j!==0?c=bi(j):g!==0&&(c=bi(g));if(c===0)return 0;if(r!==0&&r!==c&&(r&m)===0&&(m=c&-c,g=r&-r,m>=g||m===16&&(g&4194240)!==0))return r;if((c&4)!==0&&(c|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=c;0<r;)o=31-cr(r),m=1<<o,c|=t[o],r&=~m;return c}function gj(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xj(t,r){for(var o=t.suspendedLanes,c=t.pingedLanes,m=t.expirationTimes,g=t.pendingLanes;0<g;){var j=31-cr(g),_=1<<j,$=m[j];$===-1?((_&o)===0||(_&c)!==0)&&(m[j]=gj(_,r)):$<=r&&(t.expiredLanes|=_),g&=~_}}function fd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Zf(){var t=$o;return $o<<=1,($o&4194240)===0&&($o=64),t}function pd(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Ni(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-cr(r),t[r]=o}function yj(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var c=t.eventTimes;for(t=t.expirationTimes;0<o;){var m=31-cr(o),g=1<<m;r[m]=0,c[m]=-1,t[m]=-1,o&=~g}}function hd(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var c=31-cr(o),m=1<<c;m&r|t[c]&r&&(t[c]|=r),o&=~m}}var _t=0;function ep(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var tp,gd,np,rp,sp,xd=!1,Uo=[],ps=null,hs=null,gs=null,Si=new Map,Ci=new Map,xs=[],vj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ap(t,r){switch(t){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":Si.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ci.delete(r.pointerId)}}function Pi(t,r,o,c,m,g){return t===null||t.nativeEvent!==g?(t={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[m]},r!==null&&(r=zi(r),r!==null&&gd(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),t)}function wj(t,r,o,c,m){switch(r){case"focusin":return ps=Pi(ps,t,r,o,c,m),!0;case"dragenter":return hs=Pi(hs,t,r,o,c,m),!0;case"mouseover":return gs=Pi(gs,t,r,o,c,m),!0;case"pointerover":var g=m.pointerId;return Si.set(g,Pi(Si.get(g)||null,t,r,o,c,m)),!0;case"gotpointercapture":return g=m.pointerId,Ci.set(g,Pi(Ci.get(g)||null,t,r,o,c,m)),!0}return!1}function ip(t){var r=Xs(t.target);if(r!==null){var o=Wr(r);if(o!==null){if(r=o.tag,r===13){if(r=Oo(o),r!==null){t.blockedOn=r,sp(t.priority,function(){np(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ho(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=vd(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var c=new o.constructor(o.type,o);kt=c,o.target.dispatchEvent(c),kt=null}else return r=zi(o),r!==null&&gd(r),t.blockedOn=o,!1;r.shift()}return!0}function op(t,r,o){Ho(t)&&o.delete(r)}function jj(){xd=!1,ps!==null&&Ho(ps)&&(ps=null),hs!==null&&Ho(hs)&&(hs=null),gs!==null&&Ho(gs)&&(gs=null),Si.forEach(op),Ci.forEach(op)}function Ei(t,r){t.blockedOn===r&&(t.blockedOn=null,xd||(xd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,jj)))}function Di(t){function r(m){return Ei(m,t)}if(0<Uo.length){Ei(Uo[0],t);for(var o=1;o<Uo.length;o++){var c=Uo[o];c.blockedOn===t&&(c.blockedOn=null)}}for(ps!==null&&Ei(ps,t),hs!==null&&Ei(hs,t),gs!==null&&Ei(gs,t),Si.forEach(r),Ci.forEach(r),o=0;o<xs.length;o++)c=xs[o],c.blockedOn===t&&(c.blockedOn=null);for(;0<xs.length&&(o=xs[0],o.blockedOn===null);)ip(o),o.blockedOn===null&&xs.shift()}var Ea=B.ReactCurrentBatchConfig,Vo=!0;function bj(t,r,o,c){var m=_t,g=Ea.transition;Ea.transition=null;try{_t=1,yd(t,r,o,c)}finally{_t=m,Ea.transition=g}}function Nj(t,r,o,c){var m=_t,g=Ea.transition;Ea.transition=null;try{_t=4,yd(t,r,o,c)}finally{_t=m,Ea.transition=g}}function yd(t,r,o,c){if(Vo){var m=vd(t,r,o,c);if(m===null)Od(t,r,c,qo,o),ap(t,c);else if(wj(m,t,r,o,c))c.stopPropagation();else if(ap(t,c),r&4&&-1<vj.indexOf(t)){for(;m!==null;){var g=zi(m);if(g!==null&&tp(g),g=vd(t,r,o,c),g===null&&Od(t,r,c,qo,o),g===m)break;m=g}m!==null&&c.stopPropagation()}else Od(t,r,c,null,o)}}var qo=null;function vd(t,r,o,c){if(qo=null,t=dt(c),t=Xs(t),t!==null)if(r=Wr(t),r===null)t=null;else if(o=r.tag,o===13){if(t=Oo(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return qo=t,null}function lp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dj()){case md:return 1;case Qf:return 4;case Lo:case uj:return 16;case Xf:return 536870912;default:return 16}default:return 16}}var ys=null,wd=null,Wo=null;function cp(){if(Wo)return Wo;var t,r=wd,o=r.length,c,m="value"in ys?ys.value:ys.textContent,g=m.length;for(t=0;t<o&&r[t]===m[t];t++);var j=o-t;for(c=1;c<=j&&r[o-c]===m[g-c];c++);return Wo=m.slice(t,1<c?1-c:void 0)}function Ko(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Go(){return!0}function dp(){return!1}function qn(t){function r(o,c,m,g,j){this._reactName=o,this._targetInst=m,this.type=c,this.nativeEvent=g,this.target=j,this.currentTarget=null;for(var _ in t)t.hasOwnProperty(_)&&(o=t[_],this[_]=o?o(g):g[_]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Go:dp,this.isPropagationStopped=dp,this}return ce(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Go)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Go)},persist:function(){},isPersistent:Go}),r}var Da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jd=qn(Da),ki=ce({},Da,{view:0,detail:0}),Sj=qn(ki),bd,Nd,Ai,Yo=ce({},ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ai&&(Ai&&t.type==="mousemove"?(bd=t.screenX-Ai.screenX,Nd=t.screenY-Ai.screenY):Nd=bd=0,Ai=t),bd)},movementY:function(t){return"movementY"in t?t.movementY:Nd}}),up=qn(Yo),Cj=ce({},Yo,{dataTransfer:0}),Pj=qn(Cj),Ej=ce({},ki,{relatedTarget:0}),Sd=qn(Ej),Dj=ce({},Da,{animationName:0,elapsedTime:0,pseudoElement:0}),kj=qn(Dj),Aj=ce({},Da,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ij=qn(Aj),Rj=ce({},Da,{data:0}),mp=qn(Rj),Tj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_j={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oj(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Mj[t])?!!r[t]:!1}function Cd(){return Oj}var Lj=ce({},ki,{key:function(t){if(t.key){var r=Tj[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ko(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_j[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cd,charCode:function(t){return t.type==="keypress"?Ko(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ko(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Fj=qn(Lj),$j=ce({},Yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fp=qn($j),zj=ce({},ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cd}),Bj=qn(zj),Uj=ce({},Da,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hj=qn(Uj),Vj=ce({},Yo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qj=qn(Vj),Wj=[9,13,27,32],Pd=f&&"CompositionEvent"in window,Ii=null;f&&"documentMode"in document&&(Ii=document.documentMode);var Kj=f&&"TextEvent"in window&&!Ii,pp=f&&(!Pd||Ii&&8<Ii&&11>=Ii),hp=" ",gp=!1;function xp(t,r){switch(t){case"keyup":return Wj.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ka=!1;function Gj(t,r){switch(t){case"compositionend":return yp(r);case"keypress":return r.which!==32?null:(gp=!0,hp);case"textInput":return t=r.data,t===hp&&gp?null:t;default:return null}}function Yj(t,r){if(ka)return t==="compositionend"||!Pd&&xp(t,r)?(t=cp(),Wo=wd=ys=null,ka=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return pp&&r.locale!=="ko"?null:r.data;default:return null}}var Jj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vp(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Jj[t.type]:r==="textarea"}function wp(t,r,o,c){N(c),r=el(r,"onChange"),0<r.length&&(o=new jd("onChange","change",null,o,c),t.push({event:o,listeners:r}))}var Ri=null,Ti=null;function Qj(t){Fp(t,0)}function Jo(t){var r=_a(t);if(Y(r))return t}function Xj(t,r){if(t==="change")return r}var jp=!1;if(f){var Ed;if(f){var Dd="oninput"in document;if(!Dd){var bp=document.createElement("div");bp.setAttribute("oninput","return;"),Dd=typeof bp.oninput=="function"}Ed=Dd}else Ed=!1;jp=Ed&&(!document.documentMode||9<document.documentMode)}function Np(){Ri&&(Ri.detachEvent("onpropertychange",Sp),Ti=Ri=null)}function Sp(t){if(t.propertyName==="value"&&Jo(Ti)){var r=[];wp(r,Ti,t,dt(t)),je(Qj,r)}}function Zj(t,r,o){t==="focusin"?(Np(),Ri=r,Ti=o,Ri.attachEvent("onpropertychange",Sp)):t==="focusout"&&Np()}function eb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jo(Ti)}function tb(t,r){if(t==="click")return Jo(r)}function nb(t,r){if(t==="input"||t==="change")return Jo(r)}function rb(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var dr=typeof Object.is=="function"?Object.is:rb;function _i(t,r){if(dr(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var m=o[c];if(!y.call(r,m)||!dr(t[m],r[m]))return!1}return!0}function Cp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pp(t,r){var o=Cp(t);t=0;for(var c;o;){if(o.nodeType===3){if(c=t+o.textContent.length,t<=r&&c>=r)return{node:o,offset:r-t};t=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Cp(o)}}function Ep(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Ep(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Dp(){for(var t=window,r=Ie();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Ie(t.document)}return r}function kd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function sb(t){var r=Dp(),o=t.focusedElem,c=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&Ep(o.ownerDocument.documentElement,o)){if(c!==null&&kd(o)){if(r=c.start,t=c.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var m=o.textContent.length,g=Math.min(c.start,m);c=c.end===void 0?g:Math.min(c.end,m),!t.extend&&g>c&&(m=c,c=g,g=m),m=Pp(o,g);var j=Pp(o,c);m&&j&&(t.rangeCount!==1||t.anchorNode!==m.node||t.anchorOffset!==m.offset||t.focusNode!==j.node||t.focusOffset!==j.offset)&&(r=r.createRange(),r.setStart(m.node,m.offset),t.removeAllRanges(),g>c?(t.addRange(r),t.extend(j.node,j.offset)):(r.setEnd(j.node,j.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ab=f&&"documentMode"in document&&11>=document.documentMode,Aa=null,Ad=null,Mi=null,Id=!1;function kp(t,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Id||Aa==null||Aa!==Ie(c)||(c=Aa,"selectionStart"in c&&kd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Mi&&_i(Mi,c)||(Mi=c,c=el(Ad,"onSelect"),0<c.length&&(r=new jd("onSelect","select",null,r,o),t.push({event:r,listeners:c}),r.target=Aa)))}function Qo(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var Ia={animationend:Qo("Animation","AnimationEnd"),animationiteration:Qo("Animation","AnimationIteration"),animationstart:Qo("Animation","AnimationStart"),transitionend:Qo("Transition","TransitionEnd")},Rd={},Ap={};f&&(Ap=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function Xo(t){if(Rd[t])return Rd[t];if(!Ia[t])return t;var r=Ia[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Ap)return Rd[t]=r[o];return t}var Ip=Xo("animationend"),Rp=Xo("animationiteration"),Tp=Xo("animationstart"),_p=Xo("transitionend"),Mp=new Map,Op="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vs(t,r){Mp.set(t,r),d(r,[t])}for(var Td=0;Td<Op.length;Td++){var _d=Op[Td],ib=_d.toLowerCase(),ob=_d[0].toUpperCase()+_d.slice(1);vs(ib,"on"+ob)}vs(Ip,"onAnimationEnd"),vs(Rp,"onAnimationIteration"),vs(Tp,"onAnimationStart"),vs("dblclick","onDoubleClick"),vs("focusin","onFocus"),vs("focusout","onBlur"),vs(_p,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oi));function Lp(t,r,o){var c=t.type||"unknown-event";t.currentTarget=o,Qs(c,r,void 0,t),t.currentTarget=null}function Fp(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var c=t[o],m=c.event;c=c.listeners;e:{var g=void 0;if(r)for(var j=c.length-1;0<=j;j--){var _=c[j],$=_.instance,oe=_.currentTarget;if(_=_.listener,$!==g&&m.isPropagationStopped())break e;Lp(m,_,oe),g=$}else for(j=0;j<c.length;j++){if(_=c[j],$=_.instance,oe=_.currentTarget,_=_.listener,$!==g&&m.isPropagationStopped())break e;Lp(m,_,oe),g=$}}}if(yt)throw t=Rt,yt=!1,Rt=null,t}function Lt(t,r){var o=r[Ud];o===void 0&&(o=r[Ud]=new Set);var c=t+"__bubble";o.has(c)||($p(r,t,2,!1),o.add(c))}function Md(t,r,o){var c=0;r&&(c|=4),$p(o,t,c,r)}var Zo="_reactListening"+Math.random().toString(36).slice(2);function Li(t){if(!t[Zo]){t[Zo]=!0,i.forEach(function(o){o!=="selectionchange"&&(lb.has(o)||Md(o,!1,t),Md(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Zo]||(r[Zo]=!0,Md("selectionchange",!1,r))}}function $p(t,r,o,c){switch(lp(r)){case 1:var m=bj;break;case 4:m=Nj;break;default:m=yd}o=m.bind(null,r,o,t),m=void 0,!Oe||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),c?m!==void 0?t.addEventListener(r,o,{capture:!0,passive:m}):t.addEventListener(r,o,!0):m!==void 0?t.addEventListener(r,o,{passive:m}):t.addEventListener(r,o,!1)}function Od(t,r,o,c,m){var g=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var j=c.tag;if(j===3||j===4){var _=c.stateNode.containerInfo;if(_===m||_.nodeType===8&&_.parentNode===m)break;if(j===4)for(j=c.return;j!==null;){var $=j.tag;if(($===3||$===4)&&($=j.stateNode.containerInfo,$===m||$.nodeType===8&&$.parentNode===m))return;j=j.return}for(;_!==null;){if(j=Xs(_),j===null)return;if($=j.tag,$===5||$===6){c=g=j;continue e}_=_.parentNode}}c=c.return}je(function(){var oe=g,Se=dt(o),Pe=[];e:{var be=Mp.get(t);if(be!==void 0){var We=jd,Je=t;switch(t){case"keypress":if(Ko(o)===0)break e;case"keydown":case"keyup":We=Fj;break;case"focusin":Je="focus",We=Sd;break;case"focusout":Je="blur",We=Sd;break;case"beforeblur":case"afterblur":We=Sd;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":We=up;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":We=Pj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":We=Bj;break;case Ip:case Rp:case Tp:We=kj;break;case _p:We=Hj;break;case"scroll":We=Sj;break;case"wheel":We=qj;break;case"copy":case"cut":case"paste":We=Ij;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":We=fp}var Ze=(r&4)!==0,Qt=!Ze&&t==="scroll",Z=Ze?be!==null?be+"Capture":null:be;Ze=[];for(var K=oe,re;K!==null;){re=K;var De=re.stateNode;if(re.tag===5&&De!==null&&(re=De,Z!==null&&(De=_e(K,Z),De!=null&&Ze.push(Fi(K,De,re)))),Qt)break;K=K.return}0<Ze.length&&(be=new We(be,Je,null,o,Se),Pe.push({event:be,listeners:Ze}))}}if((r&7)===0){e:{if(be=t==="mouseover"||t==="pointerover",We=t==="mouseout"||t==="pointerout",be&&o!==kt&&(Je=o.relatedTarget||o.fromElement)&&(Xs(Je)||Je[Kr]))break e;if((We||be)&&(be=Se.window===Se?Se:(be=Se.ownerDocument)?be.defaultView||be.parentWindow:window,We?(Je=o.relatedTarget||o.toElement,We=oe,Je=Je?Xs(Je):null,Je!==null&&(Qt=Wr(Je),Je!==Qt||Je.tag!==5&&Je.tag!==6)&&(Je=null)):(We=null,Je=oe),We!==Je)){if(Ze=up,De="onMouseLeave",Z="onMouseEnter",K="mouse",(t==="pointerout"||t==="pointerover")&&(Ze=fp,De="onPointerLeave",Z="onPointerEnter",K="pointer"),Qt=We==null?be:_a(We),re=Je==null?be:_a(Je),be=new Ze(De,K+"leave",We,o,Se),be.target=Qt,be.relatedTarget=re,De=null,Xs(Se)===oe&&(Ze=new Ze(Z,K+"enter",Je,o,Se),Ze.target=re,Ze.relatedTarget=Qt,De=Ze),Qt=De,We&&Je)t:{for(Ze=We,Z=Je,K=0,re=Ze;re;re=Ra(re))K++;for(re=0,De=Z;De;De=Ra(De))re++;for(;0<K-re;)Ze=Ra(Ze),K--;for(;0<re-K;)Z=Ra(Z),re--;for(;K--;){if(Ze===Z||Z!==null&&Ze===Z.alternate)break t;Ze=Ra(Ze),Z=Ra(Z)}Ze=null}else Ze=null;We!==null&&zp(Pe,be,We,Ze,!1),Je!==null&&Qt!==null&&zp(Pe,Qt,Je,Ze,!0)}}e:{if(be=oe?_a(oe):window,We=be.nodeName&&be.nodeName.toLowerCase(),We==="select"||We==="input"&&be.type==="file")var et=Xj;else if(vp(be))if(jp)et=nb;else{et=eb;var st=Zj}else(We=be.nodeName)&&We.toLowerCase()==="input"&&(be.type==="checkbox"||be.type==="radio")&&(et=tb);if(et&&(et=et(t,oe))){wp(Pe,et,o,Se);break e}st&&st(t,be,oe),t==="focusout"&&(st=be._wrapperState)&&st.controlled&&be.type==="number"&&Re(be,"number",be.value)}switch(st=oe?_a(oe):window,t){case"focusin":(vp(st)||st.contentEditable==="true")&&(Aa=st,Ad=oe,Mi=null);break;case"focusout":Mi=Ad=Aa=null;break;case"mousedown":Id=!0;break;case"contextmenu":case"mouseup":case"dragend":Id=!1,kp(Pe,o,Se);break;case"selectionchange":if(ab)break;case"keydown":case"keyup":kp(Pe,o,Se)}var at;if(Pd)e:{switch(t){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else ka?xp(t,o)&&(ut="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(ut="onCompositionStart");ut&&(pp&&o.locale!=="ko"&&(ka||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&ka&&(at=cp()):(ys=Se,wd="value"in ys?ys.value:ys.textContent,ka=!0)),st=el(oe,ut),0<st.length&&(ut=new mp(ut,t,null,o,Se),Pe.push({event:ut,listeners:st}),at?ut.data=at:(at=yp(o),at!==null&&(ut.data=at)))),(at=Kj?Gj(t,o):Yj(t,o))&&(oe=el(oe,"onBeforeInput"),0<oe.length&&(Se=new mp("onBeforeInput","beforeinput",null,o,Se),Pe.push({event:Se,listeners:oe}),Se.data=at))}Fp(Pe,r)})}function Fi(t,r,o){return{instance:t,listener:r,currentTarget:o}}function el(t,r){for(var o=r+"Capture",c=[];t!==null;){var m=t,g=m.stateNode;m.tag===5&&g!==null&&(m=g,g=_e(t,o),g!=null&&c.unshift(Fi(t,g,m)),g=_e(t,r),g!=null&&c.push(Fi(t,g,m))),t=t.return}return c}function Ra(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zp(t,r,o,c,m){for(var g=r._reactName,j=[];o!==null&&o!==c;){var _=o,$=_.alternate,oe=_.stateNode;if($!==null&&$===c)break;_.tag===5&&oe!==null&&(_=oe,m?($=_e(o,g),$!=null&&j.unshift(Fi(o,$,_))):m||($=_e(o,g),$!=null&&j.push(Fi(o,$,_)))),o=o.return}j.length!==0&&t.push({event:r,listeners:j})}var cb=/\r\n?/g,db=/\u0000|\uFFFD/g;function Bp(t){return(typeof t=="string"?t:""+t).replace(cb,`
`).replace(db,"")}function tl(t,r,o){if(r=Bp(r),Bp(t)!==r&&o)throw Error(a(425))}function nl(){}var Ld=null,Fd=null;function $d(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var zd=typeof setTimeout=="function"?setTimeout:void 0,ub=typeof clearTimeout=="function"?clearTimeout:void 0,Up=typeof Promise=="function"?Promise:void 0,mb=typeof queueMicrotask=="function"?queueMicrotask:typeof Up<"u"?function(t){return Up.resolve(null).then(t).catch(fb)}:zd;function fb(t){setTimeout(function(){throw t})}function Bd(t,r){var o=r,c=0;do{var m=o.nextSibling;if(t.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(c===0){t.removeChild(m),Di(r);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=m}while(o);Di(r)}function ws(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Hp(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var Ta=Math.random().toString(36).slice(2),Dr="__reactFiber$"+Ta,$i="__reactProps$"+Ta,Kr="__reactContainer$"+Ta,Ud="__reactEvents$"+Ta,pb="__reactListeners$"+Ta,hb="__reactHandles$"+Ta;function Xs(t){var r=t[Dr];if(r)return r;for(var o=t.parentNode;o;){if(r=o[Kr]||o[Dr]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=Hp(t);t!==null;){if(o=t[Dr])return o;t=Hp(t)}return r}t=o,o=t.parentNode}return null}function zi(t){return t=t[Dr]||t[Kr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _a(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(a(33))}function rl(t){return t[$i]||null}var Hd=[],Ma=-1;function js(t){return{current:t}}function Ft(t){0>Ma||(t.current=Hd[Ma],Hd[Ma]=null,Ma--)}function Ot(t,r){Ma++,Hd[Ma]=t.current,t.current=r}var bs={},bn=js(bs),_n=js(!1),Zs=bs;function Oa(t,r){var o=t.type.contextTypes;if(!o)return bs;var c=t.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var m={},g;for(g in o)m[g]=r[g];return c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=m),m}function Mn(t){return t=t.childContextTypes,t!=null}function sl(){Ft(_n),Ft(bn)}function Vp(t,r,o){if(bn.current!==bs)throw Error(a(168));Ot(bn,r),Ot(_n,o)}function qp(t,r,o){var c=t.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return o;c=c.getChildContext();for(var m in c)if(!(m in r))throw Error(a(108,q(t)||"Unknown",m));return ce({},o,c)}function al(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bs,Zs=bn.current,Ot(bn,t),Ot(_n,_n.current),!0}function Wp(t,r,o){var c=t.stateNode;if(!c)throw Error(a(169));o?(t=qp(t,r,Zs),c.__reactInternalMemoizedMergedChildContext=t,Ft(_n),Ft(bn),Ot(bn,t)):Ft(_n),Ot(_n,o)}var Gr=null,il=!1,Vd=!1;function Kp(t){Gr===null?Gr=[t]:Gr.push(t)}function gb(t){il=!0,Kp(t)}function Ns(){if(!Vd&&Gr!==null){Vd=!0;var t=0,r=_t;try{var o=Gr;for(_t=1;t<o.length;t++){var c=o[t];do c=c(!0);while(c!==null)}Gr=null,il=!1}catch(m){throw Gr!==null&&(Gr=Gr.slice(t+1)),Yf(md,Ns),m}finally{_t=r,Vd=!1}}return null}var La=[],Fa=0,ol=null,ll=0,Zn=[],er=0,ea=null,Yr=1,Jr="";function ta(t,r){La[Fa++]=ll,La[Fa++]=ol,ol=t,ll=r}function Gp(t,r,o){Zn[er++]=Yr,Zn[er++]=Jr,Zn[er++]=ea,ea=t;var c=Yr;t=Jr;var m=32-cr(c)-1;c&=~(1<<m),o+=1;var g=32-cr(r)+m;if(30<g){var j=m-m%5;g=(c&(1<<j)-1).toString(32),c>>=j,m-=j,Yr=1<<32-cr(r)+m|o<<m|c,Jr=g+t}else Yr=1<<g|o<<m|c,Jr=t}function qd(t){t.return!==null&&(ta(t,1),Gp(t,1,0))}function Wd(t){for(;t===ol;)ol=La[--Fa],La[Fa]=null,ll=La[--Fa],La[Fa]=null;for(;t===ea;)ea=Zn[--er],Zn[er]=null,Jr=Zn[--er],Zn[er]=null,Yr=Zn[--er],Zn[er]=null}var Wn=null,Kn=null,$t=!1,ur=null;function Yp(t,r){var o=sr(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function Jp(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,Wn=t,Kn=ws(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,Wn=t,Kn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=ea!==null?{id:Yr,overflow:Jr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=sr(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,Wn=t,Kn=null,!0):!1;default:return!1}}function Kd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gd(t){if($t){var r=Kn;if(r){var o=r;if(!Jp(t,r)){if(Kd(t))throw Error(a(418));r=ws(o.nextSibling);var c=Wn;r&&Jp(t,r)?Yp(c,o):(t.flags=t.flags&-4097|2,$t=!1,Wn=t)}}else{if(Kd(t))throw Error(a(418));t.flags=t.flags&-4097|2,$t=!1,Wn=t}}}function Qp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wn=t}function cl(t){if(t!==Wn)return!1;if(!$t)return Qp(t),$t=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!$d(t.type,t.memoizedProps)),r&&(r=Kn)){if(Kd(t))throw Xp(),Error(a(418));for(;r;)Yp(t,r),r=ws(r.nextSibling)}if(Qp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){Kn=ws(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}Kn=null}}else Kn=Wn?ws(t.stateNode.nextSibling):null;return!0}function Xp(){for(var t=Kn;t;)t=ws(t.nextSibling)}function $a(){Kn=Wn=null,$t=!1}function Yd(t){ur===null?ur=[t]:ur.push(t)}var xb=B.ReactCurrentBatchConfig;function Bi(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(a(309));var c=o.stateNode}if(!c)throw Error(a(147,t));var m=c,g=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===g?r.ref:(r=function(j){var _=m.refs;j===null?delete _[g]:_[g]=j},r._stringRef=g,r)}if(typeof t!="string")throw Error(a(284));if(!o._owner)throw Error(a(290,t))}return t}function dl(t,r){throw t=Object.prototype.toString.call(r),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Zp(t){var r=t._init;return r(t._payload)}function eh(t){function r(Z,K){if(t){var re=Z.deletions;re===null?(Z.deletions=[K],Z.flags|=16):re.push(K)}}function o(Z,K){if(!t)return null;for(;K!==null;)r(Z,K),K=K.sibling;return null}function c(Z,K){for(Z=new Map;K!==null;)K.key!==null?Z.set(K.key,K):Z.set(K.index,K),K=K.sibling;return Z}function m(Z,K){return Z=Is(Z,K),Z.index=0,Z.sibling=null,Z}function g(Z,K,re){return Z.index=re,t?(re=Z.alternate,re!==null?(re=re.index,re<K?(Z.flags|=2,K):re):(Z.flags|=2,K)):(Z.flags|=1048576,K)}function j(Z){return t&&Z.alternate===null&&(Z.flags|=2),Z}function _(Z,K,re,De){return K===null||K.tag!==6?(K=zu(re,Z.mode,De),K.return=Z,K):(K=m(K,re),K.return=Z,K)}function $(Z,K,re,De){var et=re.type;return et===G?Se(Z,K,re.props.children,De,re.key):K!==null&&(K.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===ne&&Zp(et)===K.type)?(De=m(K,re.props),De.ref=Bi(Z,K,re),De.return=Z,De):(De=_l(re.type,re.key,re.props,null,Z.mode,De),De.ref=Bi(Z,K,re),De.return=Z,De)}function oe(Z,K,re,De){return K===null||K.tag!==4||K.stateNode.containerInfo!==re.containerInfo||K.stateNode.implementation!==re.implementation?(K=Bu(re,Z.mode,De),K.return=Z,K):(K=m(K,re.children||[]),K.return=Z,K)}function Se(Z,K,re,De,et){return K===null||K.tag!==7?(K=ca(re,Z.mode,De,et),K.return=Z,K):(K=m(K,re),K.return=Z,K)}function Pe(Z,K,re){if(typeof K=="string"&&K!==""||typeof K=="number")return K=zu(""+K,Z.mode,re),K.return=Z,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case Q:return re=_l(K.type,K.key,K.props,null,Z.mode,re),re.ref=Bi(Z,null,K),re.return=Z,re;case X:return K=Bu(K,Z.mode,re),K.return=Z,K;case ne:var De=K._init;return Pe(Z,De(K._payload),re)}if($e(K)||L(K))return K=ca(K,Z.mode,re,null),K.return=Z,K;dl(Z,K)}return null}function be(Z,K,re,De){var et=K!==null?K.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return et!==null?null:_(Z,K,""+re,De);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case Q:return re.key===et?$(Z,K,re,De):null;case X:return re.key===et?oe(Z,K,re,De):null;case ne:return et=re._init,be(Z,K,et(re._payload),De)}if($e(re)||L(re))return et!==null?null:Se(Z,K,re,De,null);dl(Z,re)}return null}function We(Z,K,re,De,et){if(typeof De=="string"&&De!==""||typeof De=="number")return Z=Z.get(re)||null,_(K,Z,""+De,et);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case Q:return Z=Z.get(De.key===null?re:De.key)||null,$(K,Z,De,et);case X:return Z=Z.get(De.key===null?re:De.key)||null,oe(K,Z,De,et);case ne:var st=De._init;return We(Z,K,re,st(De._payload),et)}if($e(De)||L(De))return Z=Z.get(re)||null,Se(K,Z,De,et,null);dl(K,De)}return null}function Je(Z,K,re,De){for(var et=null,st=null,at=K,ut=K=0,fn=null;at!==null&&ut<re.length;ut++){at.index>ut?(fn=at,at=null):fn=at.sibling;var Et=be(Z,at,re[ut],De);if(Et===null){at===null&&(at=fn);break}t&&at&&Et.alternate===null&&r(Z,at),K=g(Et,K,ut),st===null?et=Et:st.sibling=Et,st=Et,at=fn}if(ut===re.length)return o(Z,at),$t&&ta(Z,ut),et;if(at===null){for(;ut<re.length;ut++)at=Pe(Z,re[ut],De),at!==null&&(K=g(at,K,ut),st===null?et=at:st.sibling=at,st=at);return $t&&ta(Z,ut),et}for(at=c(Z,at);ut<re.length;ut++)fn=We(at,Z,ut,re[ut],De),fn!==null&&(t&&fn.alternate!==null&&at.delete(fn.key===null?ut:fn.key),K=g(fn,K,ut),st===null?et=fn:st.sibling=fn,st=fn);return t&&at.forEach(function(Rs){return r(Z,Rs)}),$t&&ta(Z,ut),et}function Ze(Z,K,re,De){var et=L(re);if(typeof et!="function")throw Error(a(150));if(re=et.call(re),re==null)throw Error(a(151));for(var st=et=null,at=K,ut=K=0,fn=null,Et=re.next();at!==null&&!Et.done;ut++,Et=re.next()){at.index>ut?(fn=at,at=null):fn=at.sibling;var Rs=be(Z,at,Et.value,De);if(Rs===null){at===null&&(at=fn);break}t&&at&&Rs.alternate===null&&r(Z,at),K=g(Rs,K,ut),st===null?et=Rs:st.sibling=Rs,st=Rs,at=fn}if(Et.done)return o(Z,at),$t&&ta(Z,ut),et;if(at===null){for(;!Et.done;ut++,Et=re.next())Et=Pe(Z,Et.value,De),Et!==null&&(K=g(Et,K,ut),st===null?et=Et:st.sibling=Et,st=Et);return $t&&ta(Z,ut),et}for(at=c(Z,at);!Et.done;ut++,Et=re.next())Et=We(at,Z,ut,Et.value,De),Et!==null&&(t&&Et.alternate!==null&&at.delete(Et.key===null?ut:Et.key),K=g(Et,K,ut),st===null?et=Et:st.sibling=Et,st=Et);return t&&at.forEach(function(Jb){return r(Z,Jb)}),$t&&ta(Z,ut),et}function Qt(Z,K,re,De){if(typeof re=="object"&&re!==null&&re.type===G&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case Q:e:{for(var et=re.key,st=K;st!==null;){if(st.key===et){if(et=re.type,et===G){if(st.tag===7){o(Z,st.sibling),K=m(st,re.props.children),K.return=Z,Z=K;break e}}else if(st.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===ne&&Zp(et)===st.type){o(Z,st.sibling),K=m(st,re.props),K.ref=Bi(Z,st,re),K.return=Z,Z=K;break e}o(Z,st);break}else r(Z,st);st=st.sibling}re.type===G?(K=ca(re.props.children,Z.mode,De,re.key),K.return=Z,Z=K):(De=_l(re.type,re.key,re.props,null,Z.mode,De),De.ref=Bi(Z,K,re),De.return=Z,Z=De)}return j(Z);case X:e:{for(st=re.key;K!==null;){if(K.key===st)if(K.tag===4&&K.stateNode.containerInfo===re.containerInfo&&K.stateNode.implementation===re.implementation){o(Z,K.sibling),K=m(K,re.children||[]),K.return=Z,Z=K;break e}else{o(Z,K);break}else r(Z,K);K=K.sibling}K=Bu(re,Z.mode,De),K.return=Z,Z=K}return j(Z);case ne:return st=re._init,Qt(Z,K,st(re._payload),De)}if($e(re))return Je(Z,K,re,De);if(L(re))return Ze(Z,K,re,De);dl(Z,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,K!==null&&K.tag===6?(o(Z,K.sibling),K=m(K,re),K.return=Z,Z=K):(o(Z,K),K=zu(re,Z.mode,De),K.return=Z,Z=K),j(Z)):o(Z,K)}return Qt}var za=eh(!0),th=eh(!1),ul=js(null),ml=null,Ba=null,Jd=null;function Qd(){Jd=Ba=ml=null}function Xd(t){var r=ul.current;Ft(ul),t._currentValue=r}function Zd(t,r,o){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===o)break;t=t.return}}function Ua(t,r){ml=t,Jd=Ba=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(On=!0),t.firstContext=null)}function tr(t){var r=t._currentValue;if(Jd!==t)if(t={context:t,memoizedValue:r,next:null},Ba===null){if(ml===null)throw Error(a(308));Ba=t,ml.dependencies={lanes:0,firstContext:t}}else Ba=Ba.next=t;return r}var na=null;function eu(t){na===null?na=[t]:na.push(t)}function nh(t,r,o,c){var m=r.interleaved;return m===null?(o.next=o,eu(r)):(o.next=m.next,m.next=o),r.interleaved=o,Qr(t,c)}function Qr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Ss=!1;function tu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rh(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Cs(t,r,o){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(Ct&2)!==0){var m=c.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),c.pending=r,Qr(t,o)}return m=c.interleaved,m===null?(r.next=r,eu(c)):(r.next=m.next,m.next=r),c.interleaved=r,Qr(t,o)}function fl(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,hd(t,o)}}function sh(t,r){var o=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var m=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var j={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};g===null?m=g=j:g=g.next=j,o=o.next}while(o!==null);g===null?m=g=r:g=g.next=r}else m=g=r;o={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:c.shared,effects:c.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function pl(t,r,o,c){var m=t.updateQueue;Ss=!1;var g=m.firstBaseUpdate,j=m.lastBaseUpdate,_=m.shared.pending;if(_!==null){m.shared.pending=null;var $=_,oe=$.next;$.next=null,j===null?g=oe:j.next=oe,j=$;var Se=t.alternate;Se!==null&&(Se=Se.updateQueue,_=Se.lastBaseUpdate,_!==j&&(_===null?Se.firstBaseUpdate=oe:_.next=oe,Se.lastBaseUpdate=$))}if(g!==null){var Pe=m.baseState;j=0,Se=oe=$=null,_=g;do{var be=_.lane,We=_.eventTime;if((c&be)===be){Se!==null&&(Se=Se.next={eventTime:We,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var Je=t,Ze=_;switch(be=r,We=o,Ze.tag){case 1:if(Je=Ze.payload,typeof Je=="function"){Pe=Je.call(We,Pe,be);break e}Pe=Je;break e;case 3:Je.flags=Je.flags&-65537|128;case 0:if(Je=Ze.payload,be=typeof Je=="function"?Je.call(We,Pe,be):Je,be==null)break e;Pe=ce({},Pe,be);break e;case 2:Ss=!0}}_.callback!==null&&_.lane!==0&&(t.flags|=64,be=m.effects,be===null?m.effects=[_]:be.push(_))}else We={eventTime:We,lane:be,tag:_.tag,payload:_.payload,callback:_.callback,next:null},Se===null?(oe=Se=We,$=Pe):Se=Se.next=We,j|=be;if(_=_.next,_===null){if(_=m.shared.pending,_===null)break;be=_,_=be.next,be.next=null,m.lastBaseUpdate=be,m.shared.pending=null}}while(!0);if(Se===null&&($=Pe),m.baseState=$,m.firstBaseUpdate=oe,m.lastBaseUpdate=Se,r=m.shared.interleaved,r!==null){m=r;do j|=m.lane,m=m.next;while(m!==r)}else g===null&&(m.shared.lanes=0);aa|=j,t.lanes=j,t.memoizedState=Pe}}function ah(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var c=t[r],m=c.callback;if(m!==null){if(c.callback=null,c=o,typeof m!="function")throw Error(a(191,m));m.call(c)}}}var Ui={},kr=js(Ui),Hi=js(Ui),Vi=js(Ui);function ra(t){if(t===Ui)throw Error(a(174));return t}function nu(t,r){switch(Ot(Vi,r),Ot(Hi,t),Ot(kr,Ui),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Dt(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=Dt(r,t)}Ft(kr),Ot(kr,r)}function Ha(){Ft(kr),Ft(Hi),Ft(Vi)}function ih(t){ra(Vi.current);var r=ra(kr.current),o=Dt(r,t.type);r!==o&&(Ot(Hi,t),Ot(kr,o))}function ru(t){Hi.current===t&&(Ft(kr),Ft(Hi))}var Vt=js(0);function hl(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var su=[];function au(){for(var t=0;t<su.length;t++)su[t]._workInProgressVersionPrimary=null;su.length=0}var gl=B.ReactCurrentDispatcher,iu=B.ReactCurrentBatchConfig,sa=0,qt=null,on=null,un=null,xl=!1,qi=!1,Wi=0,yb=0;function Nn(){throw Error(a(321))}function ou(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!dr(t[o],r[o]))return!1;return!0}function lu(t,r,o,c,m,g){if(sa=g,qt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,gl.current=t===null||t.memoizedState===null?bb:Nb,t=o(c,m),qi){g=0;do{if(qi=!1,Wi=0,25<=g)throw Error(a(301));g+=1,un=on=null,r.updateQueue=null,gl.current=Sb,t=o(c,m)}while(qi)}if(gl.current=wl,r=on!==null&&on.next!==null,sa=0,un=on=qt=null,xl=!1,r)throw Error(a(300));return t}function cu(){var t=Wi!==0;return Wi=0,t}function Ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?qt.memoizedState=un=t:un=un.next=t,un}function nr(){if(on===null){var t=qt.alternate;t=t!==null?t.memoizedState:null}else t=on.next;var r=un===null?qt.memoizedState:un.next;if(r!==null)un=r,on=t;else{if(t===null)throw Error(a(310));on=t,t={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},un===null?qt.memoizedState=un=t:un=un.next=t}return un}function Ki(t,r){return typeof r=="function"?r(t):r}function du(t){var r=nr(),o=r.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=t;var c=on,m=c.baseQueue,g=o.pending;if(g!==null){if(m!==null){var j=m.next;m.next=g.next,g.next=j}c.baseQueue=m=g,o.pending=null}if(m!==null){g=m.next,c=c.baseState;var _=j=null,$=null,oe=g;do{var Se=oe.lane;if((sa&Se)===Se)$!==null&&($=$.next={lane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),c=oe.hasEagerState?oe.eagerState:t(c,oe.action);else{var Pe={lane:Se,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null};$===null?(_=$=Pe,j=c):$=$.next=Pe,qt.lanes|=Se,aa|=Se}oe=oe.next}while(oe!==null&&oe!==g);$===null?j=c:$.next=_,dr(c,r.memoizedState)||(On=!0),r.memoizedState=c,r.baseState=j,r.baseQueue=$,o.lastRenderedState=c}if(t=o.interleaved,t!==null){m=t;do g=m.lane,qt.lanes|=g,aa|=g,m=m.next;while(m!==t)}else m===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function uu(t){var r=nr(),o=r.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=t;var c=o.dispatch,m=o.pending,g=r.memoizedState;if(m!==null){o.pending=null;var j=m=m.next;do g=t(g,j.action),j=j.next;while(j!==m);dr(g,r.memoizedState)||(On=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),o.lastRenderedState=g}return[g,c]}function oh(){}function lh(t,r){var o=qt,c=nr(),m=r(),g=!dr(c.memoizedState,m);if(g&&(c.memoizedState=m,On=!0),c=c.queue,mu(uh.bind(null,o,c,t),[t]),c.getSnapshot!==r||g||un!==null&&un.memoizedState.tag&1){if(o.flags|=2048,Gi(9,dh.bind(null,o,c,m,r),void 0,null),mn===null)throw Error(a(349));(sa&30)!==0||ch(o,r,m)}return m}function ch(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=qt.updateQueue,r===null?(r={lastEffect:null,stores:null},qt.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function dh(t,r,o,c){r.value=o,r.getSnapshot=c,mh(r)&&fh(t)}function uh(t,r,o){return o(function(){mh(r)&&fh(t)})}function mh(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!dr(t,o)}catch{return!0}}function fh(t){var r=Qr(t,1);r!==null&&hr(r,t,1,-1)}function ph(t){var r=Ar();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:t},r.queue=t,t=t.dispatch=jb.bind(null,qt,t),[r.memoizedState,t]}function Gi(t,r,o,c){return t={tag:t,create:r,destroy:o,deps:c,next:null},r=qt.updateQueue,r===null?(r={lastEffect:null,stores:null},qt.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(c=o.next,o.next=t,t.next=c,r.lastEffect=t)),t}function hh(){return nr().memoizedState}function yl(t,r,o,c){var m=Ar();qt.flags|=t,m.memoizedState=Gi(1|r,o,void 0,c===void 0?null:c)}function vl(t,r,o,c){var m=nr();c=c===void 0?null:c;var g=void 0;if(on!==null){var j=on.memoizedState;if(g=j.destroy,c!==null&&ou(c,j.deps)){m.memoizedState=Gi(r,o,g,c);return}}qt.flags|=t,m.memoizedState=Gi(1|r,o,g,c)}function gh(t,r){return yl(8390656,8,t,r)}function mu(t,r){return vl(2048,8,t,r)}function xh(t,r){return vl(4,2,t,r)}function yh(t,r){return vl(4,4,t,r)}function vh(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function wh(t,r,o){return o=o!=null?o.concat([t]):null,vl(4,4,vh.bind(null,r,t),o)}function fu(){}function jh(t,r){var o=nr();r=r===void 0?null:r;var c=o.memoizedState;return c!==null&&r!==null&&ou(r,c[1])?c[0]:(o.memoizedState=[t,r],t)}function bh(t,r){var o=nr();r=r===void 0?null:r;var c=o.memoizedState;return c!==null&&r!==null&&ou(r,c[1])?c[0]:(t=t(),o.memoizedState=[t,r],t)}function Nh(t,r,o){return(sa&21)===0?(t.baseState&&(t.baseState=!1,On=!0),t.memoizedState=o):(dr(o,r)||(o=Zf(),qt.lanes|=o,aa|=o,t.baseState=!0),r)}function vb(t,r){var o=_t;_t=o!==0&&4>o?o:4,t(!0);var c=iu.transition;iu.transition={};try{t(!1),r()}finally{_t=o,iu.transition=c}}function Sh(){return nr().memoizedState}function wb(t,r,o){var c=ks(t);if(o={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null},Ch(t))Ph(r,o);else if(o=nh(t,r,o,c),o!==null){var m=In();hr(o,t,c,m),Eh(o,r,c)}}function jb(t,r,o){var c=ks(t),m={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ch(t))Ph(r,m);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var j=r.lastRenderedState,_=g(j,o);if(m.hasEagerState=!0,m.eagerState=_,dr(_,j)){var $=r.interleaved;$===null?(m.next=m,eu(r)):(m.next=$.next,$.next=m),r.interleaved=m;return}}catch{}finally{}o=nh(t,r,m,c),o!==null&&(m=In(),hr(o,t,c,m),Eh(o,r,c))}}function Ch(t){var r=t.alternate;return t===qt||r!==null&&r===qt}function Ph(t,r){qi=xl=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function Eh(t,r,o){if((o&4194240)!==0){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,hd(t,o)}}var wl={readContext:tr,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},bb={readContext:tr,useCallback:function(t,r){return Ar().memoizedState=[t,r===void 0?null:r],t},useContext:tr,useEffect:gh,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,yl(4194308,4,vh.bind(null,r,t),o)},useLayoutEffect:function(t,r){return yl(4194308,4,t,r)},useInsertionEffect:function(t,r){return yl(4,2,t,r)},useMemo:function(t,r){var o=Ar();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var c=Ar();return r=o!==void 0?o(r):r,c.memoizedState=c.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},c.queue=t,t=t.dispatch=wb.bind(null,qt,t),[c.memoizedState,t]},useRef:function(t){var r=Ar();return t={current:t},r.memoizedState=t},useState:ph,useDebugValue:fu,useDeferredValue:function(t){return Ar().memoizedState=t},useTransition:function(){var t=ph(!1),r=t[0];return t=vb.bind(null,t[1]),Ar().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var c=qt,m=Ar();if($t){if(o===void 0)throw Error(a(407));o=o()}else{if(o=r(),mn===null)throw Error(a(349));(sa&30)!==0||ch(c,r,o)}m.memoizedState=o;var g={value:o,getSnapshot:r};return m.queue=g,gh(uh.bind(null,c,g,t),[t]),c.flags|=2048,Gi(9,dh.bind(null,c,g,o,r),void 0,null),o},useId:function(){var t=Ar(),r=mn.identifierPrefix;if($t){var o=Jr,c=Yr;o=(c&~(1<<32-cr(c)-1)).toString(32)+o,r=":"+r+"R"+o,o=Wi++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=yb++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},Nb={readContext:tr,useCallback:jh,useContext:tr,useEffect:mu,useImperativeHandle:wh,useInsertionEffect:xh,useLayoutEffect:yh,useMemo:bh,useReducer:du,useRef:hh,useState:function(){return du(Ki)},useDebugValue:fu,useDeferredValue:function(t){var r=nr();return Nh(r,on.memoizedState,t)},useTransition:function(){var t=du(Ki)[0],r=nr().memoizedState;return[t,r]},useMutableSource:oh,useSyncExternalStore:lh,useId:Sh,unstable_isNewReconciler:!1},Sb={readContext:tr,useCallback:jh,useContext:tr,useEffect:mu,useImperativeHandle:wh,useInsertionEffect:xh,useLayoutEffect:yh,useMemo:bh,useReducer:uu,useRef:hh,useState:function(){return uu(Ki)},useDebugValue:fu,useDeferredValue:function(t){var r=nr();return on===null?r.memoizedState=t:Nh(r,on.memoizedState,t)},useTransition:function(){var t=uu(Ki)[0],r=nr().memoizedState;return[t,r]},useMutableSource:oh,useSyncExternalStore:lh,useId:Sh,unstable_isNewReconciler:!1};function mr(t,r){if(t&&t.defaultProps){r=ce({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function pu(t,r,o,c){r=t.memoizedState,o=o(c,r),o=o==null?r:ce({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var jl={isMounted:function(t){return(t=t._reactInternals)?Wr(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var c=In(),m=ks(t),g=Xr(c,m);g.payload=r,o!=null&&(g.callback=o),r=Cs(t,g,m),r!==null&&(hr(r,t,m,c),fl(r,t,m))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var c=In(),m=ks(t),g=Xr(c,m);g.tag=1,g.payload=r,o!=null&&(g.callback=o),r=Cs(t,g,m),r!==null&&(hr(r,t,m,c),fl(r,t,m))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=In(),c=ks(t),m=Xr(o,c);m.tag=2,r!=null&&(m.callback=r),r=Cs(t,m,c),r!==null&&(hr(r,t,c,o),fl(r,t,c))}};function Dh(t,r,o,c,m,g,j){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,g,j):r.prototype&&r.prototype.isPureReactComponent?!_i(o,c)||!_i(m,g):!0}function kh(t,r,o){var c=!1,m=bs,g=r.contextType;return typeof g=="object"&&g!==null?g=tr(g):(m=Mn(r)?Zs:bn.current,c=r.contextTypes,g=(c=c!=null)?Oa(t,m):bs),r=new r(o,g),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=jl,t.stateNode=r,r._reactInternals=t,c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=m,t.__reactInternalMemoizedMaskedChildContext=g),r}function Ah(t,r,o,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==t&&jl.enqueueReplaceState(r,r.state,null)}function hu(t,r,o,c){var m=t.stateNode;m.props=o,m.state=t.memoizedState,m.refs={},tu(t);var g=r.contextType;typeof g=="object"&&g!==null?m.context=tr(g):(g=Mn(r)?Zs:bn.current,m.context=Oa(t,g)),m.state=t.memoizedState,g=r.getDerivedStateFromProps,typeof g=="function"&&(pu(t,r,g,o),m.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(r=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),r!==m.state&&jl.enqueueReplaceState(m,m.state,null),pl(t,o,m,c),m.state=t.memoizedState),typeof m.componentDidMount=="function"&&(t.flags|=4194308)}function Va(t,r){try{var o="",c=r;do o+=ee(c),c=c.return;while(c);var m=o}catch(g){m=`
Error generating stack: `+g.message+`
`+g.stack}return{value:t,source:r,stack:m,digest:null}}function gu(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function xu(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var Cb=typeof WeakMap=="function"?WeakMap:Map;function Ih(t,r,o){o=Xr(-1,o),o.tag=3,o.payload={element:null};var c=r.value;return o.callback=function(){Dl||(Dl=!0,Ru=c),xu(t,r)},o}function Rh(t,r,o){o=Xr(-1,o),o.tag=3;var c=t.type.getDerivedStateFromError;if(typeof c=="function"){var m=r.value;o.payload=function(){return c(m)},o.callback=function(){xu(t,r)}}var g=t.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(o.callback=function(){xu(t,r),typeof c!="function"&&(Es===null?Es=new Set([this]):Es.add(this));var j=r.stack;this.componentDidCatch(r.value,{componentStack:j!==null?j:""})}),o}function Th(t,r,o){var c=t.pingCache;if(c===null){c=t.pingCache=new Cb;var m=new Set;c.set(r,m)}else m=c.get(r),m===void 0&&(m=new Set,c.set(r,m));m.has(o)||(m.add(o),t=$b.bind(null,t,r,o),r.then(t,t))}function _h(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Mh(t,r,o,c,m){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=Xr(-1,1),r.tag=2,Cs(o,r,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=m,t)}var Pb=B.ReactCurrentOwner,On=!1;function An(t,r,o,c){r.child=t===null?th(r,null,o,c):za(r,t.child,o,c)}function Oh(t,r,o,c,m){o=o.render;var g=r.ref;return Ua(r,m),c=lu(t,r,o,c,g,m),o=cu(),t!==null&&!On?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~m,Zr(t,r,m)):($t&&o&&qd(r),r.flags|=1,An(t,r,c,m),r.child)}function Lh(t,r,o,c,m){if(t===null){var g=o.type;return typeof g=="function"&&!$u(g)&&g.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=g,Fh(t,r,g,c,m)):(t=_l(o.type,null,c,r,r.mode,m),t.ref=r.ref,t.return=r,r.child=t)}if(g=t.child,(t.lanes&m)===0){var j=g.memoizedProps;if(o=o.compare,o=o!==null?o:_i,o(j,c)&&t.ref===r.ref)return Zr(t,r,m)}return r.flags|=1,t=Is(g,c),t.ref=r.ref,t.return=r,r.child=t}function Fh(t,r,o,c,m){if(t!==null){var g=t.memoizedProps;if(_i(g,c)&&t.ref===r.ref)if(On=!1,r.pendingProps=c=g,(t.lanes&m)!==0)(t.flags&131072)!==0&&(On=!0);else return r.lanes=t.lanes,Zr(t,r,m)}return yu(t,r,o,c,m)}function $h(t,r,o){var c=r.pendingProps,m=c.children,g=t!==null?t.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ot(Wa,Gn),Gn|=o;else{if((o&1073741824)===0)return t=g!==null?g.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Ot(Wa,Gn),Gn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:o,Ot(Wa,Gn),Gn|=c}else g!==null?(c=g.baseLanes|o,r.memoizedState=null):c=o,Ot(Wa,Gn),Gn|=c;return An(t,r,m,o),r.child}function zh(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function yu(t,r,o,c,m){var g=Mn(o)?Zs:bn.current;return g=Oa(r,g),Ua(r,m),o=lu(t,r,o,c,g,m),c=cu(),t!==null&&!On?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~m,Zr(t,r,m)):($t&&c&&qd(r),r.flags|=1,An(t,r,o,m),r.child)}function Bh(t,r,o,c,m){if(Mn(o)){var g=!0;al(r)}else g=!1;if(Ua(r,m),r.stateNode===null)Nl(t,r),kh(r,o,c),hu(r,o,c,m),c=!0;else if(t===null){var j=r.stateNode,_=r.memoizedProps;j.props=_;var $=j.context,oe=o.contextType;typeof oe=="object"&&oe!==null?oe=tr(oe):(oe=Mn(o)?Zs:bn.current,oe=Oa(r,oe));var Se=o.getDerivedStateFromProps,Pe=typeof Se=="function"||typeof j.getSnapshotBeforeUpdate=="function";Pe||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(_!==c||$!==oe)&&Ah(r,j,c,oe),Ss=!1;var be=r.memoizedState;j.state=be,pl(r,c,j,m),$=r.memoizedState,_!==c||be!==$||_n.current||Ss?(typeof Se=="function"&&(pu(r,o,Se,c),$=r.memoizedState),(_=Ss||Dh(r,o,_,c,be,$,oe))?(Pe||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(r.flags|=4194308)):(typeof j.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=$),j.props=c,j.state=$,j.context=oe,c=_):(typeof j.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{j=r.stateNode,rh(t,r),_=r.memoizedProps,oe=r.type===r.elementType?_:mr(r.type,_),j.props=oe,Pe=r.pendingProps,be=j.context,$=o.contextType,typeof $=="object"&&$!==null?$=tr($):($=Mn(o)?Zs:bn.current,$=Oa(r,$));var We=o.getDerivedStateFromProps;(Se=typeof We=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(_!==Pe||be!==$)&&Ah(r,j,c,$),Ss=!1,be=r.memoizedState,j.state=be,pl(r,c,j,m);var Je=r.memoizedState;_!==Pe||be!==Je||_n.current||Ss?(typeof We=="function"&&(pu(r,o,We,c),Je=r.memoizedState),(oe=Ss||Dh(r,o,oe,c,be,Je,$)||!1)?(Se||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(c,Je,$),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(c,Je,$)),typeof j.componentDidUpdate=="function"&&(r.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof j.componentDidUpdate!="function"||_===t.memoizedProps&&be===t.memoizedState||(r.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&be===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Je),j.props=c,j.state=Je,j.context=$,c=oe):(typeof j.componentDidUpdate!="function"||_===t.memoizedProps&&be===t.memoizedState||(r.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&be===t.memoizedState||(r.flags|=1024),c=!1)}return vu(t,r,o,c,g,m)}function vu(t,r,o,c,m,g){zh(t,r);var j=(r.flags&128)!==0;if(!c&&!j)return m&&Wp(r,o,!1),Zr(t,r,g);c=r.stateNode,Pb.current=r;var _=j&&typeof o.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,t!==null&&j?(r.child=za(r,t.child,null,g),r.child=za(r,null,_,g)):An(t,r,_,g),r.memoizedState=c.state,m&&Wp(r,o,!0),r.child}function Uh(t){var r=t.stateNode;r.pendingContext?Vp(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Vp(t,r.context,!1),nu(t,r.containerInfo)}function Hh(t,r,o,c,m){return $a(),Yd(m),r.flags|=256,An(t,r,o,c),r.child}var wu={dehydrated:null,treeContext:null,retryLane:0};function ju(t){return{baseLanes:t,cachePool:null,transitions:null}}function Vh(t,r,o){var c=r.pendingProps,m=Vt.current,g=!1,j=(r.flags&128)!==0,_;if((_=j)||(_=t!==null&&t.memoizedState===null?!1:(m&2)!==0),_?(g=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(m|=1),Ot(Vt,m&1),t===null)return Gd(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(j=c.children,t=c.fallback,g?(c=r.mode,g=r.child,j={mode:"hidden",children:j},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=j):g=Ml(j,c,0,null),t=ca(t,c,o,null),g.return=r,t.return=r,g.sibling=t,r.child=g,r.child.memoizedState=ju(o),r.memoizedState=wu,t):bu(r,j));if(m=t.memoizedState,m!==null&&(_=m.dehydrated,_!==null))return Eb(t,r,j,c,_,m,o);if(g){g=c.fallback,j=r.mode,m=t.child,_=m.sibling;var $={mode:"hidden",children:c.children};return(j&1)===0&&r.child!==m?(c=r.child,c.childLanes=0,c.pendingProps=$,r.deletions=null):(c=Is(m,$),c.subtreeFlags=m.subtreeFlags&14680064),_!==null?g=Is(_,g):(g=ca(g,j,o,null),g.flags|=2),g.return=r,c.return=r,c.sibling=g,r.child=c,c=g,g=r.child,j=t.child.memoizedState,j=j===null?ju(o):{baseLanes:j.baseLanes|o,cachePool:null,transitions:j.transitions},g.memoizedState=j,g.childLanes=t.childLanes&~o,r.memoizedState=wu,c}return g=t.child,t=g.sibling,c=Is(g,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=o),c.return=r,c.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=c,r.memoizedState=null,c}function bu(t,r){return r=Ml({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function bl(t,r,o,c){return c!==null&&Yd(c),za(r,t.child,null,o),t=bu(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Eb(t,r,o,c,m,g,j){if(o)return r.flags&256?(r.flags&=-257,c=gu(Error(a(422))),bl(t,r,j,c)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(g=c.fallback,m=r.mode,c=Ml({mode:"visible",children:c.children},m,0,null),g=ca(g,m,j,null),g.flags|=2,c.return=r,g.return=r,c.sibling=g,r.child=c,(r.mode&1)!==0&&za(r,t.child,null,j),r.child.memoizedState=ju(j),r.memoizedState=wu,g);if((r.mode&1)===0)return bl(t,r,j,null);if(m.data==="$!"){if(c=m.nextSibling&&m.nextSibling.dataset,c)var _=c.dgst;return c=_,g=Error(a(419)),c=gu(g,c,void 0),bl(t,r,j,c)}if(_=(j&t.childLanes)!==0,On||_){if(c=mn,c!==null){switch(j&-j){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(c.suspendedLanes|j))!==0?0:m,m!==0&&m!==g.retryLane&&(g.retryLane=m,Qr(t,m),hr(c,t,m,-1))}return Fu(),c=gu(Error(a(421))),bl(t,r,j,c)}return m.data==="$?"?(r.flags|=128,r.child=t.child,r=zb.bind(null,t),m._reactRetry=r,null):(t=g.treeContext,Kn=ws(m.nextSibling),Wn=r,$t=!0,ur=null,t!==null&&(Zn[er++]=Yr,Zn[er++]=Jr,Zn[er++]=ea,Yr=t.id,Jr=t.overflow,ea=r),r=bu(r,c.children),r.flags|=4096,r)}function qh(t,r,o){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),Zd(t.return,r,o)}function Nu(t,r,o,c,m){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:m}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=o,g.tailMode=m)}function Wh(t,r,o){var c=r.pendingProps,m=c.revealOrder,g=c.tail;if(An(t,r,c.children,o),c=Vt.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qh(t,o,r);else if(t.tag===19)qh(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}if(Ot(Vt,c),(r.mode&1)===0)r.memoizedState=null;else switch(m){case"forwards":for(o=r.child,m=null;o!==null;)t=o.alternate,t!==null&&hl(t)===null&&(m=o),o=o.sibling;o=m,o===null?(m=r.child,r.child=null):(m=o.sibling,o.sibling=null),Nu(r,!1,m,o,g);break;case"backwards":for(o=null,m=r.child,r.child=null;m!==null;){if(t=m.alternate,t!==null&&hl(t)===null){r.child=m;break}t=m.sibling,m.sibling=o,o=m,m=t}Nu(r,!0,o,null,g);break;case"together":Nu(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Nl(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Zr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),aa|=r.lanes,(o&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(a(153));if(r.child!==null){for(t=r.child,o=Is(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Is(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function Db(t,r,o){switch(r.tag){case 3:Uh(r),$a();break;case 5:ih(r);break;case 1:Mn(r.type)&&al(r);break;case 4:nu(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,m=r.memoizedProps.value;Ot(ul,c._currentValue),c._currentValue=m;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(Ot(Vt,Vt.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?Vh(t,r,o):(Ot(Vt,Vt.current&1),t=Zr(t,r,o),t!==null?t.sibling:null);Ot(Vt,Vt.current&1);break;case 19:if(c=(o&r.childLanes)!==0,(t.flags&128)!==0){if(c)return Wh(t,r,o);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Ot(Vt,Vt.current),c)break;return null;case 22:case 23:return r.lanes=0,$h(t,r,o)}return Zr(t,r,o)}var Kh,Su,Gh,Yh;Kh=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Su=function(){},Gh=function(t,r,o,c){var m=t.memoizedProps;if(m!==c){t=r.stateNode,ra(kr.current);var g=null;switch(o){case"input":m=Fe(t,m),c=Fe(t,c),g=[];break;case"select":m=ce({},m,{value:void 0}),c=ce({},c,{value:void 0}),g=[];break;case"textarea":m=V(t,m),c=V(t,c),g=[];break;default:typeof m.onClick!="function"&&typeof c.onClick=="function"&&(t.onclick=nl)}St(o,c);var j;o=null;for(oe in m)if(!c.hasOwnProperty(oe)&&m.hasOwnProperty(oe)&&m[oe]!=null)if(oe==="style"){var _=m[oe];for(j in _)_.hasOwnProperty(j)&&(o||(o={}),o[j]="")}else oe!=="dangerouslySetInnerHTML"&&oe!=="children"&&oe!=="suppressContentEditableWarning"&&oe!=="suppressHydrationWarning"&&oe!=="autoFocus"&&(l.hasOwnProperty(oe)?g||(g=[]):(g=g||[]).push(oe,null));for(oe in c){var $=c[oe];if(_=m?.[oe],c.hasOwnProperty(oe)&&$!==_&&($!=null||_!=null))if(oe==="style")if(_){for(j in _)!_.hasOwnProperty(j)||$&&$.hasOwnProperty(j)||(o||(o={}),o[j]="");for(j in $)$.hasOwnProperty(j)&&_[j]!==$[j]&&(o||(o={}),o[j]=$[j])}else o||(g||(g=[]),g.push(oe,o)),o=$;else oe==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,_=_?_.__html:void 0,$!=null&&_!==$&&(g=g||[]).push(oe,$)):oe==="children"?typeof $!="string"&&typeof $!="number"||(g=g||[]).push(oe,""+$):oe!=="suppressContentEditableWarning"&&oe!=="suppressHydrationWarning"&&(l.hasOwnProperty(oe)?($!=null&&oe==="onScroll"&&Lt("scroll",t),g||_===$||(g=[])):(g=g||[]).push(oe,$))}o&&(g=g||[]).push("style",o);var oe=g;(r.updateQueue=oe)&&(r.flags|=4)}},Yh=function(t,r,o,c){o!==c&&(r.flags|=4)};function Yi(t,r){if(!$t)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Sn(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,c=0;if(r)for(var m=t.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags&14680064,c|=m.flags&14680064,m.return=t,m=m.sibling;else for(m=t.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=t,m=m.sibling;return t.subtreeFlags|=c,t.childLanes=o,r}function kb(t,r,o){var c=r.pendingProps;switch(Wd(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(r),null;case 1:return Mn(r.type)&&sl(),Sn(r),null;case 3:return c=r.stateNode,Ha(),Ft(_n),Ft(bn),au(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(cl(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ur!==null&&(Mu(ur),ur=null))),Su(t,r),Sn(r),null;case 5:ru(r);var m=ra(Vi.current);if(o=r.type,t!==null&&r.stateNode!=null)Gh(t,r,o,c,m),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(a(166));return Sn(r),null}if(t=ra(kr.current),cl(r)){c=r.stateNode,o=r.type;var g=r.memoizedProps;switch(c[Dr]=r,c[$i]=g,t=(r.mode&1)!==0,o){case"dialog":Lt("cancel",c),Lt("close",c);break;case"iframe":case"object":case"embed":Lt("load",c);break;case"video":case"audio":for(m=0;m<Oi.length;m++)Lt(Oi[m],c);break;case"source":Lt("error",c);break;case"img":case"image":case"link":Lt("error",c),Lt("load",c);break;case"details":Lt("toggle",c);break;case"input":O(c,g),Lt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},Lt("invalid",c);break;case"textarea":pe(c,g),Lt("invalid",c)}St(o,g),m=null;for(var j in g)if(g.hasOwnProperty(j)){var _=g[j];j==="children"?typeof _=="string"?c.textContent!==_&&(g.suppressHydrationWarning!==!0&&tl(c.textContent,_,t),m=["children",_]):typeof _=="number"&&c.textContent!==""+_&&(g.suppressHydrationWarning!==!0&&tl(c.textContent,_,t),m=["children",""+_]):l.hasOwnProperty(j)&&_!=null&&j==="onScroll"&&Lt("scroll",c)}switch(o){case"input":k(c),Ve(c,g,!0);break;case"textarea":k(c),mt(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=nl)}c=m,r.updateQueue=c,c!==null&&(r.flags|=4)}else{j=m.nodeType===9?m:m.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ct(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=j.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof c.is=="string"?t=j.createElement(o,{is:c.is}):(t=j.createElement(o),o==="select"&&(j=t,c.multiple?j.multiple=!0:c.size&&(j.size=c.size))):t=j.createElementNS(t,o),t[Dr]=r,t[$i]=c,Kh(t,r,!1,!1),r.stateNode=t;e:{switch(j=Ce(o,c),o){case"dialog":Lt("cancel",t),Lt("close",t),m=c;break;case"iframe":case"object":case"embed":Lt("load",t),m=c;break;case"video":case"audio":for(m=0;m<Oi.length;m++)Lt(Oi[m],t);m=c;break;case"source":Lt("error",t),m=c;break;case"img":case"image":case"link":Lt("error",t),Lt("load",t),m=c;break;case"details":Lt("toggle",t),m=c;break;case"input":O(t,c),m=Fe(t,c),Lt("invalid",t);break;case"option":m=c;break;case"select":t._wrapperState={wasMultiple:!!c.multiple},m=ce({},c,{value:void 0}),Lt("invalid",t);break;case"textarea":pe(t,c),m=V(t,c),Lt("invalid",t);break;default:m=c}St(o,m),_=m;for(g in _)if(_.hasOwnProperty(g)){var $=_[g];g==="style"?gt(t,$):g==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&Xt(t,$)):g==="children"?typeof $=="string"?(o!=="textarea"||$!=="")&&I(t,$):typeof $=="number"&&I(t,""+$):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(l.hasOwnProperty(g)?$!=null&&g==="onScroll"&&Lt("scroll",t):$!=null&&z(t,g,$,j))}switch(o){case"input":k(t),Ve(t,c,!1);break;case"textarea":k(t),mt(t);break;case"option":c.value!=null&&t.setAttribute("value",""+le(c.value));break;case"select":t.multiple=!!c.multiple,g=c.value,g!=null?ot(t,!!c.multiple,g,!1):c.defaultValue!=null&&ot(t,!!c.multiple,c.defaultValue,!0);break;default:typeof m.onClick=="function"&&(t.onclick=nl)}switch(o){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Sn(r),null;case 6:if(t&&r.stateNode!=null)Yh(t,r,t.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(a(166));if(o=ra(Vi.current),ra(kr.current),cl(r)){if(c=r.stateNode,o=r.memoizedProps,c[Dr]=r,(g=c.nodeValue!==o)&&(t=Wn,t!==null))switch(t.tag){case 3:tl(c.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&tl(c.nodeValue,o,(t.mode&1)!==0)}g&&(r.flags|=4)}else c=(o.nodeType===9?o:o.ownerDocument).createTextNode(c),c[Dr]=r,r.stateNode=c}return Sn(r),null;case 13:if(Ft(Vt),c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($t&&Kn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Xp(),$a(),r.flags|=98560,g=!1;else if(g=cl(r),c!==null&&c.dehydrated!==null){if(t===null){if(!g)throw Error(a(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(a(317));g[Dr]=r}else $a(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Sn(r),g=!1}else ur!==null&&(Mu(ur),ur=null),g=!0;if(!g)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(c=c!==null,c!==(t!==null&&t.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(Vt.current&1)!==0?ln===0&&(ln=3):Fu())),r.updateQueue!==null&&(r.flags|=4),Sn(r),null);case 4:return Ha(),Su(t,r),t===null&&Li(r.stateNode.containerInfo),Sn(r),null;case 10:return Xd(r.type._context),Sn(r),null;case 17:return Mn(r.type)&&sl(),Sn(r),null;case 19:if(Ft(Vt),g=r.memoizedState,g===null)return Sn(r),null;if(c=(r.flags&128)!==0,j=g.rendering,j===null)if(c)Yi(g,!1);else{if(ln!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(j=hl(t),j!==null){for(r.flags|=128,Yi(g,!1),c=j.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=o,o=r.child;o!==null;)g=o,t=c,g.flags&=14680066,j=g.alternate,j===null?(g.childLanes=0,g.lanes=t,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=j.childLanes,g.lanes=j.lanes,g.child=j.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=j.memoizedProps,g.memoizedState=j.memoizedState,g.updateQueue=j.updateQueue,g.type=j.type,t=j.dependencies,g.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return Ot(Vt,Vt.current&1|2),r.child}t=t.sibling}g.tail!==null&&Jt()>Ka&&(r.flags|=128,c=!0,Yi(g,!1),r.lanes=4194304)}else{if(!c)if(t=hl(j),t!==null){if(r.flags|=128,c=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Yi(g,!0),g.tail===null&&g.tailMode==="hidden"&&!j.alternate&&!$t)return Sn(r),null}else 2*Jt()-g.renderingStartTime>Ka&&o!==1073741824&&(r.flags|=128,c=!0,Yi(g,!1),r.lanes=4194304);g.isBackwards?(j.sibling=r.child,r.child=j):(o=g.last,o!==null?o.sibling=j:r.child=j,g.last=j)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=Jt(),r.sibling=null,o=Vt.current,Ot(Vt,c?o&1|2:o&1),r):(Sn(r),null);case 22:case 23:return Lu(),c=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(Gn&1073741824)!==0&&(Sn(r),r.subtreeFlags&6&&(r.flags|=8192)):Sn(r),null;case 24:return null;case 25:return null}throw Error(a(156,r.tag))}function Ab(t,r){switch(Wd(r),r.tag){case 1:return Mn(r.type)&&sl(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ha(),Ft(_n),Ft(bn),au(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return ru(r),null;case 13:if(Ft(Vt),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(a(340));$a()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Ft(Vt),null;case 4:return Ha(),null;case 10:return Xd(r.type._context),null;case 22:case 23:return Lu(),null;case 24:return null;default:return null}}var Sl=!1,Cn=!1,Ib=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function qa(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(c){Yt(t,r,c)}else o.current=null}function Cu(t,r,o){try{o()}catch(c){Yt(t,r,c)}}var Jh=!1;function Rb(t,r){if(Ld=Vo,t=Dp(),kd(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var m=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var j=0,_=-1,$=-1,oe=0,Se=0,Pe=t,be=null;t:for(;;){for(var We;Pe!==o||m!==0&&Pe.nodeType!==3||(_=j+m),Pe!==g||c!==0&&Pe.nodeType!==3||($=j+c),Pe.nodeType===3&&(j+=Pe.nodeValue.length),(We=Pe.firstChild)!==null;)be=Pe,Pe=We;for(;;){if(Pe===t)break t;if(be===o&&++oe===m&&(_=j),be===g&&++Se===c&&($=j),(We=Pe.nextSibling)!==null)break;Pe=be,be=Pe.parentNode}Pe=We}o=_===-1||$===-1?null:{start:_,end:$}}else o=null}o=o||{start:0,end:0}}else o=null;for(Fd={focusedElem:t,selectionRange:o},Vo=!1,Ke=r;Ke!==null;)if(r=Ke,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Ke=t;else for(;Ke!==null;){r=Ke;try{var Je=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(Je!==null){var Ze=Je.memoizedProps,Qt=Je.memoizedState,Z=r.stateNode,K=Z.getSnapshotBeforeUpdate(r.elementType===r.type?Ze:mr(r.type,Ze),Qt);Z.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var re=r.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(De){Yt(r,r.return,De)}if(t=r.sibling,t!==null){t.return=r.return,Ke=t;break}Ke=r.return}return Je=Jh,Jh=!1,Je}function Ji(t,r,o){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&t)===t){var g=m.destroy;m.destroy=void 0,g!==void 0&&Cu(r,o,g)}m=m.next}while(m!==c)}}function Cl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var c=o.create;o.destroy=c()}o=o.next}while(o!==r)}}function Pu(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function Qh(t){var r=t.alternate;r!==null&&(t.alternate=null,Qh(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Dr],delete r[$i],delete r[Ud],delete r[pb],delete r[hb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xh(t){return t.tag===5||t.tag===3||t.tag===4}function Zh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Eu(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=nl));else if(c!==4&&(t=t.child,t!==null))for(Eu(t,r,o),t=t.sibling;t!==null;)Eu(t,r,o),t=t.sibling}function Du(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(c!==4&&(t=t.child,t!==null))for(Du(t,r,o),t=t.sibling;t!==null;)Du(t,r,o),t=t.sibling}var gn=null,fr=!1;function Ps(t,r,o){for(o=o.child;o!==null;)eg(t,r,o),o=o.sibling}function eg(t,r,o){if(Er&&typeof Er.onCommitFiberUnmount=="function")try{Er.onCommitFiberUnmount(Fo,o)}catch{}switch(o.tag){case 5:Cn||qa(o,r);case 6:var c=gn,m=fr;gn=null,Ps(t,r,o),gn=c,fr=m,gn!==null&&(fr?(t=gn,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):gn.removeChild(o.stateNode));break;case 18:gn!==null&&(fr?(t=gn,o=o.stateNode,t.nodeType===8?Bd(t.parentNode,o):t.nodeType===1&&Bd(t,o),Di(t)):Bd(gn,o.stateNode));break;case 4:c=gn,m=fr,gn=o.stateNode.containerInfo,fr=!0,Ps(t,r,o),gn=c,fr=m;break;case 0:case 11:case 14:case 15:if(!Cn&&(c=o.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){m=c=c.next;do{var g=m,j=g.destroy;g=g.tag,j!==void 0&&((g&2)!==0||(g&4)!==0)&&Cu(o,r,j),m=m.next}while(m!==c)}Ps(t,r,o);break;case 1:if(!Cn&&(qa(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=o.memoizedProps,c.state=o.memoizedState,c.componentWillUnmount()}catch(_){Yt(o,r,_)}Ps(t,r,o);break;case 21:Ps(t,r,o);break;case 22:o.mode&1?(Cn=(c=Cn)||o.memoizedState!==null,Ps(t,r,o),Cn=c):Ps(t,r,o);break;default:Ps(t,r,o)}}function tg(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new Ib),r.forEach(function(c){var m=Bb.bind(null,t,c);o.has(c)||(o.add(c),c.then(m,m))})}}function pr(t,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var m=o[c];try{var g=t,j=r,_=j;e:for(;_!==null;){switch(_.tag){case 5:gn=_.stateNode,fr=!1;break e;case 3:gn=_.stateNode.containerInfo,fr=!0;break e;case 4:gn=_.stateNode.containerInfo,fr=!0;break e}_=_.return}if(gn===null)throw Error(a(160));eg(g,j,m),gn=null,fr=!1;var $=m.alternate;$!==null&&($.return=null),m.return=null}catch(oe){Yt(m,r,oe)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)ng(r,t),r=r.sibling}function ng(t,r){var o=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pr(r,t),Ir(t),c&4){try{Ji(3,t,t.return),Cl(3,t)}catch(Ze){Yt(t,t.return,Ze)}try{Ji(5,t,t.return)}catch(Ze){Yt(t,t.return,Ze)}}break;case 1:pr(r,t),Ir(t),c&512&&o!==null&&qa(o,o.return);break;case 5:if(pr(r,t),Ir(t),c&512&&o!==null&&qa(o,o.return),t.flags&32){var m=t.stateNode;try{I(m,"")}catch(Ze){Yt(t,t.return,Ze)}}if(c&4&&(m=t.stateNode,m!=null)){var g=t.memoizedProps,j=o!==null?o.memoizedProps:g,_=t.type,$=t.updateQueue;if(t.updateQueue=null,$!==null)try{_==="input"&&g.type==="radio"&&g.name!=null&&ze(m,g),Ce(_,j);var oe=Ce(_,g);for(j=0;j<$.length;j+=2){var Se=$[j],Pe=$[j+1];Se==="style"?gt(m,Pe):Se==="dangerouslySetInnerHTML"?Xt(m,Pe):Se==="children"?I(m,Pe):z(m,Se,Pe,oe)}switch(_){case"input":W(m,g);break;case"textarea":we(m,g);break;case"select":var be=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!g.multiple;var We=g.value;We!=null?ot(m,!!g.multiple,We,!1):be!==!!g.multiple&&(g.defaultValue!=null?ot(m,!!g.multiple,g.defaultValue,!0):ot(m,!!g.multiple,g.multiple?[]:"",!1))}m[$i]=g}catch(Ze){Yt(t,t.return,Ze)}}break;case 6:if(pr(r,t),Ir(t),c&4){if(t.stateNode===null)throw Error(a(162));m=t.stateNode,g=t.memoizedProps;try{m.nodeValue=g}catch(Ze){Yt(t,t.return,Ze)}}break;case 3:if(pr(r,t),Ir(t),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Di(r.containerInfo)}catch(Ze){Yt(t,t.return,Ze)}break;case 4:pr(r,t),Ir(t);break;case 13:pr(r,t),Ir(t),m=t.child,m.flags&8192&&(g=m.memoizedState!==null,m.stateNode.isHidden=g,!g||m.alternate!==null&&m.alternate.memoizedState!==null||(Iu=Jt())),c&4&&tg(t);break;case 22:if(Se=o!==null&&o.memoizedState!==null,t.mode&1?(Cn=(oe=Cn)||Se,pr(r,t),Cn=oe):pr(r,t),Ir(t),c&8192){if(oe=t.memoizedState!==null,(t.stateNode.isHidden=oe)&&!Se&&(t.mode&1)!==0)for(Ke=t,Se=t.child;Se!==null;){for(Pe=Ke=Se;Ke!==null;){switch(be=Ke,We=be.child,be.tag){case 0:case 11:case 14:case 15:Ji(4,be,be.return);break;case 1:qa(be,be.return);var Je=be.stateNode;if(typeof Je.componentWillUnmount=="function"){c=be,o=be.return;try{r=c,Je.props=r.memoizedProps,Je.state=r.memoizedState,Je.componentWillUnmount()}catch(Ze){Yt(c,o,Ze)}}break;case 5:qa(be,be.return);break;case 22:if(be.memoizedState!==null){ag(Pe);continue}}We!==null?(We.return=be,Ke=We):ag(Pe)}Se=Se.sibling}e:for(Se=null,Pe=t;;){if(Pe.tag===5){if(Se===null){Se=Pe;try{m=Pe.stateNode,oe?(g=m.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(_=Pe.stateNode,$=Pe.memoizedProps.style,j=$!=null&&$.hasOwnProperty("display")?$.display:null,_.style.display=ft("display",j))}catch(Ze){Yt(t,t.return,Ze)}}}else if(Pe.tag===6){if(Se===null)try{Pe.stateNode.nodeValue=oe?"":Pe.memoizedProps}catch(Ze){Yt(t,t.return,Ze)}}else if((Pe.tag!==22&&Pe.tag!==23||Pe.memoizedState===null||Pe===t)&&Pe.child!==null){Pe.child.return=Pe,Pe=Pe.child;continue}if(Pe===t)break e;for(;Pe.sibling===null;){if(Pe.return===null||Pe.return===t)break e;Se===Pe&&(Se=null),Pe=Pe.return}Se===Pe&&(Se=null),Pe.sibling.return=Pe.return,Pe=Pe.sibling}}break;case 19:pr(r,t),Ir(t),c&4&&tg(t);break;case 21:break;default:pr(r,t),Ir(t)}}function Ir(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(Xh(o)){var c=o;break e}o=o.return}throw Error(a(160))}switch(c.tag){case 5:var m=c.stateNode;c.flags&32&&(I(m,""),c.flags&=-33);var g=Zh(t);Du(t,g,m);break;case 3:case 4:var j=c.stateNode.containerInfo,_=Zh(t);Eu(t,_,j);break;default:throw Error(a(161))}}catch($){Yt(t,t.return,$)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Tb(t,r,o){Ke=t,rg(t)}function rg(t,r,o){for(var c=(t.mode&1)!==0;Ke!==null;){var m=Ke,g=m.child;if(m.tag===22&&c){var j=m.memoizedState!==null||Sl;if(!j){var _=m.alternate,$=_!==null&&_.memoizedState!==null||Cn;_=Sl;var oe=Cn;if(Sl=j,(Cn=$)&&!oe)for(Ke=m;Ke!==null;)j=Ke,$=j.child,j.tag===22&&j.memoizedState!==null?ig(m):$!==null?($.return=j,Ke=$):ig(m);for(;g!==null;)Ke=g,rg(g),g=g.sibling;Ke=m,Sl=_,Cn=oe}sg(t)}else(m.subtreeFlags&8772)!==0&&g!==null?(g.return=m,Ke=g):sg(t)}}function sg(t){for(;Ke!==null;){var r=Ke;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Cn||Cl(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!Cn)if(o===null)c.componentDidMount();else{var m=r.elementType===r.type?o.memoizedProps:mr(r.type,o.memoizedProps);c.componentDidUpdate(m,o.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=r.updateQueue;g!==null&&ah(r,g,c);break;case 3:var j=r.updateQueue;if(j!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}ah(r,j,o)}break;case 5:var _=r.stateNode;if(o===null&&r.flags&4){o=_;var $=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&o.focus();break;case"img":$.src&&(o.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var oe=r.alternate;if(oe!==null){var Se=oe.memoizedState;if(Se!==null){var Pe=Se.dehydrated;Pe!==null&&Di(Pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}Cn||r.flags&512&&Pu(r)}catch(be){Yt(r,r.return,be)}}if(r===t){Ke=null;break}if(o=r.sibling,o!==null){o.return=r.return,Ke=o;break}Ke=r.return}}function ag(t){for(;Ke!==null;){var r=Ke;if(r===t){Ke=null;break}var o=r.sibling;if(o!==null){o.return=r.return,Ke=o;break}Ke=r.return}}function ig(t){for(;Ke!==null;){var r=Ke;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{Cl(4,r)}catch($){Yt(r,o,$)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var m=r.return;try{c.componentDidMount()}catch($){Yt(r,m,$)}}var g=r.return;try{Pu(r)}catch($){Yt(r,g,$)}break;case 5:var j=r.return;try{Pu(r)}catch($){Yt(r,j,$)}}}catch($){Yt(r,r.return,$)}if(r===t){Ke=null;break}var _=r.sibling;if(_!==null){_.return=r.return,Ke=_;break}Ke=r.return}}var _b=Math.ceil,Pl=B.ReactCurrentDispatcher,ku=B.ReactCurrentOwner,rr=B.ReactCurrentBatchConfig,Ct=0,mn=null,en=null,xn=0,Gn=0,Wa=js(0),ln=0,Qi=null,aa=0,El=0,Au=0,Xi=null,Ln=null,Iu=0,Ka=1/0,es=null,Dl=!1,Ru=null,Es=null,kl=!1,Ds=null,Al=0,Zi=0,Tu=null,Il=-1,Rl=0;function In(){return(Ct&6)!==0?Jt():Il!==-1?Il:Il=Jt()}function ks(t){return(t.mode&1)===0?1:(Ct&2)!==0&&xn!==0?xn&-xn:xb.transition!==null?(Rl===0&&(Rl=Zf()),Rl):(t=_t,t!==0||(t=window.event,t=t===void 0?16:lp(t.type)),t)}function hr(t,r,o,c){if(50<Zi)throw Zi=0,Tu=null,Error(a(185));Ni(t,o,c),((Ct&2)===0||t!==mn)&&(t===mn&&((Ct&2)===0&&(El|=o),ln===4&&As(t,xn)),Fn(t,c),o===1&&Ct===0&&(r.mode&1)===0&&(Ka=Jt()+500,il&&Ns()))}function Fn(t,r){var o=t.callbackNode;xj(t,r);var c=Bo(t,t===mn?xn:0);if(c===0)o!==null&&Jf(o),t.callbackNode=null,t.callbackPriority=0;else if(r=c&-c,t.callbackPriority!==r){if(o!=null&&Jf(o),r===1)t.tag===0?gb(lg.bind(null,t)):Kp(lg.bind(null,t)),mb(function(){(Ct&6)===0&&Ns()}),o=null;else{switch(ep(c)){case 1:o=md;break;case 4:o=Qf;break;case 16:o=Lo;break;case 536870912:o=Xf;break;default:o=Lo}o=gg(o,og.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function og(t,r){if(Il=-1,Rl=0,(Ct&6)!==0)throw Error(a(327));var o=t.callbackNode;if(Ga()&&t.callbackNode!==o)return null;var c=Bo(t,t===mn?xn:0);if(c===0)return null;if((c&30)!==0||(c&t.expiredLanes)!==0||r)r=Tl(t,c);else{r=c;var m=Ct;Ct|=2;var g=dg();(mn!==t||xn!==r)&&(es=null,Ka=Jt()+500,oa(t,r));do try{Lb();break}catch(_){cg(t,_)}while(!0);Qd(),Pl.current=g,Ct=m,en!==null?r=0:(mn=null,xn=0,r=ln)}if(r!==0){if(r===2&&(m=fd(t),m!==0&&(c=m,r=_u(t,m))),r===1)throw o=Qi,oa(t,0),As(t,c),Fn(t,Jt()),o;if(r===6)As(t,c);else{if(m=t.current.alternate,(c&30)===0&&!Mb(m)&&(r=Tl(t,c),r===2&&(g=fd(t),g!==0&&(c=g,r=_u(t,g))),r===1))throw o=Qi,oa(t,0),As(t,c),Fn(t,Jt()),o;switch(t.finishedWork=m,t.finishedLanes=c,r){case 0:case 1:throw Error(a(345));case 2:la(t,Ln,es);break;case 3:if(As(t,c),(c&130023424)===c&&(r=Iu+500-Jt(),10<r)){if(Bo(t,0)!==0)break;if(m=t.suspendedLanes,(m&c)!==c){In(),t.pingedLanes|=t.suspendedLanes&m;break}t.timeoutHandle=zd(la.bind(null,t,Ln,es),r);break}la(t,Ln,es);break;case 4:if(As(t,c),(c&4194240)===c)break;for(r=t.eventTimes,m=-1;0<c;){var j=31-cr(c);g=1<<j,j=r[j],j>m&&(m=j),c&=~g}if(c=m,c=Jt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*_b(c/1960))-c,10<c){t.timeoutHandle=zd(la.bind(null,t,Ln,es),c);break}la(t,Ln,es);break;case 5:la(t,Ln,es);break;default:throw Error(a(329))}}}return Fn(t,Jt()),t.callbackNode===o?og.bind(null,t):null}function _u(t,r){var o=Xi;return t.current.memoizedState.isDehydrated&&(oa(t,r).flags|=256),t=Tl(t,r),t!==2&&(r=Ln,Ln=o,r!==null&&Mu(r)),t}function Mu(t){Ln===null?Ln=t:Ln.push.apply(Ln,t)}function Mb(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var c=0;c<o.length;c++){var m=o[c],g=m.getSnapshot;m=m.value;try{if(!dr(g(),m))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function As(t,r){for(r&=~Au,r&=~El,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-cr(r),c=1<<o;t[o]=-1,r&=~c}}function lg(t){if((Ct&6)!==0)throw Error(a(327));Ga();var r=Bo(t,0);if((r&1)===0)return Fn(t,Jt()),null;var o=Tl(t,r);if(t.tag!==0&&o===2){var c=fd(t);c!==0&&(r=c,o=_u(t,c))}if(o===1)throw o=Qi,oa(t,0),As(t,r),Fn(t,Jt()),o;if(o===6)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,la(t,Ln,es),Fn(t,Jt()),null}function Ou(t,r){var o=Ct;Ct|=1;try{return t(r)}finally{Ct=o,Ct===0&&(Ka=Jt()+500,il&&Ns())}}function ia(t){Ds!==null&&Ds.tag===0&&(Ct&6)===0&&Ga();var r=Ct;Ct|=1;var o=rr.transition,c=_t;try{if(rr.transition=null,_t=1,t)return t()}finally{_t=c,rr.transition=o,Ct=r,(Ct&6)===0&&Ns()}}function Lu(){Gn=Wa.current,Ft(Wa)}function oa(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,ub(o)),en!==null)for(o=en.return;o!==null;){var c=o;switch(Wd(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&sl();break;case 3:Ha(),Ft(_n),Ft(bn),au();break;case 5:ru(c);break;case 4:Ha();break;case 13:Ft(Vt);break;case 19:Ft(Vt);break;case 10:Xd(c.type._context);break;case 22:case 23:Lu()}o=o.return}if(mn=t,en=t=Is(t.current,null),xn=Gn=r,ln=0,Qi=null,Au=El=aa=0,Ln=Xi=null,na!==null){for(r=0;r<na.length;r++)if(o=na[r],c=o.interleaved,c!==null){o.interleaved=null;var m=c.next,g=o.pending;if(g!==null){var j=g.next;g.next=m,c.next=j}o.pending=c}na=null}return t}function cg(t,r){do{var o=en;try{if(Qd(),gl.current=wl,xl){for(var c=qt.memoizedState;c!==null;){var m=c.queue;m!==null&&(m.pending=null),c=c.next}xl=!1}if(sa=0,un=on=qt=null,qi=!1,Wi=0,ku.current=null,o===null||o.return===null){ln=1,Qi=r,en=null;break}e:{var g=t,j=o.return,_=o,$=r;if(r=xn,_.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var oe=$,Se=_,Pe=Se.tag;if((Se.mode&1)===0&&(Pe===0||Pe===11||Pe===15)){var be=Se.alternate;be?(Se.updateQueue=be.updateQueue,Se.memoizedState=be.memoizedState,Se.lanes=be.lanes):(Se.updateQueue=null,Se.memoizedState=null)}var We=_h(j);if(We!==null){We.flags&=-257,Mh(We,j,_,g,r),We.mode&1&&Th(g,oe,r),r=We,$=oe;var Je=r.updateQueue;if(Je===null){var Ze=new Set;Ze.add($),r.updateQueue=Ze}else Je.add($);break e}else{if((r&1)===0){Th(g,oe,r),Fu();break e}$=Error(a(426))}}else if($t&&_.mode&1){var Qt=_h(j);if(Qt!==null){(Qt.flags&65536)===0&&(Qt.flags|=256),Mh(Qt,j,_,g,r),Yd(Va($,_));break e}}g=$=Va($,_),ln!==4&&(ln=2),Xi===null?Xi=[g]:Xi.push(g),g=j;do{switch(g.tag){case 3:g.flags|=65536,r&=-r,g.lanes|=r;var Z=Ih(g,$,r);sh(g,Z);break e;case 1:_=$;var K=g.type,re=g.stateNode;if((g.flags&128)===0&&(typeof K.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(Es===null||!Es.has(re)))){g.flags|=65536,r&=-r,g.lanes|=r;var De=Rh(g,_,r);sh(g,De);break e}}g=g.return}while(g!==null)}mg(o)}catch(et){r=et,en===o&&o!==null&&(en=o=o.return);continue}break}while(!0)}function dg(){var t=Pl.current;return Pl.current=wl,t===null?wl:t}function Fu(){(ln===0||ln===3||ln===2)&&(ln=4),mn===null||(aa&268435455)===0&&(El&268435455)===0||As(mn,xn)}function Tl(t,r){var o=Ct;Ct|=2;var c=dg();(mn!==t||xn!==r)&&(es=null,oa(t,r));do try{Ob();break}catch(m){cg(t,m)}while(!0);if(Qd(),Ct=o,Pl.current=c,en!==null)throw Error(a(261));return mn=null,xn=0,ln}function Ob(){for(;en!==null;)ug(en)}function Lb(){for(;en!==null&&!lj();)ug(en)}function ug(t){var r=hg(t.alternate,t,Gn);t.memoizedProps=t.pendingProps,r===null?mg(t):en=r,ku.current=null}function mg(t){var r=t;do{var o=r.alternate;if(t=r.return,(r.flags&32768)===0){if(o=kb(o,r,Gn),o!==null){en=o;return}}else{if(o=Ab(o,r),o!==null){o.flags&=32767,en=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ln=6,en=null;return}}if(r=r.sibling,r!==null){en=r;return}en=r=t}while(r!==null);ln===0&&(ln=5)}function la(t,r,o){var c=_t,m=rr.transition;try{rr.transition=null,_t=1,Fb(t,r,o,c)}finally{rr.transition=m,_t=c}return null}function Fb(t,r,o,c){do Ga();while(Ds!==null);if((Ct&6)!==0)throw Error(a(327));o=t.finishedWork;var m=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var g=o.lanes|o.childLanes;if(yj(t,g),t===mn&&(en=mn=null,xn=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||kl||(kl=!0,gg(Lo,function(){return Ga(),null})),g=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||g){g=rr.transition,rr.transition=null;var j=_t;_t=1;var _=Ct;Ct|=4,ku.current=null,Rb(t,o),ng(o,t),sb(Fd),Vo=!!Ld,Fd=Ld=null,t.current=o,Tb(o),cj(),Ct=_,_t=j,rr.transition=g}else t.current=o;if(kl&&(kl=!1,Ds=t,Al=m),g=t.pendingLanes,g===0&&(Es=null),mj(o.stateNode),Fn(t,Jt()),r!==null)for(c=t.onRecoverableError,o=0;o<r.length;o++)m=r[o],c(m.value,{componentStack:m.stack,digest:m.digest});if(Dl)throw Dl=!1,t=Ru,Ru=null,t;return(Al&1)!==0&&t.tag!==0&&Ga(),g=t.pendingLanes,(g&1)!==0?t===Tu?Zi++:(Zi=0,Tu=t):Zi=0,Ns(),null}function Ga(){if(Ds!==null){var t=ep(Al),r=rr.transition,o=_t;try{if(rr.transition=null,_t=16>t?16:t,Ds===null)var c=!1;else{if(t=Ds,Ds=null,Al=0,(Ct&6)!==0)throw Error(a(331));var m=Ct;for(Ct|=4,Ke=t.current;Ke!==null;){var g=Ke,j=g.child;if((Ke.flags&16)!==0){var _=g.deletions;if(_!==null){for(var $=0;$<_.length;$++){var oe=_[$];for(Ke=oe;Ke!==null;){var Se=Ke;switch(Se.tag){case 0:case 11:case 15:Ji(8,Se,g)}var Pe=Se.child;if(Pe!==null)Pe.return=Se,Ke=Pe;else for(;Ke!==null;){Se=Ke;var be=Se.sibling,We=Se.return;if(Qh(Se),Se===oe){Ke=null;break}if(be!==null){be.return=We,Ke=be;break}Ke=We}}}var Je=g.alternate;if(Je!==null){var Ze=Je.child;if(Ze!==null){Je.child=null;do{var Qt=Ze.sibling;Ze.sibling=null,Ze=Qt}while(Ze!==null)}}Ke=g}}if((g.subtreeFlags&2064)!==0&&j!==null)j.return=g,Ke=j;else e:for(;Ke!==null;){if(g=Ke,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ji(9,g,g.return)}var Z=g.sibling;if(Z!==null){Z.return=g.return,Ke=Z;break e}Ke=g.return}}var K=t.current;for(Ke=K;Ke!==null;){j=Ke;var re=j.child;if((j.subtreeFlags&2064)!==0&&re!==null)re.return=j,Ke=re;else e:for(j=K;Ke!==null;){if(_=Ke,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:Cl(9,_)}}catch(et){Yt(_,_.return,et)}if(_===j){Ke=null;break e}var De=_.sibling;if(De!==null){De.return=_.return,Ke=De;break e}Ke=_.return}}if(Ct=m,Ns(),Er&&typeof Er.onPostCommitFiberRoot=="function")try{Er.onPostCommitFiberRoot(Fo,t)}catch{}c=!0}return c}finally{_t=o,rr.transition=r}}return!1}function fg(t,r,o){r=Va(o,r),r=Ih(t,r,1),t=Cs(t,r,1),r=In(),t!==null&&(Ni(t,1,r),Fn(t,r))}function Yt(t,r,o){if(t.tag===3)fg(t,t,o);else for(;r!==null;){if(r.tag===3){fg(r,t,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Es===null||!Es.has(c))){t=Va(o,t),t=Rh(r,t,1),r=Cs(r,t,1),t=In(),r!==null&&(Ni(r,1,t),Fn(r,t));break}}r=r.return}}function $b(t,r,o){var c=t.pingCache;c!==null&&c.delete(r),r=In(),t.pingedLanes|=t.suspendedLanes&o,mn===t&&(xn&o)===o&&(ln===4||ln===3&&(xn&130023424)===xn&&500>Jt()-Iu?oa(t,0):Au|=o),Fn(t,r)}function pg(t,r){r===0&&((t.mode&1)===0?r=1:(r=zo,zo<<=1,(zo&130023424)===0&&(zo=4194304)));var o=In();t=Qr(t,r),t!==null&&(Ni(t,r,o),Fn(t,o))}function zb(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),pg(t,o)}function Bb(t,r){var o=0;switch(t.tag){case 13:var c=t.stateNode,m=t.memoizedState;m!==null&&(o=m.retryLane);break;case 19:c=t.stateNode;break;default:throw Error(a(314))}c!==null&&c.delete(r),pg(t,o)}var hg;hg=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||_n.current)On=!0;else{if((t.lanes&o)===0&&(r.flags&128)===0)return On=!1,Db(t,r,o);On=(t.flags&131072)!==0}else On=!1,$t&&(r.flags&1048576)!==0&&Gp(r,ll,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;Nl(t,r),t=r.pendingProps;var m=Oa(r,bn.current);Ua(r,o),m=lu(null,r,c,t,m,o);var g=cu();return r.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Mn(c)?(g=!0,al(r)):g=!1,r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,tu(r),m.updater=jl,r.stateNode=m,m._reactInternals=r,hu(r,c,t,o),r=vu(null,r,c,!0,g,o)):(r.tag=0,$t&&g&&qd(r),An(null,r,m,o),r=r.child),r;case 16:c=r.elementType;e:{switch(Nl(t,r),t=r.pendingProps,m=c._init,c=m(c._payload),r.type=c,m=r.tag=Hb(c),t=mr(c,t),m){case 0:r=yu(null,r,c,t,o);break e;case 1:r=Bh(null,r,c,t,o);break e;case 11:r=Oh(null,r,c,t,o);break e;case 14:r=Lh(null,r,c,mr(c.type,t),o);break e}throw Error(a(306,c,""))}return r;case 0:return c=r.type,m=r.pendingProps,m=r.elementType===c?m:mr(c,m),yu(t,r,c,m,o);case 1:return c=r.type,m=r.pendingProps,m=r.elementType===c?m:mr(c,m),Bh(t,r,c,m,o);case 3:e:{if(Uh(r),t===null)throw Error(a(387));c=r.pendingProps,g=r.memoizedState,m=g.element,rh(t,r),pl(r,c,null,o);var j=r.memoizedState;if(c=j.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:j.cache,pendingSuspenseBoundaries:j.pendingSuspenseBoundaries,transitions:j.transitions},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){m=Va(Error(a(423)),r),r=Hh(t,r,c,o,m);break e}else if(c!==m){m=Va(Error(a(424)),r),r=Hh(t,r,c,o,m);break e}else for(Kn=ws(r.stateNode.containerInfo.firstChild),Wn=r,$t=!0,ur=null,o=th(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if($a(),c===m){r=Zr(t,r,o);break e}An(t,r,c,o)}r=r.child}return r;case 5:return ih(r),t===null&&Gd(r),c=r.type,m=r.pendingProps,g=t!==null?t.memoizedProps:null,j=m.children,$d(c,m)?j=null:g!==null&&$d(c,g)&&(r.flags|=32),zh(t,r),An(t,r,j,o),r.child;case 6:return t===null&&Gd(r),null;case 13:return Vh(t,r,o);case 4:return nu(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=za(r,null,c,o):An(t,r,c,o),r.child;case 11:return c=r.type,m=r.pendingProps,m=r.elementType===c?m:mr(c,m),Oh(t,r,c,m,o);case 7:return An(t,r,r.pendingProps,o),r.child;case 8:return An(t,r,r.pendingProps.children,o),r.child;case 12:return An(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(c=r.type._context,m=r.pendingProps,g=r.memoizedProps,j=m.value,Ot(ul,c._currentValue),c._currentValue=j,g!==null)if(dr(g.value,j)){if(g.children===m.children&&!_n.current){r=Zr(t,r,o);break e}}else for(g=r.child,g!==null&&(g.return=r);g!==null;){var _=g.dependencies;if(_!==null){j=g.child;for(var $=_.firstContext;$!==null;){if($.context===c){if(g.tag===1){$=Xr(-1,o&-o),$.tag=2;var oe=g.updateQueue;if(oe!==null){oe=oe.shared;var Se=oe.pending;Se===null?$.next=$:($.next=Se.next,Se.next=$),oe.pending=$}}g.lanes|=o,$=g.alternate,$!==null&&($.lanes|=o),Zd(g.return,o,r),_.lanes|=o;break}$=$.next}}else if(g.tag===10)j=g.type===r.type?null:g.child;else if(g.tag===18){if(j=g.return,j===null)throw Error(a(341));j.lanes|=o,_=j.alternate,_!==null&&(_.lanes|=o),Zd(j,o,r),j=g.sibling}else j=g.child;if(j!==null)j.return=g;else for(j=g;j!==null;){if(j===r){j=null;break}if(g=j.sibling,g!==null){g.return=j.return,j=g;break}j=j.return}g=j}An(t,r,m.children,o),r=r.child}return r;case 9:return m=r.type,c=r.pendingProps.children,Ua(r,o),m=tr(m),c=c(m),r.flags|=1,An(t,r,c,o),r.child;case 14:return c=r.type,m=mr(c,r.pendingProps),m=mr(c.type,m),Lh(t,r,c,m,o);case 15:return Fh(t,r,r.type,r.pendingProps,o);case 17:return c=r.type,m=r.pendingProps,m=r.elementType===c?m:mr(c,m),Nl(t,r),r.tag=1,Mn(c)?(t=!0,al(r)):t=!1,Ua(r,o),kh(r,c,m),hu(r,c,m,o),vu(null,r,c,!0,t,o);case 19:return Wh(t,r,o);case 22:return $h(t,r,o)}throw Error(a(156,r.tag))};function gg(t,r){return Yf(t,r)}function Ub(t,r,o,c){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(t,r,o,c){return new Ub(t,r,o,c)}function $u(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hb(t){if(typeof t=="function")return $u(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xe)return 11;if(t===F)return 14}return 2}function Is(t,r){var o=t.alternate;return o===null?(o=sr(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function _l(t,r,o,c,m,g){var j=2;if(c=t,typeof t=="function")$u(t)&&(j=1);else if(typeof t=="string")j=5;else e:switch(t){case G:return ca(o.children,m,g,r);case J:j=8,m|=8;break;case ue:return t=sr(12,o,r,m|2),t.elementType=ue,t.lanes=g,t;case me:return t=sr(13,o,r,m),t.elementType=me,t.lanes=g,t;case fe:return t=sr(19,o,r,m),t.elementType=fe,t.lanes=g,t;case te:return Ml(o,m,g,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ge:j=10;break e;case Ee:j=9;break e;case xe:j=11;break e;case F:j=14;break e;case ne:j=16,c=null;break e}throw Error(a(130,t==null?t:typeof t,""))}return r=sr(j,o,r,m),r.elementType=t,r.type=c,r.lanes=g,r}function ca(t,r,o,c){return t=sr(7,t,c,r),t.lanes=o,t}function Ml(t,r,o,c){return t=sr(22,t,c,r),t.elementType=te,t.lanes=o,t.stateNode={isHidden:!1},t}function zu(t,r,o){return t=sr(6,t,null,r),t.lanes=o,t}function Bu(t,r,o){return r=sr(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function Vb(t,r,o,c,m){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pd(0),this.expirationTimes=pd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pd(0),this.identifierPrefix=c,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Uu(t,r,o,c,m,g,j,_,$){return t=new Vb(t,r,o,_,$),r===1?(r=1,g===!0&&(r|=8)):r=0,g=sr(3,null,null,r),t.current=g,g.stateNode=t,g.memoizedState={element:c,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},tu(g),t}function qb(t,r,o){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:c==null?null:""+c,children:t,containerInfo:r,implementation:o}}function xg(t){if(!t)return bs;t=t._reactInternals;e:{if(Wr(t)!==t||t.tag!==1)throw Error(a(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Mn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(a(171))}if(t.tag===1){var o=t.type;if(Mn(o))return qp(t,o,r)}return r}function yg(t,r,o,c,m,g,j,_,$){return t=Uu(o,c,!0,t,m,g,j,_,$),t.context=xg(null),o=t.current,c=In(),m=ks(o),g=Xr(c,m),g.callback=r??null,Cs(o,g,m),t.current.lanes=m,Ni(t,m,c),Fn(t,c),t}function Ol(t,r,o,c){var m=r.current,g=In(),j=ks(m);return o=xg(o),r.context===null?r.context=o:r.pendingContext=o,r=Xr(g,j),r.payload={element:t},c=c===void 0?null:c,c!==null&&(r.callback=c),t=Cs(m,r,j),t!==null&&(hr(t,m,j,g),fl(t,m,j)),j}function Ll(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vg(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function Hu(t,r){vg(t,r),(t=t.alternate)&&vg(t,r)}function Wb(){return null}var wg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vu(t){this._internalRoot=t}Fl.prototype.render=Vu.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(a(409));Ol(t,r,null,null)},Fl.prototype.unmount=Vu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;ia(function(){Ol(null,t,null,null)}),r[Kr]=null}};function Fl(t){this._internalRoot=t}Fl.prototype.unstable_scheduleHydration=function(t){if(t){var r=rp();t={blockedOn:null,target:t,priority:r};for(var o=0;o<xs.length&&r!==0&&r<xs[o].priority;o++);xs.splice(o,0,t),o===0&&ip(t)}};function qu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jg(){}function Kb(t,r,o,c,m){if(m){if(typeof c=="function"){var g=c;c=function(){var oe=Ll(j);g.call(oe)}}var j=yg(r,c,t,0,null,!1,!1,"",jg);return t._reactRootContainer=j,t[Kr]=j.current,Li(t.nodeType===8?t.parentNode:t),ia(),j}for(;m=t.lastChild;)t.removeChild(m);if(typeof c=="function"){var _=c;c=function(){var oe=Ll($);_.call(oe)}}var $=Uu(t,0,!1,null,null,!1,!1,"",jg);return t._reactRootContainer=$,t[Kr]=$.current,Li(t.nodeType===8?t.parentNode:t),ia(function(){Ol(r,$,o,c)}),$}function zl(t,r,o,c,m){var g=o._reactRootContainer;if(g){var j=g;if(typeof m=="function"){var _=m;m=function(){var $=Ll(j);_.call($)}}Ol(r,j,t,m)}else j=Kb(o,r,t,m,c);return Ll(j)}tp=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=bi(r.pendingLanes);o!==0&&(hd(r,o|1),Fn(r,Jt()),(Ct&6)===0&&(Ka=Jt()+500,Ns()))}break;case 13:ia(function(){var c=Qr(t,1);if(c!==null){var m=In();hr(c,t,1,m)}}),Hu(t,1)}},gd=function(t){if(t.tag===13){var r=Qr(t,134217728);if(r!==null){var o=In();hr(r,t,134217728,o)}Hu(t,134217728)}},np=function(t){if(t.tag===13){var r=ks(t),o=Qr(t,r);if(o!==null){var c=In();hr(o,t,r,c)}Hu(t,r)}},rp=function(){return _t},sp=function(t,r){var o=_t;try{return _t=t,r()}finally{_t=o}},Mt=function(t,r,o){switch(r){case"input":if(W(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==t&&c.form===t.form){var m=rl(c);if(!m)throw Error(a(90));Y(c),W(c,m)}}}break;case"textarea":we(t,o);break;case"select":r=o.value,r!=null&&ot(t,!!o.multiple,r,!1)}},Ne=Ou,Ae=ia;var Gb={usingClientEntryPoint:!1,Events:[zi,_a,rl,N,ae,Ou]},eo={findFiberByHostInstance:Xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yb={bundleType:eo.bundleType,version:eo.version,rendererPackageName:eo.rendererPackageName,rendererConfig:eo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Kf(t),t===null?null:t.stateNode},findFiberByHostInstance:eo.findFiberByHostInstance||Wb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{Fo=Bl.inject(Yb),Er=Bl}catch{}}return $n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gb,$n.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qu(r))throw Error(a(200));return qb(t,r,null,o)},$n.createRoot=function(t,r){if(!qu(t))throw Error(a(299));var o=!1,c="",m=wg;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),r=Uu(t,1,!1,null,null,o,!1,c,m),t[Kr]=r.current,Li(t.nodeType===8?t.parentNode:t),new Vu(r)},$n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=Kf(r),t=t===null?null:t.stateNode,t},$n.flushSync=function(t){return ia(t)},$n.hydrate=function(t,r,o){if(!$l(r))throw Error(a(200));return zl(null,t,r,!0,o)},$n.hydrateRoot=function(t,r,o){if(!qu(t))throw Error(a(405));var c=o!=null&&o.hydratedSources||null,m=!1,g="",j=wg;if(o!=null&&(o.unstable_strictMode===!0&&(m=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onRecoverableError!==void 0&&(j=o.onRecoverableError)),r=yg(r,null,t,1,o??null,m,!1,g,j),t[Kr]=r.current,Li(t),c)for(t=0;t<c.length;t++)o=c[t],m=o._getVersion,m=m(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,m]:r.mutableSourceEagerHydrationData.push(o,m);return new Fl(r)},$n.render=function(t,r,o){if(!$l(r))throw Error(a(200));return zl(null,t,r,!1,o)},$n.unmountComponentAtNode=function(t){if(!$l(t))throw Error(a(40));return t._reactRootContainer?(ia(function(){zl(null,null,t,!1,function(){t._reactRootContainer=null,t[Kr]=null})}),!0):!1},$n.unstable_batchedUpdates=Ou,$n.unstable_renderSubtreeIntoContainer=function(t,r,o,c){if(!$l(o))throw Error(a(200));if(t==null||t._reactInternals===void 0)throw Error(a(38));return zl(t,r,o,!1,c)},$n.version="18.3.1-next-f1338f8080-20240426",$n}var kg;function ny(){if(kg)return Gu.exports;kg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(s){console.error(s)}}return n(),Gu.exports=r1(),Gu.exports}var Ag;function s1(){if(Ag)return Ul;Ag=1;var n=ny();return Ul.createRoot=n.createRoot,Ul.hydrateRoot=n.hydrateRoot,Ul}var a1=s1(),p=rf();const ke=ty(p),ry=Qb({__proto__:null,default:ke},[p]),i1="modulepreload",o1=function(n){return"/"+n},Ig={},uo=function(s,a,i){let l=Promise.resolve();if(a&&a.length>0){let u=function(x){return Promise.all(x.map(v=>Promise.resolve(v).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),y=f?.nonce||f?.getAttribute("nonce");l=u(a.map(x=>{if(x=o1(x),x in Ig)return;Ig[x]=!0;const v=x.endsWith(".css"),h=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${h}`))return;const C=document.createElement("link");if(C.rel=v?"stylesheet":i1,v||(C.as="script"),C.crossOrigin="",C.href=x,y&&C.setAttribute("nonce",y),document.head.appendChild(C),v)return new Promise((P,S)=>{C.addEventListener("load",P),C.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${x}`)))})}))}function d(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return l.then(u=>{for(const f of u||[])f.status==="rejected"&&d(f.reason);return s().catch(d)})};function l1(n){const s=n.toLowerCase();return s.includes("admin@")?"admin":(s.includes("cashier@")||s.includes("billing@"),"cashier")}const Rg={"admin@hospital.com":"Dr. Maria Santos","billing.cashier@hospital.com":"Ana Cruz","cashier@hospital.com":"Roberto Dela Cruz","cashier2@hospital.com":"Juan Lopez"};function c1(n){const s=n.toLowerCase();return Rg[s]?Rg[s]:s.split("@")[0].split(".").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" ")}function sf(){const[n,s]=p.useState(null);return{userSession:n,login:d=>{const u=l1(d.email),f=c1(d.email);return s({email:d.email,name:f,role:u,system:d.system}),uo(async()=>{const{toast:y}=await Promise.resolve().then(()=>Zg);return{toast:y}},void 0).then(({toast:y})=>{y.success(`Welcome to ${d.system.toUpperCase()}! Signed in as ${u}.`)}),d.system},logout:()=>{const d=n?.system;return s(null),uo(async()=>{const{toast:u}=await Promise.resolve().then(()=>Zg);return{toast:u}},void 0).then(({toast:u})=>{u.success("Successfully signed out. Redirected to landing page.")}),d},isAuthenticated:!!n}}function d1(){const[n,s]=p.useState("landing");return{currentView:n,setCurrentView:s,navigateToView:(u,f)=>{if(f?.system==="billing"){u==="billing"?s("medicare-billing"):["medicare-billing","invoice","payment","history","discounts","user-management","discount-management","patients-management","archive","calculator","settings"].includes(u)&&s(u);return}else if(f?.system==="pharmacy"){["pharmacy","settings"].includes(u)&&s(u);return}else if(f?.system==="emr"){u==="emr"?s("patients"):["patients","appointments","settings"].includes(u)&&s(u);return}s(u==="billing"?"medicare-billing":u==="emr"?"patients":u)},navigateToSystem:u=>{s(u==="billing"?"medicare-billing":u==="emr"?"patients":u==="pharmacy"?"pharmacy":"dashboard")},navigateToLanding:()=>{s("landing")},navigateToLogin:()=>{s("login")}}}const Hl=(n,s)=>{try{return window.__ENV__?.[n]||s}catch{return s}},Tg={emr:{baseUrl:Hl("EMR_API_URL","https://api.emr-system.hospital.ph"),apiKey:Hl("EMR_API_KEY",""),version:"v1",endpoints:{patients:"/patients",appointments:"/appointments",medicalRecords:"/medical-records",treatments:"/treatments",diagnoses:"/diagnoses"},syncInterval:15,timeout:3e4},pharmacy:{baseUrl:Hl("PHARMACY_API_URL","https://api.pharmacy-system.hospital.ph"),apiKey:Hl("PHARMACY_API_KEY",""),version:"v1",endpoints:{transactions:"/transactions",inventory:"/inventory",prescriptions:"/prescriptions",pricing:"/pricing"},syncInterval:5,timeout:2e4},billing:{currency:"PHP",taxRate:.12,defaultPaymentMethods:["Cash","Credit Card","GCash","PayMaya","Bank Transfer"]}};class u1{config={...Tg};listeners=[];constructor(){this.loadFromStorage()}getConfig(){return{...this.config}}updateEMRConfig(s){this.config.emr={...this.config.emr,...s},this.saveToStorage(),this.notifyListeners()}updatePharmacyConfig(s){this.config.pharmacy={...this.config.pharmacy,...s},this.saveToStorage(),this.notifyListeners()}updateBillingConfig(s){this.config.billing={...this.config.billing,...s},this.saveToStorage(),this.notifyListeners()}resetToDefaults(){this.config={...Tg},this.saveToStorage(),this.notifyListeners()}validateConfig(){const s=[];return this.config.emr.baseUrl?this.isValidUrl(this.config.emr.baseUrl)||s.push("EMR Base URL is not valid"):s.push("EMR Base URL is required"),(!this.config.emr.apiKey||this.config.emr.apiKey==="YOUR_EMR_API_KEY_HERE")&&s.push("EMR API Key is required"),this.config.pharmacy.baseUrl?this.isValidUrl(this.config.pharmacy.baseUrl)||s.push("Pharmacy Base URL is not valid"):s.push("Pharmacy Base URL is required"),(!this.config.pharmacy.apiKey||this.config.pharmacy.apiKey==="YOUR_PHARMACY_API_KEY_HERE")&&s.push("Pharmacy API Key is required"),(this.config.billing.taxRate<0||this.config.billing.taxRate>1)&&s.push("Tax rate must be between 0 and 1"),{valid:s.length===0,errors:s}}async testConfiguration(){const s={emr:{success:!1,error:void 0},pharmacy:{success:!1,error:void 0}};try{const a=`${this.config.emr.baseUrl}/health`,i=await fetch(a,{method:"GET",headers:{Authorization:`Bearer ${this.config.emr.apiKey}`,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.config.emr.timeout)});s.emr.success=i.ok,i.ok||(s.emr.error=`HTTP ${i.status}: ${i.statusText}`)}catch(a){s.emr.error=a instanceof Error?a.message:"Connection failed"}try{const a=`${this.config.pharmacy.baseUrl}/health`,i=await fetch(a,{method:"GET",headers:{Authorization:`Bearer ${this.config.pharmacy.apiKey}`,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.config.pharmacy.timeout)});s.pharmacy.success=i.ok,i.ok||(s.pharmacy.error=`HTTP ${i.status}: ${i.statusText}`)}catch(a){s.pharmacy.error=a instanceof Error?a.message:"Connection failed"}return s}addListener(s){this.listeners.push(s)}removeListener(s){this.listeners=this.listeners.filter(a=>a!==s)}exportConfig(){return JSON.stringify(this.config,null,2)}importConfig(s){try{const a=JSON.parse(s);return this.isValidConfigStructure(a)?(this.config=a,this.saveToStorage(),this.notifyListeners(),{success:!0}):{success:!1,error:"Invalid configuration structure"}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to parse configuration"}}}saveToStorage(){try{localStorage.setItem("hims_integration_config",JSON.stringify(this.config))}catch(s){console.warn("Failed to save configuration to localStorage:",s)}}loadFromStorage(){try{const s=localStorage.getItem("hims_integration_config");if(s){const a=JSON.parse(s);this.isValidConfigStructure(a)&&(this.config=a)}}catch(s){console.warn("Failed to load configuration from localStorage:",s)}}notifyListeners(){this.listeners.forEach(s=>{try{s(this.getConfig())}catch(a){console.error("Error in configuration listener:",a)}})}isValidUrl(s){try{return new URL(s),!0}catch{return!1}}isValidConfigStructure(s){return s&&typeof s=="object"&&s.emr&&s.pharmacy&&s.billing&&typeof s.emr.baseUrl=="string"&&typeof s.emr.apiKey=="string"&&typeof s.pharmacy.baseUrl=="string"&&typeof s.pharmacy.apiKey=="string"&&typeof s.billing.currency=="string"}}const yn=new u1;class m1{get config(){return yn.getConfig().emr}status={connected:!1,lastSync:null,lastError:null,totalSynced:0};async testConnection(){try{const s=await this.makeRequest("/health");return this.status.connected=!0,this.status.lastError=null,!0}catch(s){return this.status.connected=!1,this.status.lastError=`Connection failed: ${s}`,!1}}async getPatients(s=50,a=0){try{const i=[{id:"emr_001",patientId:"P001",firstName:"Maria",lastName:"Santos",dateOfBirth:"1985-03-15",gender:"Female",contactNumber:"+63917123456",email:"maria.santos@email.com",address:"123 Rizal Street, Quezon City, Metro Manila",emergencyContact:{name:"Juan Santos",relationship:"Spouse",phone:"+63917123457"},medicalHistory:["Gastroenteritis","Previous UTI"],allergies:["None"],currentMedications:["Paracetamol 500mg","Amoxicillin 500mg","Mefenamic Acid 500mg"],lastVisit:"2025-01-05",status:"Active"},{id:"emr_002",patientId:"P004",firstName:"Roberto",lastName:"Cruz",dateOfBirth:"1990-06-12",gender:"Male",contactNumber:"+63918234567",email:"roberto.cruz@email.com",address:"456 EDSA, Makati City, Metro Manila",emergencyContact:{name:"Linda Cruz",relationship:"Wife",phone:"+63918234568"},medicalHistory:["Appendicitis"],allergies:["None"],currentMedications:["Ceftriaxone 1g","Metronidazole 500mg","Tramadol 50mg"],lastVisit:"2025-01-02",status:"Active"}];return this.status.lastSync=new Date,this.status.totalSynced+=i.length,i}catch(i){throw this.status.lastError=`Failed to fetch patients: ${i}`,i}}async getAppointments(s,a,i){try{const l=[{id:"appt_001",patientId:"P001",doctorId:"DOC-001",doctorName:"Dr. Juan Reyes",department:"Internal Medicine",appointmentDate:"2025-01-03",appointmentTime:"10:00",duration:30,type:"Consultation",status:"Completed",notes:"Initial assessment for abdominal pain",cost:1500},{id:"appt_002",patientId:"P004",doctorId:"DOC-002",doctorName:"Dr. Pedro Gonzales",department:"Surgery",appointmentDate:"2024-12-31",appointmentTime:"14:00",duration:120,type:"Surgery",status:"Completed",notes:"Emergency appendectomy",cost:5e4}];return s?l.filter(d=>d.patientId===s):l}catch(l){throw this.status.lastError=`Failed to fetch appointments: ${l}`,l}}async getTreatments(s,a=!1){try{let l=[{id:"treat_001",patientId:"P001",appointmentId:"appt_001",treatmentDate:"2025-01-03",diagnosis:"Acute Gastroenteritis (K52.9)",treatment:"Pain management and antibiotic therapy",medications:[{name:"Paracetamol 500mg",dosage:"500mg",frequency:"Every 6 hours",duration:"7 days",cost:50},{name:"Amoxicillin 500mg",dosage:"500mg",frequency:"Three times daily",duration:"7 days",cost:178.5},{name:"Mefenamic Acid 500mg",dosage:"500mg",frequency:"Three times daily",duration:"5 days",cost:50}],procedures:[{name:"Complete Blood Count",code:"85025",cost:400},{name:"Abdominal Ultrasound",code:"76700",cost:2500}],doctorNotes:"Patient diagnosed with gastroenteritis. Prescribed antibiotics and pain management. Follow-up in 1 week.",totalCost:4678.5,billable:!0}];return s&&(l=l.filter(d=>d.patientId===s)),a&&(l=l.filter(d=>d.billable)),l}catch(i){throw this.status.lastError=`Failed to fetch treatments: ${i}`,i}}async markTreatmentAsBilled(s,a){try{return console.log(`Marking treatment ${s} as billed with invoice ${a}`),!0}catch(i){return this.status.lastError=`Failed to mark treatment as billed: ${i}`,!1}}getStatus(){return this.status}async makeRequest(s,a={}){const i=`${this.config.baseUrl}${this.config.endpoints.patients||s}`,l={headers:{Authorization:`Bearer ${this.config.apiKey}`,"Content-Type":"application/json",Accept:"application/json"},timeout:this.config.timeout},d=await fetch(i,{...l,...a});if(!d.ok)throw new Error(`EMR API Error: ${d.status} ${d.statusText}`);return d.json()}async syncData(){try{if(console.log("Starting EMR data synchronization..."),!await this.testConnection())throw new Error("Cannot connect to EMR system");await this.getPatients(),await this.getAppointments(),await this.getTreatments(),console.log("EMR data synchronization completed successfully")}catch(s){throw console.error("EMR synchronization failed:",s),this.status.lastError=`Sync failed: ${s}`,s}}}const xr=new m1;class f1{get config(){return yn.getConfig().pharmacy}status={connected:!1,lastSync:null,lastError:null,totalSynced:0};async testConnection(){try{const s=await this.makeRequest("/health");return this.status.connected=!0,this.status.lastError=null,!0}catch(s){return this.status.connected=!1,this.status.lastError=`Connection failed: ${s}`,!1}}async getTransactions(s,a,i,l=!1){try{let u=[{id:"pharm_001",transactionId:"PH-TXN-2025-001",patientId:"P001",patientName:"Maria Santos",pharmacyId:"PHARM-001",pharmacyName:"MedPlus Pharmacy",pharmacyAddress:"Ground Floor, Medical Center Building, Quezon City",transactionDate:"2025-01-04",transactionTime:"15:30",prescriptionId:"RX-2025-001",doctorId:"DOC-001",doctorName:"Dr. Juan Reyes",items:[{id:"item_001",medicationId:"MED-001",medicationName:"Paracetamol",genericName:"Paracetamol",brand:"Biogesic",strength:"500mg",dosageForm:"Tablet",quantity:20,unitPrice:2.5,totalPrice:50,prescriptionRequired:!1,batchNumber:"PC250104",expiryDate:"2026-12-31"},{id:"item_002",medicationId:"MED-002",medicationName:"Amoxicillin",genericName:"Amoxicillin",brand:"Amoxil",strength:"500mg",dosageForm:"Capsule",quantity:21,unitPrice:8.5,totalPrice:178.5,prescriptionRequired:!0,batchNumber:"AMX250104",expiryDate:"2026-11-30"},{id:"item_003",medicationId:"MED-003",medicationName:"Mefenamic Acid",genericName:"Mefenamic Acid",brand:"Dolfenal",strength:"500mg",dosageForm:"Capsule",quantity:10,unitPrice:5,totalPrice:50,prescriptionRequired:!1,batchNumber:"MF250104",expiryDate:"2026-10-31"}],subtotal:278.5,tax:33.42,discount:0,totalAmount:311.92,paymentMethod:"Cash",paymentStatus:"Paid",syncStatus:"Synced",syncedAt:"2025-01-04T15:45:00Z",notes:"Pain medication and antibiotics for abdominal pain treatment"},{id:"pharm_002",transactionId:"PH-TXN-2025-002",patientId:"P004",patientName:"Roberto Cruz",pharmacyId:"PHARM-001",pharmacyName:"MedPlus Pharmacy",pharmacyAddress:"Ground Floor, Medical Center Building, Quezon City",transactionDate:"2025-01-01",transactionTime:"11:15",prescriptionId:"RX-2025-002",doctorId:"DOC-002",doctorName:"Dr. Pedro Gonzales",items:[{id:"item_004",medicationId:"MED-004",medicationName:"Ceftriaxone Sodium",genericName:"Ceftriaxone",brand:"Rocephin",strength:"1g",dosageForm:"Injectable",quantity:6,unitPrice:95,totalPrice:570,prescriptionRequired:!0,batchNumber:"CFT250101",expiryDate:"2026-12-31"},{id:"item_005",medicationId:"MED-005",medicationName:"Metronidazole",genericName:"Metronidazole",brand:"Flagyl",strength:"500mg",dosageForm:"Tablet",quantity:21,unitPrice:6.5,totalPrice:136.5,prescriptionRequired:!0,batchNumber:"MTZ250101",expiryDate:"2026-11-30"},{id:"item_006",medicationId:"MED-006",medicationName:"Tramadol Hydrochloride",genericName:"Tramadol",brand:"Tramal",strength:"50mg",dosageForm:"Capsule",quantity:20,unitPrice:12,totalPrice:240,prescriptionRequired:!0,batchNumber:"TRM250101",expiryDate:"2026-09-30"}],subtotal:946.5,tax:113.58,discount:0,totalAmount:1060.08,paymentMethod:"PhilHealth",paymentStatus:"Paid",syncStatus:"Synced",syncedAt:"2025-01-01T11:30:00Z",notes:"Post-operative medications for appendectomy"},{id:"pharm_003",transactionId:"PH-TXN-2025-003",patientId:"P007",patientName:"Sofia Garcia",pharmacyId:"PHARM-001",pharmacyName:"MedPlus Pharmacy",pharmacyAddress:"Ground Floor, Medical Center Building, Quezon City",transactionDate:"2025-01-03",transactionTime:"09:45",prescriptionId:"RX-2025-003",doctorId:"DOC-003",doctorName:"Dr. Carlos Mendoza",items:[{id:"item_007",medicationId:"MED-007",medicationName:"Omeprazole",genericName:"Omeprazole",brand:"Losec",strength:"20mg",dosageForm:"Capsule",quantity:30,unitPrice:8,totalPrice:240,prescriptionRequired:!0,batchNumber:"OMP250103",expiryDate:"2026-12-31"},{id:"item_008",medicationId:"MED-008",medicationName:"Ondansetron",genericName:"Ondansetron",brand:"Zofran",strength:"4mg",dosageForm:"Tablet",quantity:10,unitPrice:25,totalPrice:250,prescriptionRequired:!0,batchNumber:"OND250103",expiryDate:"2026-10-31"}],subtotal:490,tax:58.8,discount:0,totalAmount:548.8,paymentMethod:"GCash",paymentStatus:"Paid",syncStatus:"Synced",syncedAt:"2025-01-03T10:00:00Z",notes:"Post-operative medications for gallbladder surgery"}];return s&&(u=u.filter(f=>f.patientId===s)),a&&(u=u.filter(f=>f.transactionDate>=a)),i&&(u=u.filter(f=>f.transactionDate<=i)),l&&(u=u.filter(f=>f.syncStatus==="Pending")),this.status.lastSync=new Date,this.status.totalSynced+=u.length,u}catch(d){throw this.status.lastError=`Failed to fetch transactions: ${d}`,d}}async getInventory(s){try{const a=[{id:"inv_001",medicationId:"MED-001",medicationName:"Paracetamol",genericName:"Paracetamol",brand:"Biogesic",strength:"500mg",dosageForm:"Tablet",unitPrice:2.5,stockQuantity:500,reorderLevel:100,status:"In Stock",lastUpdated:"2025-01-08T08:00:00Z"},{id:"inv_002",medicationId:"MED-002",medicationName:"Amoxicillin",genericName:"Amoxicillin",brand:"Amoxil",strength:"500mg",dosageForm:"Capsule",unitPrice:8.5,stockQuantity:25,reorderLevel:30,status:"Low Stock",lastUpdated:"2025-01-08T08:00:00Z"}];return s?a.filter(i=>i.medicationId===s):a}catch(a){throw this.status.lastError=`Failed to fetch inventory: ${a}`,a}}async getPrescriptions(s,a){try{let l=[{id:"presc_001",prescriptionId:"RX-2025-001",patientId:"P001",doctorId:"DOC-001",prescriptionDate:"2025-01-04",medications:[{medicationId:"MED-001",medicationName:"Paracetamol 500mg",dosage:"500mg",frequency:"Every 6 hours as needed",duration:"7 days",quantity:20,instructions:"Take with food for pain relief"},{medicationId:"MED-002",medicationName:"Amoxicillin 500mg",dosage:"500mg",frequency:"Three times daily",duration:"7 days",quantity:21,instructions:"Complete the full course"}],status:"Filled",filledAt:"2025-01-04T15:30:00Z",filledBy:"PharmTech-001"}];return s&&(l=l.filter(d=>d.patientId===s)),a&&(l=l.filter(d=>d.status===a)),l}catch(i){throw this.status.lastError=`Failed to fetch prescriptions: ${i}`,i}}async markTransactionAsSynced(s){try{return console.log(`Marking pharmacy transaction ${s} as synced`),!0}catch(a){return this.status.lastError=`Failed to mark transaction as synced: ${a}`,!1}}async createBillingEntry(s){try{const a={patientId:s.patientId,serviceType:"Pharmacy",description:`Pharmacy Purchase - ${s.pharmacyName}`,items:s.items.map(i=>({description:`${i.medicationName} (${i.strength}) x${i.quantity}`,quantity:i.quantity,unitPrice:i.unitPrice,amount:i.totalPrice})),subtotal:s.subtotal,tax:s.tax,discount:s.discount,total:s.totalAmount,paymentMethod:s.paymentMethod,paymentStatus:s.paymentStatus,externalReference:s.transactionId,notes:s.notes};return console.log("Creating billing entry for pharmacy transaction:",a),!0}catch(a){return this.status.lastError=`Failed to create billing entry: ${a}`,!1}}getStatus(){return this.status}async makeRequest(s,a={}){const i=`${this.config.baseUrl}${this.config.endpoints.transactions||s}`,l={headers:{Authorization:`Bearer ${this.config.apiKey}`,"Content-Type":"application/json",Accept:"application/json"},timeout:this.config.timeout},d=await fetch(i,{...l,...a});if(!d.ok)throw new Error(`Pharmacy API Error: ${d.status} ${d.statusText}`);return d.json()}async syncData(){try{if(console.log("Starting pharmacy data synchronization..."),!await this.testConnection())throw new Error("Cannot connect to pharmacy system");const a=await this.getTransactions(void 0,void 0,void 0,!0);for(const i of a)try{await this.createBillingEntry(i)&&await this.markTransactionAsSynced(i.id)}catch(l){console.error(`Failed to sync transaction ${i.id}:`,l)}console.log(`Pharmacy data synchronization completed. Synced ${a.length} transactions`)}catch(s){throw console.error("Pharmacy synchronization failed:",s),this.status.lastError=`Sync failed: ${s}`,s}}}const yr=new f1;class p1{eventListeners={};syncIntervals={};isRunning=!1;async start(){try{console.log("Starting Integration Manager..."),this.isRunning=!0;const s=await xr.testConnection(),a=await yr.testConnection();console.log(`EMR Connection: ${s?"Success":"Failed"}`),console.log(`Pharmacy Connection: ${a?"Success":"Failed"}`),s&&this.startPeriodicEMRSync(),a&&this.startPeriodicPharmacySync(),console.log("Integration Manager started successfully")}catch(s){throw console.error("Failed to start Integration Manager:",s),s}}stop(){console.log("Stopping Integration Manager..."),this.isRunning=!1,Object.values(this.syncIntervals).forEach(s=>{clearInterval(s)}),this.syncIntervals={},console.log("Integration Manager stopped")}startPeriodicEMRSync(){const s=yn.getConfig(),a=setInterval(async()=>{if(this.isRunning)try{this.emitEvent("emr_sync_started",{}),await xr.syncData(),this.emitEvent("emr_sync_completed",{})}catch(i){this.emitEvent("emr_sync_failed",{error:i.toString()})}},s.emr.syncInterval*60*1e3);this.syncIntervals.emr=a}startPeriodicPharmacySync(){const s=yn.getConfig(),a=setInterval(async()=>{if(this.isRunning)try{this.emitEvent("pharmacy_sync_started",{}),await yr.syncData(),this.emitEvent("pharmacy_sync_completed",{})}catch(i){this.emitEvent("pharmacy_sync_failed",{error:i.toString()})}},s.pharmacy.syncInterval*60*1e3);this.syncIntervals.pharmacy=a}async syncEMRData(){this.emitEvent("emr_sync_started",{});try{await xr.syncData(),this.emitEvent("emr_sync_completed",{})}catch(s){throw this.emitEvent("emr_sync_failed",{error:s.toString()}),s}}async syncPharmacyData(){this.emitEvent("pharmacy_sync_started",{});try{await yr.syncData(),this.emitEvent("pharmacy_sync_completed",{})}catch(s){throw this.emitEvent("pharmacy_sync_failed",{error:s.toString()}),s}}async getPatientData(s){try{const[a,i,l,d]=await Promise.all([xr.getPatients(),xr.getAppointments(s),xr.getTreatments(s),yr.getTransactions(s)]);return{patient:a.find(f=>f.patientId===s)||null,appointments:i,treatments:l,pharmacyTransactions:d}}catch(a){throw console.error("Failed to get integrated patient data:",a),a}}async getUnbilledItems(s){try{const[a,i]=await Promise.all([xr.getTreatments(s,!0),yr.getTransactions(s,void 0,void 0,!0)]);return{treatments:a,pharmacyTransactions:i}}catch(a){throw console.error("Failed to get unbilled items:",a),a}}async createIntegratedInvoice(s,a=!0){try{const{patient:i,treatments:l,pharmacyTransactions:d}=await this.getUnbilledItems(s);if(!i)throw new Error("Patient not found");const u=l.map(x=>({type:"treatment",id:x.id,description:x.diagnosis,date:x.treatmentDate,doctor:x.id,items:[...x.medications.map(v=>({description:`${v.name} - ${v.dosage}`,quantity:1,unitPrice:v.cost,amount:v.cost})),...x.procedures.map(v=>({description:`${v.name} (${v.code})`,quantity:1,unitPrice:v.cost,amount:v.cost}))],subtotal:x.totalCost})),f=a?d.map(x=>({type:"pharmacy",id:x.id,description:`Pharmacy Purchase - ${x.pharmacyName}`,date:x.transactionDate,items:x.items.map(v=>({description:`${v.medicationName} (${v.strength}) x${v.quantity}`,quantity:v.quantity,unitPrice:v.unitPrice,amount:v.totalPrice})),subtotal:x.subtotal,tax:x.tax})):[],y={patientId:i.patientId,patientName:`${i.firstName} ${i.lastName}`,treatmentItems:u,pharmacyItems:f,totalTreatments:u.reduce((x,v)=>x+v.subtotal,0),totalPharmacy:f.reduce((x,v)=>x+v.subtotal,0),totalTax:f.reduce((x,v)=>x+(v.tax||0),0)};return y.grandTotal=y.totalTreatments+y.totalPharmacy+y.totalTax,{invoiceData:y,success:!0}}catch(i){return console.error("Failed to create integrated invoice:",i),{invoiceData:null,success:!1}}}getIntegrationStatus(){return{emr:xr.getStatus(),pharmacy:yr.getStatus()}}addEventListener(s,a){this.eventListeners[s]||(this.eventListeners[s]=[]),this.eventListeners[s].push(a)}removeEventListener(s,a){this.eventListeners[s]&&(this.eventListeners[s]=this.eventListeners[s].filter(i=>i!==a))}emitEvent(s,a){const i={event:s,timestamp:new Date,data:a};this.eventListeners[s]&&this.eventListeners[s].forEach(l=>{try{l(i)}catch(d){console.error("Error in event listener:",d)}})}isConnected(){const s=this.getIntegrationStatus();return s.emr.connected||s.pharmacy.connected}getLastSyncTimes(){const s=this.getIntegrationStatus();return{emr:s.emr.lastSync,pharmacy:s.pharmacy.lastSync}}getConnectionErrors(){const s=this.getIntegrationStatus();return{emr:s.emr.lastError,pharmacy:s.pharmacy.lastError}}}const Wt=new p1;class _g{static async initialize(){try{await Wt.start(),console.log("Integration services initialized successfully")}catch(s){throw console.error("Failed to initialize integration services:",s),s}}static cleanup(){Wt.stop()}}function sy(n){var s,a,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var l=n.length;for(s=0;s<l;s++)n[s]&&(a=sy(n[s]))&&(i&&(i+=" "),i+=a)}else for(a in n)n[a]&&(i&&(i+=" "),i+=a);return i}function ay(){for(var n,s,a=0,i="",l=arguments.length;a<l;a++)(n=arguments[a])&&(s=sy(n))&&(i&&(i+=" "),i+=s);return i}const af="-",h1=n=>{const s=x1(n),{conflictingClassGroups:a,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:u=>{const f=u.split(af);return f[0]===""&&f.length!==1&&f.shift(),iy(f,s)||g1(u)},getConflictingClassGroupIds:(u,f)=>{const y=a[u]||[];return f&&i[u]?[...y,...i[u]]:y}}},iy=(n,s)=>{if(n.length===0)return s.classGroupId;const a=n[0],i=s.nextPart.get(a),l=i?iy(n.slice(1),i):void 0;if(l)return l;if(s.validators.length===0)return;const d=n.join(af);return s.validators.find(({validator:u})=>u(d))?.classGroupId},Mg=/^\[(.+)\]$/,g1=n=>{if(Mg.test(n)){const s=Mg.exec(n)[1],a=s?.substring(0,s.indexOf(":"));if(a)return"arbitrary.."+a}},x1=n=>{const{theme:s,classGroups:a}=n,i={nextPart:new Map,validators:[]};for(const l in a)bm(a[l],i,l,s);return i},bm=(n,s,a,i)=>{n.forEach(l=>{if(typeof l=="string"){const d=l===""?s:Og(s,l);d.classGroupId=a;return}if(typeof l=="function"){if(y1(l)){bm(l(i),s,a,i);return}s.validators.push({validator:l,classGroupId:a});return}Object.entries(l).forEach(([d,u])=>{bm(u,Og(s,d),a,i)})})},Og=(n,s)=>{let a=n;return s.split(af).forEach(i=>{a.nextPart.has(i)||a.nextPart.set(i,{nextPart:new Map,validators:[]}),a=a.nextPart.get(i)}),a},y1=n=>n.isThemeGetter,v1=n=>{if(n<1)return{get:()=>{},set:()=>{}};let s=0,a=new Map,i=new Map;const l=(d,u)=>{a.set(d,u),s++,s>n&&(s=0,i=a,a=new Map)};return{get(d){let u=a.get(d);if(u!==void 0)return u;if((u=i.get(d))!==void 0)return l(d,u),u},set(d,u){a.has(d)?a.set(d,u):l(d,u)}}},Nm="!",Sm=":",w1=Sm.length,j1=n=>{const{prefix:s,experimentalParseClassName:a}=n;let i=l=>{const d=[];let u=0,f=0,y=0,x;for(let S=0;S<l.length;S++){let w=l[S];if(u===0&&f===0){if(w===Sm){d.push(l.slice(y,S)),y=S+w1;continue}if(w==="/"){x=S;continue}}w==="["?u++:w==="]"?u--:w==="("?f++:w===")"&&f--}const v=d.length===0?l:l.substring(y),h=b1(v),C=h!==v,P=x&&x>y?x-y:void 0;return{modifiers:d,hasImportantModifier:C,baseClassName:h,maybePostfixModifierPosition:P}};if(s){const l=s+Sm,d=i;i=u=>u.startsWith(l)?d(u.substring(l.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:u,maybePostfixModifierPosition:void 0}}if(a){const l=i;i=d=>a({className:d,parseClassName:l})}return i},b1=n=>n.endsWith(Nm)?n.substring(0,n.length-1):n.startsWith(Nm)?n.substring(1):n,N1=n=>{const s=Object.fromEntries(n.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const l=[];let d=[];return i.forEach(u=>{u[0]==="["||s[u]?(l.push(...d.sort(),u),d=[]):d.push(u)}),l.push(...d.sort()),l}},S1=n=>({cache:v1(n.cacheSize),parseClassName:j1(n),sortModifiers:N1(n),...h1(n)}),C1=/\s+/,P1=(n,s)=>{const{parseClassName:a,getClassGroupId:i,getConflictingClassGroupIds:l,sortModifiers:d}=s,u=[],f=n.trim().split(C1);let y="";for(let x=f.length-1;x>=0;x-=1){const v=f[x],{isExternal:h,modifiers:C,hasImportantModifier:P,baseClassName:S,maybePostfixModifierPosition:w}=a(v);if(h){y=v+(y.length>0?" "+y:y);continue}let b=!!w,E=i(b?S.substring(0,w):S);if(!E){if(!b){y=v+(y.length>0?" "+y:y);continue}if(E=i(S),!E){y=v+(y.length>0?" "+y:y);continue}b=!1}const T=d(C).join(":"),z=P?T+Nm:T,B=z+E;if(u.includes(B))continue;u.push(B);const Q=l(E,b);for(let X=0;X<Q.length;++X){const G=Q[X];u.push(z+G)}y=v+(y.length>0?" "+y:y)}return y};function E1(){let n=0,s,a,i="";for(;n<arguments.length;)(s=arguments[n++])&&(a=oy(s))&&(i&&(i+=" "),i+=a);return i}const oy=n=>{if(typeof n=="string")return n;let s,a="";for(let i=0;i<n.length;i++)n[i]&&(s=oy(n[i]))&&(a&&(a+=" "),a+=s);return a};function D1(n,...s){let a,i,l,d=u;function u(y){const x=s.reduce((v,h)=>h(v),n());return a=S1(x),i=a.cache.get,l=a.cache.set,d=f,f(y)}function f(y){const x=i(y);if(x)return x;const v=P1(y,a);return l(y,v),v}return function(){return d(E1.apply(null,arguments))}}const cn=n=>{const s=a=>a[n]||[];return s.isThemeGetter=!0,s},ly=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,cy=/^\((?:(\w[\w-]*):)?(.+)\)$/i,k1=/^\d+\/\d+$/,A1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,I1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,R1=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,T1=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_1=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ya=n=>k1.test(n),wt=n=>!!n&&!Number.isNaN(Number(n)),Ts=n=>!!n&&Number.isInteger(Number(n)),Qu=n=>n.endsWith("%")&&wt(n.slice(0,-1)),ts=n=>A1.test(n),M1=()=>!0,O1=n=>I1.test(n)&&!R1.test(n),dy=()=>!1,L1=n=>T1.test(n),F1=n=>_1.test(n),$1=n=>!Qe(n)&&!Xe(n),z1=n=>mi(n,fy,dy),Qe=n=>ly.test(n),da=n=>mi(n,py,O1),Xu=n=>mi(n,q1,wt),Lg=n=>mi(n,uy,dy),B1=n=>mi(n,my,F1),Vl=n=>mi(n,hy,L1),Xe=n=>cy.test(n),no=n=>fi(n,py),U1=n=>fi(n,W1),Fg=n=>fi(n,uy),H1=n=>fi(n,fy),V1=n=>fi(n,my),ql=n=>fi(n,hy,!0),mi=(n,s,a)=>{const i=ly.exec(n);return i?i[1]?s(i[1]):a(i[2]):!1},fi=(n,s,a=!1)=>{const i=cy.exec(n);return i?i[1]?s(i[1]):a:!1},uy=n=>n==="position"||n==="percentage",my=n=>n==="image"||n==="url",fy=n=>n==="length"||n==="size"||n==="bg-size",py=n=>n==="length",q1=n=>n==="number",W1=n=>n==="family-name",hy=n=>n==="shadow",K1=()=>{const n=cn("color"),s=cn("font"),a=cn("text"),i=cn("font-weight"),l=cn("tracking"),d=cn("leading"),u=cn("breakpoint"),f=cn("container"),y=cn("spacing"),x=cn("radius"),v=cn("shadow"),h=cn("inset-shadow"),C=cn("text-shadow"),P=cn("drop-shadow"),S=cn("blur"),w=cn("perspective"),b=cn("aspect"),E=cn("ease"),T=cn("animate"),z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Q=()=>[...B(),Xe,Qe],X=()=>["auto","hidden","clip","visible","scroll"],G=()=>["auto","contain","none"],J=()=>[Xe,Qe,y],ue=()=>[Ya,"full","auto",...J()],ge=()=>[Ts,"none","subgrid",Xe,Qe],Ee=()=>["auto",{span:["full",Ts,Xe,Qe]},Ts,Xe,Qe],xe=()=>[Ts,"auto",Xe,Qe],me=()=>["auto","min","max","fr",Xe,Qe],fe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],F=()=>["start","end","center","stretch","center-safe","end-safe"],ne=()=>["auto",...J()],te=()=>[Ya,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...J()],D=()=>[n,Xe,Qe],L=()=>[...B(),Fg,Lg,{position:[Xe,Qe]}],ce=()=>["no-repeat",{repeat:["","x","y","space","round"]}],A=()=>["auto","cover","contain",H1,z1,{size:[Xe,Qe]}],R=()=>[Qu,no,da],H=()=>["","none","full",x,Xe,Qe],M=()=>["",wt,no,da],ee=()=>["solid","dashed","dotted","double"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>[wt,Qu,Fg,Lg],le=()=>["","none",S,Xe,Qe],he=()=>["none",wt,Xe,Qe],ve=()=>["none",wt,Xe,Qe],k=()=>[wt,Xe,Qe],Y=()=>[Ya,"full",...J()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ts],breakpoint:[ts],color:[M1],container:[ts],"drop-shadow":[ts],ease:["in","out","in-out"],font:[$1],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ts],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ts],shadow:[ts],spacing:["px",wt],text:[ts],"text-shadow":[ts],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ya,Qe,Xe,b]}],container:["container"],columns:[{columns:[wt,Qe,Xe,f]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Q()}],overflow:[{overflow:X()}],"overflow-x":[{"overflow-x":X()}],"overflow-y":[{"overflow-y":X()}],overscroll:[{overscroll:G()}],"overscroll-x":[{"overscroll-x":G()}],"overscroll-y":[{"overscroll-y":G()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:ue()}],"inset-x":[{"inset-x":ue()}],"inset-y":[{"inset-y":ue()}],start:[{start:ue()}],end:[{end:ue()}],top:[{top:ue()}],right:[{right:ue()}],bottom:[{bottom:ue()}],left:[{left:ue()}],visibility:["visible","invisible","collapse"],z:[{z:[Ts,"auto",Xe,Qe]}],basis:[{basis:[Ya,"full","auto",f,...J()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[wt,Ya,"auto","initial","none",Qe]}],grow:[{grow:["",wt,Xe,Qe]}],shrink:[{shrink:["",wt,Xe,Qe]}],order:[{order:[Ts,"first","last","none",Xe,Qe]}],"grid-cols":[{"grid-cols":ge()}],"col-start-end":[{col:Ee()}],"col-start":[{"col-start":xe()}],"col-end":[{"col-end":xe()}],"grid-rows":[{"grid-rows":ge()}],"row-start-end":[{row:Ee()}],"row-start":[{"row-start":xe()}],"row-end":[{"row-end":xe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":me()}],"auto-rows":[{"auto-rows":me()}],gap:[{gap:J()}],"gap-x":[{"gap-x":J()}],"gap-y":[{"gap-y":J()}],"justify-content":[{justify:[...fe(),"normal"]}],"justify-items":[{"justify-items":[...F(),"normal"]}],"justify-self":[{"justify-self":["auto",...F()]}],"align-content":[{content:["normal",...fe()]}],"align-items":[{items:[...F(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...F(),{baseline:["","last"]}]}],"place-content":[{"place-content":fe()}],"place-items":[{"place-items":[...F(),"baseline"]}],"place-self":[{"place-self":["auto",...F()]}],p:[{p:J()}],px:[{px:J()}],py:[{py:J()}],ps:[{ps:J()}],pe:[{pe:J()}],pt:[{pt:J()}],pr:[{pr:J()}],pb:[{pb:J()}],pl:[{pl:J()}],m:[{m:ne()}],mx:[{mx:ne()}],my:[{my:ne()}],ms:[{ms:ne()}],me:[{me:ne()}],mt:[{mt:ne()}],mr:[{mr:ne()}],mb:[{mb:ne()}],ml:[{ml:ne()}],"space-x":[{"space-x":J()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":J()}],"space-y-reverse":["space-y-reverse"],size:[{size:te()}],w:[{w:[f,"screen",...te()]}],"min-w":[{"min-w":[f,"screen","none",...te()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[u]},...te()]}],h:[{h:["screen","lh",...te()]}],"min-h":[{"min-h":["screen","lh","none",...te()]}],"max-h":[{"max-h":["screen","lh",...te()]}],"font-size":[{text:["base",a,no,da]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,Xe,Xu]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Qu,Qe]}],"font-family":[{font:[U1,Qe,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[l,Xe,Qe]}],"line-clamp":[{"line-clamp":[wt,"none",Xe,Xu]}],leading:[{leading:[d,...J()]}],"list-image":[{"list-image":["none",Xe,Qe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Xe,Qe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:D()}],"text-color":[{text:D()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:[wt,"from-font","auto",Xe,da]}],"text-decoration-color":[{decoration:D()}],"underline-offset":[{"underline-offset":[wt,"auto",Xe,Qe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:J()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Xe,Qe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Xe,Qe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:L()}],"bg-repeat":[{bg:ce()}],"bg-size":[{bg:A()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ts,Xe,Qe],radial:["",Xe,Qe],conic:[Ts,Xe,Qe]},V1,B1]}],"bg-color":[{bg:D()}],"gradient-from-pos":[{from:R()}],"gradient-via-pos":[{via:R()}],"gradient-to-pos":[{to:R()}],"gradient-from":[{from:D()}],"gradient-via":[{via:D()}],"gradient-to":[{to:D()}],rounded:[{rounded:H()}],"rounded-s":[{"rounded-s":H()}],"rounded-e":[{"rounded-e":H()}],"rounded-t":[{"rounded-t":H()}],"rounded-r":[{"rounded-r":H()}],"rounded-b":[{"rounded-b":H()}],"rounded-l":[{"rounded-l":H()}],"rounded-ss":[{"rounded-ss":H()}],"rounded-se":[{"rounded-se":H()}],"rounded-ee":[{"rounded-ee":H()}],"rounded-es":[{"rounded-es":H()}],"rounded-tl":[{"rounded-tl":H()}],"rounded-tr":[{"rounded-tr":H()}],"rounded-br":[{"rounded-br":H()}],"rounded-bl":[{"rounded-bl":H()}],"border-w":[{border:M()}],"border-w-x":[{"border-x":M()}],"border-w-y":[{"border-y":M()}],"border-w-s":[{"border-s":M()}],"border-w-e":[{"border-e":M()}],"border-w-t":[{"border-t":M()}],"border-w-r":[{"border-r":M()}],"border-w-b":[{"border-b":M()}],"border-w-l":[{"border-l":M()}],"divide-x":[{"divide-x":M()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":M()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ee(),"hidden","none"]}],"divide-style":[{divide:[...ee(),"hidden","none"]}],"border-color":[{border:D()}],"border-color-x":[{"border-x":D()}],"border-color-y":[{"border-y":D()}],"border-color-s":[{"border-s":D()}],"border-color-e":[{"border-e":D()}],"border-color-t":[{"border-t":D()}],"border-color-r":[{"border-r":D()}],"border-color-b":[{"border-b":D()}],"border-color-l":[{"border-l":D()}],"divide-color":[{divide:D()}],"outline-style":[{outline:[...ee(),"none","hidden"]}],"outline-offset":[{"outline-offset":[wt,Xe,Qe]}],"outline-w":[{outline:["",wt,no,da]}],"outline-color":[{outline:D()}],shadow:[{shadow:["","none",v,ql,Vl]}],"shadow-color":[{shadow:D()}],"inset-shadow":[{"inset-shadow":["none",h,ql,Vl]}],"inset-shadow-color":[{"inset-shadow":D()}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:D()}],"ring-offset-w":[{"ring-offset":[wt,da]}],"ring-offset-color":[{"ring-offset":D()}],"inset-ring-w":[{"inset-ring":M()}],"inset-ring-color":[{"inset-ring":D()}],"text-shadow":[{"text-shadow":["none",C,ql,Vl]}],"text-shadow-color":[{"text-shadow":D()}],opacity:[{opacity:[wt,Xe,Qe]}],"mix-blend":[{"mix-blend":[...U(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":U()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[wt]}],"mask-image-linear-from-pos":[{"mask-linear-from":q()}],"mask-image-linear-to-pos":[{"mask-linear-to":q()}],"mask-image-linear-from-color":[{"mask-linear-from":D()}],"mask-image-linear-to-color":[{"mask-linear-to":D()}],"mask-image-t-from-pos":[{"mask-t-from":q()}],"mask-image-t-to-pos":[{"mask-t-to":q()}],"mask-image-t-from-color":[{"mask-t-from":D()}],"mask-image-t-to-color":[{"mask-t-to":D()}],"mask-image-r-from-pos":[{"mask-r-from":q()}],"mask-image-r-to-pos":[{"mask-r-to":q()}],"mask-image-r-from-color":[{"mask-r-from":D()}],"mask-image-r-to-color":[{"mask-r-to":D()}],"mask-image-b-from-pos":[{"mask-b-from":q()}],"mask-image-b-to-pos":[{"mask-b-to":q()}],"mask-image-b-from-color":[{"mask-b-from":D()}],"mask-image-b-to-color":[{"mask-b-to":D()}],"mask-image-l-from-pos":[{"mask-l-from":q()}],"mask-image-l-to-pos":[{"mask-l-to":q()}],"mask-image-l-from-color":[{"mask-l-from":D()}],"mask-image-l-to-color":[{"mask-l-to":D()}],"mask-image-x-from-pos":[{"mask-x-from":q()}],"mask-image-x-to-pos":[{"mask-x-to":q()}],"mask-image-x-from-color":[{"mask-x-from":D()}],"mask-image-x-to-color":[{"mask-x-to":D()}],"mask-image-y-from-pos":[{"mask-y-from":q()}],"mask-image-y-to-pos":[{"mask-y-to":q()}],"mask-image-y-from-color":[{"mask-y-from":D()}],"mask-image-y-to-color":[{"mask-y-to":D()}],"mask-image-radial":[{"mask-radial":[Xe,Qe]}],"mask-image-radial-from-pos":[{"mask-radial-from":q()}],"mask-image-radial-to-pos":[{"mask-radial-to":q()}],"mask-image-radial-from-color":[{"mask-radial-from":D()}],"mask-image-radial-to-color":[{"mask-radial-to":D()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":B()}],"mask-image-conic-pos":[{"mask-conic":[wt]}],"mask-image-conic-from-pos":[{"mask-conic-from":q()}],"mask-image-conic-to-pos":[{"mask-conic-to":q()}],"mask-image-conic-from-color":[{"mask-conic-from":D()}],"mask-image-conic-to-color":[{"mask-conic-to":D()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:L()}],"mask-repeat":[{mask:ce()}],"mask-size":[{mask:A()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Xe,Qe]}],filter:[{filter:["","none",Xe,Qe]}],blur:[{blur:le()}],brightness:[{brightness:[wt,Xe,Qe]}],contrast:[{contrast:[wt,Xe,Qe]}],"drop-shadow":[{"drop-shadow":["","none",P,ql,Vl]}],"drop-shadow-color":[{"drop-shadow":D()}],grayscale:[{grayscale:["",wt,Xe,Qe]}],"hue-rotate":[{"hue-rotate":[wt,Xe,Qe]}],invert:[{invert:["",wt,Xe,Qe]}],saturate:[{saturate:[wt,Xe,Qe]}],sepia:[{sepia:["",wt,Xe,Qe]}],"backdrop-filter":[{"backdrop-filter":["","none",Xe,Qe]}],"backdrop-blur":[{"backdrop-blur":le()}],"backdrop-brightness":[{"backdrop-brightness":[wt,Xe,Qe]}],"backdrop-contrast":[{"backdrop-contrast":[wt,Xe,Qe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",wt,Xe,Qe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[wt,Xe,Qe]}],"backdrop-invert":[{"backdrop-invert":["",wt,Xe,Qe]}],"backdrop-opacity":[{"backdrop-opacity":[wt,Xe,Qe]}],"backdrop-saturate":[{"backdrop-saturate":[wt,Xe,Qe]}],"backdrop-sepia":[{"backdrop-sepia":["",wt,Xe,Qe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":J()}],"border-spacing-x":[{"border-spacing-x":J()}],"border-spacing-y":[{"border-spacing-y":J()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Xe,Qe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[wt,"initial",Xe,Qe]}],ease:[{ease:["linear","initial",E,Xe,Qe]}],delay:[{delay:[wt,Xe,Qe]}],animate:[{animate:["none",T,Xe,Qe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,Xe,Qe]}],"perspective-origin":[{"perspective-origin":Q()}],rotate:[{rotate:he()}],"rotate-x":[{"rotate-x":he()}],"rotate-y":[{"rotate-y":he()}],"rotate-z":[{"rotate-z":he()}],scale:[{scale:ve()}],"scale-x":[{"scale-x":ve()}],"scale-y":[{"scale-y":ve()}],"scale-z":[{"scale-z":ve()}],"scale-3d":["scale-3d"],skew:[{skew:k()}],"skew-x":[{"skew-x":k()}],"skew-y":[{"skew-y":k()}],transform:[{transform:[Xe,Qe,"","none","gpu","cpu"]}],"transform-origin":[{origin:Q()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Y()}],"translate-x":[{"translate-x":Y()}],"translate-y":[{"translate-y":Y()}],"translate-z":[{"translate-z":Y()}],"translate-none":["translate-none"],accent:[{accent:D()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:D()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Xe,Qe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":J()}],"scroll-mx":[{"scroll-mx":J()}],"scroll-my":[{"scroll-my":J()}],"scroll-ms":[{"scroll-ms":J()}],"scroll-me":[{"scroll-me":J()}],"scroll-mt":[{"scroll-mt":J()}],"scroll-mr":[{"scroll-mr":J()}],"scroll-mb":[{"scroll-mb":J()}],"scroll-ml":[{"scroll-ml":J()}],"scroll-p":[{"scroll-p":J()}],"scroll-px":[{"scroll-px":J()}],"scroll-py":[{"scroll-py":J()}],"scroll-ps":[{"scroll-ps":J()}],"scroll-pe":[{"scroll-pe":J()}],"scroll-pt":[{"scroll-pt":J()}],"scroll-pr":[{"scroll-pr":J()}],"scroll-pb":[{"scroll-pb":J()}],"scroll-pl":[{"scroll-pl":J()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Xe,Qe]}],fill:[{fill:["none",...D()]}],"stroke-w":[{stroke:[wt,no,da,Xu]}],stroke:[{stroke:["none",...D()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},G1=D1(K1);function rt(...n){return G1(ay(n))}function Le({className:n,...s}){return e.jsx("div",{"data-slot":"card",className:rt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",n),...s})}function pt({className:n,...s}){return e.jsx("div",{"data-slot":"card-header",className:rt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",n),...s})}function ht({className:n,...s}){return e.jsx("h4",{"data-slot":"card-title",className:rt("leading-none",n),...s})}function pn({className:n,...s}){return e.jsx("p",{"data-slot":"card-description",className:rt("text-muted-foreground",n),...s})}function Be({className:n,...s}){return e.jsx("div",{"data-slot":"card-content",className:rt("px-6 [&:last-child]:pb-6",n),...s})}function $g(n,s){if(typeof n=="function")return n(s);n!=null&&(n.current=s)}function os(...n){return s=>{let a=!1;const i=n.map(l=>{const d=$g(l,s);return!a&&typeof d=="function"&&(a=!0),d});if(a)return()=>{for(let l=0;l<i.length;l++){const d=i[l];typeof d=="function"?d():$g(n[l],null)}}}}function Pt(...n){return p.useCallback(os(...n),n)}function Os(n){const s=Y1(n),a=p.forwardRef((i,l)=>{const{children:d,...u}=i,f=p.Children.toArray(d),y=f.find(Q1);if(y){const x=y.props.children,v=f.map(h=>h===y?p.Children.count(x)>1?p.Children.only(null):p.isValidElement(x)?x.props.children:null:h);return e.jsx(s,{...u,ref:l,children:p.isValidElement(x)?p.cloneElement(x,void 0,v):null})}return e.jsx(s,{...u,ref:l,children:d})});return a.displayName=`${n}.Slot`,a}var gy=Os("Slot");function Y1(n){const s=p.forwardRef((a,i)=>{const{children:l,...d}=a;if(p.isValidElement(l)){const u=Z1(l),f=X1(d,l.props);return l.type!==p.Fragment&&(f.ref=i?os(i,u):u),p.cloneElement(l,f)}return p.Children.count(l)>1?p.Children.only(null):null});return s.displayName=`${n}.SlotClone`,s}var xy=Symbol("radix.slottable");function J1(n){const s=({children:a})=>e.jsx(e.Fragment,{children:a});return s.displayName=`${n}.Slottable`,s.__radixId=xy,s}function Q1(n){return p.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===xy}function X1(n,s){const a={...s};for(const i in s){const l=n[i],d=s[i];/^on[A-Z]/.test(i)?l&&d?a[i]=(...f)=>{const y=d(...f);return l(...f),y}:l&&(a[i]=l):i==="style"?a[i]={...l,...d}:i==="className"&&(a[i]=[l,d].filter(Boolean).join(" "))}return{...n,...a}}function Z1(n){let s=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,a=s&&"isReactWarning"in s&&s.isReactWarning;return a?n.ref:(s=Object.getOwnPropertyDescriptor(n,"ref")?.get,a=s&&"isReactWarning"in s&&s.isReactWarning,a?n.props.ref:n.props.ref||n.ref)}const zg=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Bg=ay,of=(n,s)=>a=>{var i;if(s?.variants==null)return Bg(n,a?.class,a?.className);const{variants:l,defaultVariants:d}=s,u=Object.keys(l).map(x=>{const v=a?.[x],h=d?.[x];if(v===null)return null;const C=zg(v)||zg(h);return l[x][C]}),f=a&&Object.entries(a).reduce((x,v)=>{let[h,C]=v;return C===void 0||(x[h]=C),x},{}),y=s==null||(i=s.compoundVariants)===null||i===void 0?void 0:i.reduce((x,v)=>{let{class:h,className:C,...P}=v;return Object.entries(P).every(S=>{let[w,b]=S;return Array.isArray(b)?b.includes({...d,...f}[w]):{...d,...f}[w]===b})?[...x,h,C]:x},[]);return Bg(n,u,y,a?.class,a?.className)},lf=of("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),ie=p.forwardRef(({className:n,variant:s,size:a,asChild:i=!1,...l},d)=>{const u=i?gy:"button";return e.jsx(u,{"data-slot":"button",className:rt(lf({variant:s,size:a,className:n})),ref:d,...l})});ie.displayName="Button";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tN=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,a,i)=>i?i.toUpperCase():a.toLowerCase()),Ug=n=>{const s=tN(n);return s.charAt(0).toUpperCase()+s.slice(1)},yy=(...n)=>n.filter((s,a,i)=>!!s&&s.trim()!==""&&i.indexOf(s)===a).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=p.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:l="",children:d,iconNode:u,...f},y)=>p.createElement("svg",{ref:y,...nN,width:s,height:s,stroke:n,strokeWidth:i?Number(a)*24/Number(s):a,className:yy("lucide",l),...f},[...u.map(([x,v])=>p.createElement(x,v)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=(n,s)=>{const a=p.forwardRef(({className:i,...l},d)=>p.createElement(rN,{ref:d,iconNode:s,className:yy(`lucide-${eN(Ug(n))}`,`lucide-${n}`,i),...l}));return a.displayName=Ug(n),a};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ua=He("activity",sN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Cm=He("archive",aN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],cf=He("arrow-left",iN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Wl=He("arrow-right",oN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],cN=He("banknote",lN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],uN=He("bell",dN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],oo=He("calculator",mN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],mo=He("calendar",fN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],hN=He("chart-column",pN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],fc=He("check",gN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],pc=He("chevron-down",xN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],vN=He("chevron-left",yN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],jN=He("chevron-up",wN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],vy=He("chevrons-up-down",bN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ls=He("circle-alert",NN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Br=He("circle-check-big",SN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],hc=He("circle-x",CN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],vr=He("clock",PN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],xa=He("credit-card",EN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],gc=He("database",DN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Zu=He("dollar-sign",kN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],df=He("download",AN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],RN=He("ellipsis",IN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Hg=He("external-link",TN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],MN=He("eye-off",_N);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$r=He("eye",ON);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],FN=He("file-check",LN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],pa=He("file-text",$N);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],BN=He("flask-conical",zN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],ma=He("gift",UN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],VN=He("heart",HN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],sc=He("history",qN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"M12 6v4",key:"16clxf"}],["path",{d:"M14 14h-4",key:"esezmu"}],["path",{d:"M14 18h-4",key:"16mqa2"}],["path",{d:"M14 8h-4",key:"z8ypaz"}],["path",{d:"M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2",key:"b1k337"}],["path",{d:"M18 22V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v18",key:"16g51d"}]],Vg=He("hospital",WN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],GN=He("key",KN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],JN=He("loader-circle",YN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],wy=He("lock",QN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],qg=He("log-out",XN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],eS=He("package",ZN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],nS=He("pen",tS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],jy=He("percent",rS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],aS=He("phone",sS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],Mr=He("pill",iS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ii=He("plus",oS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],xc=He("printer",lS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],or=He("receipt",cS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Bn=He("refresh-cw",dS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],mS=He("rotate-ccw",uS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],pS=He("rotate-cw",fS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],gS=He("save",hS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],us=He("search",xS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],by=He("send",yS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],oi=He("settings",vS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ny=He("shield",wS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Wg=He("smartphone",jS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Kg=He("square-check-big",bS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],yc=He("square-pen",NS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Gg=He("square",SS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],PS=He("stethoscope",CS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Or=He("tag",ES);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],Yg=He("test-tube",DS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]],AS=He("toggle-right",kS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ur=He("trash-2",IS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Jg=He("trending-up",RS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Pm=He("triangle-alert",TS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],MS=He("upload",_S);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],LS=He("user-check",OS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]],fo=He("user-cog",FS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Sy=He("user-plus",$S);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],BS=He("user-x",zS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],vc=He("user",US);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],En=He("users",HS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],qS=He("wifi-off",VS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],KS=He("wifi",WS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Cy=He("x",GS);var vo=ny();const Py=ty(vo);function YS(n){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",s.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}const JS=n=>{switch(n){case"success":return ZS;case"info":return t2;case"warning":return e2;case"error":return n2;default:return null}},QS=Array(12).fill(0),XS=({visible:n,className:s})=>ke.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":n},ke.createElement("div",{className:"sonner-spinner"},QS.map((a,i)=>ke.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),ZS=ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ke.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),e2=ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ke.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),t2=ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ke.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),n2=ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ke.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),r2=ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ke.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ke.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),s2=()=>{const[n,s]=ke.useState(document.hidden);return ke.useEffect(()=>{const a=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",a),()=>window.removeEventListener("visibilitychange",a)},[]),n};let Em=1;class a2{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const a=this.subscribers.indexOf(s);this.subscribers.splice(a,1)}),this.publish=s=>{this.subscribers.forEach(a=>a(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var a;const{message:i,...l}=s,d=typeof s?.id=="number"||((a=s.id)==null?void 0:a.length)>0?s.id:Em++,u=this.toasts.find(y=>y.id===d),f=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(d)&&this.dismissedToasts.delete(d),u?this.toasts=this.toasts.map(y=>y.id===d?(this.publish({...y,...s,id:d,title:i}),{...y,...s,id:d,dismissible:f,title:i}):y):this.addToast({title:i,...l,dismissible:f,id:d}),d},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(a=>a({id:s,dismiss:!0})))):this.toasts.forEach(a=>{this.subscribers.forEach(i=>i({id:a.id,dismiss:!0}))}),s),this.message=(s,a)=>this.create({...a,message:s}),this.error=(s,a)=>this.create({...a,message:s,type:"error"}),this.success=(s,a)=>this.create({...a,type:"success",message:s}),this.info=(s,a)=>this.create({...a,type:"info",message:s}),this.warning=(s,a)=>this.create({...a,type:"warning",message:s}),this.loading=(s,a)=>this.create({...a,type:"loading",message:s}),this.promise=(s,a)=>{if(!a)return;let i;a.loading!==void 0&&(i=this.create({...a,promise:s,type:"loading",message:a.loading,description:typeof a.description!="function"?a.description:void 0}));const l=Promise.resolve(s instanceof Function?s():s);let d=i!==void 0,u;const f=l.then(async x=>{if(u=["resolve",x],ke.isValidElement(x))d=!1,this.create({id:i,type:"default",message:x});else if(o2(x)&&!x.ok){d=!1;const h=typeof a.error=="function"?await a.error(`HTTP error! status: ${x.status}`):a.error,C=typeof a.description=="function"?await a.description(`HTTP error! status: ${x.status}`):a.description,S=typeof h=="object"&&!ke.isValidElement(h)?h:{message:h};this.create({id:i,type:"error",description:C,...S})}else if(x instanceof Error){d=!1;const h=typeof a.error=="function"?await a.error(x):a.error,C=typeof a.description=="function"?await a.description(x):a.description,S=typeof h=="object"&&!ke.isValidElement(h)?h:{message:h};this.create({id:i,type:"error",description:C,...S})}else if(a.success!==void 0){d=!1;const h=typeof a.success=="function"?await a.success(x):a.success,C=typeof a.description=="function"?await a.description(x):a.description,S=typeof h=="object"&&!ke.isValidElement(h)?h:{message:h};this.create({id:i,type:"success",description:C,...S})}}).catch(async x=>{if(u=["reject",x],a.error!==void 0){d=!1;const v=typeof a.error=="function"?await a.error(x):a.error,h=typeof a.description=="function"?await a.description(x):a.description,P=typeof v=="object"&&!ke.isValidElement(v)?v:{message:v};this.create({id:i,type:"error",description:h,...P})}}).finally(()=>{d&&(this.dismiss(i),i=void 0),a.finally==null||a.finally.call(a)}),y=()=>new Promise((x,v)=>f.then(()=>u[0]==="reject"?v(u[1]):x(u[1])).catch(v));return typeof i!="string"&&typeof i!="number"?{unwrap:y}:Object.assign(i,{unwrap:y})},this.custom=(s,a)=>{const i=a?.id||Em++;return this.create({jsx:s(i),id:i,...a}),i},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const zn=new a2,i2=(n,s)=>{const a=s?.id||Em++;return zn.addToast({title:n,...s,id:a}),a},o2=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",l2=i2,c2=()=>zn.toasts,d2=()=>zn.getActiveToasts(),se=Object.assign(l2,{success:zn.success,info:zn.info,warning:zn.warning,error:zn.error,custom:zn.custom,message:zn.message,promise:zn.promise,dismiss:zn.dismiss,loading:zn.loading},{getHistory:c2,getToasts:d2});YS("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Kl(n){return n.label!==void 0}const u2=3,m2="24px",f2="16px",Qg=4e3,p2=356,h2=14,g2=45,x2=200;function Rr(...n){return n.filter(Boolean).join(" ")}function y2(n){const[s,a]=n.split("-"),i=[];return s&&i.push(s),a&&i.push(a),i}const v2=n=>{var s,a,i,l,d,u,f,y,x;const{invert:v,toast:h,unstyled:C,interacting:P,setHeights:S,visibleToasts:w,heights:b,index:E,toasts:T,expanded:z,removeToast:B,defaultRichColors:Q,closeButton:X,style:G,cancelButtonStyle:J,actionButtonStyle:ue,className:ge="",descriptionClassName:Ee="",duration:xe,position:me,gap:fe,expandByDefault:F,classNames:ne,icons:te,closeButtonAriaLabel:D="Close toast"}=n,[L,ce]=ke.useState(null),[A,R]=ke.useState(null),[H,M]=ke.useState(!1),[ee,U]=ke.useState(!1),[q,le]=ke.useState(!1),[he,ve]=ke.useState(!1),[k,Y]=ke.useState(!1),[Ie,Fe]=ke.useState(0),[O,ze]=ke.useState(0),W=ke.useRef(h.duration||xe||Qg),Ve=ke.useRef(null),Re=ke.useRef(null),$e=E===0,ot=E+1<=w,V=h.type,pe=h.dismissible!==!1,we=h.className||"",mt=h.descriptionClassName||"",ct=ke.useMemo(()=>b.findIndex(N=>N.toastId===h.id)||0,[b,h.id]),Dt=ke.useMemo(()=>{var N;return(N=h.closeButton)!=null?N:X},[h.closeButton,X]),xt=ke.useMemo(()=>h.duration||xe||Qg,[h.duration,xe]),Xt=ke.useRef(0),I=ke.useRef(0),Te=ke.useRef(0),qe=ke.useRef(null),[ft,gt]=me.split("-"),hn=ke.useMemo(()=>b.reduce((N,ae,Ne)=>Ne>=ct?N:N+ae.height,0),[b,ct]),St=s2(),Ce=h.invert||v,kt=V==="loading";I.current=ke.useMemo(()=>ct*fe+hn,[ct,hn]),ke.useEffect(()=>{W.current=xt},[xt]),ke.useEffect(()=>{M(!0)},[]),ke.useEffect(()=>{const N=Re.current;if(N){const ae=N.getBoundingClientRect().height;return ze(ae),S(Ne=>[{toastId:h.id,height:ae,position:h.position},...Ne]),()=>S(Ne=>Ne.filter(Ae=>Ae.toastId!==h.id))}},[S,h.id]),ke.useLayoutEffect(()=>{if(!H)return;const N=Re.current,ae=N.style.height;N.style.height="auto";const Ne=N.getBoundingClientRect().height;N.style.height=ae,ze(Ne),S(Ae=>Ae.find(je=>je.toastId===h.id)?Ae.map(je=>je.toastId===h.id?{...je,height:Ne}:je):[{toastId:h.id,height:Ne,position:h.position},...Ae])},[H,h.title,h.description,S,h.id,h.jsx,h.action,h.cancel]);const dt=ke.useCallback(()=>{U(!0),Fe(I.current),S(N=>N.filter(ae=>ae.toastId!==h.id)),setTimeout(()=>{B(h)},x2)},[h,B,S,I]);ke.useEffect(()=>{if(h.promise&&V==="loading"||h.duration===1/0||h.type==="loading")return;let N;return z||P||St?(()=>{if(Te.current<Xt.current){const Ae=new Date().getTime()-Xt.current;W.current=W.current-Ae}Te.current=new Date().getTime()})():(()=>{W.current!==1/0&&(Xt.current=new Date().getTime(),N=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),dt()},W.current))})(),()=>clearTimeout(N)},[z,P,h,V,St,dt]),ke.useEffect(()=>{h.delete&&(dt(),h.onDismiss==null||h.onDismiss.call(h,h))},[dt,h.delete]);function Mt(){var N;if(te?.loading){var ae;return ke.createElement("div",{className:Rr(ne?.loader,h==null||(ae=h.classNames)==null?void 0:ae.loader,"sonner-loader"),"data-visible":V==="loading"},te.loading)}return ke.createElement(XS,{className:Rr(ne?.loader,h==null||(N=h.classNames)==null?void 0:N.loader),visible:V==="loading"})}const tt=h.icon||te?.[V]||JS(V);var kn,Tn;return ke.createElement("li",{tabIndex:0,ref:Re,className:Rr(ge,we,ne?.toast,h==null||(s=h.classNames)==null?void 0:s.toast,ne?.default,ne?.[V],h==null||(a=h.classNames)==null?void 0:a[V]),"data-sonner-toast":"","data-rich-colors":(kn=h.richColors)!=null?kn:Q,"data-styled":!(h.jsx||h.unstyled||C),"data-mounted":H,"data-promise":!!h.promise,"data-swiped":k,"data-removed":ee,"data-visible":ot,"data-y-position":ft,"data-x-position":gt,"data-index":E,"data-front":$e,"data-swiping":q,"data-dismissible":pe,"data-type":V,"data-invert":Ce,"data-swipe-out":he,"data-swipe-direction":A,"data-expanded":!!(z||F&&H),"data-testid":h.testId,style:{"--index":E,"--toasts-before":E,"--z-index":T.length-E,"--offset":`${ee?Ie:I.current}px`,"--initial-height":F?"auto":`${O}px`,...G,...h.style},onDragEnd:()=>{le(!1),ce(null),qe.current=null},onPointerDown:N=>{N.button!==2&&(kt||!pe||(Ve.current=new Date,Fe(I.current),N.target.setPointerCapture(N.pointerId),N.target.tagName!=="BUTTON"&&(le(!0),qe.current={x:N.clientX,y:N.clientY})))},onPointerUp:()=>{var N,ae,Ne;if(he||!pe)return;qe.current=null;const Ae=Number(((N=Re.current)==null?void 0:N.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Me=Number(((ae=Re.current)==null?void 0:ae.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),je=new Date().getTime()-((Ne=Ve.current)==null?void 0:Ne.getTime()),_e=L==="x"?Ae:Me,Oe=Math.abs(_e)/je;if(Math.abs(_e)>=g2||Oe>.11){Fe(I.current),h.onDismiss==null||h.onDismiss.call(h,h),R(L==="x"?Ae>0?"right":"left":Me>0?"down":"up"),dt(),ve(!0);return}else{var nt,Ye;(nt=Re.current)==null||nt.style.setProperty("--swipe-amount-x","0px"),(Ye=Re.current)==null||Ye.style.setProperty("--swipe-amount-y","0px")}Y(!1),le(!1),ce(null)},onPointerMove:N=>{var ae,Ne,Ae;if(!qe.current||!pe||((ae=window.getSelection())==null?void 0:ae.toString().length)>0)return;const je=N.clientY-qe.current.y,_e=N.clientX-qe.current.x;var Oe;const nt=(Oe=n.swipeDirections)!=null?Oe:y2(me);!L&&(Math.abs(_e)>1||Math.abs(je)>1)&&ce(Math.abs(_e)>Math.abs(je)?"x":"y");let Ye={x:0,y:0};const At=It=>1/(1.5+Math.abs(It)/20);if(L==="y"){if(nt.includes("top")||nt.includes("bottom"))if(nt.includes("top")&&je<0||nt.includes("bottom")&&je>0)Ye.y=je;else{const It=je*At(je);Ye.y=Math.abs(It)<Math.abs(je)?It:je}}else if(L==="x"&&(nt.includes("left")||nt.includes("right")))if(nt.includes("left")&&_e<0||nt.includes("right")&&_e>0)Ye.x=_e;else{const It=_e*At(_e);Ye.x=Math.abs(It)<Math.abs(_e)?It:_e}(Math.abs(Ye.x)>0||Math.abs(Ye.y)>0)&&Y(!0),(Ne=Re.current)==null||Ne.style.setProperty("--swipe-amount-x",`${Ye.x}px`),(Ae=Re.current)==null||Ae.style.setProperty("--swipe-amount-y",`${Ye.y}px`)}},Dt&&!h.jsx&&V!=="loading"?ke.createElement("button",{"aria-label":D,"data-disabled":kt,"data-close-button":!0,onClick:kt||!pe?()=>{}:()=>{dt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:Rr(ne?.closeButton,h==null||(i=h.classNames)==null?void 0:i.closeButton)},(Tn=te?.close)!=null?Tn:r2):null,(V||h.icon||h.promise)&&h.icon!==null&&(te?.[V]!==null||h.icon)?ke.createElement("div",{"data-icon":"",className:Rr(ne?.icon,h==null||(l=h.classNames)==null?void 0:l.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Mt():null,h.type!=="loading"?tt:null):null,ke.createElement("div",{"data-content":"",className:Rr(ne?.content,h==null||(d=h.classNames)==null?void 0:d.content)},ke.createElement("div",{"data-title":"",className:Rr(ne?.title,h==null||(u=h.classNames)==null?void 0:u.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?ke.createElement("div",{"data-description":"",className:Rr(Ee,mt,ne?.description,h==null||(f=h.classNames)==null?void 0:f.description)},typeof h.description=="function"?h.description():h.description):null),ke.isValidElement(h.cancel)?h.cancel:h.cancel&&Kl(h.cancel)?ke.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||J,onClick:N=>{Kl(h.cancel)&&pe&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,N),dt())},className:Rr(ne?.cancelButton,h==null||(y=h.classNames)==null?void 0:y.cancelButton)},h.cancel.label):null,ke.isValidElement(h.action)?h.action:h.action&&Kl(h.action)?ke.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||ue,onClick:N=>{Kl(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,N),!N.defaultPrevented&&dt())},className:Rr(ne?.actionButton,h==null||(x=h.classNames)==null?void 0:x.actionButton)},h.action.label):null)};function Xg(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function w2(n,s){const a={};return[n,s].forEach((i,l)=>{const d=l===1,u=d?"--mobile-offset":"--offset",f=d?f2:m2;function y(x){["top","right","bottom","left"].forEach(v=>{a[`${u}-${v}`]=typeof x=="number"?`${x}px`:x})}typeof i=="number"||typeof i=="string"?y(i):typeof i=="object"?["top","right","bottom","left"].forEach(x=>{i[x]===void 0?a[`${u}-${x}`]=f:a[`${u}-${x}`]=typeof i[x]=="number"?`${i[x]}px`:i[x]}):y(f)}),a}const Ey=ke.forwardRef(function(s,a){const{id:i,invert:l,position:d="bottom-right",hotkey:u=["altKey","KeyT"],expand:f,closeButton:y,className:x,offset:v,mobileOffset:h,theme:C="light",richColors:P,duration:S,style:w,visibleToasts:b=u2,toastOptions:E,dir:T=Xg(),gap:z=h2,icons:B,containerAriaLabel:Q="Notifications"}=s,[X,G]=ke.useState([]),J=ke.useMemo(()=>i?X.filter(H=>H.toasterId===i):X.filter(H=>!H.toasterId),[X,i]),ue=ke.useMemo(()=>Array.from(new Set([d].concat(J.filter(H=>H.position).map(H=>H.position)))),[J,d]),[ge,Ee]=ke.useState([]),[xe,me]=ke.useState(!1),[fe,F]=ke.useState(!1),[ne,te]=ke.useState(C!=="system"?C:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),D=ke.useRef(null),L=u.join("+").replace(/Key/g,"").replace(/Digit/g,""),ce=ke.useRef(null),A=ke.useRef(!1),R=ke.useCallback(H=>{G(M=>{var ee;return(ee=M.find(U=>U.id===H.id))!=null&&ee.delete||zn.dismiss(H.id),M.filter(({id:U})=>U!==H.id)})},[]);return ke.useEffect(()=>zn.subscribe(H=>{if(H.dismiss){requestAnimationFrame(()=>{G(M=>M.map(ee=>ee.id===H.id?{...ee,delete:!0}:ee))});return}setTimeout(()=>{Py.flushSync(()=>{G(M=>{const ee=M.findIndex(U=>U.id===H.id);return ee!==-1?[...M.slice(0,ee),{...M[ee],...H},...M.slice(ee+1)]:[H,...M]})})})}),[X]),ke.useEffect(()=>{if(C!=="system"){te(C);return}if(C==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?te("dark"):te("light")),typeof window>"u")return;const H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:M})=>{te(M?"dark":"light")})}catch{H.addListener(({matches:ee})=>{try{te(ee?"dark":"light")}catch(U){console.error(U)}})}},[C]),ke.useEffect(()=>{X.length<=1&&me(!1)},[X]),ke.useEffect(()=>{const H=M=>{var ee;if(u.every(le=>M[le]||M.code===le)){var q;me(!0),(q=D.current)==null||q.focus()}M.code==="Escape"&&(document.activeElement===D.current||(ee=D.current)!=null&&ee.contains(document.activeElement))&&me(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[u]),ke.useEffect(()=>{if(D.current)return()=>{ce.current&&(ce.current.focus({preventScroll:!0}),ce.current=null,A.current=!1)}},[D.current]),ke.createElement("section",{ref:a,"aria-label":`${Q} ${L}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},ue.map((H,M)=>{var ee;const[U,q]=H.split("-");return J.length?ke.createElement("ol",{key:H,dir:T==="auto"?Xg():T,tabIndex:-1,ref:D,className:x,"data-sonner-toaster":!0,"data-sonner-theme":ne,"data-y-position":U,"data-x-position":q,style:{"--front-toast-height":`${((ee=ge[0])==null?void 0:ee.height)||0}px`,"--width":`${p2}px`,"--gap":`${z}px`,...w,...w2(v,h)},onBlur:le=>{A.current&&!le.currentTarget.contains(le.relatedTarget)&&(A.current=!1,ce.current&&(ce.current.focus({preventScroll:!0}),ce.current=null))},onFocus:le=>{le.target instanceof HTMLElement&&le.target.dataset.dismissible==="false"||A.current||(A.current=!0,ce.current=le.relatedTarget)},onMouseEnter:()=>me(!0),onMouseMove:()=>me(!0),onMouseLeave:()=>{fe||me(!1)},onDragEnd:()=>me(!1),onPointerDown:le=>{le.target instanceof HTMLElement&&le.target.dataset.dismissible==="false"||F(!0)},onPointerUp:()=>F(!1)},J.filter(le=>!le.position&&M===0||le.position===H).map((le,he)=>{var ve,k;return ke.createElement(v2,{key:le.id,icons:B,index:he,toast:le,defaultRichColors:P,duration:(ve=E?.duration)!=null?ve:S,className:E?.className,descriptionClassName:E?.descriptionClassName,invert:l,visibleToasts:b,closeButton:(k=E?.closeButton)!=null?k:y,interacting:fe,position:H,style:E?.style,unstyled:E?.unstyled,classNames:E?.classNames,cancelButtonStyle:E?.cancelButtonStyle,actionButtonStyle:E?.actionButtonStyle,closeButtonAriaLabel:E?.closeButtonAriaLabel,removeToast:R,toasts:J.filter(Y=>Y.position==le.position),heights:ge.filter(Y=>Y.position==le.position),setHeights:Ee,expandByDefault:f,gap:z,expanded:xe,swipeDirections:s.swipeDirections})})):null}))}),Zg=Object.freeze(Object.defineProperty({__proto__:null,Toaster:Ey,toast:se},Symbol.toStringTag,{value:"Module"})),Rc=import.meta?.env?.VITE_API_URL||"http://localhost:5000/api";async function Tc(n){const s=await n.text();if(!(n.headers.get("content-type")||"").toLowerCase().includes("application/json"))throw console.error("safeJson non-json response:",n.status,s.slice(0,200)),new Error(`Non-JSON response (${n.status})`);try{return JSON.parse(s)}catch(i){throw console.error("safeJson parse error:",i,s.slice(0,200)),i}}async function li(){const n=await fetch(`${Rc}/patients`),s=await Tc(n);if(!n.ok)throw new Error(s?.message||"Failed to load patients");const a=Array.isArray(s)?s:s?.data||[];return!s?.success&&!Array.isArray(s)&&!s?.data&&console.warn("fetchPatients: response missing success flag  returning available data (if any)"),a||[]}async function wc(){const n=await fetch(`${Rc}/invoices`),s=await Tc(n);if(!n.ok)throw new Error(s?.message||"Failed to load invoices");const a=Array.isArray(s)?s:s?.data||[];return!s?.success&&!Array.isArray(s)&&!s?.data&&console.warn("fetchInvoices: response missing success flag  returning available data (if any)"),a||[]}async function jc(){const n=await fetch(`${Rc}/payments`),s=await Tc(n);if(!n.ok)throw new Error(s?.message||"Failed to load payments");const a=Array.isArray(s)?s:s?.data||[];return!s?.success&&!Array.isArray(s)&&!s?.data&&console.warn("fetchPayments: response missing success flag  returning available data (if any)"),a||[]}async function ex(n){const s=await fetch(`${Rc}/invoices/${n}`),a=await Tc(s);if(!s.ok)throw new Error(a?.message||"Failed to load invoice");return a?.data?a.data:a?.success&&a?.invoice?a.invoice:a}class j2{records=[];listeners=[];remoteSyncSuppressed=!1;constructor(){this.records=[{id:"1",type:"invoice",number:"INV-2025-001",patientName:"Maria Santos",patientId:"P001",date:"2025-01-05",time:"10:30 AM",amount:13800,status:"completed",description:"General Consultation, Blood Test, X-Ray",department:"Outpatient"},{id:"2",type:"payment",number:"PAY-2025-001",patientName:"Maria Santos",patientId:"P001",date:"2025-01-05",time:"10:45 AM",amount:13800,status:"completed",description:"Payment for INV-2025-001",paymentMethod:"GCash",reference:"GCH-20250105-001"},{id:"3",type:"pharmacy",number:"PH-2025-001",patientName:"Juan Dela Cruz",patientId:"P002",date:"2025-01-04",time:"2:15 PM",amount:2500,status:"completed",description:"Prescription Medications (Amoxicillin, Paracetamol)",department:"Pharmacy",items:[{id:"med1",description:"Amoxicillin 500mg Capsules x30",quantity:30,unitPrice:25,totalPrice:750},{id:"med2",description:"Paracetamol 500mg Tablets x20",quantity:20,unitPrice:5,totalPrice:100},{id:"med3",description:"Cough Syrup 120ml",quantity:1,unitPrice:150,totalPrice:150}]},{id:"4",type:"invoice",number:"INV-2025-002",patientName:"Juan Dela Cruz",patientId:"P002",date:"2025-01-05",time:"11:15 AM",amount:7820,status:"pending",description:"Follow-up Consultation, Medication",department:"Outpatient"},{id:"5",type:"invoice",number:"INV-2025-003",patientName:"Anna Reyes",patientId:"P003",date:"2025-01-04",time:"9:30 AM",amount:11040,status:"pending",description:"Laboratory Tests, Consultation",department:"Laboratory"},{id:"6",type:"invoice",number:"INV-2025-004",patientName:"Roberto Cruz",patientId:"P004",date:"2025-01-04",time:"3:45 PM",amount:28e3,status:"pending",description:"X-Ray, Physical Therapy Sessions",department:"Radiology"},{id:"7",type:"service",number:"SRV-2025-001",patientName:"Carmen Flores",patientId:"P005",date:"2025-01-03",time:"1:00 PM",amount:15600,status:"pending",description:"CT Scan, Blood Chemistry Panel",department:"Radiology"},{id:"8",type:"invoice",number:"INV-2025-005",patientName:"Carlos Miguel",patientId:"P004",date:"2025-01-03",time:"8:30 AM",amount:45e3,status:"completed",description:"Minor Surgery, Anesthesia, Recovery Room",department:"Surgery"},{id:"9",type:"payment",number:"PAY-2025-002",patientName:"Carlos Miguel",patientId:"P004",date:"2025-01-03",time:"4:15 PM",amount:45e3,status:"completed",description:"Payment for INV-2025-005",paymentMethod:"Credit Card",reference:"CC-20250103-001"}]}subscribe(s){return this.listeners.push(s),s(this.records),()=>{this.listeners=this.listeners.filter(a=>a!==s)}}notifyListeners(){this.listeners.forEach(s=>s([...this.records]))}getAllRecords(){return[...this.records]}clearAllRecords(s){this.records=[],s?.notify!==!1&&this.notifyListeners()}setRemoteSyncSuppressed(s){this.remoteSyncSuppressed=!!s}isRemoteSyncSuppressed(){return this.remoteSyncSuppressed}addRecord(s){this.records.push(s),this.notifyListeners()}addPaymentRecord(s){const a=`PAY-${Date.now()}`,i={id:Date.now().toString(),type:"payment",number:a,patientName:s.patientName,patientId:s.patientId,date:s.date,time:s.time,amount:s.amount,status:s.status==="processing"?"pending":s.status==="failed"?"cancelled":s.status,description:`Payment for ${s.invoiceNumber}`,paymentMethod:this.formatPaymentMethod(s.method),reference:s.reference};return this.addRecord(i),i}addInvoiceRecord(s){const a={id:Date.now().toString(),type:"invoice",number:s.invoiceNumber,patientName:s.patientName,patientId:s.patientId,date:s.date,time:s.time,amount:s.amount,status:"pending",description:s.description,department:s.department,subtotal:s.subtotal,discount:s.discount,discountType:s.discountType,discountPercentage:s.discountPercentage,tax:s.tax,taxRate:s.taxRate,totalBeforeTax:s.totalBeforeTax,items:s.items};return this.addRecord(a),a}updateRecordStatus(s,a){const i=this.records.findIndex(l=>l.id===s);i!==-1&&(this.records[i].status=a,this.notifyListeners())}formatPaymentMethod(s){return{cash:"Cash",card:"Credit Card",gcash:"GCash",paymaya:"PayMaya",bank:"Bank Transfer"}[s]||s}getRecordsByPatient(s){return this.records.filter(a=>a.patientId===s)}getRecordsByType(s){return this.records.filter(a=>a.type===s)}getRecordsByDateRange(s,a){return this.records.filter(i=>i.date>=s&&i.date<=a)}}const vn=new j2,Tr="hospital_discounts",ns="hospital_promotions",ro="hospital_discount_applications",tx=[{id:"1",code:"SENIOR20",name:"Senior Citizen Discount",type:"percentage",value:20,description:"20% discount for senior citizens (60 years and above)",category:"senior",startDate:"2025-01-01",endDate:"2025-12-31",isActive:!0,usageCount:145,conditions:"Valid ID required. Cannot be combined with other offers.",createdBy:"System",createdAt:"2025-01-01T00:00:00Z",updatedAt:"2025-01-01T00:00:00Z",isArchived:!1},{id:"2",code:"PWD20",name:"PWD Discount",type:"percentage",value:20,description:"20% discount for Persons with Disabilities",category:"pwd",startDate:"2025-01-01",endDate:"2025-12-31",isActive:!0,usageCount:89,conditions:"Valid PWD ID required.",createdBy:"System",createdAt:"2025-01-01T00:00:00Z",updatedAt:"2025-01-01T00:00:00Z",isArchived:!1},{id:"3",code:"EMP15",name:"Employee Discount",type:"percentage",value:15,description:"15% discount for hospital employees and their families",category:"employee",startDate:"2025-01-01",endDate:"2025-12-31",isActive:!0,usageCount:67,conditions:"Valid employee ID required.",createdBy:"System",createdAt:"2025-01-01T00:00:00Z",updatedAt:"2025-01-01T00:00:00Z",isArchived:!1},{id:"4",code:"NEWYEAR2025",name:"New Year Health Check",type:"percentage",value:30,description:"30% off all diagnostic tests for January",category:"seasonal",startDate:"2025-01-01",endDate:"2025-01-31",isActive:!0,usageCount:23,maxUsage:100,applicableServices:["Blood Test","X-Ray","ECG","Ultrasound"],createdBy:"System",createdAt:"2025-01-01T00:00:00Z",updatedAt:"2025-01-01T00:00:00Z",isArchived:!1},{id:"5",code:"INSURANCE",name:"Insurance Coverage",type:"percentage",value:0,description:"Variable insurance coverage discount",category:"insurance",isActive:!0,usageCount:234,conditions:"Insurance company authorization required.",startDate:"2025-01-01",endDate:"2025-12-31",createdBy:"System",createdAt:"2025-01-01T00:00:00Z",updatedAt:"2025-01-01T00:00:00Z",isArchived:!1},{id:"6",code:"CHARITY50",name:"Charity Care",type:"percentage",value:50,description:"50% discount for charity care patients",category:"promotional",isActive:!0,usageCount:45,conditions:"Social worker approval required.",startDate:"2025-01-01",endDate:"2025-12-31",createdBy:"System",createdAt:"2025-01-01T00:00:00Z",updatedAt:"2025-01-01T00:00:00Z",isArchived:!1},{id:"7",code:"PROMPT5",name:"Prompt Payment Discount",type:"percentage",value:5,description:"5% discount for immediate payment",category:"promotional",isActive:!0,usageCount:178,conditions:"Payment must be made within 24 hours of invoice.",startDate:"2025-01-01",endDate:"2025-12-31",createdBy:"System",createdAt:"2025-01-01T00:00:00Z",updatedAt:"2025-01-01T00:00:00Z",isArchived:!1}],nx=[{id:"1",title:"New Year Health Package",description:"Start your year right with our comprehensive health check package at 30% off!",discountCode:"NEWYEAR2025",validFrom:"2025-01-01",validTo:"2025-01-31",isActive:!0,targetAudience:"General Public",createdBy:"System",createdAt:"2025-01-01T00:00:00Z",updatedAt:"2025-01-01T00:00:00Z",isArchived:!1},{id:"2",title:"Valentine's Couple Checkup",description:"Bring your loved one for a health screening and save 25% on both consultations.",discountCode:"VALENTINE25",validFrom:"2025-02-01",validTo:"2025-02-28",isActive:!1,targetAudience:"Couples",createdBy:"System",createdAt:"2025-01-01T00:00:00Z",updatedAt:"2025-01-01T00:00:00Z",isArchived:!1}];class wn{static initialize(){localStorage.getItem(Tr)||localStorage.setItem(Tr,JSON.stringify(tx)),localStorage.getItem(ns)||localStorage.setItem(ns,JSON.stringify(nx)),localStorage.getItem(ro)||localStorage.setItem(ro,JSON.stringify([]))}static getAllDiscounts(){this.initialize();const s=localStorage.getItem(Tr);return s?JSON.parse(s):[]}static getDiscountById(s){return this.getAllDiscounts().find(i=>i.id===s)||null}static getDiscountByCode(s){return this.getAllDiscounts().find(i=>i.code.toLowerCase()===s.toLowerCase())||null}static getActiveDiscounts(){return this.getAllDiscounts().filter(s=>s.isActive)}static createDiscount(s,a="Admin"){const i=this.getAllDiscounts();if(i.some(d=>d.code.toLowerCase()===s.code.toLowerCase()))throw new Error(`Discount code "${s.code}" already exists`);const l={...s,id:Date.now().toString(),usageCount:0,createdBy:a,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};i.push(l),localStorage.setItem(Tr,JSON.stringify(i));try{window.dispatchEvent(new CustomEvent("discounts-updated",{detail:{action:"create",discount:l}}))}catch{}return l}static updateDiscount(s,a,i="Admin"){const l=this.getAllDiscounts(),d=l.findIndex(u=>u.id===s);if(d===-1)return null;if(a.code&&a.code!==l[d].code&&l.some(u=>u.id!==s&&u.code.toLowerCase()===a.code.toLowerCase()))throw new Error(`Discount code "${a.code}" already exists`);l[d]={...l[d],...a,updatedAt:new Date().toISOString()},localStorage.setItem(Tr,JSON.stringify(l));try{window.dispatchEvent(new CustomEvent("discounts-updated",{detail:{action:"update",discount:l[d]}}))}catch{}return l[d]}static deleteDiscount(s){const a=this.getAllDiscounts(),i=a.filter(l=>l.id!==s);if(i.length===a.length)return!1;localStorage.setItem(Tr,JSON.stringify(i));try{window.dispatchEvent(new CustomEvent("discounts-updated",{detail:{action:"delete",id:s}}))}catch{}return!0}static archiveDiscount(s){const a=this.getAllDiscounts(),i=a.findIndex(l=>l.id===s);if(i===-1)return!1;a[i].isArchived=!0,a[i].updatedAt=new Date().toISOString(),localStorage.setItem(Tr,JSON.stringify(a));try{window.dispatchEvent(new CustomEvent("discounts-updated",{detail:{action:"archive",id:s}}))}catch{}return!0}static restoreDiscount(s){const a=this.getAllDiscounts(),i=a.findIndex(l=>l.id===s);if(i===-1)return!1;a[i].isArchived=!1,a[i].updatedAt=new Date().toISOString(),localStorage.setItem(Tr,JSON.stringify(a));try{window.dispatchEvent(new CustomEvent("discounts-updated",{detail:{action:"restore",id:s}}))}catch{}return!0}static toggleDiscountStatus(s){const a=this.getDiscountById(s);return a?this.updateDiscount(s,{isActive:!a.isActive}):null}static incrementUsageCount(s){const a=this.getAllDiscounts(),i=a.find(l=>l.code.toLowerCase()===s.toLowerCase());i&&(i.usageCount=(i.usageCount||0)+1,localStorage.setItem(Tr,JSON.stringify(a)))}static searchDiscounts(s){const a=s.toLowerCase();return this.getAllDiscounts().filter(i=>i.name.toLowerCase().includes(a)||i.code.toLowerCase().includes(a)||i.category.toLowerCase().includes(a)||i.description.toLowerCase().includes(a))}static getDiscountsByCategory(s){return s==="all"?this.getAllDiscounts():this.getAllDiscounts().filter(a=>a.category===s)}static getAllPromotions(){this.initialize();const s=localStorage.getItem(ns);return s?JSON.parse(s):[]}static getPromotionById(s){return this.getAllPromotions().find(i=>i.id===s)||null}static getActivePromotions(){return this.getAllPromotions().filter(s=>s.isActive)}static createPromotion(s,a="Admin"){const i=this.getAllPromotions(),l={...s,id:Date.now().toString(),createdBy:a,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return i.push(l),localStorage.setItem(ns,JSON.stringify(i)),l}static updatePromotion(s,a){const i=this.getAllPromotions(),l=i.findIndex(d=>d.id===s);return l===-1?null:(i[l]={...i[l],...a,updatedAt:new Date().toISOString()},localStorage.setItem(ns,JSON.stringify(i)),i[l])}static deletePromotion(s){const a=this.getAllPromotions(),i=a.filter(l=>l.id!==s);return i.length===a.length?!1:(localStorage.setItem(ns,JSON.stringify(i)),!0)}static archivePromotion(s){const a=this.getAllPromotions(),i=a.findIndex(l=>l.id===s);return i===-1?!1:(a[i].isArchived=!0,a[i].updatedAt=new Date().toISOString(),localStorage.setItem(ns,JSON.stringify(a)),!0)}static restorePromotion(s){const a=this.getAllPromotions(),i=a.findIndex(l=>l.id===s);return i===-1?!1:(a[i].isArchived=!1,a[i].updatedAt=new Date().toISOString(),localStorage.setItem(ns,JSON.stringify(a)),!0)}static togglePromotionStatus(s){const a=this.getPromotionById(s);return a?this.updatePromotion(s,{isActive:!a.isActive}):null}static getAllApplications(){this.initialize();const s=localStorage.getItem(ro);return s?JSON.parse(s):[]}static recordApplication(s,a="Cashier"){const i=this.getAllApplications(),l={...s,id:Date.now().toString(),appliedDate:new Date().toISOString(),status:"applied",appliedBy:a};return i.push(l),localStorage.setItem(ro,JSON.stringify(i)),this.incrementUsageCount(s.discountCode),l}static getApplicationsByPatient(s){return this.getAllApplications().filter(a=>a.patientId===s)}static getApplicationsByCode(s){return this.getAllApplications().filter(a=>a.discountCode.toLowerCase()===s.toLowerCase())}static calculateDiscount(s,a){return a.type==="percentage"?s*a.value/100:a.value}static validateDiscount(s){const a=this.getDiscountByCode(s);if(!a)return{valid:!1,message:"Discount code not found"};if(!a.isActive)return{valid:!1,message:"Discount code is inactive"};const i=new Date,l=new Date(a.startDate),d=new Date(a.endDate);return i<l?{valid:!1,message:"Discount not yet valid"}:i>d?{valid:!1,message:"Discount has expired"}:a.maxUsage&&a.usageCount>=a.maxUsage?{valid:!1,message:"Discount usage limit reached"}:{valid:!0,discount:a}}static getStatistics(){const s=this.getAllDiscounts(),a=this.getAllPromotions(),i=this.getAllApplications();return{totalDiscounts:s.length,activeDiscounts:s.filter(l=>l.isActive).length,inactiveDiscounts:s.filter(l=>!l.isActive).length,totalPromotions:a.length,activePromotions:a.filter(l=>l.isActive).length,totalUsage:s.reduce((l,d)=>l+d.usageCount,0),totalApplications:i.length,totalDiscountAmount:i.reduce((l,d)=>l+d.discountAmount,0)}}static resetToDefaults(){localStorage.setItem(Tr,JSON.stringify(tx)),localStorage.setItem(ns,JSON.stringify(nx)),localStorage.setItem(ro,JSON.stringify([]))}static exportData(){return{discounts:this.getAllDiscounts(),promotions:this.getAllPromotions(),applications:this.getAllApplications()}}}wn.initialize();const em=Object.freeze(Object.defineProperty({__proto__:null,DiscountManagementService:wn},Symbol.toStringTag,{value:"Module"}));function tm({onNavigateToView:n}){const[s,a]=p.useState(!1),[i,l]=p.useState(!0),[d,u]=p.useState(null),[f,y]=p.useState(0),[x,v]=p.useState(0),[h,C]=p.useState(0),[P,S]=p.useState(0),[w,b]=p.useState([]),[E,T]=p.useState(null),[z,B]=p.useState(0),[Q,X]=p.useState(null),[G,J]=p.useState(!0),[ue,ge]=p.useState(new Date),Ee=(D,L=["amount","total","paidAmount","paid","price"])=>{if(!D||typeof D!="object")return 0;for(const ce of L)if(ce in D){const A=Number(D[ce]);if(!isNaN(A)&&isFinite(A))return A}return 0},xe=D=>{if(!D)return null;try{const L=new Date(D);return isNaN(L.getTime())?null:L}catch{return null}},me=D=>(D?.status||D?.state||"").toString().toLowerCase().trim(),fe=async()=>{l(!0),u(null);try{try{const k=await li();T(Array.isArray(k)?k.length:null)}catch(k){console.warn("Failed to fetch patients for dashboard",k)}try{wn.getStatistics()}catch{}try{const k=await xr.getAppointments(),Y=new Date().toISOString().split("T")[0],Ie=k.filter(Fe=>(Fe.appointmentDate||"").toString().startsWith(Y)).length;X(Ie)}catch(k){console.warn("Failed to fetch appointments for dashboard",k),X(null)}let D=[],L=[];vn.isRemoteSyncSuppressed()?(D=[],L=[]):[D,L]=await Promise.all([wc(),jc()]),D=Array.isArray(D)?D:[],L=Array.isArray(L)?L:[];const ce=new Date;ce.setHours(0,0,0,0);const A=new Date;A.setHours(23,59,59,999);const R=L.reduce((k,Y)=>{const Ie=xe(Y.paymentDate||Y.date||Y.createdAt||Y.updatedAt);return Ie&&Ie>=ce&&Ie<=A?k+Ee(Y):k},0);y(R);const H=new Date,M=new Date(H.getFullYear(),H.getMonth(),1),ee=L.reduce((k,Y)=>{const Ie=xe(Y.paymentDate||Y.date||Y.createdAt);return Ie&&Ie>=M&&Ie<=H?k+Ee(Y):k},0);B(ee);const U=D.filter(k=>{const Y=me(k);return["pending","unpaid","draft","overdue"].includes(Y)}).length;v(U);const q=new Date;q.setDate(H.getDate()+7);const le=D.filter(k=>{const Y=xe(k.dueDate||k.due||k.due_at||k.date||k.createdAt);return Y&&Y>=H&&Y<=q}).length;C(le);const he=L.filter(k=>{const Y=me(k);return["paid","completed","processed"].includes(Y)}).length;S(he);const ve=[...D.map(k=>({type:"invoice",id:k._id||k.id,label:k.number||k.invoiceNumber||k.patientName||k.name||"Invoice "+(k._id||k.id),status:me(k),date:xe(k.dueDate||k.date||k.createdAt),amount:Ee(k)})),...L.map(k=>({type:"payment",id:k._id||k.id,label:k.invoiceNumber||k.reference||k.patientName||"Payment "+(k._id||k.id),status:me(k),date:xe(k.paymentDate||k.date||k.createdAt),amount:Ee(k)}))].filter(k=>k.date).sort((k,Y)=>(Y.date?.getTime()||0)-(k.date?.getTime()||0)).slice(0,4);b(ve),ge(new Date),J(!0)}catch(D){console.error("Dashboard load error:",D),u(D.message||"Failed to load dashboard data"),J(!1)}finally{l(!1)}};p.useEffect(()=>{let D=!0;fe();const L=setInterval(()=>{D&&fe().catch(R=>console.warn("auto-refresh failed",R))},3e4),ce=()=>{D&&fe().catch(R=>console.warn("refresh failed",R))},A=()=>{D&&fe().catch(R=>console.warn("refresh failed",R))};return window.addEventListener("billing-updated",ce),window.addEventListener("billing-cleared",A),()=>{D=!1,clearInterval(L),window.removeEventListener("billing-updated",ce),window.removeEventListener("billing-cleared",A)}},[]);const F=async()=>{a(!0);try{await fe(),se.success("Dashboard data refreshed successfully!")}catch(D){se.error("Failed to refresh dashboard"),console.warn("Refresh failed",D)}finally{a(!1)}},ne=()=>{const L=Math.floor((new Date().getTime()-ue.getTime())/1e3);return L<60?`${L}s ago`:L<3600?`${Math.floor(L/60)}m ago`:`${Math.floor(L/3600)}h ago`},te=()=>new Date().toLocaleString("en-PH",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return i?e.jsx("div",{className:"p-6",children:"Loading dashboard..."}):d?e.jsxs("div",{className:"p-6 text-red-600",children:["Error: ",d,". Check console/network."]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"flex justify-end px-8 py-4",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[e.jsx(vr,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Last updated: ",ne()]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${G?"bg-green-500 animate-pulse":"bg-red-500"}`}),e.jsx("span",{className:G?"text-green-600 font-medium":"text-red-600 font-medium",children:G?"Live":"Offline"})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:te()})]})}),e.jsx("div",{className:"px-8 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(Le,{className:"bg-gradient-to-br from-teal-50 to-cyan-50 border-0",children:e.jsxs(Be,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Revenue Today"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",f.toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),e.jsx(Zu,{className:"h-6 w-6 text-teal-600"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-teal-700",children:[e.jsx(Jg,{className:"h-3 w-3"}),e.jsx("span",{children:"Real-time from system"})]})]})}),e.jsx(Le,{className:"bg-gradient-to-br from-red-50 to-pink-50 border-0",children:e.jsxs(Be,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Pending Invoices"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x})]}),e.jsx(Pm,{className:"h-6 w-6 text-red-600"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-700",children:[e.jsx(Pm,{className:"h-3 w-3"}),e.jsx("span",{children:"Awaiting payment"})]})]})}),e.jsx(Le,{className:"bg-gradient-to-br from-yellow-50 to-amber-50 border-0",children:e.jsxs(Be,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Due This Week"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h})]}),e.jsx(mo,{className:"h-6 w-6 text-yellow-600"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-yellow-700",children:[e.jsx(vr,{className:"h-3 w-3"}),e.jsx("span",{children:"Next 7 days"})]})]})}),e.jsx(Le,{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-0",children:e.jsxs(Be,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Processed Payments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P})]}),e.jsx(Br,{className:"h-6 w-6 text-green-600"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-700",children:[e.jsx(Jg,{className:"h-3 w-3"}),e.jsx("span",{children:"Completed transactions"})]})]})})]})}),e.jsx("div",{className:"px-8 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(Le,{children:[e.jsx(pt,{children:e.jsx(ht,{className:"text-lg",children:"Quick Actions"})}),e.jsxs(Be,{className:"space-y-3",children:[e.jsxs(ie,{className:"w-full justify-start h-auto p-4",style:{backgroundColor:"#358E83"},onClick:()=>n?.("invoice"),children:[e.jsx(pa,{className:"h-4 w-4 mr-3"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Generate Invoice"}),e.jsx("div",{className:"text-xs opacity-90",children:"Create new patient invoice"})]})]}),e.jsxs(ie,{className:"w-full justify-start h-auto p-4",style:{backgroundColor:"#E94D61"},onClick:()=>n?.("payment"),children:[e.jsx(Zu,{className:"h-4 w-4 mr-3"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Process Payment"}),e.jsx("div",{className:"text-xs opacity-90",children:"Record patient payment"})]})]}),e.jsxs(ie,{variant:"outline",className:"w-full justify-start h-auto p-4",onClick:()=>n?.("patients-management"),children:[e.jsx(fo,{className:"h-4 w-4 mr-3"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Patient Management"}),e.jsx("div",{className:"text-xs text-gray-600",children:"View patient records"})]})]}),e.jsxs(ie,{variant:"outline",className:"w-full justify-start h-auto p-4",onClick:()=>n?.("history"),children:[e.jsx(hN,{className:"h-4 w-4 mr-3"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"View Reports"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Billing analytics"})]})]})]})]}),e.jsxs(Le,{className:"lg:col-span-2",children:[e.jsxs(pt,{className:"flex flex-row items-center justify-between",children:[e.jsx(ht,{className:"text-lg",children:"Recent Activity"}),e.jsxs(ie,{variant:"ghost",size:"sm",onClick:F,disabled:s,className:"text-teal-600 hover:text-teal-700",children:[e.jsx(pS,{className:`h-4 w-4 mr-1 ${s?"animate-spin":""}`}),s?"Refreshing...":"Refresh"]})]}),e.jsx(Be,{children:e.jsx("div",{className:"space-y-4",children:w.length>0?w.map(D=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:`p-2 rounded-full ${D.type==="payment"?"bg-green-100":D.type==="invoice"?"bg-blue-100":"bg-orange-100"}`,children:[D.type==="payment"&&e.jsx(Zu,{className:"h-4 w-4 text-green-600"}),D.type==="invoice"&&e.jsx(pa,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:D.label}),e.jsx("p",{className:"text-xs text-gray-500",children:D.date?new Date(D.date).toLocaleString():"N/A"})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded font-medium ${D.status==="paid"||D.status==="completed"||D.status==="processed"?"bg-green-100 text-green-700":D.status==="pending"||D.status==="unpaid"||D.status==="draft"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:D.status})})]},D.id)):e.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:e.jsx("p",{className:"text-sm",children:"No recent activity"})})})})]})]})})]})}function nm({onNavigateToModule:n}){return e.jsxs("div",{children:[e.jsx("section",{className:"mb-12",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Le,{className:"overflow-hidden",children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"flex-1 p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Patient Management"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Create and manage patient records that will be accessible to cashiers for billing and invoicing."}),e.jsxs(ie,{className:"bg-blue-500 hover:bg-blue-600 text-white",onClick:()=>n("patients-management"),children:["Manage Patients",e.jsx(Wl,{className:"ml-2 h-4 w-4"})]})]}),e.jsx("div",{className:"w-32 bg-orange-100 flex items-center justify-center",children:e.jsxs("div",{className:"w-16 h-20 bg-white rounded-lg shadow-sm flex items-center justify-center relative",children:[e.jsx(En,{className:"h-8 w-8 text-[#358E83]"}),e.jsx("div",{className:"absolute -bottom-2 -right-2 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(fo,{className:"h-3 w-3 text-white"})})]})})]})}),e.jsx(Le,{className:"overflow-hidden",children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"flex-1 p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"User Accounts"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Create, edit, and manage user accounts for all hospital systems. Control access permissions and roles."}),e.jsxs(ie,{className:"bg-blue-500 hover:bg-blue-600 text-white",onClick:()=>n("user-management"),children:["Manage Users",e.jsx(Wl,{className:"ml-2 h-4 w-4"})]})]}),e.jsx("div",{className:"w-32 bg-orange-100 flex items-center justify-center",children:e.jsxs("div",{className:"w-16 h-20 bg-white rounded-lg shadow-sm flex items-center justify-center relative",children:[e.jsx(En,{className:"h-8 w-8 text-blue-500"}),e.jsx("div",{className:"absolute -bottom-2 -right-2 w-6 h-6 bg-[#358E83] rounded-full flex items-center justify-center",children:e.jsx(fo,{className:"h-3 w-3 text-white"})})]})})]})}),e.jsx(Le,{className:"overflow-hidden",children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"flex-1 p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Discount Management"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Create and manage discount codes, promotions, and special pricing for billing operations."}),e.jsxs(ie,{className:"bg-blue-500 hover:bg-blue-600 text-white",onClick:()=>n("discount-management"),children:["Manage Discounts",e.jsx(Wl,{className:"ml-2 h-4 w-4"})]})]}),e.jsx("div",{className:"w-32 bg-orange-100 flex items-center justify-center",children:e.jsxs("div",{className:"w-16 h-20 bg-white rounded-lg shadow-sm flex items-center justify-center relative",children:[e.jsx(Or,{className:"h-8 w-8 text-[#E94D61]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(jy,{className:"h-2 w-2 text-white"})})]})})]})}),e.jsx(Le,{className:"overflow-hidden",children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"flex-1 p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Security & Permissions"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Configure role-based access control, manage permissions, and ensure system security."}),e.jsxs(ie,{className:"bg-blue-500 hover:bg-blue-600 text-white",onClick:()=>n("user-management"),children:["Security Settings",e.jsx(Wl,{className:"ml-2 h-4 w-4"})]})]}),e.jsx("div",{className:"w-32 bg-orange-100 flex items-center justify-center",children:e.jsxs("div",{className:"w-16 h-20 bg-white rounded-lg shadow-sm flex items-center justify-center relative",children:[e.jsx(Ny,{className:"h-8 w-8 text-purple-500"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(wy,{className:"h-2 w-2 text-white"})})]})})]})})]})}),e.jsx("section",{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(Le,{children:[e.jsx(pt,{className:"pb-3",children:e.jsx(ht,{className:"text-sm font-medium text-gray-600",children:"Total Users"})}),e.jsxs(Be,{children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:"156"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Across all systems"})]})]}),e.jsxs(Le,{children:[e.jsx(pt,{className:"pb-3",children:e.jsx(ht,{className:"text-sm font-medium text-gray-600",children:"Active Sessions"})}),e.jsxs(Be,{children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:"42"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Currently online"})]})]}),e.jsxs(Le,{children:[e.jsx(pt,{className:"pb-3",children:e.jsx(ht,{className:"text-sm font-medium text-gray-600",children:"System Health"})}),e.jsxs(Be,{children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:"100%"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"All systems operational"})]})]})]})})]})}function _c({className:n,...s}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:rt("w-full caption-bottom text-sm",n),...s})})}function Mc({className:n,...s}){return e.jsx("thead",{"data-slot":"table-header",className:rt("[&_tr]:border-b",n),...s})}function Oc({className:n,...s}){return e.jsx("tbody",{"data-slot":"table-body",className:rt("[&_tr:last-child]:border-0",n),...s})}function is({className:n,...s}){return e.jsx("tr",{"data-slot":"table-row",className:rt("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",n),...s})}function Kt({className:n,...s}){return e.jsx("th",{"data-slot":"table-head",className:rt("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...s})}function zt({className:n,...s}){return e.jsx("td",{"data-slot":"table-cell",className:rt("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...s})}function Ge(n,s,{checkForDefaultPrevented:a=!0}={}){return function(l){if(n?.(l),a===!1||!l.defaultPrevented)return s?.(l)}}function b2(n,s){const a=p.createContext(s),i=d=>{const{children:u,...f}=d,y=p.useMemo(()=>f,Object.values(f));return e.jsx(a.Provider,{value:y,children:u})};i.displayName=n+"Provider";function l(d){const u=p.useContext(a);if(u)return u;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${n}\``)}return[i,l]}function br(n,s=[]){let a=[];function i(d,u){const f=p.createContext(u),y=a.length;a=[...a,u];const x=h=>{const{scope:C,children:P,...S}=h,w=C?.[n]?.[y]||f,b=p.useMemo(()=>S,Object.values(S));return e.jsx(w.Provider,{value:b,children:P})};x.displayName=d+"Provider";function v(h,C){const P=C?.[n]?.[y]||f,S=p.useContext(P);if(S)return S;if(u!==void 0)return u;throw new Error(`\`${h}\` must be used within \`${d}\``)}return[x,v]}const l=()=>{const d=a.map(u=>p.createContext(u));return function(f){const y=f?.[n]||d;return p.useMemo(()=>({[`__scope${n}`]:{...f,[n]:y}}),[f,y])}};return l.scopeName=n,[i,N2(l,...s)]}function N2(...n){const s=n[0];if(n.length===1)return s;const a=()=>{const i=n.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(d){const u=i.reduce((f,{useScope:y,scopeName:x})=>{const h=y(d)[`__scope${x}`];return{...f,...h}},{});return p.useMemo(()=>({[`__scope${s.scopeName}`]:u}),[u])}};return a.scopeName=s.scopeName,a}var Dn=globalThis?.document?p.useLayoutEffect:()=>{},S2=ry[" useId ".trim().toString()]||(()=>{}),C2=0;function jn(n){const[s,a]=p.useState(S2());return Dn(()=>{a(i=>i??String(C2++))},[n]),n||(s?`radix-${s}`:"")}var P2=ry[" useInsertionEffect ".trim().toString()]||Dn;function Ls({prop:n,defaultProp:s,onChange:a=()=>{},caller:i}){const[l,d,u]=E2({defaultProp:s,onChange:a}),f=n!==void 0,y=f?n:l;{const v=p.useRef(n!==void 0);p.useEffect(()=>{const h=v.current;h!==f&&console.warn(`${i} is changing from ${h?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),v.current=f},[f,i])}const x=p.useCallback(v=>{if(f){const h=D2(v)?v(n):v;h!==n&&u.current?.(h)}else d(v)},[f,n,d,u]);return[y,x]}function E2({defaultProp:n,onChange:s}){const[a,i]=p.useState(n),l=p.useRef(a),d=p.useRef(s);return P2(()=>{d.current=s},[s]),p.useEffect(()=>{l.current!==a&&(d.current?.(a),l.current=a)},[a,l]),[a,i,d]}function D2(n){return typeof n=="function"}var k2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],it=k2.reduce((n,s)=>{const a=Os(`Primitive.${s}`),i=p.forwardRef((l,d)=>{const{asChild:u,...f}=l,y=u?a:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(y,{...f,ref:d})});return i.displayName=`Primitive.${s}`,{...n,[s]:i}},{});function Dy(n,s){n&&vo.flushSync(()=>n.dispatchEvent(s))}function Hr(n){const s=p.useRef(n);return p.useEffect(()=>{s.current=n}),p.useMemo(()=>(...a)=>s.current?.(...a),[])}function A2(n,s=globalThis?.document){const a=Hr(n);p.useEffect(()=>{const i=l=>{l.key==="Escape"&&a(l)};return s.addEventListener("keydown",i,{capture:!0}),()=>s.removeEventListener("keydown",i,{capture:!0})},[a,s])}var I2="DismissableLayer",Dm="dismissableLayer.update",R2="dismissableLayer.pointerDownOutside",T2="dismissableLayer.focusOutside",rx,ky=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wo=p.forwardRef((n,s)=>{const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:d,onInteractOutside:u,onDismiss:f,...y}=n,x=p.useContext(ky),[v,h]=p.useState(null),C=v?.ownerDocument??globalThis?.document,[,P]=p.useState({}),S=Pt(s,G=>h(G)),w=Array.from(x.layers),[b]=[...x.layersWithOutsidePointerEventsDisabled].slice(-1),E=w.indexOf(b),T=v?w.indexOf(v):-1,z=x.layersWithOutsidePointerEventsDisabled.size>0,B=T>=E,Q=O2(G=>{const J=G.target,ue=[...x.branches].some(ge=>ge.contains(J));!B||ue||(l?.(G),u?.(G),G.defaultPrevented||f?.())},C),X=L2(G=>{const J=G.target;[...x.branches].some(ge=>ge.contains(J))||(d?.(G),u?.(G),G.defaultPrevented||f?.())},C);return A2(G=>{T===x.layers.size-1&&(i?.(G),!G.defaultPrevented&&f&&(G.preventDefault(),f()))},C),p.useEffect(()=>{if(v)return a&&(x.layersWithOutsidePointerEventsDisabled.size===0&&(rx=C.body.style.pointerEvents,C.body.style.pointerEvents="none"),x.layersWithOutsidePointerEventsDisabled.add(v)),x.layers.add(v),sx(),()=>{a&&x.layersWithOutsidePointerEventsDisabled.size===1&&(C.body.style.pointerEvents=rx)}},[v,C,a,x]),p.useEffect(()=>()=>{v&&(x.layers.delete(v),x.layersWithOutsidePointerEventsDisabled.delete(v),sx())},[v,x]),p.useEffect(()=>{const G=()=>P({});return document.addEventListener(Dm,G),()=>document.removeEventListener(Dm,G)},[]),e.jsx(it.div,{...y,ref:S,style:{pointerEvents:z?B?"auto":"none":void 0,...n.style},onFocusCapture:Ge(n.onFocusCapture,X.onFocusCapture),onBlurCapture:Ge(n.onBlurCapture,X.onBlurCapture),onPointerDownCapture:Ge(n.onPointerDownCapture,Q.onPointerDownCapture)})});wo.displayName=I2;var _2="DismissableLayerBranch",M2=p.forwardRef((n,s)=>{const a=p.useContext(ky),i=p.useRef(null),l=Pt(s,i);return p.useEffect(()=>{const d=i.current;if(d)return a.branches.add(d),()=>{a.branches.delete(d)}},[a.branches]),e.jsx(it.div,{...n,ref:l})});M2.displayName=_2;function O2(n,s=globalThis?.document){const a=Hr(n),i=p.useRef(!1),l=p.useRef(()=>{});return p.useEffect(()=>{const d=f=>{if(f.target&&!i.current){let y=function(){Ay(R2,a,x,{discrete:!0})};const x={originalEvent:f};f.pointerType==="touch"?(s.removeEventListener("click",l.current),l.current=y,s.addEventListener("click",l.current,{once:!0})):y()}else s.removeEventListener("click",l.current);i.current=!1},u=window.setTimeout(()=>{s.addEventListener("pointerdown",d)},0);return()=>{window.clearTimeout(u),s.removeEventListener("pointerdown",d),s.removeEventListener("click",l.current)}},[s,a]),{onPointerDownCapture:()=>i.current=!0}}function L2(n,s=globalThis?.document){const a=Hr(n),i=p.useRef(!1);return p.useEffect(()=>{const l=d=>{d.target&&!i.current&&Ay(T2,a,{originalEvent:d},{discrete:!1})};return s.addEventListener("focusin",l),()=>s.removeEventListener("focusin",l)},[s,a]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function sx(){const n=new CustomEvent(Dm);document.dispatchEvent(n)}function Ay(n,s,a,{discrete:i}){const l=a.originalEvent.target,d=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:a});s&&l.addEventListener(n,s,{once:!0}),i?Dy(l,d):l.dispatchEvent(d)}var rm="focusScope.autoFocusOnMount",sm="focusScope.autoFocusOnUnmount",ax={bubbles:!1,cancelable:!0},F2="FocusScope",jo=p.forwardRef((n,s)=>{const{loop:a=!1,trapped:i=!1,onMountAutoFocus:l,onUnmountAutoFocus:d,...u}=n,[f,y]=p.useState(null),x=Hr(l),v=Hr(d),h=p.useRef(null),C=Pt(s,w=>y(w)),P=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(i){let w=function(z){if(P.paused||!f)return;const B=z.target;f.contains(B)?h.current=B:_s(h.current,{select:!0})},b=function(z){if(P.paused||!f)return;const B=z.relatedTarget;B!==null&&(f.contains(B)||_s(h.current,{select:!0}))},E=function(z){if(document.activeElement===document.body)for(const Q of z)Q.removedNodes.length>0&&_s(f)};document.addEventListener("focusin",w),document.addEventListener("focusout",b);const T=new MutationObserver(E);return f&&T.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",b),T.disconnect()}}},[i,f,P.paused]),p.useEffect(()=>{if(f){ox.add(P);const w=document.activeElement;if(!f.contains(w)){const E=new CustomEvent(rm,ax);f.addEventListener(rm,x),f.dispatchEvent(E),E.defaultPrevented||($2(V2(Iy(f)),{select:!0}),document.activeElement===w&&_s(f))}return()=>{f.removeEventListener(rm,x),setTimeout(()=>{const E=new CustomEvent(sm,ax);f.addEventListener(sm,v),f.dispatchEvent(E),E.defaultPrevented||_s(w??document.body,{select:!0}),f.removeEventListener(sm,v),ox.remove(P)},0)}}},[f,x,v,P]);const S=p.useCallback(w=>{if(!a&&!i||P.paused)return;const b=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,E=document.activeElement;if(b&&E){const T=w.currentTarget,[z,B]=z2(T);z&&B?!w.shiftKey&&E===B?(w.preventDefault(),a&&_s(z,{select:!0})):w.shiftKey&&E===z&&(w.preventDefault(),a&&_s(B,{select:!0})):E===T&&w.preventDefault()}},[a,i,P.paused]);return e.jsx(it.div,{tabIndex:-1,...u,ref:C,onKeyDown:S})});jo.displayName=F2;function $2(n,{select:s=!1}={}){const a=document.activeElement;for(const i of n)if(_s(i,{select:s}),document.activeElement!==a)return}function z2(n){const s=Iy(n),a=ix(s,n),i=ix(s.reverse(),n);return[a,i]}function Iy(n){const s=[],a=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const l=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||l?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)s.push(a.currentNode);return s}function ix(n,s){for(const a of n)if(!B2(a,{upTo:s}))return a}function B2(n,{upTo:s}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(s!==void 0&&n===s)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function U2(n){return n instanceof HTMLInputElement&&"select"in n}function _s(n,{select:s=!1}={}){if(n&&n.focus){const a=document.activeElement;n.focus({preventScroll:!0}),n!==a&&U2(n)&&s&&n.select()}}var ox=H2();function H2(){let n=[];return{add(s){const a=n[0];s!==a&&a?.pause(),n=lx(n,s),n.unshift(s)},remove(s){n=lx(n,s),n[0]?.resume()}}}function lx(n,s){const a=[...n],i=a.indexOf(s);return i!==-1&&a.splice(i,1),a}function V2(n){return n.filter(s=>s.tagName!=="A")}var q2="Portal",bo=p.forwardRef((n,s)=>{const{container:a,...i}=n,[l,d]=p.useState(!1);Dn(()=>d(!0),[]);const u=a||l&&globalThis?.document?.body;return u?Py.createPortal(e.jsx(it.div,{...i,ref:s}),u):null});bo.displayName=q2;function W2(n,s){return p.useReducer((a,i)=>s[a][i]??a,n)}var Nr=n=>{const{present:s,children:a}=n,i=K2(s),l=typeof a=="function"?a({present:i.isPresent}):p.Children.only(a),d=Pt(i.ref,G2(l));return typeof a=="function"||i.isPresent?p.cloneElement(l,{ref:d}):null};Nr.displayName="Presence";function K2(n){const[s,a]=p.useState(),i=p.useRef(null),l=p.useRef(n),d=p.useRef("none"),u=n?"mounted":"unmounted",[f,y]=W2(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const x=Gl(i.current);d.current=f==="mounted"?x:"none"},[f]),Dn(()=>{const x=i.current,v=l.current;if(v!==n){const C=d.current,P=Gl(x);n?y("MOUNT"):P==="none"||x?.display==="none"?y("UNMOUNT"):y(v&&C!==P?"ANIMATION_OUT":"UNMOUNT"),l.current=n}},[n,y]),Dn(()=>{if(s){let x;const v=s.ownerDocument.defaultView??window,h=P=>{const w=Gl(i.current).includes(CSS.escape(P.animationName));if(P.target===s&&w&&(y("ANIMATION_END"),!l.current)){const b=s.style.animationFillMode;s.style.animationFillMode="forwards",x=v.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=b)})}},C=P=>{P.target===s&&(d.current=Gl(i.current))};return s.addEventListener("animationstart",C),s.addEventListener("animationcancel",h),s.addEventListener("animationend",h),()=>{v.clearTimeout(x),s.removeEventListener("animationstart",C),s.removeEventListener("animationcancel",h),s.removeEventListener("animationend",h)}}else y("ANIMATION_END")},[s,y]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:p.useCallback(x=>{i.current=x?getComputedStyle(x):null,a(x)},[])}}function Gl(n){return n?.animationName||"none"}function G2(n){let s=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,a=s&&"isReactWarning"in s&&s.isReactWarning;return a?n.ref:(s=Object.getOwnPropertyDescriptor(n,"ref")?.get,a=s&&"isReactWarning"in s&&s.isReactWarning,a?n.props.ref:n.props.ref||n.ref)}var am=0;function Lc(){p.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??cx()),document.body.insertAdjacentElement("beforeend",n[1]??cx()),am++,()=>{am===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),am--}},[])}function cx(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Lr=function(){return Lr=Object.assign||function(s){for(var a,i=1,l=arguments.length;i<l;i++){a=arguments[i];for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(s[d]=a[d])}return s},Lr.apply(this,arguments)};function Ry(n,s){var a={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&s.indexOf(i)<0&&(a[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(n);l<i.length;l++)s.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(n,i[l])&&(a[i[l]]=n[i[l]]);return a}function Y2(n,s,a){if(a||arguments.length===2)for(var i=0,l=s.length,d;i<l;i++)(d||!(i in s))&&(d||(d=Array.prototype.slice.call(s,0,i)),d[i]=s[i]);return n.concat(d||Array.prototype.slice.call(s))}var ac="right-scroll-bar-position",ic="width-before-scroll-bar",J2="with-scroll-bars-hidden",Q2="--removed-body-scroll-bar-size";function im(n,s){return typeof n=="function"?n(s):n&&(n.current=s),n}function X2(n,s){var a=p.useState(function(){return{value:n,callback:s,facade:{get current(){return a.value},set current(i){var l=a.value;l!==i&&(a.value=i,a.callback(i,l))}}}})[0];return a.callback=s,a.facade}var Z2=typeof window<"u"?p.useLayoutEffect:p.useEffect,dx=new WeakMap;function eC(n,s){var a=X2(null,function(i){return n.forEach(function(l){return im(l,i)})});return Z2(function(){var i=dx.get(a);if(i){var l=new Set(i),d=new Set(n),u=a.current;l.forEach(function(f){d.has(f)||im(f,null)}),d.forEach(function(f){l.has(f)||im(f,u)})}dx.set(a,n)},[n]),a}function tC(n){return n}function nC(n,s){s===void 0&&(s=tC);var a=[],i=!1,l={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:n},useMedium:function(d){var u=s(d,i);return a.push(u),function(){a=a.filter(function(f){return f!==u})}},assignSyncMedium:function(d){for(i=!0;a.length;){var u=a;a=[],u.forEach(d)}a={push:function(f){return d(f)},filter:function(){return a}}},assignMedium:function(d){i=!0;var u=[];if(a.length){var f=a;a=[],f.forEach(d),u=a}var y=function(){var v=u;u=[],v.forEach(d)},x=function(){return Promise.resolve().then(y)};x(),a={push:function(v){u.push(v),x()},filter:function(v){return u=u.filter(v),a}}}};return l}function rC(n){n===void 0&&(n={});var s=nC(null);return s.options=Lr({async:!0,ssr:!1},n),s}var Ty=function(n){var s=n.sideCar,a=Ry(n,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=s.read();if(!i)throw new Error("Sidecar medium not found");return p.createElement(i,Lr({},a))};Ty.isSideCarExport=!0;function sC(n,s){return n.useMedium(s),Ty}var _y=rC(),om=function(){},Fc=p.forwardRef(function(n,s){var a=p.useRef(null),i=p.useState({onScrollCapture:om,onWheelCapture:om,onTouchMoveCapture:om}),l=i[0],d=i[1],u=n.forwardProps,f=n.children,y=n.className,x=n.removeScrollBar,v=n.enabled,h=n.shards,C=n.sideCar,P=n.noRelative,S=n.noIsolation,w=n.inert,b=n.allowPinchZoom,E=n.as,T=E===void 0?"div":E,z=n.gapMode,B=Ry(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),Q=C,X=eC([a,s]),G=Lr(Lr({},B),l);return p.createElement(p.Fragment,null,v&&p.createElement(Q,{sideCar:_y,removeScrollBar:x,shards:h,noRelative:P,noIsolation:S,inert:w,setCallbacks:d,allowPinchZoom:!!b,lockRef:a,gapMode:z}),u?p.cloneElement(p.Children.only(f),Lr(Lr({},G),{ref:X})):p.createElement(T,Lr({},G,{className:y,ref:X}),f))});Fc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Fc.classNames={fullWidth:ic,zeroRight:ac};var aC=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function iC(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var s=aC();return s&&n.setAttribute("nonce",s),n}function oC(n,s){n.styleSheet?n.styleSheet.cssText=s:n.appendChild(document.createTextNode(s))}function lC(n){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(n)}var cC=function(){var n=0,s=null;return{add:function(a){n==0&&(s=iC())&&(oC(s,a),lC(s)),n++},remove:function(){n--,!n&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},dC=function(){var n=cC();return function(s,a){p.useEffect(function(){return n.add(s),function(){n.remove()}},[s&&a])}},My=function(){var n=dC(),s=function(a){var i=a.styles,l=a.dynamic;return n(i,l),null};return s},uC={left:0,top:0,right:0,gap:0},lm=function(n){return parseInt(n||"",10)||0},mC=function(n){var s=window.getComputedStyle(document.body),a=s[n==="padding"?"paddingLeft":"marginLeft"],i=s[n==="padding"?"paddingTop":"marginTop"],l=s[n==="padding"?"paddingRight":"marginRight"];return[lm(a),lm(i),lm(l)]},fC=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return uC;var s=mC(n),a=document.documentElement.clientWidth,i=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,i-a+s[2]-s[0])}},pC=My(),ri="data-scroll-locked",hC=function(n,s,a,i){var l=n.left,d=n.top,u=n.right,f=n.gap;return a===void 0&&(a="margin"),`
  .`.concat(J2,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(f,"px ").concat(i,`;
  }
  body[`).concat(ri,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(i,";"),a==="margin"&&`
    padding-left: `.concat(l,`px;
    padding-top: `).concat(d,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(i,`;
    `),a==="padding"&&"padding-right: ".concat(f,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ac,` {
    right: `).concat(f,"px ").concat(i,`;
  }
  
  .`).concat(ic,` {
    margin-right: `).concat(f,"px ").concat(i,`;
  }
  
  .`).concat(ac," .").concat(ac,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(ic," .").concat(ic,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(ri,`] {
    `).concat(Q2,": ").concat(f,`px;
  }
`)},ux=function(){var n=parseInt(document.body.getAttribute(ri)||"0",10);return isFinite(n)?n:0},gC=function(){p.useEffect(function(){return document.body.setAttribute(ri,(ux()+1).toString()),function(){var n=ux()-1;n<=0?document.body.removeAttribute(ri):document.body.setAttribute(ri,n.toString())}},[])},xC=function(n){var s=n.noRelative,a=n.noImportant,i=n.gapMode,l=i===void 0?"margin":i;gC();var d=p.useMemo(function(){return fC(l)},[l]);return p.createElement(pC,{styles:hC(d,!s,l,a?"":"!important")})},km=!1;if(typeof window<"u")try{var Yl=Object.defineProperty({},"passive",{get:function(){return km=!0,!0}});window.addEventListener("test",Yl,Yl),window.removeEventListener("test",Yl,Yl)}catch{km=!1}var Ja=km?{passive:!1}:!1,yC=function(n){return n.tagName==="TEXTAREA"},Oy=function(n,s){if(!(n instanceof Element))return!1;var a=window.getComputedStyle(n);return a[s]!=="hidden"&&!(a.overflowY===a.overflowX&&!yC(n)&&a[s]==="visible")},vC=function(n){return Oy(n,"overflowY")},wC=function(n){return Oy(n,"overflowX")},mx=function(n,s){var a=s.ownerDocument,i=s;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var l=Ly(n,i);if(l){var d=Fy(n,i),u=d[1],f=d[2];if(u>f)return!0}i=i.parentNode}while(i&&i!==a.body);return!1},jC=function(n){var s=n.scrollTop,a=n.scrollHeight,i=n.clientHeight;return[s,a,i]},bC=function(n){var s=n.scrollLeft,a=n.scrollWidth,i=n.clientWidth;return[s,a,i]},Ly=function(n,s){return n==="v"?vC(s):wC(s)},Fy=function(n,s){return n==="v"?jC(s):bC(s)},NC=function(n,s){return n==="h"&&s==="rtl"?-1:1},SC=function(n,s,a,i,l){var d=NC(n,window.getComputedStyle(s).direction),u=d*i,f=a.target,y=s.contains(f),x=!1,v=u>0,h=0,C=0;do{if(!f)break;var P=Fy(n,f),S=P[0],w=P[1],b=P[2],E=w-b-d*S;(S||E)&&Ly(n,f)&&(h+=E,C+=S);var T=f.parentNode;f=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!y&&f!==document.body||y&&(s.contains(f)||s===f));return(v&&Math.abs(h)<1||!v&&Math.abs(C)<1)&&(x=!0),x},Jl=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},fx=function(n){return[n.deltaX,n.deltaY]},px=function(n){return n&&"current"in n?n.current:n},CC=function(n,s){return n[0]===s[0]&&n[1]===s[1]},PC=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},EC=0,Qa=[];function DC(n){var s=p.useRef([]),a=p.useRef([0,0]),i=p.useRef(),l=p.useState(EC++)[0],d=p.useState(My)[0],u=p.useRef(n);p.useEffect(function(){u.current=n},[n]),p.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(l));var w=Y2([n.lockRef.current],(n.shards||[]).map(px),!0).filter(Boolean);return w.forEach(function(b){return b.classList.add("allow-interactivity-".concat(l))}),function(){document.body.classList.remove("block-interactivity-".concat(l)),w.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(l))})}}},[n.inert,n.lockRef.current,n.shards]);var f=p.useCallback(function(w,b){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!u.current.allowPinchZoom;var E=Jl(w),T=a.current,z="deltaX"in w?w.deltaX:T[0]-E[0],B="deltaY"in w?w.deltaY:T[1]-E[1],Q,X=w.target,G=Math.abs(z)>Math.abs(B)?"h":"v";if("touches"in w&&G==="h"&&X.type==="range")return!1;var J=mx(G,X);if(!J)return!0;if(J?Q=G:(Q=G==="v"?"h":"v",J=mx(G,X)),!J)return!1;if(!i.current&&"changedTouches"in w&&(z||B)&&(i.current=Q),!Q)return!0;var ue=i.current||Q;return SC(ue,b,w,ue==="h"?z:B)},[]),y=p.useCallback(function(w){var b=w;if(!(!Qa.length||Qa[Qa.length-1]!==d)){var E="deltaY"in b?fx(b):Jl(b),T=s.current.filter(function(Q){return Q.name===b.type&&(Q.target===b.target||b.target===Q.shadowParent)&&CC(Q.delta,E)})[0];if(T&&T.should){b.cancelable&&b.preventDefault();return}if(!T){var z=(u.current.shards||[]).map(px).filter(Boolean).filter(function(Q){return Q.contains(b.target)}),B=z.length>0?f(b,z[0]):!u.current.noIsolation;B&&b.cancelable&&b.preventDefault()}}},[]),x=p.useCallback(function(w,b,E,T){var z={name:w,delta:b,target:E,should:T,shadowParent:kC(E)};s.current.push(z),setTimeout(function(){s.current=s.current.filter(function(B){return B!==z})},1)},[]),v=p.useCallback(function(w){a.current=Jl(w),i.current=void 0},[]),h=p.useCallback(function(w){x(w.type,fx(w),w.target,f(w,n.lockRef.current))},[]),C=p.useCallback(function(w){x(w.type,Jl(w),w.target,f(w,n.lockRef.current))},[]);p.useEffect(function(){return Qa.push(d),n.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:C}),document.addEventListener("wheel",y,Ja),document.addEventListener("touchmove",y,Ja),document.addEventListener("touchstart",v,Ja),function(){Qa=Qa.filter(function(w){return w!==d}),document.removeEventListener("wheel",y,Ja),document.removeEventListener("touchmove",y,Ja),document.removeEventListener("touchstart",v,Ja)}},[]);var P=n.removeScrollBar,S=n.inert;return p.createElement(p.Fragment,null,S?p.createElement(d,{styles:PC(l)}):null,P?p.createElement(xC,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function kC(n){for(var s=null;n!==null;)n instanceof ShadowRoot&&(s=n.host,n=n.host),n=n.parentNode;return s}const AC=sC(_y,DC);var No=p.forwardRef(function(n,s){return p.createElement(Fc,Lr({},n,{ref:s,sideCar:AC}))});No.classNames=Fc.classNames;var IC=function(n){if(typeof document>"u")return null;var s=Array.isArray(n)?n[0]:n;return s.ownerDocument.body},Xa=new WeakMap,Ql=new WeakMap,Xl={},cm=0,$y=function(n){return n&&(n.host||$y(n.parentNode))},RC=function(n,s){return s.map(function(a){if(n.contains(a))return a;var i=$y(a);return i&&n.contains(i)?i:(console.error("aria-hidden",a,"in not contained inside",n,". Doing nothing"),null)}).filter(function(a){return!!a})},TC=function(n,s,a,i){var l=RC(s,Array.isArray(n)?n:[n]);Xl[a]||(Xl[a]=new WeakMap);var d=Xl[a],u=[],f=new Set,y=new Set(l),x=function(h){!h||f.has(h)||(f.add(h),x(h.parentNode))};l.forEach(x);var v=function(h){!h||y.has(h)||Array.prototype.forEach.call(h.children,function(C){if(f.has(C))v(C);else try{var P=C.getAttribute(i),S=P!==null&&P!=="false",w=(Xa.get(C)||0)+1,b=(d.get(C)||0)+1;Xa.set(C,w),d.set(C,b),u.push(C),w===1&&S&&Ql.set(C,!0),b===1&&C.setAttribute(a,"true"),S||C.setAttribute(i,"true")}catch(E){console.error("aria-hidden: cannot operate on ",C,E)}})};return v(s),f.clear(),cm++,function(){u.forEach(function(h){var C=Xa.get(h)-1,P=d.get(h)-1;Xa.set(h,C),d.set(h,P),C||(Ql.has(h)||h.removeAttribute(i),Ql.delete(h)),P||h.removeAttribute(a)}),cm--,cm||(Xa=new WeakMap,Xa=new WeakMap,Ql=new WeakMap,Xl={})}},$c=function(n,s,a){a===void 0&&(a="data-aria-hidden");var i=Array.from(Array.isArray(n)?n:[n]),l=IC(n);return l?(i.push.apply(i,Array.from(l.querySelectorAll("[aria-live], script"))),TC(i,l,a,"aria-hidden")):function(){return null}},zc="Dialog",[zy,By]=br(zc),[_C,Sr]=zy(zc),Uy=n=>{const{__scopeDialog:s,children:a,open:i,defaultOpen:l,onOpenChange:d,modal:u=!0}=n,f=p.useRef(null),y=p.useRef(null),[x,v]=Ls({prop:i,defaultProp:l??!1,onChange:d,caller:zc});return e.jsx(_C,{scope:s,triggerRef:f,contentRef:y,contentId:jn(),titleId:jn(),descriptionId:jn(),open:x,onOpenChange:v,onOpenToggle:p.useCallback(()=>v(h=>!h),[v]),modal:u,children:a})};Uy.displayName=zc;var Hy="DialogTrigger",Vy=p.forwardRef((n,s)=>{const{__scopeDialog:a,...i}=n,l=Sr(Hy,a),d=Pt(s,l.triggerRef);return e.jsx(it.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":ff(l.open),...i,ref:d,onClick:Ge(n.onClick,l.onOpenToggle)})});Vy.displayName=Hy;var uf="DialogPortal",[MC,qy]=zy(uf,{forceMount:void 0}),Wy=n=>{const{__scopeDialog:s,forceMount:a,children:i,container:l}=n,d=Sr(uf,s);return e.jsx(MC,{scope:s,forceMount:a,children:p.Children.map(i,u=>e.jsx(Nr,{present:a||d.open,children:e.jsx(bo,{asChild:!0,container:l,children:u})}))})};Wy.displayName=uf;var bc="DialogOverlay",Ky=p.forwardRef((n,s)=>{const a=qy(bc,n.__scopeDialog),{forceMount:i=a.forceMount,...l}=n,d=Sr(bc,n.__scopeDialog);return d.modal?e.jsx(Nr,{present:i||d.open,children:e.jsx(LC,{...l,ref:s})}):null});Ky.displayName=bc;var OC=Os("DialogOverlay.RemoveScroll"),LC=p.forwardRef((n,s)=>{const{__scopeDialog:a,...i}=n,l=Sr(bc,a);return e.jsx(No,{as:OC,allowPinchZoom:!0,shards:[l.contentRef],children:e.jsx(it.div,{"data-state":ff(l.open),...i,ref:s,style:{pointerEvents:"auto",...i.style}})})}),ya="DialogContent",Gy=p.forwardRef((n,s)=>{const a=qy(ya,n.__scopeDialog),{forceMount:i=a.forceMount,...l}=n,d=Sr(ya,n.__scopeDialog);return e.jsx(Nr,{present:i||d.open,children:d.modal?e.jsx(FC,{...l,ref:s}):e.jsx($C,{...l,ref:s})})});Gy.displayName=ya;var FC=p.forwardRef((n,s)=>{const a=Sr(ya,n.__scopeDialog),i=p.useRef(null),l=Pt(s,a.contentRef,i);return p.useEffect(()=>{const d=i.current;if(d)return $c(d)},[]),e.jsx(Yy,{...n,ref:l,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ge(n.onCloseAutoFocus,d=>{d.preventDefault(),a.triggerRef.current?.focus()}),onPointerDownOutside:Ge(n.onPointerDownOutside,d=>{const u=d.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0;(u.button===2||f)&&d.preventDefault()}),onFocusOutside:Ge(n.onFocusOutside,d=>d.preventDefault())})}),$C=p.forwardRef((n,s)=>{const a=Sr(ya,n.__scopeDialog),i=p.useRef(!1),l=p.useRef(!1);return e.jsx(Yy,{...n,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:d=>{n.onCloseAutoFocus?.(d),d.defaultPrevented||(i.current||a.triggerRef.current?.focus(),d.preventDefault()),i.current=!1,l.current=!1},onInteractOutside:d=>{n.onInteractOutside?.(d),d.defaultPrevented||(i.current=!0,d.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const u=d.target;a.triggerRef.current?.contains(u)&&d.preventDefault(),d.detail.originalEvent.type==="focusin"&&l.current&&d.preventDefault()}})}),Yy=p.forwardRef((n,s)=>{const{__scopeDialog:a,trapFocus:i,onOpenAutoFocus:l,onCloseAutoFocus:d,...u}=n,f=Sr(ya,a),y=p.useRef(null),x=Pt(s,y);return Lc(),e.jsxs(e.Fragment,{children:[e.jsx(jo,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:l,onUnmountAutoFocus:d,children:e.jsx(wo,{role:"dialog",id:f.contentId,"aria-describedby":f.descriptionId,"aria-labelledby":f.titleId,"data-state":ff(f.open),...u,ref:x,onDismiss:()=>f.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(BC,{titleId:f.titleId}),e.jsx(HC,{contentRef:y,descriptionId:f.descriptionId})]})]})}),mf="DialogTitle",Jy=p.forwardRef((n,s)=>{const{__scopeDialog:a,...i}=n,l=Sr(mf,a);return e.jsx(it.h2,{id:l.titleId,...i,ref:s})});Jy.displayName=mf;var Qy="DialogDescription",Xy=p.forwardRef((n,s)=>{const{__scopeDialog:a,...i}=n,l=Sr(Qy,a);return e.jsx(it.p,{id:l.descriptionId,...i,ref:s})});Xy.displayName=Qy;var Zy="DialogClose",e0=p.forwardRef((n,s)=>{const{__scopeDialog:a,...i}=n,l=Sr(Zy,a);return e.jsx(it.button,{type:"button",...i,ref:s,onClick:Ge(n.onClick,()=>l.onOpenChange(!1))})});e0.displayName=Zy;function ff(n){return n?"open":"closed"}var t0="DialogTitleWarning",[zC,n0]=b2(t0,{contentName:ya,titleName:mf,docsSlug:"dialog"}),BC=({titleId:n})=>{const s=n0(t0),a=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return p.useEffect(()=>{n&&(document.getElementById(n)||console.error(a))},[a,n]),null},UC="DialogDescriptionWarning",HC=({contentRef:n,descriptionId:s})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${n0(UC).contentName}}.`;return p.useEffect(()=>{const l=n.current?.getAttribute("aria-describedby");s&&l&&(document.getElementById(s)||console.warn(i))},[i,n,s]),null},pf=Uy,r0=Vy,hf=Wy,Bc=Ky,Uc=Gy,gf=Jy,xf=Xy,yf=e0;const Gt=pf,s0=r0,VC=hf,a0=p.forwardRef(({className:n,...s},a)=>e.jsx(Bc,{ref:a,"data-slot":"dialog-overlay",className:rt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...s}));a0.displayName=Bc.displayName;const Bt=p.forwardRef(({className:n,children:s,...a},i)=>e.jsxs(VC,{children:[e.jsx(a0,{}),e.jsxs(Uc,{ref:i,"data-slot":"dialog-content",className:rt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),...a,children:[s,e.jsxs(yf,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(Cy,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Bt.displayName=Uc.displayName;const Ut=p.forwardRef(({className:n,...s},a)=>e.jsx("div",{ref:a,"data-slot":"dialog-header",className:rt("flex flex-col gap-2 text-center sm:text-left",n),...s}));Ut.displayName="DialogHeader";const Hc=p.forwardRef(({className:n,...s},a)=>e.jsx("div",{ref:a,"data-slot":"dialog-footer",className:rt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n),...s}));Hc.displayName="DialogFooter";const Ht=p.forwardRef(({className:n,...s},a)=>e.jsx(gf,{ref:a,"data-slot":"dialog-title",className:rt("text-lg leading-none font-semibold",n),...s}));Ht.displayName=gf.displayName;const dn=p.forwardRef(({className:n,...s},a)=>e.jsx(xf,{ref:a,"data-slot":"dialog-description",className:rt("text-muted-foreground text-sm",n),...s}));dn.displayName=xf.displayName;const qC=of("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function i0({className:n,variant:s,...a}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:rt(qC({variant:s}),n),...a})}function o0({className:n,...s}){return e.jsx("div",{"data-slot":"alert-title",className:rt("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",n),...s})}function l0({className:n,...s}){return e.jsx("div",{"data-slot":"alert-description",className:rt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",n),...s})}function vf(n){const s=n+"CollectionProvider",[a,i]=br(s),[l,d]=a(s,{collectionRef:{current:null},itemMap:new Map}),u=w=>{const{scope:b,children:E}=w,T=ke.useRef(null),z=ke.useRef(new Map).current;return e.jsx(l,{scope:b,itemMap:z,collectionRef:T,children:E})};u.displayName=s;const f=n+"CollectionSlot",y=Os(f),x=ke.forwardRef((w,b)=>{const{scope:E,children:T}=w,z=d(f,E),B=Pt(b,z.collectionRef);return e.jsx(y,{ref:B,children:T})});x.displayName=f;const v=n+"CollectionItemSlot",h="data-radix-collection-item",C=Os(v),P=ke.forwardRef((w,b)=>{const{scope:E,children:T,...z}=w,B=ke.useRef(null),Q=Pt(b,B),X=d(v,E);return ke.useEffect(()=>(X.itemMap.set(B,{ref:B,...z}),()=>void X.itemMap.delete(B))),e.jsx(C,{[h]:"",ref:Q,children:T})});P.displayName=v;function S(w){const b=d(n+"CollectionConsumer",w);return ke.useCallback(()=>{const T=b.collectionRef.current;if(!T)return[];const z=Array.from(T.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((X,G)=>z.indexOf(X.ref.current)-z.indexOf(G.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:u,Slot:x,ItemSlot:P},S,i]}var WC=p.createContext(void 0);function Vc(n){const s=p.useContext(WC);return n||s||"ltr"}var dm="rovingFocusGroup.onEntryFocus",KC={bubbles:!1,cancelable:!0},So="RovingFocusGroup",[Am,c0,GC]=vf(So),[YC,qc]=br(So,[GC]),[JC,QC]=YC(So),d0=p.forwardRef((n,s)=>e.jsx(Am.Provider,{scope:n.__scopeRovingFocusGroup,children:e.jsx(Am.Slot,{scope:n.__scopeRovingFocusGroup,children:e.jsx(XC,{...n,ref:s})})}));d0.displayName=So;var XC=p.forwardRef((n,s)=>{const{__scopeRovingFocusGroup:a,orientation:i,loop:l=!1,dir:d,currentTabStopId:u,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:y,onEntryFocus:x,preventScrollOnEntryFocus:v=!1,...h}=n,C=p.useRef(null),P=Pt(s,C),S=Vc(d),[w,b]=Ls({prop:u,defaultProp:f??null,onChange:y,caller:So}),[E,T]=p.useState(!1),z=Hr(x),B=c0(a),Q=p.useRef(!1),[X,G]=p.useState(0);return p.useEffect(()=>{const J=C.current;if(J)return J.addEventListener(dm,z),()=>J.removeEventListener(dm,z)},[z]),e.jsx(JC,{scope:a,orientation:i,dir:S,loop:l,currentTabStopId:w,onItemFocus:p.useCallback(J=>b(J),[b]),onItemShiftTab:p.useCallback(()=>T(!0),[]),onFocusableItemAdd:p.useCallback(()=>G(J=>J+1),[]),onFocusableItemRemove:p.useCallback(()=>G(J=>J-1),[]),children:e.jsx(it.div,{tabIndex:E||X===0?-1:0,"data-orientation":i,...h,ref:P,style:{outline:"none",...n.style},onMouseDown:Ge(n.onMouseDown,()=>{Q.current=!0}),onFocus:Ge(n.onFocus,J=>{const ue=!Q.current;if(J.target===J.currentTarget&&ue&&!E){const ge=new CustomEvent(dm,KC);if(J.currentTarget.dispatchEvent(ge),!ge.defaultPrevented){const Ee=B().filter(ne=>ne.focusable),xe=Ee.find(ne=>ne.active),me=Ee.find(ne=>ne.id===w),F=[xe,me,...Ee].filter(Boolean).map(ne=>ne.ref.current);f0(F,v)}}Q.current=!1}),onBlur:Ge(n.onBlur,()=>T(!1))})})}),u0="RovingFocusGroupItem",m0=p.forwardRef((n,s)=>{const{__scopeRovingFocusGroup:a,focusable:i=!0,active:l=!1,tabStopId:d,children:u,...f}=n,y=jn(),x=d||y,v=QC(u0,a),h=v.currentTabStopId===x,C=c0(a),{onFocusableItemAdd:P,onFocusableItemRemove:S,currentTabStopId:w}=v;return p.useEffect(()=>{if(i)return P(),()=>S()},[i,P,S]),e.jsx(Am.ItemSlot,{scope:a,id:x,focusable:i,active:l,children:e.jsx(it.span,{tabIndex:h?0:-1,"data-orientation":v.orientation,...f,ref:s,onMouseDown:Ge(n.onMouseDown,b=>{i?v.onItemFocus(x):b.preventDefault()}),onFocus:Ge(n.onFocus,()=>v.onItemFocus(x)),onKeyDown:Ge(n.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){v.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const E=tP(b,v.orientation,v.dir);if(E!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let z=C().filter(B=>B.focusable).map(B=>B.ref.current);if(E==="last")z.reverse();else if(E==="prev"||E==="next"){E==="prev"&&z.reverse();const B=z.indexOf(b.currentTarget);z=v.loop?nP(z,B+1):z.slice(B+1)}setTimeout(()=>f0(z))}}),children:typeof u=="function"?u({isCurrentTabStop:h,hasTabStop:w!=null}):u})})});m0.displayName=u0;var ZC={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function eP(n,s){return s!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function tP(n,s,a){const i=eP(n.key,a);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return ZC[i]}function f0(n,s=!1){const a=document.activeElement;for(const i of n)if(i===a||(i.focus({preventScroll:s}),document.activeElement!==a))return}function nP(n,s){return n.map((a,i)=>n[(s+i)%n.length])}var p0=d0,h0=m0,Wc="Tabs",[rP]=br(Wc,[qc]),g0=qc(),[sP,wf]=rP(Wc),x0=p.forwardRef((n,s)=>{const{__scopeTabs:a,value:i,onValueChange:l,defaultValue:d,orientation:u="horizontal",dir:f,activationMode:y="automatic",...x}=n,v=Vc(f),[h,C]=Ls({prop:i,onChange:l,defaultProp:d??"",caller:Wc});return e.jsx(sP,{scope:a,baseId:jn(),value:h,onValueChange:C,orientation:u,dir:v,activationMode:y,children:e.jsx(it.div,{dir:v,"data-orientation":u,...x,ref:s})})});x0.displayName=Wc;var y0="TabsList",v0=p.forwardRef((n,s)=>{const{__scopeTabs:a,loop:i=!0,...l}=n,d=wf(y0,a),u=g0(a);return e.jsx(p0,{asChild:!0,...u,orientation:d.orientation,dir:d.dir,loop:i,children:e.jsx(it.div,{role:"tablist","aria-orientation":d.orientation,...l,ref:s})})});v0.displayName=y0;var w0="TabsTrigger",j0=p.forwardRef((n,s)=>{const{__scopeTabs:a,value:i,disabled:l=!1,...d}=n,u=wf(w0,a),f=g0(a),y=S0(u.baseId,i),x=C0(u.baseId,i),v=i===u.value;return e.jsx(h0,{asChild:!0,...f,focusable:!l,active:v,children:e.jsx(it.button,{type:"button",role:"tab","aria-selected":v,"aria-controls":x,"data-state":v?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:y,...d,ref:s,onMouseDown:Ge(n.onMouseDown,h=>{!l&&h.button===0&&h.ctrlKey===!1?u.onValueChange(i):h.preventDefault()}),onKeyDown:Ge(n.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&u.onValueChange(i)}),onFocus:Ge(n.onFocus,()=>{const h=u.activationMode!=="manual";!v&&!l&&h&&u.onValueChange(i)})})})});j0.displayName=w0;var b0="TabsContent",N0=p.forwardRef((n,s)=>{const{__scopeTabs:a,value:i,forceMount:l,children:d,...u}=n,f=wf(b0,a),y=S0(f.baseId,i),x=C0(f.baseId,i),v=i===f.value,h=p.useRef(v);return p.useEffect(()=>{const C=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(C)},[]),e.jsx(Nr,{present:l||v,children:({present:C})=>e.jsx(it.div,{"data-state":v?"active":"inactive","data-orientation":f.orientation,role:"tabpanel","aria-labelledby":y,hidden:!C,id:x,tabIndex:0,...u,ref:s,style:{...n.style,animationDuration:h.current?"0s":void 0},children:C&&d})})});N0.displayName=b0;function S0(n,s){return`${n}-trigger-${s}`}function C0(n,s){return`${n}-content-${s}`}var aP=x0,iP=v0,oP=j0,lP=N0;function Co({className:n,...s}){return e.jsx(aP,{"data-slot":"tabs",className:rt("flex flex-col gap-2",n),...s})}function Po({className:n,...s}){return e.jsx(iP,{"data-slot":"tabs-list",className:rt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",n),...s})}function Jn({className:n,...s}){return e.jsx(oP,{"data-slot":"tabs-trigger",className:rt("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...s})}function Qn({className:n,...s}){return e.jsx(lP,{"data-slot":"tabs-content",className:rt("flex-1 outline-none",n),...s})}function cP(){const[n,s]=p.useState([]),[a,i]=p.useState(null),[l,d]=p.useState(""),[u,f]=p.useState(!1),y=async()=>{try{const C=await(await fetch("/api/patients/archived")).json();C.success?s(C.data):d(C.message||"Failed to fetch archived patients")}catch{d("Failed to fetch archived patients")}};p.useEffect(()=>{y()},[]);const x=async h=>{try{const P=await(await fetch(`/api/patients/${h}/restore`,{method:"POST"})).json();P.success?y():d(P.message||"Failed to restore patient")}catch{d("Failed to restore patient")}},v=async()=>{if(a)try{const h=await fetch(`/api/patients/${a._id}`,{method:"DELETE"});if(h.ok)f(!1),i(null),y();else{let C="Failed to delete patient";try{const P=await h.json();P&&P.message&&(C=P.message)}catch{}d(C)}}catch{d("Failed to delete patient")}};return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Archived Patients"}),l&&e.jsxs(i0,{variant:"destructive",className:"mb-4",children:[e.jsx(ls,{className:"h-4 w-4"}),e.jsx(o0,{children:"Error"}),e.jsx(l0,{children:l})]}),e.jsxs(_c,{children:[e.jsx(Mc,{children:e.jsxs(is,{children:[e.jsx(Kt,{children:"Name"}),e.jsx(Kt,{children:"Date of Birth"}),e.jsx(Kt,{children:"Contact"}),e.jsx(Kt,{children:"Email"}),e.jsx(Kt,{children:"Archived Date"}),e.jsx(Kt,{children:"Actions"})]})}),e.jsx(Oc,{children:n.map(h=>e.jsxs(is,{children:[e.jsx(zt,{children:h.name}),e.jsx(zt,{children:h.dateOfBirth}),e.jsx(zt,{children:h.contactNumber}),e.jsx(zt,{children:h.email}),e.jsx(zt,{children:new Date(h.archivedAt).toLocaleDateString()}),e.jsx(zt,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ie,{variant:"outline",onClick:()=>x(h._id),children:"Restore"}),e.jsx(ie,{variant:"destructive",onClick:()=>{i(h),f(!0)},children:"Delete"})]})})]},h._id))})]}),e.jsx(Gt,{open:u,onOpenChange:h=>{f(h),h||i(null)},children:e.jsxs(Bt,{children:[e.jsxs(Ut,{children:[e.jsx(Ht,{children:"Confirm Permanent Deletion"}),e.jsxs(dn,{children:["Are you sure you want to permanently delete ",a?.name,"? This action cannot be undone."]})]}),e.jsxs(Hc,{children:[e.jsx(ie,{variant:"outline",onClick:()=>{f(!1),i(null)},children:"Cancel"}),e.jsx(ie,{variant:"destructive",onClick:v,children:"Delete Permanently"})]})]})})]})}function dP({onNavigateToView:n}){const[s,a]=p.useState([]),[i,l]=p.useState(null),[d,u]=p.useState(""),[f,y]=p.useState(!1),[x,v]=p.useState("active"),h=async()=>{try{const w=await(await fetch("/api/patients")).json();w.success?a(w.data):u(w.message||"Failed to fetch patients")}catch{u("Failed to fetch patients")}};p.useEffect(()=>{h()},[]);const{userSession:C}=sf(),P=async()=>{if(i)try{const w=await(await fetch(`/api/patients/${i._id}/archive`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:"current-user-id"})})).json();w.success?(y(!1),h()):u(w.message||"Failed to archive patient")}catch{u("Failed to archive patient")}};return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Patients Module"}),e.jsxs(ie,{variant:"outline",onClick:()=>n?.("medicare-billing"),children:[e.jsx(cf,{className:"h-4 w-4 mr-2"}),"Back to Billing"]})]}),d&&e.jsxs(i0,{variant:"destructive",className:"mb-4",children:[e.jsx(ls,{className:"h-4 w-4"}),e.jsx(o0,{children:"Error"}),e.jsx(l0,{children:d})]}),e.jsxs(Le,{className:"mb-6",children:[e.jsx(pt,{children:e.jsx(ht,{children:"Patient Management"})}),e.jsx(Be,{children:e.jsxs(Co,{value:x,onValueChange:v,children:[e.jsxs(Po,{children:[e.jsxs(Jn,{value:"active",className:"flex items-center",children:[e.jsx(En,{className:"w-4 h-4 mr-2"}),"Active Patients"]}),e.jsxs(Jn,{value:"archived",className:"flex items-center",children:[e.jsx(Cm,{className:"w-4 h-4 mr-2"}),"Archived Patients"]})]}),e.jsx(Qn,{value:"active",children:e.jsxs(_c,{children:[e.jsx(Mc,{children:e.jsxs(is,{children:[e.jsx(Kt,{children:"Name"}),e.jsx(Kt,{children:"Date of Birth"}),e.jsx(Kt,{children:"Sex"}),e.jsx(Kt,{children:"Contact"}),e.jsx(Kt,{children:"Blood Type"}),e.jsx(Kt,{children:"Actions"})]})}),e.jsx(Oc,{children:s.map(S=>e.jsxs(is,{children:[e.jsx(zt,{children:S.name}),e.jsx(zt,{children:S.dateOfBirth}),e.jsx(zt,{children:S.sex}),e.jsx(zt,{children:S.contactNumber}),e.jsx(zt,{children:S.bloodType}),e.jsx(zt,{children:C&&(C.role==="admin"||C.role==="Admin")?e.jsxs(Gt,{open:f,onOpenChange:y,children:[e.jsx(s0,{asChild:!0,children:e.jsxs(ie,{variant:"secondary",onClick:()=>l(S),className:"flex items-center",children:[e.jsx(Cm,{className:"w-4 h-4 mr-2"}),"Archive"]})}),e.jsxs(Bt,{children:[e.jsxs(Ut,{children:[e.jsx(Ht,{children:"Confirm Archive"}),e.jsxs(dn,{children:["Are you sure you want to archive ",S.name,"? The patient record will be moved to the archive."]})]}),e.jsxs(Hc,{children:[e.jsx(ie,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsx(ie,{variant:"default",onClick:P,children:"Archive"})]})]})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"(Admin only)"})})]},S._id))})]})}),e.jsx(Qn,{value:"archived",children:e.jsx(cP,{})})]})})]})]})})}function Ue({className:n,type:s,...a}){return e.jsx("input",{type:s,"data-slot":"input",className:rt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...a})}var uP="Label",P0=p.forwardRef((n,s)=>e.jsx(it.label,{...n,ref:s,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(n.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));P0.displayName=uP;var mP=P0;function ye({className:n,...s}){return e.jsx(mP,{"data-slot":"label",className:rt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...s})}const fP=of("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Nt({className:n,variant:s,asChild:a=!1,...i}){const l=a?gy:"span";return e.jsx(l,{"data-slot":"badge",className:rt(fP({variant:s}),n),...i})}var pP="Separator",hx="horizontal",hP=["horizontal","vertical"],E0=p.forwardRef((n,s)=>{const{decorative:a,orientation:i=hx,...l}=n,d=gP(i)?i:hx,f=a?{role:"none"}:{"aria-orientation":d==="vertical"?d:void 0,role:"separator"};return e.jsx(it.div,{"data-orientation":d,...f,...l,ref:s})});E0.displayName=pP;function gP(n){return hP.includes(n)}var xP=E0;function Un({className:n,orientation:s="horizontal",decorative:a=!0,...i}){return e.jsx(xP,{"data-slot":"separator-root",decorative:a,orientation:s,className:rt("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",n),...i})}function gx(n,[s,a]){return Math.min(a,Math.max(s,n))}const yP=["top","right","bottom","left"],Fs=Math.min,Yn=Math.max,Nc=Math.round,Zl=Math.floor,zr=n=>({x:n,y:n}),vP={left:"right",right:"left",bottom:"top",top:"bottom"},wP={start:"end",end:"start"};function Im(n,s,a){return Yn(n,Fs(s,a))}function cs(n,s){return typeof n=="function"?n(s):n}function ds(n){return n.split("-")[0]}function pi(n){return n.split("-")[1]}function jf(n){return n==="x"?"y":"x"}function bf(n){return n==="y"?"height":"width"}const jP=new Set(["top","bottom"]);function Fr(n){return jP.has(ds(n))?"y":"x"}function Nf(n){return jf(Fr(n))}function bP(n,s,a){a===void 0&&(a=!1);const i=pi(n),l=Nf(n),d=bf(l);let u=l==="x"?i===(a?"end":"start")?"right":"left":i==="start"?"bottom":"top";return s.reference[d]>s.floating[d]&&(u=Sc(u)),[u,Sc(u)]}function NP(n){const s=Sc(n);return[Rm(n),s,Rm(s)]}function Rm(n){return n.replace(/start|end/g,s=>wP[s])}const xx=["left","right"],yx=["right","left"],SP=["top","bottom"],CP=["bottom","top"];function PP(n,s,a){switch(n){case"top":case"bottom":return a?s?yx:xx:s?xx:yx;case"left":case"right":return s?SP:CP;default:return[]}}function EP(n,s,a,i){const l=pi(n);let d=PP(ds(n),a==="start",i);return l&&(d=d.map(u=>u+"-"+l),s&&(d=d.concat(d.map(Rm)))),d}function Sc(n){return n.replace(/left|right|bottom|top/g,s=>vP[s])}function DP(n){return{top:0,right:0,bottom:0,left:0,...n}}function D0(n){return typeof n!="number"?DP(n):{top:n,right:n,bottom:n,left:n}}function Cc(n){const{x:s,y:a,width:i,height:l}=n;return{width:i,height:l,top:a,left:s,right:s+i,bottom:a+l,x:s,y:a}}function vx(n,s,a){let{reference:i,floating:l}=n;const d=Fr(s),u=Nf(s),f=bf(u),y=ds(s),x=d==="y",v=i.x+i.width/2-l.width/2,h=i.y+i.height/2-l.height/2,C=i[f]/2-l[f]/2;let P;switch(y){case"top":P={x:v,y:i.y-l.height};break;case"bottom":P={x:v,y:i.y+i.height};break;case"right":P={x:i.x+i.width,y:h};break;case"left":P={x:i.x-l.width,y:h};break;default:P={x:i.x,y:i.y}}switch(pi(s)){case"start":P[u]-=C*(a&&x?-1:1);break;case"end":P[u]+=C*(a&&x?-1:1);break}return P}const kP=async(n,s,a)=>{const{placement:i="bottom",strategy:l="absolute",middleware:d=[],platform:u}=a,f=d.filter(Boolean),y=await(u.isRTL==null?void 0:u.isRTL(s));let x=await u.getElementRects({reference:n,floating:s,strategy:l}),{x:v,y:h}=vx(x,i,y),C=i,P={},S=0;for(let w=0;w<f.length;w++){const{name:b,fn:E}=f[w],{x:T,y:z,data:B,reset:Q}=await E({x:v,y:h,initialPlacement:i,placement:C,strategy:l,middlewareData:P,rects:x,platform:u,elements:{reference:n,floating:s}});v=T??v,h=z??h,P={...P,[b]:{...P[b],...B}},Q&&S<=50&&(S++,typeof Q=="object"&&(Q.placement&&(C=Q.placement),Q.rects&&(x=Q.rects===!0?await u.getElementRects({reference:n,floating:s,strategy:l}):Q.rects),{x:v,y:h}=vx(x,C,y)),w=-1)}return{x:v,y:h,placement:C,strategy:l,middlewareData:P}};async function po(n,s){var a;s===void 0&&(s={});const{x:i,y:l,platform:d,rects:u,elements:f,strategy:y}=n,{boundary:x="clippingAncestors",rootBoundary:v="viewport",elementContext:h="floating",altBoundary:C=!1,padding:P=0}=cs(s,n),S=D0(P),b=f[C?h==="floating"?"reference":"floating":h],E=Cc(await d.getClippingRect({element:(a=await(d.isElement==null?void 0:d.isElement(b)))==null||a?b:b.contextElement||await(d.getDocumentElement==null?void 0:d.getDocumentElement(f.floating)),boundary:x,rootBoundary:v,strategy:y})),T=h==="floating"?{x:i,y:l,width:u.floating.width,height:u.floating.height}:u.reference,z=await(d.getOffsetParent==null?void 0:d.getOffsetParent(f.floating)),B=await(d.isElement==null?void 0:d.isElement(z))?await(d.getScale==null?void 0:d.getScale(z))||{x:1,y:1}:{x:1,y:1},Q=Cc(d.convertOffsetParentRelativeRectToViewportRelativeRect?await d.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:T,offsetParent:z,strategy:y}):T);return{top:(E.top-Q.top+S.top)/B.y,bottom:(Q.bottom-E.bottom+S.bottom)/B.y,left:(E.left-Q.left+S.left)/B.x,right:(Q.right-E.right+S.right)/B.x}}const AP=n=>({name:"arrow",options:n,async fn(s){const{x:a,y:i,placement:l,rects:d,platform:u,elements:f,middlewareData:y}=s,{element:x,padding:v=0}=cs(n,s)||{};if(x==null)return{};const h=D0(v),C={x:a,y:i},P=Nf(l),S=bf(P),w=await u.getDimensions(x),b=P==="y",E=b?"top":"left",T=b?"bottom":"right",z=b?"clientHeight":"clientWidth",B=d.reference[S]+d.reference[P]-C[P]-d.floating[S],Q=C[P]-d.reference[P],X=await(u.getOffsetParent==null?void 0:u.getOffsetParent(x));let G=X?X[z]:0;(!G||!await(u.isElement==null?void 0:u.isElement(X)))&&(G=f.floating[z]||d.floating[S]);const J=B/2-Q/2,ue=G/2-w[S]/2-1,ge=Fs(h[E],ue),Ee=Fs(h[T],ue),xe=ge,me=G-w[S]-Ee,fe=G/2-w[S]/2+J,F=Im(xe,fe,me),ne=!y.arrow&&pi(l)!=null&&fe!==F&&d.reference[S]/2-(fe<xe?ge:Ee)-w[S]/2<0,te=ne?fe<xe?fe-xe:fe-me:0;return{[P]:C[P]+te,data:{[P]:F,centerOffset:fe-F-te,...ne&&{alignmentOffset:te}},reset:ne}}}),IP=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(s){var a,i;const{placement:l,middlewareData:d,rects:u,initialPlacement:f,platform:y,elements:x}=s,{mainAxis:v=!0,crossAxis:h=!0,fallbackPlacements:C,fallbackStrategy:P="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:w=!0,...b}=cs(n,s);if((a=d.arrow)!=null&&a.alignmentOffset)return{};const E=ds(l),T=Fr(f),z=ds(f)===f,B=await(y.isRTL==null?void 0:y.isRTL(x.floating)),Q=C||(z||!w?[Sc(f)]:NP(f)),X=S!=="none";!C&&X&&Q.push(...EP(f,w,S,B));const G=[f,...Q],J=await po(s,b),ue=[];let ge=((i=d.flip)==null?void 0:i.overflows)||[];if(v&&ue.push(J[E]),h){const fe=bP(l,u,B);ue.push(J[fe[0]],J[fe[1]])}if(ge=[...ge,{placement:l,overflows:ue}],!ue.every(fe=>fe<=0)){var Ee,xe;const fe=(((Ee=d.flip)==null?void 0:Ee.index)||0)+1,F=G[fe];if(F&&(!(h==="alignment"?T!==Fr(F):!1)||ge.every(D=>Fr(D.placement)===T?D.overflows[0]>0:!0)))return{data:{index:fe,overflows:ge},reset:{placement:F}};let ne=(xe=ge.filter(te=>te.overflows[0]<=0).sort((te,D)=>te.overflows[1]-D.overflows[1])[0])==null?void 0:xe.placement;if(!ne)switch(P){case"bestFit":{var me;const te=(me=ge.filter(D=>{if(X){const L=Fr(D.placement);return L===T||L==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(L=>L>0).reduce((L,ce)=>L+ce,0)]).sort((D,L)=>D[1]-L[1])[0])==null?void 0:me[0];te&&(ne=te);break}case"initialPlacement":ne=f;break}if(l!==ne)return{reset:{placement:ne}}}return{}}}};function wx(n,s){return{top:n.top-s.height,right:n.right-s.width,bottom:n.bottom-s.height,left:n.left-s.width}}function jx(n){return yP.some(s=>n[s]>=0)}const RP=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(s){const{rects:a}=s,{strategy:i="referenceHidden",...l}=cs(n,s);switch(i){case"referenceHidden":{const d=await po(s,{...l,elementContext:"reference"}),u=wx(d,a.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:jx(u)}}}case"escaped":{const d=await po(s,{...l,altBoundary:!0}),u=wx(d,a.floating);return{data:{escapedOffsets:u,escaped:jx(u)}}}default:return{}}}}},k0=new Set(["left","top"]);async function TP(n,s){const{placement:a,platform:i,elements:l}=n,d=await(i.isRTL==null?void 0:i.isRTL(l.floating)),u=ds(a),f=pi(a),y=Fr(a)==="y",x=k0.has(u)?-1:1,v=d&&y?-1:1,h=cs(s,n);let{mainAxis:C,crossAxis:P,alignmentAxis:S}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return f&&typeof S=="number"&&(P=f==="end"?S*-1:S),y?{x:P*v,y:C*x}:{x:C*x,y:P*v}}const _P=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(s){var a,i;const{x:l,y:d,placement:u,middlewareData:f}=s,y=await TP(s,n);return u===((a=f.offset)==null?void 0:a.placement)&&(i=f.arrow)!=null&&i.alignmentOffset?{}:{x:l+y.x,y:d+y.y,data:{...y,placement:u}}}}},MP=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(s){const{x:a,y:i,placement:l}=s,{mainAxis:d=!0,crossAxis:u=!1,limiter:f={fn:b=>{let{x:E,y:T}=b;return{x:E,y:T}}},...y}=cs(n,s),x={x:a,y:i},v=await po(s,y),h=Fr(ds(l)),C=jf(h);let P=x[C],S=x[h];if(d){const b=C==="y"?"top":"left",E=C==="y"?"bottom":"right",T=P+v[b],z=P-v[E];P=Im(T,P,z)}if(u){const b=h==="y"?"top":"left",E=h==="y"?"bottom":"right",T=S+v[b],z=S-v[E];S=Im(T,S,z)}const w=f.fn({...s,[C]:P,[h]:S});return{...w,data:{x:w.x-a,y:w.y-i,enabled:{[C]:d,[h]:u}}}}}},OP=function(n){return n===void 0&&(n={}),{options:n,fn(s){const{x:a,y:i,placement:l,rects:d,middlewareData:u}=s,{offset:f=0,mainAxis:y=!0,crossAxis:x=!0}=cs(n,s),v={x:a,y:i},h=Fr(l),C=jf(h);let P=v[C],S=v[h];const w=cs(f,s),b=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(y){const z=C==="y"?"height":"width",B=d.reference[C]-d.floating[z]+b.mainAxis,Q=d.reference[C]+d.reference[z]-b.mainAxis;P<B?P=B:P>Q&&(P=Q)}if(x){var E,T;const z=C==="y"?"width":"height",B=k0.has(ds(l)),Q=d.reference[h]-d.floating[z]+(B&&((E=u.offset)==null?void 0:E[h])||0)+(B?0:b.crossAxis),X=d.reference[h]+d.reference[z]+(B?0:((T=u.offset)==null?void 0:T[h])||0)-(B?b.crossAxis:0);S<Q?S=Q:S>X&&(S=X)}return{[C]:P,[h]:S}}}},LP=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(s){var a,i;const{placement:l,rects:d,platform:u,elements:f}=s,{apply:y=()=>{},...x}=cs(n,s),v=await po(s,x),h=ds(l),C=pi(l),P=Fr(l)==="y",{width:S,height:w}=d.floating;let b,E;h==="top"||h==="bottom"?(b=h,E=C===(await(u.isRTL==null?void 0:u.isRTL(f.floating))?"start":"end")?"left":"right"):(E=h,b=C==="end"?"top":"bottom");const T=w-v.top-v.bottom,z=S-v.left-v.right,B=Fs(w-v[b],T),Q=Fs(S-v[E],z),X=!s.middlewareData.shift;let G=B,J=Q;if((a=s.middlewareData.shift)!=null&&a.enabled.x&&(J=z),(i=s.middlewareData.shift)!=null&&i.enabled.y&&(G=T),X&&!C){const ge=Yn(v.left,0),Ee=Yn(v.right,0),xe=Yn(v.top,0),me=Yn(v.bottom,0);P?J=S-2*(ge!==0||Ee!==0?ge+Ee:Yn(v.left,v.right)):G=w-2*(xe!==0||me!==0?xe+me:Yn(v.top,v.bottom))}await y({...s,availableWidth:J,availableHeight:G});const ue=await u.getDimensions(f.floating);return S!==ue.width||w!==ue.height?{reset:{rects:!0}}:{}}}};function Kc(){return typeof window<"u"}function hi(n){return A0(n)?(n.nodeName||"").toLowerCase():"#document"}function Xn(n){var s;return(n==null||(s=n.ownerDocument)==null?void 0:s.defaultView)||window}function qr(n){var s;return(s=(A0(n)?n.ownerDocument:n.document)||window.document)==null?void 0:s.documentElement}function A0(n){return Kc()?n instanceof Node||n instanceof Xn(n).Node:!1}function wr(n){return Kc()?n instanceof Element||n instanceof Xn(n).Element:!1}function Vr(n){return Kc()?n instanceof HTMLElement||n instanceof Xn(n).HTMLElement:!1}function bx(n){return!Kc()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Xn(n).ShadowRoot}const FP=new Set(["inline","contents"]);function Eo(n){const{overflow:s,overflowX:a,overflowY:i,display:l}=jr(n);return/auto|scroll|overlay|hidden|clip/.test(s+i+a)&&!FP.has(l)}const $P=new Set(["table","td","th"]);function zP(n){return $P.has(hi(n))}const BP=[":popover-open",":modal"];function Gc(n){return BP.some(s=>{try{return n.matches(s)}catch{return!1}})}const UP=["transform","translate","scale","rotate","perspective"],HP=["transform","translate","scale","rotate","perspective","filter"],VP=["paint","layout","strict","content"];function Sf(n){const s=Cf(),a=wr(n)?jr(n):n;return UP.some(i=>a[i]?a[i]!=="none":!1)||(a.containerType?a.containerType!=="normal":!1)||!s&&(a.backdropFilter?a.backdropFilter!=="none":!1)||!s&&(a.filter?a.filter!=="none":!1)||HP.some(i=>(a.willChange||"").includes(i))||VP.some(i=>(a.contain||"").includes(i))}function qP(n){let s=$s(n);for(;Vr(s)&&!ci(s);){if(Sf(s))return s;if(Gc(s))return null;s=$s(s)}return null}function Cf(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const WP=new Set(["html","body","#document"]);function ci(n){return WP.has(hi(n))}function jr(n){return Xn(n).getComputedStyle(n)}function Yc(n){return wr(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function $s(n){if(hi(n)==="html")return n;const s=n.assignedSlot||n.parentNode||bx(n)&&n.host||qr(n);return bx(s)?s.host:s}function I0(n){const s=$s(n);return ci(s)?n.ownerDocument?n.ownerDocument.body:n.body:Vr(s)&&Eo(s)?s:I0(s)}function ho(n,s,a){var i;s===void 0&&(s=[]),a===void 0&&(a=!0);const l=I0(n),d=l===((i=n.ownerDocument)==null?void 0:i.body),u=Xn(l);if(d){const f=Tm(u);return s.concat(u,u.visualViewport||[],Eo(l)?l:[],f&&a?ho(f):[])}return s.concat(l,ho(l,[],a))}function Tm(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function R0(n){const s=jr(n);let a=parseFloat(s.width)||0,i=parseFloat(s.height)||0;const l=Vr(n),d=l?n.offsetWidth:a,u=l?n.offsetHeight:i,f=Nc(a)!==d||Nc(i)!==u;return f&&(a=d,i=u),{width:a,height:i,$:f}}function Pf(n){return wr(n)?n:n.contextElement}function si(n){const s=Pf(n);if(!Vr(s))return zr(1);const a=s.getBoundingClientRect(),{width:i,height:l,$:d}=R0(s);let u=(d?Nc(a.width):a.width)/i,f=(d?Nc(a.height):a.height)/l;return(!u||!Number.isFinite(u))&&(u=1),(!f||!Number.isFinite(f))&&(f=1),{x:u,y:f}}const KP=zr(0);function T0(n){const s=Xn(n);return!Cf()||!s.visualViewport?KP:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function GP(n,s,a){return s===void 0&&(s=!1),!a||s&&a!==Xn(n)?!1:s}function va(n,s,a,i){s===void 0&&(s=!1),a===void 0&&(a=!1);const l=n.getBoundingClientRect(),d=Pf(n);let u=zr(1);s&&(i?wr(i)&&(u=si(i)):u=si(n));const f=GP(d,a,i)?T0(d):zr(0);let y=(l.left+f.x)/u.x,x=(l.top+f.y)/u.y,v=l.width/u.x,h=l.height/u.y;if(d){const C=Xn(d),P=i&&wr(i)?Xn(i):i;let S=C,w=Tm(S);for(;w&&i&&P!==S;){const b=si(w),E=w.getBoundingClientRect(),T=jr(w),z=E.left+(w.clientLeft+parseFloat(T.paddingLeft))*b.x,B=E.top+(w.clientTop+parseFloat(T.paddingTop))*b.y;y*=b.x,x*=b.y,v*=b.x,h*=b.y,y+=z,x+=B,S=Xn(w),w=Tm(S)}}return Cc({width:v,height:h,x:y,y:x})}function Jc(n,s){const a=Yc(n).scrollLeft;return s?s.left+a:va(qr(n)).left+a}function _0(n,s){const a=n.getBoundingClientRect(),i=a.left+s.scrollLeft-Jc(n,a),l=a.top+s.scrollTop;return{x:i,y:l}}function YP(n){let{elements:s,rect:a,offsetParent:i,strategy:l}=n;const d=l==="fixed",u=qr(i),f=s?Gc(s.floating):!1;if(i===u||f&&d)return a;let y={scrollLeft:0,scrollTop:0},x=zr(1);const v=zr(0),h=Vr(i);if((h||!h&&!d)&&((hi(i)!=="body"||Eo(u))&&(y=Yc(i)),Vr(i))){const P=va(i);x=si(i),v.x=P.x+i.clientLeft,v.y=P.y+i.clientTop}const C=u&&!h&&!d?_0(u,y):zr(0);return{width:a.width*x.x,height:a.height*x.y,x:a.x*x.x-y.scrollLeft*x.x+v.x+C.x,y:a.y*x.y-y.scrollTop*x.y+v.y+C.y}}function JP(n){return Array.from(n.getClientRects())}function QP(n){const s=qr(n),a=Yc(n),i=n.ownerDocument.body,l=Yn(s.scrollWidth,s.clientWidth,i.scrollWidth,i.clientWidth),d=Yn(s.scrollHeight,s.clientHeight,i.scrollHeight,i.clientHeight);let u=-a.scrollLeft+Jc(n);const f=-a.scrollTop;return jr(i).direction==="rtl"&&(u+=Yn(s.clientWidth,i.clientWidth)-l),{width:l,height:d,x:u,y:f}}const Nx=25;function XP(n,s){const a=Xn(n),i=qr(n),l=a.visualViewport;let d=i.clientWidth,u=i.clientHeight,f=0,y=0;if(l){d=l.width,u=l.height;const v=Cf();(!v||v&&s==="fixed")&&(f=l.offsetLeft,y=l.offsetTop)}const x=Jc(i);if(x<=0){const v=i.ownerDocument,h=v.body,C=getComputedStyle(h),P=v.compatMode==="CSS1Compat"&&parseFloat(C.marginLeft)+parseFloat(C.marginRight)||0,S=Math.abs(i.clientWidth-h.clientWidth-P);S<=Nx&&(d-=S)}else x<=Nx&&(d+=x);return{width:d,height:u,x:f,y}}const ZP=new Set(["absolute","fixed"]);function eE(n,s){const a=va(n,!0,s==="fixed"),i=a.top+n.clientTop,l=a.left+n.clientLeft,d=Vr(n)?si(n):zr(1),u=n.clientWidth*d.x,f=n.clientHeight*d.y,y=l*d.x,x=i*d.y;return{width:u,height:f,x:y,y:x}}function Sx(n,s,a){let i;if(s==="viewport")i=XP(n,a);else if(s==="document")i=QP(qr(n));else if(wr(s))i=eE(s,a);else{const l=T0(n);i={x:s.x-l.x,y:s.y-l.y,width:s.width,height:s.height}}return Cc(i)}function M0(n,s){const a=$s(n);return a===s||!wr(a)||ci(a)?!1:jr(a).position==="fixed"||M0(a,s)}function tE(n,s){const a=s.get(n);if(a)return a;let i=ho(n,[],!1).filter(f=>wr(f)&&hi(f)!=="body"),l=null;const d=jr(n).position==="fixed";let u=d?$s(n):n;for(;wr(u)&&!ci(u);){const f=jr(u),y=Sf(u);!y&&f.position==="fixed"&&(l=null),(d?!y&&!l:!y&&f.position==="static"&&!!l&&ZP.has(l.position)||Eo(u)&&!y&&M0(n,u))?i=i.filter(v=>v!==u):l=f,u=$s(u)}return s.set(n,i),i}function nE(n){let{element:s,boundary:a,rootBoundary:i,strategy:l}=n;const u=[...a==="clippingAncestors"?Gc(s)?[]:tE(s,this._c):[].concat(a),i],f=u[0],y=u.reduce((x,v)=>{const h=Sx(s,v,l);return x.top=Yn(h.top,x.top),x.right=Fs(h.right,x.right),x.bottom=Fs(h.bottom,x.bottom),x.left=Yn(h.left,x.left),x},Sx(s,f,l));return{width:y.right-y.left,height:y.bottom-y.top,x:y.left,y:y.top}}function rE(n){const{width:s,height:a}=R0(n);return{width:s,height:a}}function sE(n,s,a){const i=Vr(s),l=qr(s),d=a==="fixed",u=va(n,!0,d,s);let f={scrollLeft:0,scrollTop:0};const y=zr(0);function x(){y.x=Jc(l)}if(i||!i&&!d)if((hi(s)!=="body"||Eo(l))&&(f=Yc(s)),i){const P=va(s,!0,d,s);y.x=P.x+s.clientLeft,y.y=P.y+s.clientTop}else l&&x();d&&!i&&l&&x();const v=l&&!i&&!d?_0(l,f):zr(0),h=u.left+f.scrollLeft-y.x-v.x,C=u.top+f.scrollTop-y.y-v.y;return{x:h,y:C,width:u.width,height:u.height}}function um(n){return jr(n).position==="static"}function Cx(n,s){if(!Vr(n)||jr(n).position==="fixed")return null;if(s)return s(n);let a=n.offsetParent;return qr(n)===a&&(a=a.ownerDocument.body),a}function O0(n,s){const a=Xn(n);if(Gc(n))return a;if(!Vr(n)){let l=$s(n);for(;l&&!ci(l);){if(wr(l)&&!um(l))return l;l=$s(l)}return a}let i=Cx(n,s);for(;i&&zP(i)&&um(i);)i=Cx(i,s);return i&&ci(i)&&um(i)&&!Sf(i)?a:i||qP(n)||a}const aE=async function(n){const s=this.getOffsetParent||O0,a=this.getDimensions,i=await a(n.floating);return{reference:sE(n.reference,await s(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function iE(n){return jr(n).direction==="rtl"}const oE={convertOffsetParentRelativeRectToViewportRelativeRect:YP,getDocumentElement:qr,getClippingRect:nE,getOffsetParent:O0,getElementRects:aE,getClientRects:JP,getDimensions:rE,getScale:si,isElement:wr,isRTL:iE};function L0(n,s){return n.x===s.x&&n.y===s.y&&n.width===s.width&&n.height===s.height}function lE(n,s){let a=null,i;const l=qr(n);function d(){var f;clearTimeout(i),(f=a)==null||f.disconnect(),a=null}function u(f,y){f===void 0&&(f=!1),y===void 0&&(y=1),d();const x=n.getBoundingClientRect(),{left:v,top:h,width:C,height:P}=x;if(f||s(),!C||!P)return;const S=Zl(h),w=Zl(l.clientWidth-(v+C)),b=Zl(l.clientHeight-(h+P)),E=Zl(v),z={rootMargin:-S+"px "+-w+"px "+-b+"px "+-E+"px",threshold:Yn(0,Fs(1,y))||1};let B=!0;function Q(X){const G=X[0].intersectionRatio;if(G!==y){if(!B)return u();G?u(!1,G):i=setTimeout(()=>{u(!1,1e-7)},1e3)}G===1&&!L0(x,n.getBoundingClientRect())&&u(),B=!1}try{a=new IntersectionObserver(Q,{...z,root:l.ownerDocument})}catch{a=new IntersectionObserver(Q,z)}a.observe(n)}return u(!0),d}function cE(n,s,a,i){i===void 0&&(i={});const{ancestorScroll:l=!0,ancestorResize:d=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:y=!1}=i,x=Pf(n),v=l||d?[...x?ho(x):[],...ho(s)]:[];v.forEach(E=>{l&&E.addEventListener("scroll",a,{passive:!0}),d&&E.addEventListener("resize",a)});const h=x&&f?lE(x,a):null;let C=-1,P=null;u&&(P=new ResizeObserver(E=>{let[T]=E;T&&T.target===x&&P&&(P.unobserve(s),cancelAnimationFrame(C),C=requestAnimationFrame(()=>{var z;(z=P)==null||z.observe(s)})),a()}),x&&!y&&P.observe(x),P.observe(s));let S,w=y?va(n):null;y&&b();function b(){const E=va(n);w&&!L0(w,E)&&a(),w=E,S=requestAnimationFrame(b)}return a(),()=>{var E;v.forEach(T=>{l&&T.removeEventListener("scroll",a),d&&T.removeEventListener("resize",a)}),h?.(),(E=P)==null||E.disconnect(),P=null,y&&cancelAnimationFrame(S)}}const dE=_P,uE=MP,mE=IP,fE=LP,pE=RP,Px=AP,hE=OP,gE=(n,s,a)=>{const i=new Map,l={platform:oE,...a},d={...l.platform,_c:i};return kP(n,s,{...l,platform:d})};var xE=typeof document<"u",yE=function(){},oc=xE?p.useLayoutEffect:yE;function Pc(n,s){if(n===s)return!0;if(typeof n!=typeof s)return!1;if(typeof n=="function"&&n.toString()===s.toString())return!0;let a,i,l;if(n&&s&&typeof n=="object"){if(Array.isArray(n)){if(a=n.length,a!==s.length)return!1;for(i=a;i--!==0;)if(!Pc(n[i],s[i]))return!1;return!0}if(l=Object.keys(n),a=l.length,a!==Object.keys(s).length)return!1;for(i=a;i--!==0;)if(!{}.hasOwnProperty.call(s,l[i]))return!1;for(i=a;i--!==0;){const d=l[i];if(!(d==="_owner"&&n.$$typeof)&&!Pc(n[d],s[d]))return!1}return!0}return n!==n&&s!==s}function F0(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function Ex(n,s){const a=F0(n);return Math.round(s*a)/a}function mm(n){const s=p.useRef(n);return oc(()=>{s.current=n}),s}function vE(n){n===void 0&&(n={});const{placement:s="bottom",strategy:a="absolute",middleware:i=[],platform:l,elements:{reference:d,floating:u}={},transform:f=!0,whileElementsMounted:y,open:x}=n,[v,h]=p.useState({x:0,y:0,strategy:a,placement:s,middlewareData:{},isPositioned:!1}),[C,P]=p.useState(i);Pc(C,i)||P(i);const[S,w]=p.useState(null),[b,E]=p.useState(null),T=p.useCallback(D=>{D!==X.current&&(X.current=D,w(D))},[]),z=p.useCallback(D=>{D!==G.current&&(G.current=D,E(D))},[]),B=d||S,Q=u||b,X=p.useRef(null),G=p.useRef(null),J=p.useRef(v),ue=y!=null,ge=mm(y),Ee=mm(l),xe=mm(x),me=p.useCallback(()=>{if(!X.current||!G.current)return;const D={placement:s,strategy:a,middleware:C};Ee.current&&(D.platform=Ee.current),gE(X.current,G.current,D).then(L=>{const ce={...L,isPositioned:xe.current!==!1};fe.current&&!Pc(J.current,ce)&&(J.current=ce,vo.flushSync(()=>{h(ce)}))})},[C,s,a,Ee,xe]);oc(()=>{x===!1&&J.current.isPositioned&&(J.current.isPositioned=!1,h(D=>({...D,isPositioned:!1})))},[x]);const fe=p.useRef(!1);oc(()=>(fe.current=!0,()=>{fe.current=!1}),[]),oc(()=>{if(B&&(X.current=B),Q&&(G.current=Q),B&&Q){if(ge.current)return ge.current(B,Q,me);me()}},[B,Q,me,ge,ue]);const F=p.useMemo(()=>({reference:X,floating:G,setReference:T,setFloating:z}),[T,z]),ne=p.useMemo(()=>({reference:B,floating:Q}),[B,Q]),te=p.useMemo(()=>{const D={position:a,left:0,top:0};if(!ne.floating)return D;const L=Ex(ne.floating,v.x),ce=Ex(ne.floating,v.y);return f?{...D,transform:"translate("+L+"px, "+ce+"px)",...F0(ne.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:L,top:ce}},[a,f,ne.floating,v.x,v.y]);return p.useMemo(()=>({...v,update:me,refs:F,elements:ne,floatingStyles:te}),[v,me,F,ne,te])}const wE=n=>{function s(a){return{}.hasOwnProperty.call(a,"current")}return{name:"arrow",options:n,fn(a){const{element:i,padding:l}=typeof n=="function"?n(a):n;return i&&s(i)?i.current!=null?Px({element:i.current,padding:l}).fn(a):{}:i?Px({element:i,padding:l}).fn(a):{}}}},jE=(n,s)=>({...dE(n),options:[n,s]}),bE=(n,s)=>({...uE(n),options:[n,s]}),NE=(n,s)=>({...hE(n),options:[n,s]}),SE=(n,s)=>({...mE(n),options:[n,s]}),CE=(n,s)=>({...fE(n),options:[n,s]}),PE=(n,s)=>({...pE(n),options:[n,s]}),EE=(n,s)=>({...wE(n),options:[n,s]});var DE="Arrow",$0=p.forwardRef((n,s)=>{const{children:a,width:i=10,height:l=5,...d}=n;return e.jsx(it.svg,{...d,ref:s,width:i,height:l,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?a:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});$0.displayName=DE;var kE=$0;function z0(n){const[s,a]=p.useState(void 0);return Dn(()=>{if(n){a({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(l=>{if(!Array.isArray(l)||!l.length)return;const d=l[0];let u,f;if("borderBoxSize"in d){const y=d.borderBoxSize,x=Array.isArray(y)?y[0]:y;u=x.inlineSize,f=x.blockSize}else u=n.offsetWidth,f=n.offsetHeight;a({width:u,height:f})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else a(void 0)},[n]),s}var Ef="Popper",[B0,gi]=br(Ef),[AE,U0]=B0(Ef),H0=n=>{const{__scopePopper:s,children:a}=n,[i,l]=p.useState(null);return e.jsx(AE,{scope:s,anchor:i,onAnchorChange:l,children:a})};H0.displayName=Ef;var V0="PopperAnchor",q0=p.forwardRef((n,s)=>{const{__scopePopper:a,virtualRef:i,...l}=n,d=U0(V0,a),u=p.useRef(null),f=Pt(s,u),y=p.useRef(null);return p.useEffect(()=>{const x=y.current;y.current=i?.current||u.current,x!==y.current&&d.onAnchorChange(y.current)}),i?null:e.jsx(it.div,{...l,ref:f})});q0.displayName=V0;var Df="PopperContent",[IE,RE]=B0(Df),W0=p.forwardRef((n,s)=>{const{__scopePopper:a,side:i="bottom",sideOffset:l=0,align:d="center",alignOffset:u=0,arrowPadding:f=0,avoidCollisions:y=!0,collisionBoundary:x=[],collisionPadding:v=0,sticky:h="partial",hideWhenDetached:C=!1,updatePositionStrategy:P="optimized",onPlaced:S,...w}=n,b=U0(Df,a),[E,T]=p.useState(null),z=Pt(s,q=>T(q)),[B,Q]=p.useState(null),X=z0(B),G=X?.width??0,J=X?.height??0,ue=i+(d!=="center"?"-"+d:""),ge=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},Ee=Array.isArray(x)?x:[x],xe=Ee.length>0,me={padding:ge,boundary:Ee.filter(_E),altBoundary:xe},{refs:fe,floatingStyles:F,placement:ne,isPositioned:te,middlewareData:D}=vE({strategy:"fixed",placement:ue,whileElementsMounted:(...q)=>cE(...q,{animationFrame:P==="always"}),elements:{reference:b.anchor},middleware:[jE({mainAxis:l+J,alignmentAxis:u}),y&&bE({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?NE():void 0,...me}),y&&SE({...me}),CE({...me,apply:({elements:q,rects:le,availableWidth:he,availableHeight:ve})=>{const{width:k,height:Y}=le.reference,Ie=q.floating.style;Ie.setProperty("--radix-popper-available-width",`${he}px`),Ie.setProperty("--radix-popper-available-height",`${ve}px`),Ie.setProperty("--radix-popper-anchor-width",`${k}px`),Ie.setProperty("--radix-popper-anchor-height",`${Y}px`)}}),B&&EE({element:B,padding:f}),ME({arrowWidth:G,arrowHeight:J}),C&&PE({strategy:"referenceHidden",...me})]}),[L,ce]=Y0(ne),A=Hr(S);Dn(()=>{te&&A?.()},[te,A]);const R=D.arrow?.x,H=D.arrow?.y,M=D.arrow?.centerOffset!==0,[ee,U]=p.useState();return Dn(()=>{E&&U(window.getComputedStyle(E).zIndex)},[E]),e.jsx("div",{ref:fe.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:te?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ee,"--radix-popper-transform-origin":[D.transformOrigin?.x,D.transformOrigin?.y].join(" "),...D.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:e.jsx(IE,{scope:a,placedSide:L,onArrowChange:Q,arrowX:R,arrowY:H,shouldHideArrow:M,children:e.jsx(it.div,{"data-side":L,"data-align":ce,...w,ref:z,style:{...w.style,animation:te?void 0:"none"}})})})});W0.displayName=Df;var K0="PopperArrow",TE={top:"bottom",right:"left",bottom:"top",left:"right"},G0=p.forwardRef(function(s,a){const{__scopePopper:i,...l}=s,d=RE(K0,i),u=TE[d.placedSide];return e.jsx("span",{ref:d.onArrowChange,style:{position:"absolute",left:d.arrowX,top:d.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[d.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[d.placedSide],visibility:d.shouldHideArrow?"hidden":void 0},children:e.jsx(kE,{...l,ref:a,style:{...l.style,display:"block"}})})});G0.displayName=K0;function _E(n){return n!==null}var ME=n=>({name:"transformOrigin",options:n,fn(s){const{placement:a,rects:i,middlewareData:l}=s,u=l.arrow?.centerOffset!==0,f=u?0:n.arrowWidth,y=u?0:n.arrowHeight,[x,v]=Y0(a),h={start:"0%",center:"50%",end:"100%"}[v],C=(l.arrow?.x??0)+f/2,P=(l.arrow?.y??0)+y/2;let S="",w="";return x==="bottom"?(S=u?h:`${C}px`,w=`${-y}px`):x==="top"?(S=u?h:`${C}px`,w=`${i.floating.height+y}px`):x==="right"?(S=`${-y}px`,w=u?h:`${P}px`):x==="left"&&(S=`${i.floating.width+y}px`,w=u?h:`${P}px`),{data:{x:S,y:w}}}});function Y0(n){const[s,a="center"]=n.split("-");return[s,a]}var kf=H0,Qc=q0,Af=W0,If=G0;function J0(n){const s=p.useRef({value:n,previous:n});return p.useMemo(()=>(s.current.value!==n&&(s.current.previous=s.current.value,s.current.value=n),s.current.previous),[n])}var Q0=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),OE="VisuallyHidden",LE=p.forwardRef((n,s)=>e.jsx(it.span,{...n,ref:s,style:{...Q0,...n.style}}));LE.displayName=OE;var FE=[" ","Enter","ArrowUp","ArrowDown"],$E=[" ","Enter"],wa="Select",[Xc,Zc,zE]=vf(wa),[xi]=br(wa,[zE,gi]),ed=gi(),[BE,Gs]=xi(wa),[UE,HE]=xi(wa),X0=n=>{const{__scopeSelect:s,children:a,open:i,defaultOpen:l,onOpenChange:d,value:u,defaultValue:f,onValueChange:y,dir:x,name:v,autoComplete:h,disabled:C,required:P,form:S}=n,w=ed(s),[b,E]=p.useState(null),[T,z]=p.useState(null),[B,Q]=p.useState(!1),X=Vc(x),[G,J]=Ls({prop:i,defaultProp:l??!1,onChange:d,caller:wa}),[ue,ge]=Ls({prop:u,defaultProp:f,onChange:y,caller:wa}),Ee=p.useRef(null),xe=b?S||!!b.closest("form"):!0,[me,fe]=p.useState(new Set),F=Array.from(me).map(ne=>ne.props.value).join(";");return e.jsx(kf,{...w,children:e.jsxs(BE,{required:P,scope:s,trigger:b,onTriggerChange:E,valueNode:T,onValueNodeChange:z,valueNodeHasChildren:B,onValueNodeHasChildrenChange:Q,contentId:jn(),value:ue,onValueChange:ge,open:G,onOpenChange:J,dir:X,triggerPointerDownPosRef:Ee,disabled:C,children:[e.jsx(Xc.Provider,{scope:s,children:e.jsx(UE,{scope:n.__scopeSelect,onNativeOptionAdd:p.useCallback(ne=>{fe(te=>new Set(te).add(ne))},[]),onNativeOptionRemove:p.useCallback(ne=>{fe(te=>{const D=new Set(te);return D.delete(ne),D})},[]),children:a})}),xe?e.jsxs(wv,{"aria-hidden":!0,required:P,tabIndex:-1,name:v,autoComplete:h,value:ue,onChange:ne=>ge(ne.target.value),disabled:C,form:S,children:[ue===void 0?e.jsx("option",{value:""}):null,Array.from(me)]},F):null]})})};X0.displayName=wa;var Z0="SelectTrigger",ev=p.forwardRef((n,s)=>{const{__scopeSelect:a,disabled:i=!1,...l}=n,d=ed(a),u=Gs(Z0,a),f=u.disabled||i,y=Pt(s,u.onTriggerChange),x=Zc(a),v=p.useRef("touch"),[h,C,P]=bv(w=>{const b=x().filter(z=>!z.disabled),E=b.find(z=>z.value===u.value),T=Nv(b,w,E);T!==void 0&&u.onValueChange(T.value)}),S=w=>{f||(u.onOpenChange(!0),P()),w&&(u.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return e.jsx(Qc,{asChild:!0,...d,children:e.jsx(it.button,{type:"button",role:"combobox","aria-controls":u.contentId,"aria-expanded":u.open,"aria-required":u.required,"aria-autocomplete":"none",dir:u.dir,"data-state":u.open?"open":"closed",disabled:f,"data-disabled":f?"":void 0,"data-placeholder":jv(u.value)?"":void 0,...l,ref:y,onClick:Ge(l.onClick,w=>{w.currentTarget.focus(),v.current!=="mouse"&&S(w)}),onPointerDown:Ge(l.onPointerDown,w=>{v.current=w.pointerType;const b=w.target;b.hasPointerCapture(w.pointerId)&&b.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(S(w),w.preventDefault())}),onKeyDown:Ge(l.onKeyDown,w=>{const b=h.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&C(w.key),!(b&&w.key===" ")&&FE.includes(w.key)&&(S(),w.preventDefault())})})})});ev.displayName=Z0;var tv="SelectValue",nv=p.forwardRef((n,s)=>{const{__scopeSelect:a,className:i,style:l,children:d,placeholder:u="",...f}=n,y=Gs(tv,a),{onValueNodeHasChildrenChange:x}=y,v=d!==void 0,h=Pt(s,y.onValueNodeChange);return Dn(()=>{x(v)},[x,v]),e.jsx(it.span,{...f,ref:h,style:{pointerEvents:"none"},children:jv(y.value)?e.jsx(e.Fragment,{children:u}):d})});nv.displayName=tv;var VE="SelectIcon",rv=p.forwardRef((n,s)=>{const{__scopeSelect:a,children:i,...l}=n;return e.jsx(it.span,{"aria-hidden":!0,...l,ref:s,children:i||""})});rv.displayName=VE;var qE="SelectPortal",sv=n=>e.jsx(bo,{asChild:!0,...n});sv.displayName=qE;var ja="SelectContent",av=p.forwardRef((n,s)=>{const a=Gs(ja,n.__scopeSelect),[i,l]=p.useState();if(Dn(()=>{l(new DocumentFragment)},[]),!a.open){const d=i;return d?vo.createPortal(e.jsx(iv,{scope:n.__scopeSelect,children:e.jsx(Xc.Slot,{scope:n.__scopeSelect,children:e.jsx("div",{children:n.children})})}),d):null}return e.jsx(ov,{...n,ref:s})});av.displayName=ja;var gr=10,[iv,Ys]=xi(ja),WE="SelectContentImpl",KE=Os("SelectContent.RemoveScroll"),ov=p.forwardRef((n,s)=>{const{__scopeSelect:a,position:i="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:d,onPointerDownOutside:u,side:f,sideOffset:y,align:x,alignOffset:v,arrowPadding:h,collisionBoundary:C,collisionPadding:P,sticky:S,hideWhenDetached:w,avoidCollisions:b,...E}=n,T=Gs(ja,a),[z,B]=p.useState(null),[Q,X]=p.useState(null),G=Pt(s,q=>B(q)),[J,ue]=p.useState(null),[ge,Ee]=p.useState(null),xe=Zc(a),[me,fe]=p.useState(!1),F=p.useRef(!1);p.useEffect(()=>{if(z)return $c(z)},[z]),Lc();const ne=p.useCallback(q=>{const[le,...he]=xe().map(Y=>Y.ref.current),[ve]=he.slice(-1),k=document.activeElement;for(const Y of q)if(Y===k||(Y?.scrollIntoView({block:"nearest"}),Y===le&&Q&&(Q.scrollTop=0),Y===ve&&Q&&(Q.scrollTop=Q.scrollHeight),Y?.focus(),document.activeElement!==k))return},[xe,Q]),te=p.useCallback(()=>ne([J,z]),[ne,J,z]);p.useEffect(()=>{me&&te()},[me,te]);const{onOpenChange:D,triggerPointerDownPosRef:L}=T;p.useEffect(()=>{if(z){let q={x:0,y:0};const le=ve=>{q={x:Math.abs(Math.round(ve.pageX)-(L.current?.x??0)),y:Math.abs(Math.round(ve.pageY)-(L.current?.y??0))}},he=ve=>{q.x<=10&&q.y<=10?ve.preventDefault():z.contains(ve.target)||D(!1),document.removeEventListener("pointermove",le),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",le),document.addEventListener("pointerup",he,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",le),document.removeEventListener("pointerup",he,{capture:!0})}}},[z,D,L]),p.useEffect(()=>{const q=()=>D(!1);return window.addEventListener("blur",q),window.addEventListener("resize",q),()=>{window.removeEventListener("blur",q),window.removeEventListener("resize",q)}},[D]);const[ce,A]=bv(q=>{const le=xe().filter(k=>!k.disabled),he=le.find(k=>k.ref.current===document.activeElement),ve=Nv(le,q,he);ve&&setTimeout(()=>ve.ref.current.focus())}),R=p.useCallback((q,le,he)=>{const ve=!F.current&&!he;(T.value!==void 0&&T.value===le||ve)&&(ue(q),ve&&(F.current=!0))},[T.value]),H=p.useCallback(()=>z?.focus(),[z]),M=p.useCallback((q,le,he)=>{const ve=!F.current&&!he;(T.value!==void 0&&T.value===le||ve)&&Ee(q)},[T.value]),ee=i==="popper"?_m:lv,U=ee===_m?{side:f,sideOffset:y,align:x,alignOffset:v,arrowPadding:h,collisionBoundary:C,collisionPadding:P,sticky:S,hideWhenDetached:w,avoidCollisions:b}:{};return e.jsx(iv,{scope:a,content:z,viewport:Q,onViewportChange:X,itemRefCallback:R,selectedItem:J,onItemLeave:H,itemTextRefCallback:M,focusSelectedItem:te,selectedItemText:ge,position:i,isPositioned:me,searchRef:ce,children:e.jsx(No,{as:KE,allowPinchZoom:!0,children:e.jsx(jo,{asChild:!0,trapped:T.open,onMountAutoFocus:q=>{q.preventDefault()},onUnmountAutoFocus:Ge(l,q=>{T.trigger?.focus({preventScroll:!0}),q.preventDefault()}),children:e.jsx(wo,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:q=>q.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:e.jsx(ee,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:q=>q.preventDefault(),...E,...U,onPlaced:()=>fe(!0),ref:G,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:Ge(E.onKeyDown,q=>{const le=q.ctrlKey||q.altKey||q.metaKey;if(q.key==="Tab"&&q.preventDefault(),!le&&q.key.length===1&&A(q.key),["ArrowUp","ArrowDown","Home","End"].includes(q.key)){let ve=xe().filter(k=>!k.disabled).map(k=>k.ref.current);if(["ArrowUp","End"].includes(q.key)&&(ve=ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(q.key)){const k=q.target,Y=ve.indexOf(k);ve=ve.slice(Y+1)}setTimeout(()=>ne(ve)),q.preventDefault()}})})})})})})});ov.displayName=WE;var GE="SelectItemAlignedPosition",lv=p.forwardRef((n,s)=>{const{__scopeSelect:a,onPlaced:i,...l}=n,d=Gs(ja,a),u=Ys(ja,a),[f,y]=p.useState(null),[x,v]=p.useState(null),h=Pt(s,G=>v(G)),C=Zc(a),P=p.useRef(!1),S=p.useRef(!0),{viewport:w,selectedItem:b,selectedItemText:E,focusSelectedItem:T}=u,z=p.useCallback(()=>{if(d.trigger&&d.valueNode&&f&&x&&w&&b&&E){const G=d.trigger.getBoundingClientRect(),J=x.getBoundingClientRect(),ue=d.valueNode.getBoundingClientRect(),ge=E.getBoundingClientRect();if(d.dir!=="rtl"){const k=ge.left-J.left,Y=ue.left-k,Ie=G.left-Y,Fe=G.width+Ie,O=Math.max(Fe,J.width),ze=window.innerWidth-gr,W=gx(Y,[gr,Math.max(gr,ze-O)]);f.style.minWidth=Fe+"px",f.style.left=W+"px"}else{const k=J.right-ge.right,Y=window.innerWidth-ue.right-k,Ie=window.innerWidth-G.right-Y,Fe=G.width+Ie,O=Math.max(Fe,J.width),ze=window.innerWidth-gr,W=gx(Y,[gr,Math.max(gr,ze-O)]);f.style.minWidth=Fe+"px",f.style.right=W+"px"}const Ee=C(),xe=window.innerHeight-gr*2,me=w.scrollHeight,fe=window.getComputedStyle(x),F=parseInt(fe.borderTopWidth,10),ne=parseInt(fe.paddingTop,10),te=parseInt(fe.borderBottomWidth,10),D=parseInt(fe.paddingBottom,10),L=F+ne+me+D+te,ce=Math.min(b.offsetHeight*5,L),A=window.getComputedStyle(w),R=parseInt(A.paddingTop,10),H=parseInt(A.paddingBottom,10),M=G.top+G.height/2-gr,ee=xe-M,U=b.offsetHeight/2,q=b.offsetTop+U,le=F+ne+q,he=L-le;if(le<=M){const k=Ee.length>0&&b===Ee[Ee.length-1].ref.current;f.style.bottom="0px";const Y=x.clientHeight-w.offsetTop-w.offsetHeight,Ie=Math.max(ee,U+(k?H:0)+Y+te),Fe=le+Ie;f.style.height=Fe+"px"}else{const k=Ee.length>0&&b===Ee[0].ref.current;f.style.top="0px";const Ie=Math.max(M,F+w.offsetTop+(k?R:0)+U)+he;f.style.height=Ie+"px",w.scrollTop=le-M+w.offsetTop}f.style.margin=`${gr}px 0`,f.style.minHeight=ce+"px",f.style.maxHeight=xe+"px",i?.(),requestAnimationFrame(()=>P.current=!0)}},[C,d.trigger,d.valueNode,f,x,w,b,E,d.dir,i]);Dn(()=>z(),[z]);const[B,Q]=p.useState();Dn(()=>{x&&Q(window.getComputedStyle(x).zIndex)},[x]);const X=p.useCallback(G=>{G&&S.current===!0&&(z(),T?.(),S.current=!1)},[z,T]);return e.jsx(JE,{scope:a,contentWrapper:f,shouldExpandOnScrollRef:P,onScrollButtonChange:X,children:e.jsx("div",{ref:y,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:B},children:e.jsx(it.div,{...l,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});lv.displayName=GE;var YE="SelectPopperPosition",_m=p.forwardRef((n,s)=>{const{__scopeSelect:a,align:i="start",collisionPadding:l=gr,...d}=n,u=ed(a);return e.jsx(Af,{...u,...d,ref:s,align:i,collisionPadding:l,style:{boxSizing:"border-box",...d.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});_m.displayName=YE;var[JE,Rf]=xi(ja,{}),Mm="SelectViewport",cv=p.forwardRef((n,s)=>{const{__scopeSelect:a,nonce:i,...l}=n,d=Ys(Mm,a),u=Rf(Mm,a),f=Pt(s,d.onViewportChange),y=p.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),e.jsx(Xc.Slot,{scope:a,children:e.jsx(it.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:f,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:Ge(l.onScroll,x=>{const v=x.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:C}=u;if(C?.current&&h){const P=Math.abs(y.current-v.scrollTop);if(P>0){const S=window.innerHeight-gr*2,w=parseFloat(h.style.minHeight),b=parseFloat(h.style.height),E=Math.max(w,b);if(E<S){const T=E+P,z=Math.min(S,T),B=T-z;h.style.height=z+"px",h.style.bottom==="0px"&&(v.scrollTop=B>0?B:0,h.style.justifyContent="flex-end")}}}y.current=v.scrollTop})})})]})});cv.displayName=Mm;var dv="SelectGroup",[QE,XE]=xi(dv),ZE=p.forwardRef((n,s)=>{const{__scopeSelect:a,...i}=n,l=jn();return e.jsx(QE,{scope:a,id:l,children:e.jsx(it.div,{role:"group","aria-labelledby":l,...i,ref:s})})});ZE.displayName=dv;var uv="SelectLabel",eD=p.forwardRef((n,s)=>{const{__scopeSelect:a,...i}=n,l=XE(uv,a);return e.jsx(it.div,{id:l.id,...i,ref:s})});eD.displayName=uv;var Ec="SelectItem",[tD,mv]=xi(Ec),fv=p.forwardRef((n,s)=>{const{__scopeSelect:a,value:i,disabled:l=!1,textValue:d,...u}=n,f=Gs(Ec,a),y=Ys(Ec,a),x=f.value===i,[v,h]=p.useState(d??""),[C,P]=p.useState(!1),S=Pt(s,T=>y.itemRefCallback?.(T,i,l)),w=jn(),b=p.useRef("touch"),E=()=>{l||(f.onValueChange(i),f.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(tD,{scope:a,value:i,disabled:l,textId:w,isSelected:x,onItemTextChange:p.useCallback(T=>{h(z=>z||(T?.textContent??"").trim())},[]),children:e.jsx(Xc.ItemSlot,{scope:a,value:i,disabled:l,textValue:v,children:e.jsx(it.div,{role:"option","aria-labelledby":w,"data-highlighted":C?"":void 0,"aria-selected":x&&C,"data-state":x?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...u,ref:S,onFocus:Ge(u.onFocus,()=>P(!0)),onBlur:Ge(u.onBlur,()=>P(!1)),onClick:Ge(u.onClick,()=>{b.current!=="mouse"&&E()}),onPointerUp:Ge(u.onPointerUp,()=>{b.current==="mouse"&&E()}),onPointerDown:Ge(u.onPointerDown,T=>{b.current=T.pointerType}),onPointerMove:Ge(u.onPointerMove,T=>{b.current=T.pointerType,l?y.onItemLeave?.():b.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ge(u.onPointerLeave,T=>{T.currentTarget===document.activeElement&&y.onItemLeave?.()}),onKeyDown:Ge(u.onKeyDown,T=>{y.searchRef?.current!==""&&T.key===" "||($E.includes(T.key)&&E(),T.key===" "&&T.preventDefault())})})})})});fv.displayName=Ec;var lo="SelectItemText",pv=p.forwardRef((n,s)=>{const{__scopeSelect:a,className:i,style:l,...d}=n,u=Gs(lo,a),f=Ys(lo,a),y=mv(lo,a),x=HE(lo,a),[v,h]=p.useState(null),C=Pt(s,E=>h(E),y.onItemTextChange,E=>f.itemTextRefCallback?.(E,y.value,y.disabled)),P=v?.textContent,S=p.useMemo(()=>e.jsx("option",{value:y.value,disabled:y.disabled,children:P},y.value),[y.disabled,y.value,P]),{onNativeOptionAdd:w,onNativeOptionRemove:b}=x;return Dn(()=>(w(S),()=>b(S)),[w,b,S]),e.jsxs(e.Fragment,{children:[e.jsx(it.span,{id:y.textId,...d,ref:C}),y.isSelected&&u.valueNode&&!u.valueNodeHasChildren?vo.createPortal(d.children,u.valueNode):null]})});pv.displayName=lo;var hv="SelectItemIndicator",gv=p.forwardRef((n,s)=>{const{__scopeSelect:a,...i}=n;return mv(hv,a).isSelected?e.jsx(it.span,{"aria-hidden":!0,...i,ref:s}):null});gv.displayName=hv;var Om="SelectScrollUpButton",xv=p.forwardRef((n,s)=>{const a=Ys(Om,n.__scopeSelect),i=Rf(Om,n.__scopeSelect),[l,d]=p.useState(!1),u=Pt(s,i.onScrollButtonChange);return Dn(()=>{if(a.viewport&&a.isPositioned){let f=function(){const x=y.scrollTop>0;d(x)};const y=a.viewport;return f(),y.addEventListener("scroll",f),()=>y.removeEventListener("scroll",f)}},[a.viewport,a.isPositioned]),l?e.jsx(vv,{...n,ref:u,onAutoScroll:()=>{const{viewport:f,selectedItem:y}=a;f&&y&&(f.scrollTop=f.scrollTop-y.offsetHeight)}}):null});xv.displayName=Om;var Lm="SelectScrollDownButton",yv=p.forwardRef((n,s)=>{const a=Ys(Lm,n.__scopeSelect),i=Rf(Lm,n.__scopeSelect),[l,d]=p.useState(!1),u=Pt(s,i.onScrollButtonChange);return Dn(()=>{if(a.viewport&&a.isPositioned){let f=function(){const x=y.scrollHeight-y.clientHeight,v=Math.ceil(y.scrollTop)<x;d(v)};const y=a.viewport;return f(),y.addEventListener("scroll",f),()=>y.removeEventListener("scroll",f)}},[a.viewport,a.isPositioned]),l?e.jsx(vv,{...n,ref:u,onAutoScroll:()=>{const{viewport:f,selectedItem:y}=a;f&&y&&(f.scrollTop=f.scrollTop+y.offsetHeight)}}):null});yv.displayName=Lm;var vv=p.forwardRef((n,s)=>{const{__scopeSelect:a,onAutoScroll:i,...l}=n,d=Ys("SelectScrollButton",a),u=p.useRef(null),f=Zc(a),y=p.useCallback(()=>{u.current!==null&&(window.clearInterval(u.current),u.current=null)},[]);return p.useEffect(()=>()=>y(),[y]),Dn(()=>{f().find(v=>v.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[f]),e.jsx(it.div,{"aria-hidden":!0,...l,ref:s,style:{flexShrink:0,...l.style},onPointerDown:Ge(l.onPointerDown,()=>{u.current===null&&(u.current=window.setInterval(i,50))}),onPointerMove:Ge(l.onPointerMove,()=>{d.onItemLeave?.(),u.current===null&&(u.current=window.setInterval(i,50))}),onPointerLeave:Ge(l.onPointerLeave,()=>{y()})})}),nD="SelectSeparator",rD=p.forwardRef((n,s)=>{const{__scopeSelect:a,...i}=n;return e.jsx(it.div,{"aria-hidden":!0,...i,ref:s})});rD.displayName=nD;var Fm="SelectArrow",sD=p.forwardRef((n,s)=>{const{__scopeSelect:a,...i}=n,l=ed(a),d=Gs(Fm,a),u=Ys(Fm,a);return d.open&&u.position==="popper"?e.jsx(If,{...l,...i,ref:s}):null});sD.displayName=Fm;var aD="SelectBubbleInput",wv=p.forwardRef(({__scopeSelect:n,value:s,...a},i)=>{const l=p.useRef(null),d=Pt(i,l),u=J0(s);return p.useEffect(()=>{const f=l.current;if(!f)return;const y=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(y,"value").set;if(u!==s&&v){const h=new Event("change",{bubbles:!0});v.call(f,s),f.dispatchEvent(h)}},[u,s]),e.jsx(it.select,{...a,style:{...Q0,...a.style},ref:d,defaultValue:s})});wv.displayName=aD;function jv(n){return n===""||n===void 0}function bv(n){const s=Hr(n),a=p.useRef(""),i=p.useRef(0),l=p.useCallback(u=>{const f=a.current+u;s(f),(function y(x){a.current=x,window.clearTimeout(i.current),x!==""&&(i.current=window.setTimeout(()=>y(""),1e3))})(f)},[s]),d=p.useCallback(()=>{a.current="",window.clearTimeout(i.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(i.current),[]),[a,l,d]}function Nv(n,s,a){const l=s.length>1&&Array.from(s).every(x=>x===s[0])?s[0]:s,d=a?n.indexOf(a):-1;let u=iD(n,Math.max(d,0));l.length===1&&(u=u.filter(x=>x!==a));const y=u.find(x=>x.textValue.toLowerCase().startsWith(l.toLowerCase()));return y!==a?y:void 0}function iD(n,s){return n.map((a,i)=>n[(s+i)%n.length])}var oD=X0,lD=ev,cD=nv,dD=rv,uD=sv,mD=av,fD=cv,pD=fv,hD=pv,gD=gv,xD=xv,yD=yv;function nn({...n}){return e.jsx(oD,{"data-slot":"select",...n})}function rn({...n}){return e.jsx(cD,{"data-slot":"select-value",...n})}function sn({className:n,size:s="default",children:a,...i}){return e.jsxs(lD,{"data-slot":"select-trigger","data-size":s,className:rt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...i,children:[a,e.jsx(dD,{asChild:!0,children:e.jsx(pc,{className:"size-4 opacity-50"})})]})}function an({className:n,children:s,position:a="popper",...i}){return e.jsx(uD,{children:e.jsxs(mD,{"data-slot":"select-content",className:rt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:a,...i,children:[e.jsx(vD,{}),e.jsx(fD,{className:rt("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(wD,{})]})})}function lt({className:n,children:s,...a}){return e.jsxs(pD,{"data-slot":"select-item",className:rt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",n),...a,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(gD,{children:e.jsx(fc,{className:"size-4"})})}),e.jsx(hD,{children:s})]})}function vD({className:n,...s}){return e.jsx(xD,{"data-slot":"select-scroll-up-button",className:rt("flex cursor-default items-center justify-center py-1",n),...s,children:e.jsx(jN,{className:"size-4"})})}function wD({className:n,...s}){return e.jsx(yD,{"data-slot":"select-scroll-down-button",className:rt("flex cursor-default items-center justify-center py-1",n),...s,children:e.jsx(pc,{className:"size-4"})})}const rs={P001:{patientId:"P001",patientName:"Juan Santos",admissionDate:"2025-01-03",status:"discharged",dischargeDate:"2025-01-05",services:[{serviceId:"S001",service:"General Consultation",category:"Consultation Services",quantity:1,date:"2025-01-03",provider:"Dr. John",notes:"Routine checkup and medication review"},{serviceId:"S002",service:"Complete Blood Count",category:"Laboratory Services",quantity:1,date:"2025-01-03",provider:"Lab Department",notes:"Routine blood work"},{serviceId:"S003",service:"Pharmacy - Medications",category:"Pharmacy",quantity:1,date:"2025-01-04",provider:"Pharmacy",notes:"Paracetamol 500mg x10, Cetrizine 10mg x10"}],medicines:[{medicineId:"M001",name:"Paracetamol",form:"tablet",strength:"500mg",quantity:10,datePrescribed:"2025-01-04",prescribedBy:"Dr. John",instructions:"Take 1 tablet every 6 hours as needed for pain"},{medicineId:"M002",name:"Cetirizine",form:"tablet",strength:"10mg",quantity:10,datePrescribed:"2025-01-04",prescribedBy:"Dr. John",instructions:"Take 1 tablet daily at night for allergies"}]},P002:{patientId:"P002",patientName:"Anna Reyes",admissionDate:"2025-01-02",status:"discharged",dischargeDate:"2025-01-04",services:[{serviceId:"S008",service:"CT Scan",category:"Diagnostic Services",quantity:1,date:"2025-01-02",provider:"Radiology Department",notes:"Head CT scan for headache evaluation"},{serviceId:"S009",service:"Specialist Consultation",category:"Consultation Services",quantity:1,date:"2025-01-02",provider:"Dr. Roberto Santos - Neurologist",notes:"Neurological evaluation"},{serviceId:"S010",service:"Pharmacy - Medications",category:"Pharmacy",quantity:1,date:"2025-01-03",provider:"Pharmacy",notes:"Ibuprofen 400mg x15, Omeprazole 20mg x14"}],medicines:[{medicineId:"M003",name:"Ibuprofen",form:"tablet",strength:"400mg",quantity:15,datePrescribed:"2025-01-03",prescribedBy:"Dr. Roberto Santos",instructions:"Take 1 tablet every 8 hours as needed for pain"},{medicineId:"M004",name:"Omeprazole",form:"tablet",strength:"20mg",quantity:14,datePrescribed:"2025-01-03",prescribedBy:"Dr. Roberto Santos",instructions:"Take 1 tablet daily before breakfast"}]},P003:{patientId:"P003",patientName:"Maria Santos",admissionDate:"2025-01-03",status:"discharged",dischargeDate:"2025-01-05",services:[{serviceId:"S011",service:"General Consultation",category:"Consultation Services",quantity:1,date:"2025-01-03",provider:"Dr. John",notes:"Initial assessment for abdominal pain"},{serviceId:"S012",service:"Complete Blood Count",category:"Laboratory Services",quantity:1,date:"2025-01-03",provider:"Lab Department",notes:"Routine blood work"},{serviceId:"S013",service:"Ultrasound",category:"Diagnostic Services",quantity:1,date:"2025-01-03",provider:"Radiology Department",notes:"Abdominal ultrasound"},{serviceId:"S014",service:"Pharmacy - Medications",category:"Pharmacy",quantity:1,date:"2025-01-04",provider:"Pharmacy",notes:"Paracetamol 500mg x20, Amoxicillin 500mg x21, Mefenamic Acid 500mg x10"}],medicines:[{medicineId:"M005",name:"Paracetamol",form:"tablet",strength:"500mg",quantity:20,datePrescribed:"2025-01-04",prescribedBy:"Dr. John",instructions:"Take 1-2 tablets every 4-6 hours as needed; do not exceed 8 tablets/day"},{medicineId:"M006",name:"Amoxicillin",form:"capsule",strength:"500mg",quantity:21,datePrescribed:"2025-01-04",prescribedBy:"Dr. John",instructions:"Take 1 capsule every 8 hours for 7 days"},{medicineId:"M007",name:"Mefenamic Acid",form:"tablet",strength:"500mg",quantity:10,datePrescribed:"2025-01-04",prescribedBy:"Dr. John",instructions:"Take 1 tablet every 8 hours as needed for pain; avoid if bleeding disorder present"}]},P004:{patientId:"P004",patientName:"Roberto Cruz",admissionDate:"2024-12-30",status:"discharged",dischargeDate:"2025-01-02",services:[{serviceId:"S010",service:"Minor Surgery",category:"Surgical Services",quantity:1,date:"2024-12-31",provider:"Dr. Pedro Gonzales - Surgeon",notes:"Appendectomy"},{serviceId:"S011",service:"Semi-Private Room",category:"Room & Board",quantity:3,date:"2024-12-30",provider:"Nursing Department",notes:"3 days hospitalization"},{serviceId:"S012",service:"Complete Blood Count",category:"Laboratory Services",quantity:2,date:"2024-12-30",provider:"Lab Department",notes:"Pre-op and post-op blood work"},{serviceId:"S013",service:"Pharmacy - Medications",category:"Pharmacy",quantity:1,date:"2025-01-01",provider:"Pharmacy",notes:"Ceftriaxone 1g Injectable x6, Metronidazole 500mg x21, Tramadol 50mg x20"}]},P005:{patientId:"P005",patientName:"Carmen Flores",admissionDate:"2025-01-05",status:"admitted",services:[{serviceId:"S014",service:"Emergency Consultation",category:"Consultation Services",quantity:1,date:"2025-01-05",provider:"Dr. Sofia Martinez - ER Physician",notes:"Chest pain evaluation"},{serviceId:"S015",service:"ECG",category:"Diagnostic Services",quantity:1,date:"2025-01-05",provider:"ER Department",notes:"Emergency ECG"},{serviceId:"S016",service:"Blood Chemistry",category:"Laboratory Services",quantity:1,date:"2025-01-05",provider:"Lab Department",notes:"Cardiac enzymes"},{serviceId:"S017",service:"ICU",category:"Room & Board",quantity:1,date:"2025-01-05",provider:"ICU Department",notes:"Intensive care observation"}]},P006:{patientId:"P006",patientName:"Miguel Torres",admissionDate:"2025-01-04",status:"outpatient",services:[{serviceId:"S018",service:"Physical Therapy",category:"Therapeutic Services",quantity:5,date:"2025-01-04",provider:"Physical Therapy Department",notes:"Post-fracture rehabilitation sessions"},{serviceId:"S019",service:"X-Ray",category:"Diagnostic Services",quantity:2,date:"2025-01-04",provider:"Radiology Department",notes:"Follow-up x-rays"}]},P007:{patientId:"P007",patientName:"Sofia Garcia",admissionDate:"2025-01-01",status:"discharged",dischargeDate:"2025-01-05",services:[{serviceId:"S020",service:"Major Surgery",category:"Surgical Services",quantity:1,date:"2025-01-02",provider:"Dr. Carlos Mendoza - Surgeon",notes:"Gallbladder removal"},{serviceId:"S021",service:"Private Room",category:"Room & Board",quantity:4,date:"2025-01-01",provider:"Nursing Department",notes:"4 days private room"},{serviceId:"S022",service:"Complete Blood Count",category:"Laboratory Services",quantity:3,date:"2025-01-01",provider:"Lab Department",notes:"Pre-op and post-op monitoring"},{serviceId:"S023",service:"Ultrasound",category:"Diagnostic Services",quantity:1,date:"2025-01-01",provider:"Radiology Department",notes:"Pre-operative imaging"},{serviceId:"S024",service:"Pharmacy - Medications",category:"Pharmacy",quantity:1,date:"2025-01-03",provider:"Pharmacy",notes:"Omeprazole 20mg x30, Ondansetron 4mg x10 - Post-operative care"}]},P008:{patientId:"P008",patientName:"Pedro Gonzales",admissionDate:"2025-01-03",status:"outpatient",services:[{serviceId:"S025",service:"Telemedicine Consultation",category:"Consultation Services",quantity:1,date:"2025-01-03",provider:"Dr. Elena Ramirez",notes:"Virtual follow-up for diabetes management"},{serviceId:"S026",service:"Blood Chemistry",category:"Laboratory Services",quantity:1,date:"2025-01-03",provider:"Lab Department",notes:"HbA1c and glucose monitoring"}]},P009:{patientId:"P009",patientName:"Elena Ramirez",admissionDate:"2025-01-05",status:"admitted",services:[{serviceId:"S027",service:"Dialysis",category:"Therapeutic Services",quantity:1,date:"2025-01-05",provider:"Nephrology Department",notes:"Regular dialysis session"},{serviceId:"S028",service:"Complete Blood Count",category:"Laboratory Services",quantity:1,date:"2025-01-05",provider:"Lab Department",notes:"Pre-dialysis blood work"},{serviceId:"S029",service:"Day Care",category:"Room & Board",quantity:1,date:"2025-01-05",provider:"Day Care Unit",notes:"Dialysis day care"}]},P010:{patientId:"P010",patientName:"Carlos Mendoza",admissionDate:"2025-01-04",status:"outpatient",services:[{serviceId:"S030",service:"MRI",category:"Diagnostic Services",quantity:1,date:"2025-01-04",provider:"Radiology Department",notes:"Knee MRI for sports injury"},{serviceId:"S031",service:"Specialist Consultation",category:"Consultation Services",quantity:1,date:"2025-01-04",provider:"Dr. Antonio Fernandez - Orthopedic",notes:"Orthopedic evaluation"}]}};class Tf{static getPatientServices(s){const a=this.getPatientEmrData(s);return a?a.services||[]:[]}static getPatientEmrData(s){if(!s)return null;const a=String(s).trim();if(rs[a])return rs[a];const i=a.toUpperCase();if(rs[i])return rs[i];const l=Object.values(rs).find(u=>String(u.patientId||"").toLowerCase()===a.toLowerCase()||String(u.patientId||"").toLowerCase()===i.toLowerCase());if(l)return l;const d=a.match(/p?(\d{1,})$/i);if(d){const u=`P${String(d[1]).padStart(3,"0")}`;if(rs[u])return rs[u]}return null}static hasUnbilledServices(s){const a=this.getPatientServices(s);return Array.isArray(a)&&a.length>0}static getPatientStatus(s){return rs[s]?.status||"unknown"}static getAllPatientsWithServices(){return Object.keys(rs)}}const ec=[{service:"General Consultation",category:"Consultation Services",price:1500,unit:"session"},{service:"Specialist Consultation",category:"Consultation Services",price:2500,unit:"session"},{service:"Emergency Consultation",category:"Consultation Services",price:3e3,unit:"session"},{service:"Telemedicine Consultation",category:"Consultation Services",price:1200,unit:"session"},{service:"Blood Test",category:"Diagnostic Services",price:800,unit:"test"},{service:"X-Ray",category:"Diagnostic Services",price:1500,unit:"image"},{service:"CT Scan",category:"Diagnostic Services",price:8e3,unit:"scan"},{service:"MRI",category:"Diagnostic Services",price:12e3,unit:"scan"},{service:"Ultrasound",category:"Diagnostic Services",price:2500,unit:"scan"},{service:"ECG",category:"Diagnostic Services",price:800,unit:"test"},{service:"Endoscopy",category:"Diagnostic Services",price:5e3,unit:"procedure"},{service:"Complete Blood Count",category:"Laboratory Services",price:500,unit:"test"},{service:"Blood Chemistry",category:"Laboratory Services",price:1200,unit:"test"},{service:"Urinalysis",category:"Laboratory Services",price:300,unit:"test"},{service:"Microbiology",category:"Laboratory Services",price:1500,unit:"test"},{service:"Pathology",category:"Laboratory Services",price:2e3,unit:"test"},{service:"Minor Surgery",category:"Surgical Services",price:15e3,unit:"procedure"},{service:"Major Surgery",category:"Surgical Services",price:5e4,unit:"procedure"},{service:"Outpatient Surgery",category:"Surgical Services",price:2e4,unit:"procedure"},{service:"Emergency Surgery",category:"Surgical Services",price:6e4,unit:"procedure"},{service:"Physical Therapy",category:"Therapeutic Services",price:1e3,unit:"session"},{service:"Occupational Therapy",category:"Therapeutic Services",price:1200,unit:"session"},{service:"Speech Therapy",category:"Therapeutic Services",price:1500,unit:"session"},{service:"Chemotherapy",category:"Therapeutic Services",price:25e3,unit:"session"},{service:"Dialysis",category:"Therapeutic Services",price:3500,unit:"session"},{service:"Private Room",category:"Room & Board",price:3500,unit:"day"},{service:"Semi-Private Room",category:"Room & Board",price:2e3,unit:"day"},{service:"ICU",category:"Room & Board",price:8e3,unit:"day"},{service:"Emergency Room",category:"Room & Board",price:2500,unit:"day"},{service:"Day Care",category:"Room & Board",price:1500,unit:"day"},{service:"Prescription Medication",category:"Pharmacy",price:500,unit:"item"},{service:"Over-the-Counter",category:"Pharmacy",price:200,unit:"item"},{service:"Injectable Medication",category:"Pharmacy",price:800,unit:"dose"},{service:"IV Fluids",category:"Pharmacy",price:600,unit:"bag"},{service:"Wheelchair Rental",category:"Medical Equipment",price:200,unit:"day"},{service:"Medical Device Rental",category:"Medical Equipment",price:500,unit:"day"},{service:"Oxygen Tank",category:"Medical Equipment",price:1e3,unit:"day"},{service:"CPAP Machine",category:"Medical Equipment",price:1500,unit:"day"}];class ni{static getPrice(s,a){return ec.find(l=>l.service===s&&(!a||l.category===a))?.price||0}static getServicesByCategory(s){return ec.filter(a=>a.category===s)}static searchServices(s){const a=s.toLowerCase();return ec.filter(i=>i.service.toLowerCase().includes(a)||i.category.toLowerCase().includes(a))}static getAllCategories(){return Array.from(new Set(ec.map(s=>s.category)))}static getFormattedPrice(s,a){return`${this.getPrice(s,a).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`}}const Za="hospital_patients",jD=[{id:"P001",name:"Maria Santos",dateOfBirth:"1985-03-15",sex:"Female",contactNumber:"+63 917 123 4567",address:"123 Rizal Street, Quezon City, Metro Manila",email:"maria.santos@email.com",bloodType:"O+",emergencyContact:{name:"Juan Santos",relationship:"Husband",phone:"+63 917 234 5678"},services:[{id:"SVC001",date:"2025-10-15",description:"Clinical Laboratory - Complete Blood Count",category:"Laboratory",price:1500,attendingPhysician:"Dr. Garcia",status:"Completed"},{id:"SVC002",date:"2025-10-16",description:"X-Ray - Chest PA",category:"Radiology",price:2e3,attendingPhysician:"Dr. Garcia",status:"Completed"},{id:"SVC003",date:"2025-10-16",description:"Consultation - General Medicine",category:"Consultation",price:1e3,attendingPhysician:"Dr. Garcia",status:"Completed"}],medicines:[{id:"MED001",date:"2025-10-16",description:"Amoxicillin 500mg",quantity:21,unitPrice:15,totalPrice:315,prescribedBy:"Dr. Garcia",status:"Dispensed"},{id:"MED002",date:"2025-10-16",description:"Paracetamol 500mg",quantity:20,unitPrice:5,totalPrice:100,prescribedBy:"Dr. Garcia",status:"Dispensed"}]},{id:"P002",name:"Juan Dela Cruz",dateOfBirth:"1978-08-22",sex:"Male",contactNumber:"+63 918 234 5678",address:"456 Bonifacio Avenue, Makati City, Metro Manila",email:"juan.delacruz@email.com",bloodType:"A+",emergencyContact:{name:"Ana Dela Cruz",relationship:"Wife",phone:"+63 918 345 6789"},services:[{id:"SVC004",date:"2025-10-14",description:"CT Scan - Brain",category:"Radiology",price:5e3,attendingPhysician:"Dr. Reyes",status:"Completed"},{id:"SVC005",date:"2025-10-14",description:"Room and Board - Private Room (3 days)",category:"Accommodation",price:4500,attendingPhysician:"Dr. Reyes",status:"Completed"}],medicines:[{id:"MED003",date:"2025-10-14",description:"Losartan 50mg",quantity:30,unitPrice:18,totalPrice:540,prescribedBy:"Dr. Reyes",status:"Dispensed"}]},{id:"P003",name:"Anna Reyes",dateOfBirth:"1992-05-10",sex:"Female",contactNumber:"+63 919 345 6789",address:"789 Luna Street, Manila City, Metro Manila",email:"anna.reyes@email.com",bloodType:"B+",emergencyContact:{name:"Pedro Reyes",relationship:"Father",phone:"+63 919 456 7890"},services:[{id:"SVC006",date:"2025-10-17",description:"Clinical Laboratory - Urinalysis",category:"Laboratory",price:800,attendingPhysician:"Dr. Mendoza",status:"Completed"},{id:"SVC007",date:"2025-10-17",description:"Ultrasound - Abdomen",category:"Radiology",price:2500,attendingPhysician:"Dr. Mendoza",status:"Completed"}],medicines:[{id:"MED004",date:"2025-10-17",description:"Omeprazole 20mg",quantity:14,unitPrice:12,totalPrice:168,prescribedBy:"Dr. Mendoza",status:"Dispensed"},{id:"MED005",date:"2025-10-17",description:"Buscopan 10mg",quantity:10,unitPrice:25,totalPrice:250,prescribedBy:"Dr. Mendoza",status:"Dispensed"}]}];class bD{constructor(){this.loadInitialData()}loadInitialData(){localStorage.getItem(Za)||localStorage.setItem(Za,JSON.stringify(jD))}getAllPatients(){const s=localStorage.getItem(Za);return s?JSON.parse(s):[]}getPatient(s){return this.getAllPatients().find(i=>i.id===s)}addPatient(s){const a=this.getAllPatients(),i={...s,id:s.id||`P${String(a.length+1).padStart(3,"0")}`,services:s.services||[],medicines:s.medicines||[]};return a.push(i),localStorage.setItem(Za,JSON.stringify(a)),i}updatePatient(s,a){const i=this.getAllPatients(),l=i.findIndex(d=>d.id===s);return l!==-1?(i[l]={...i[l],...a},localStorage.setItem(Za,JSON.stringify(i)),i[l]):null}deletePatient(s){const i=this.getAllPatients().filter(l=>l.id!==s);return localStorage.setItem(Za,JSON.stringify(i)),!0}addService(s,a){const i=this.getPatient(s);if(!i)return null;const l={...a,id:a.id||`SVC${String(Date.now()).slice(-6)}`,date:a.date||new Date().toISOString().split("T")[0],status:a.status||"Completed"};return i.services=i.services||[],i.services.push(l),this.updatePatient(s,i),l}addMedicine(s,a){const i=this.getPatient(s);if(!i)return null;const l={...a,id:a.id||`MED${String(Date.now()).slice(-6)}`,date:a.date||new Date().toISOString().split("T")[0],status:a.status||"Dispensed",totalPrice:a.totalPrice||a.quantity*a.unitPrice};return i.medicines=i.medicines||[],i.medicines.push(l),this.updatePatient(s,i),l}getPatientTotalCharges(s){const a=this.getPatient(s);if(!a)return{services:0,medicines:0,total:0};const i=(a.services||[]).reduce((u,f)=>u+(f.price||0),0),l=(a.medicines||[]).reduce((u,f)=>u+(f.totalPrice||0),0),d=l*.12;return{services:i,medicines:l,medicinesVAT:d,subtotal:i+l,total:i+l+d}}searchPatients(s){const a=this.getAllPatients(),i=s.toLowerCase();return a.filter(l=>l.id.toLowerCase().includes(i)||l.name.toLowerCase().includes(i)||l.contactNumber&&l.contactNumber.includes(s))}calculateAge(s){const a=new Date,i=new Date(s);let l=a.getFullYear()-i.getFullYear();const d=a.getMonth()-i.getMonth();return(d<0||d===0&&a.getDate()<i.getDate())&&l--,l}}const _f=new bD,ND=Object.freeze(Object.defineProperty({__proto__:null,patientService:_f},Symbol.toStringTag,{value:"Module"}));function tn(n){return n&&(n.patientId||n.id||n._id)||""}function Tt(n){return n&&(n.id||n._id||n.patientId)||""}function SD(n){return n&&{...n,id:n.patientId||n.id||n._id||"",patientId:n.patientId||""}}function go(n=[]){return(n||[]).map((s,a)=>{const i=SD(s||{});if(!i.patientId||String(i.patientId).trim()===""){const l=String(a+1).padStart(3,"0");i.patientId=`P${l}`,i.id=i.id||i._id||i.patientId}return i})}function ss(n=[],s){if(!s&&s!==0)return"N/A";const a=String(s||"").toString();if(!Array.isArray(n)||n.length===0)return/^P\d{3,}$/i.test(a)?a:"N/A";const i=n.find(l=>String(Tt(l))===String(a)||tn(l)===String(a));if(i){const l=tn(i)||Tt(i)||"",d=i.name||`${i.firstName||""} ${i.lastName||""}`.trim()||"";return d?`${d} (${l})`:l||"N/A"}return/^P\d{3,}$/i.test(a)?a:"N/A"}const ar=ND||{},fm=import.meta?.env?.VITE_API_URL||"http://localhost:5000/api";function Dx({onNavigateToView:n,userSession:s}){const[a,i]=p.useState([]),[l,d]=p.useState(""),[u,f]=p.useState(null),[y,x]=p.useState(!1),[v,h]=p.useState(!1),[C,P]=p.useState(!1),[S,w]=p.useState(!1),[b,E]=p.useState("all"),[T,z]=p.useState(null),[B,Q]=p.useState({name:"",dateOfBirth:"",sex:"",contactNumber:"",address:"",email:"",bloodType:"",emergencyContactName:"",emergencyContactRelationship:"",emergencyContactPhone:""}),[X,G]=p.useState({description:"",category:"",price:"",attendingPhysician:"",date:new Date().toISOString().split("T")[0]}),[J,ue]=p.useState({description:"",quantity:"",unitPrice:"",prescribedBy:"",date:new Date().toISOString().split("T")[0]}),ge=async()=>{try{const k=await li(),Y=go(k||[]);i(Y)}catch(k){console.error("fetchPatientsFromDb error:",k),i([]),se.error("Failed to load patients")}};p.useEffect(()=>{ge()},[]);const Ee=k=>{if(!k)return null;const Y=[Tt(k),k.patientId,k.id,k._id,tn(k)];for(const Ie of Y){if(!Ie)continue;const Fe=Tf.getPatientEmrData(String(Ie));if(Fe)return Fe}return null},xe=k=>{f(k),x(!0)},me=async()=>{if(!B.name||!B.dateOfBirth||!B.sex){se.error("Please fill in all required fields");return}const k={name:B.name,dateOfBirth:B.dateOfBirth,sex:B.sex,contactNumber:B.contactNumber,address:B.address,email:B.email,bloodType:B.bloodType,emergencyContact:{name:B.emergencyContactName,relationship:B.emergencyContactRelationship,phone:B.emergencyContactPhone},createdBy:s?.name||"Unknown",createdByRole:s?.role||"unknown",createdAt:new Date().toISOString()};try{T?(await F(T,k),se.success("Patient updated")):(await fe(k),se.success("Patient added successfully!")),z(null),await ge(),h(!1),ee()}catch(Y){console.error("Add patient failed:",Y),se.error("Failed to add patient")}},fe=async k=>{try{const Y=await fetch(`${fm}/patients`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)}),Ie=(Y.headers.get("content-type")||"").toLowerCase();let Fe;if(Ie.includes("application/json"))Fe=await Y.json();else{const ze=await Y.text();throw console.error("createPatient non-JSON response:",Y.status,ze),new Error(`Server returned non-JSON response (status ${Y.status}). See console.`)}if(console.log("createPatient response:",Y.status,Fe),!Y.ok||!Fe.success)throw new Error(Fe?.message||`Create failed: ${Y.status}`);const O={...Fe.data||{},id:Fe.data?.patientId||Fe.data?.id||Fe.data?._id||""};i(ze=>[O,...ze]);try{window.dispatchEvent(new CustomEvent("patients-updated",{detail:{action:"create",patient:O}}))}catch(ze){console.warn("Could not dispatch patients-updated event",ze)}return O}catch(Y){throw console.error("createPatient error",Y),Y}},F=async(k,Y)=>{try{const Ie=await fetch(`${fm}/patients/${k}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)}),Fe=await Ie.json();if(console.log("updatePatient response:",Ie.status,Fe),!Ie.ok||!Fe.success)throw new Error(Fe?.message||"Update failed");const O={...Fe.data||{},id:Fe.data?.patientId||Fe.data?.id||Fe.data?._id||k};i(ze=>ze.map(W=>W.id===k||W._id===k?O:W));try{window.dispatchEvent(new CustomEvent("patients-updated",{detail:{action:"update",patient:O}}))}catch(ze){console.warn("Could not dispatch patients-updated event",ze)}return O}catch(Ie){throw console.error("updatePatient error",Ie),Ie}},[ne,te]=p.useState(!1),[D,L]=p.useState(null),ce=k=>{L(k),te(!0)},A=async k=>{if(k)try{const Y=await fetch(`${fm}/patients/${k}/archive`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({archivedBy:s?.name||"system"})}),Ie=await Y.text(),Fe=(Y.headers.get("content-type")||"").toLowerCase();let O={};if(Fe.includes("application/json")&&Ie)try{O=JSON.parse(Ie)}catch{}if(!Y.ok)throw new Error(O?.message||Ie||`Server returned ${Y.status}`);i(ze=>ze.filter(W=>W.id!==k&&W._id!==k&&W.patientId!==k)),se.success(O?.message||"Patient moved to archive");try{window.dispatchEvent(new CustomEvent("patients-updated",{detail:{action:"archive",id:k}}))}catch{}}catch(Y){console.error("performArchive error",Y),se.error(Y?.message||"Failed to move patient to archive")}finally{te(!1),L(null)}},R=k=>{z(Tt(k)||null),Q({name:k.name||"",dateOfBirth:k.dateOfBirth?k.dateOfBirth.split("T")[0]:"",sex:k.sex||"",contactNumber:k.contactNumber||"",address:k.address||"",email:k.email||"",bloodType:k.bloodType||"",emergencyContactName:k.emergencyContact?.name||"",emergencyContactRelationship:k.emergencyContact?.relationship||"",emergencyContactPhone:k.emergencyContact?.phone||""}),h(!0)},H=()=>{if(!X.description||!X.category||!X.price){se.error("Please fill in all required fields");return}if(!u){se.error("No patient selected");return}typeof ar.addService=="function"?ar.addService(u.id,{description:X.description,category:X.category,price:parseFloat(X.price),attendingPhysician:X.attendingPhysician,date:X.date}):console.warn("patientService.addService not available, skipping local update");const k=typeof ar.getPatient=="function"?ar.getPatient(u.id):u;f(k),ge(),P(!1),U(),se.success("Service added successfully!")},M=()=>{if(!J.description||!J.quantity||!J.unitPrice){se.error("Please fill in all required fields");return}if(!u){se.error("No patient selected");return}typeof ar.addMedicine=="function"?ar.addMedicine(u.id,{description:J.description,quantity:parseInt(J.quantity),unitPrice:parseFloat(J.unitPrice),prescribedBy:J.prescribedBy,date:J.date}):console.warn("patientService.addMedicine not available, skipping local update");const k=typeof ar.getPatient=="function"?ar.getPatient(u.id):u;f(k),ge(),w(!1),q(),se.success("Medicine added successfully!")},ee=()=>{Q({name:"",dateOfBirth:"",sex:"",contactNumber:"",address:"",email:"",bloodType:"",emergencyContactName:"",emergencyContactRelationship:"",emergencyContactPhone:""})},U=()=>{G({description:"",category:"",price:"",attendingPhysician:"",date:new Date().toISOString().split("T")[0]})},q=()=>{ue({description:"",quantity:"",unitPrice:"",prescribedBy:"",date:new Date().toISOString().split("T")[0]})},le=a.filter(k=>{const Y=(l||"").toLowerCase(),Ie=(tn(k)||"").toString().toLowerCase(),Fe=(k?.name||"").toString().toLowerCase(),O=(k?.contactNumber||"").toString().toLowerCase();return Ie.includes(Y)||Fe.includes(Y)||O.includes(Y)}),he=k=>{const Y=Tt(k);if(typeof ar.getPatientTotalCharges=="function"&&Y)try{return ar.getPatientTotalCharges(Y)}catch(Ie){console.error("getPatientTotalCharges error",Ie)}return{total:0,services:0,medicines:0,medicinesVAT:0,subtotal:0}},ve=k=>{if(!k)return"-";try{const Y=new Date(k);if(isNaN(Y.getTime()))return"-";const Ie=new Date;let Fe=Ie.getFullYear()-Y.getFullYear();const O=Ie.getMonth()-Y.getMonth();return(O<0||O===0&&Ie.getDate()<Y.getDate())&&Fe--,Fe>=0?Fe:"-"}catch{return"-"}};return e.jsxs("div",{children:[e.jsx("div",{className:"bg-[#358E83] rounded-lg p-6 mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-semibold text-white mb-2",children:"Patient Management"}),e.jsx("p",{className:"text-white/90",children:s?.role==="admin"?"Create and manage patient records for the hospital system":"View patient information, services, and pharmacy purchases"})]}),e.jsxs(ie,{onClick:()=>h(!0),className:"bg-[#E94D61] hover:bg-[#E94D61]/90 text-white",children:[e.jsx(Sy,{className:"mr-2 h-4 w-4"}),"Add New Patient"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs(Le,{children:[e.jsx(pt,{className:"pb-3",children:e.jsxs(ht,{className:"text-sm font-medium text-gray-600 flex items-center",children:[e.jsx(En,{className:"mr-2 h-4 w-4"}),"Total Patients"]})}),e.jsx(Be,{children:e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:a.length})})]}),e.jsxs(Le,{children:[e.jsx(pt,{className:"pb-3",children:e.jsxs(ht,{className:"text-sm font-medium text-gray-600 flex items-center",children:[e.jsx(PS,{className:"mr-2 h-4 w-4"}),"Total Services"]})}),e.jsx(Be,{children:e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:a.reduce((k,Y)=>k+(Y.services?.length||0),0)})})]}),e.jsxs(Le,{children:[e.jsx(pt,{className:"pb-3",children:e.jsxs(ht,{className:"text-sm font-medium text-gray-600 flex items-center",children:[e.jsx(Mr,{className:"mr-2 h-4 w-4"}),"Total Medicines"]})}),e.jsx(Be,{children:e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:a.reduce((k,Y)=>k+(Y.medicines?.length||0),0)})})]}),e.jsxs(Le,{children:[e.jsx(pt,{className:"pb-3",children:e.jsxs(ht,{className:"text-sm font-medium text-gray-600 flex items-center",children:[e.jsx(or,{className:"mr-2 h-4 w-4"}),"Total Charges"]})}),e.jsx(Be,{children:e.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:["",a.reduce((k,Y)=>{const Ie=he(Y);return k+(Ie?.total||0)},0).toLocaleString("en-PH",{minimumFractionDigits:2})]})})]})]}),e.jsxs(Le,{children:[e.jsx(pt,{className:"bg-[#358E83] text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ht,{className:"flex items-center",children:[e.jsx(En,{className:"mr-2",size:20}),"Patient Records"]}),e.jsx(pn,{className:"text-white/80",children:"View and manage patient information and billing"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx(Ue,{placeholder:"Search patients...",value:l,onChange:k=>d(k.target.value),className:"pl-10 w-64 bg-white"})]})]})}),e.jsx(Be,{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:le.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(En,{className:"mx-auto mb-3 opacity-50",size:48}),e.jsx("p",{children:"No patients found"})]}):le.map((k,Y)=>{const Ie=Tt(k)||`p-${Y}`,Fe=he(k),O=k?.dateOfBirth?typeof ar.calculateAge=="function"?ar.calculateAge(k.dateOfBirth):ve(k.dateOfBirth):"-";return e.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-[#358E83] text-white flex items-center justify-center",children:e.jsx(En,{size:24})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold text-lg",children:k.name}),k.createdByRole==="admin"&&e.jsx(Nt,{className:"bg-blue-100 text-blue-800 hover:bg-blue-100 text-xs",children:"Admin Created"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[tn(k),"  ",O," years old  ",k.sex,k.createdBy&&e.jsxs("span",{className:"text-gray-500",children:["  Created by ",k.createdBy]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-500 flex items-center",children:[e.jsx(aS,{size:14,className:"mr-1"}),"Contact"]}),e.jsx("p",{className:"font-medium",children:k.contactNumber||"N/A"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-500 flex items-center",children:[e.jsx(ua,{size:14,className:"mr-1"}),"Services"]}),e.jsxs("p",{className:"font-medium",children:[k.services?.length||0," services"]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-500 flex items-center",children:[e.jsx(Mr,{size:14,className:"mr-1"}),"Medicines"]}),e.jsxs("p",{className:"font-medium",children:[k.medicines?.length||0," items"]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-500 flex items-center",children:[e.jsx(or,{size:14,className:"mr-1"}),"Total Charges"]}),e.jsxs("p",{className:"font-semibold text-[#358E83]",children:["",Fe.total.toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]})]}),e.jsxs("div",{className:"ml-4 flex flex-col gap-2",children:[e.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>xe(k),children:[e.jsx($r,{className:"h-4 w-4 mr-2"}),"View Details"]}),s?.role&&s.role.toString().toLowerCase()!=="cashier"?e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs(ie,{variant:"ghost",size:"sm",onClick:()=>R(k),children:[e.jsx(yc,{className:"h-4 w-4 mr-2"})," Edit"]}),e.jsxs(ie,{variant:"destructive",size:"sm",onClick:()=>ce(Tt(k)),children:[e.jsx(Ur,{className:"h-4 w-4 mr-2"})," Move to Archive"]})]}):e.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"Edit / Archive (Admin only)"})]})]})},Ie)})})})]}),y&&u&&e.jsxs("div",{className:"fixed right-0 top-0 h-full w-[min(1000px,85vw)] bg-white p-4 md:p-6 shadow-2xl overflow-auto z-50",role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"mb-4 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Patient Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View and manage patient information, services, and billing"})]}),e.jsx("div",{children:e.jsx(ie,{variant:"ghost",onClick:()=>x(!1),children:e.jsx(Cy,{className:"h-4 w-4"})})})]}),e.jsxs("div",{className:"h-full grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"overflow-y-auto pr-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx(ye,{className:"text-sm font-medium",children:"Patient ID"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:tn(u)})]}),e.jsxs("div",{children:[e.jsx(ye,{className:"text-sm font-medium",children:"Name"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.name})]}),e.jsxs("div",{children:[e.jsx(ye,{className:"text-sm font-medium",children:"Date of Birth"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.dateOfBirth?new Date(u.dateOfBirth).toLocaleDateString():"N/A"})]}),e.jsxs("div",{children:[e.jsx(ye,{className:"text-sm font-medium",children:"Sex"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.sex})]}),e.jsxs("div",{children:[e.jsx(ye,{className:"text-sm font-medium",children:"Contact Number"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.contactNumber||"N/A"})]}),e.jsxs("div",{children:[e.jsx(ye,{className:"text-sm font-medium",children:"Email"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx(ye,{className:"text-sm font-medium",children:"Address"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.address||"N/A"})]}),e.jsxs("div",{children:[e.jsx(ye,{className:"text-sm font-medium",children:"Blood Type"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.bloodType||"N/A"})]})]}),e.jsx(Un,{className:"my-6"}),e.jsxs("div",{className:"mb-6",children:[e.jsx(ye,{className:"text-sm font-medium",children:"Emergency Contact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.emergencyContact?.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Relationship"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.emergencyContact?.relationship||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.emergencyContact?.phone||"N/A"})]})]})]}),e.jsx(Un,{className:"my-6"}),e.jsxs("div",{className:"mb-6",children:[e.jsx(ye,{className:"text-sm font-medium",children:"Services and Medicines"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Services"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[u.services?.length||0," services"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Medicines"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[u.medicines?.length||0," items"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Charges"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",he(u).total.toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]})]})]}),e.jsxs("div",{className:"overflow-y-auto pl-2",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(ye,{className:"text-sm font-medium",children:"Detailed Items"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Services (Local / EMR)"}),e.jsxs("div",{className:"space-y-2",children:[(u.services||[]).map((k,Y)=>e.jsxs("div",{className:"p-2 border rounded bg-white",children:[e.jsx("div",{className:"font-medium",children:k.description||k.service||k.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[k.category||k.group||"","  ",k.quantity||1,"  ",k.date||""]}),k.notes&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:k.notes})]},`local-s-${Y}`)),(()=>{try{const k=Ee(u);if(k&&Array.isArray(k.services)&&k.services.length>0)return k.services.map((Y,Ie)=>e.jsxs("div",{className:"p-2 border rounded bg-gray-50 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:Y.service}),e.jsxs("div",{className:"text-xs text-gray-500",children:[Y.category,"  ",Y.quantity,"  ",Y.date]}),Y.notes&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Y.notes})]}),e.jsx("div",{className:"ml-3",children:e.jsx(ie,{size:"sm",onClick:()=>{try{const Fe=Tt(u)||u.patientId||u.id||u._id||tn(u),O=ni.getPrice(Y.service,Y.category)||0,ze={id:`emr-${Y.serviceId}-${Date.now()}`,description:Y.service,quantity:Y.quantity||1,rate:O,amount:O*(Y.quantity||1),category:Y.category||"Service"};window.dispatchEvent(new CustomEvent("emr-add-to-invoice",{detail:{patientId:Fe,patientName:u.name,item:ze}})),se.success(`${Y.service} added to invoice builder`)}catch(Fe){console.error(Fe),se.error("Failed to add EMR item")}},children:"Add"})})]},`emr-s-${Ie}`))}catch{}return e.jsx("div",{className:"text-sm text-gray-500",children:"No EMR services"})})()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Medicines (Local / EMR)"}),e.jsxs("div",{className:"space-y-2",children:[(u.medicines||[]).map((k,Y)=>e.jsxs("div",{className:"p-2 border rounded bg-white",children:[e.jsx("div",{className:"font-medium",children:k.name||k.description||"Medicine"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[k.strength||"","  Qty: ",k.quantity,"  ",k.datePrescribed||k.date||""]}),k.instructions&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:k.instructions})]},`local-m-${Y}`)),(()=>{try{const k=Ee(u);if(k&&Array.isArray(k.medicines)&&k.medicines.length>0)return k.medicines.map((Y,Ie)=>e.jsxs("div",{className:"p-2 border rounded bg-gray-50 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:Y.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[Y.strength||Y.form||"","  Qty: ",Y.quantity,"  ",Y.datePrescribed||Y.date]}),Y.instructions&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Y.instructions})]}),e.jsx("div",{className:"ml-3",children:e.jsx(ie,{size:"sm",onClick:()=>{try{const Fe=Tt(u)||u.patientId||u.id||u._id||tn(u),O=ni.getPrice(Y.name||Y.description||"Medicine","Pharmacy")||0,ze={id:`pharm-${Y.medicineId||Ie}-${Date.now()}`,description:`${Y.name}${Y.strength?` (${Y.strength})`:""}`,quantity:Y.quantity||1,rate:O,amount:O*(Y.quantity||1),category:"Pharmacy"};window.dispatchEvent(new CustomEvent("emr-add-to-invoice",{detail:{patientId:Fe,patientName:u.name,item:ze}})),se.success(`${Y.name} added to invoice builder`)}catch(Fe){console.error(Fe),se.error("Failed to add medicine")}},children:"Add"})})]},`emr-m-${Ie}`))}catch{}return e.jsx("div",{className:"text-sm text-gray-500",children:"No EMR medicines"})})()]})]})]})]}),e.jsx("div",{className:"mt-4 flex flex-col md:flex-row gap-4",children:s?.role&&s.role.toString().toLowerCase()!=="cashier"?e.jsxs(e.Fragment,{children:[e.jsxs(ie,{onClick:()=>{x(!1),R(u)},className:"flex-1",children:[e.jsx(yc,{className:"mr-2 h-4 w-4"})," Edit Patient"]}),e.jsxs(ie,{variant:"destructive",onClick:()=>ce(Tt(u)),className:"flex-1",children:[e.jsx(Ur,{className:"mr-2 h-4 w-4"})," Move to Archive"]})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"Editing and archiving patient records requires admin privileges."})})]})]})]}),e.jsx(Gt,{open:ne,onOpenChange:te,children:e.jsxs(Bt,{className:"sm:max-w-md",children:[e.jsxs(Ut,{children:[e.jsx(Ht,{children:"Move Patient to Archive?"}),e.jsx(dn,{children:"Are you sure you want to move this patient to the archive? You can restore the patient later from the Archive."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-gray-700",children:e.jsx("div",{className:"font-medium",children:"This action will hide the patient from active lists."})}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(ie,{variant:"outline",onClick:()=>te(!1),children:"Cancel"}),e.jsx(ie,{className:"bg-red-600 hover:bg-red-700",onClick:()=>A(D),children:"Move to Archive"})]})]})]})}),e.jsx(Gt,{open:v,onOpenChange:h,children:e.jsxs(Bt,{className:"w-[95vw] max-w-[1200px] max-h-[85vh] p-4 md:p-6 overflow-y-auto",children:[e.jsxs(Ut,{children:[e.jsx(Ht,{className:"text-2xl font-semibold",children:T?"Edit Patient":"Add New Patient"}),e.jsx(dn,{children:T?"Update the patient details and save changes":"Enter the patient details to add a new record"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"name",className:"text-sm font-medium",children:"Name"}),e.jsx(Ue,{id:"name",value:B.name,onChange:k=>Q({...B,name:k.target.value}),placeholder:"Enter patient's full name",className:"mt-1 md:col-span-2"})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"dateOfBirth",className:"text-sm font-medium",children:"Date of Birth"}),e.jsx(Ue,{id:"dateOfBirth",type:"date",value:B.dateOfBirth,onChange:k=>Q({...B,dateOfBirth:k.target.value}),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"sex",className:"text-sm font-medium",children:"Sex"}),e.jsxs(nn,{id:"sex",value:B.sex,onValueChange:k=>Q({...B,sex:k}),className:"mt-1",children:[e.jsx(sn,{children:e.jsx(rn,{placeholder:"Select sex"})}),e.jsxs(an,{children:[e.jsx(lt,{value:"male",children:"Male"}),e.jsx(lt,{value:"female",children:"Female"}),e.jsx(lt,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"contactNumber",className:"text-sm font-medium",children:"Contact Number"}),e.jsx(Ue,{id:"contactNumber",value:B.contactNumber,onChange:k=>Q({...B,contactNumber:k.target.value}),placeholder:"Enter contact number",className:"mt-1"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(ye,{htmlFor:"address",className:"text-sm font-medium",children:"Address"}),e.jsx(Ue,{id:"address",value:B.address,onChange:k=>Q({...B,address:k.target.value}),placeholder:"Enter address",className:"mt-1"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(ye,{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),e.jsx(Ue,{id:"email",type:"email",value:B.email,onChange:k=>Q({...B,email:k.target.value}),placeholder:"Enter email address",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"bloodType",className:"text-sm font-medium",children:"Blood Type"}),e.jsxs(nn,{id:"bloodType",value:B.bloodType,onValueChange:k=>Q({...B,bloodType:k}),className:"mt-1",children:[e.jsx(sn,{children:e.jsx(rn,{placeholder:"Select blood type"})}),e.jsxs(an,{children:[e.jsx(lt,{value:"A+",children:"A+"}),e.jsx(lt,{value:"A-",children:"A-"}),e.jsx(lt,{value:"B+",children:"B+"}),e.jsx(lt,{value:"B-",children:"B-"}),e.jsx(lt,{value:"AB+",children:"AB+"}),e.jsx(lt,{value:"AB-",children:"AB-"}),e.jsx(lt,{value:"O+",children:"O+"}),e.jsx(lt,{value:"O-",children:"O-"})]})]})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"emergencyContactName",className:"text-sm font-medium",children:"Emergency Contact Name"}),e.jsx(Ue,{id:"emergencyContactName",value:B.emergencyContactName,onChange:k=>Q({...B,emergencyContactName:k.target.value}),placeholder:"Enter emergency contact name",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"emergencyContactRelationship",className:"text-sm font-medium",children:"Relationship"}),e.jsx(Ue,{id:"emergencyContactRelationship",value:B.emergencyContactRelationship,onChange:k=>Q({...B,emergencyContactRelationship:k.target.value}),placeholder:"Enter relationship to emergency contact",className:"mt-1"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(ye,{htmlFor:"emergencyContactPhone",className:"text-sm font-medium",children:"Emergency Contact Phone"}),e.jsx(Ue,{id:"emergencyContactPhone",value:B.emergencyContactPhone,onChange:k=>Q({...B,emergencyContactPhone:k.target.value}),placeholder:"Enter emergency contact phone",className:"mt-1"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[e.jsx(ie,{variant:"outline",onClick:()=>h(!1),className:"flex-1",children:"Cancel"}),e.jsx(ie,{onClick:me,className:"flex-1 bg-[#358E83] hover:bg-[#358E83]/90 text-white",children:T?"Save Changes":"Add Patient"})]})]})}),e.jsx(Gt,{open:C,onOpenChange:P,children:e.jsxs(Bt,{className:"max-w-md p-6",children:[e.jsxs(Ut,{children:[e.jsx(Ht,{className:"text-2xl font-semibold",children:"Add Service"}),e.jsx(dn,{children:"Enter the service details to add to the patient's record"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"description",className:"text-sm font-medium",children:"Description"}),e.jsx(Ue,{id:"description",value:X.description,onChange:k=>G({...X,description:k.target.value}),placeholder:"Enter service description",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"category",className:"text-sm font-medium",children:"Category"}),e.jsx(Ue,{id:"category",value:X.category,onChange:k=>G({...X,category:k.target.value}),placeholder:"Enter service category",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"price",className:"text-sm font-medium",children:"Price"}),e.jsx(Ue,{id:"price",type:"number",value:X.price,onChange:k=>G({...X,price:k.target.value}),placeholder:"Enter service price",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"attendingPhysician",className:"text-sm font-medium",children:"Attending Physician"}),e.jsx(Ue,{id:"attendingPhysician",value:X.attendingPhysician,onChange:k=>G({...X,attendingPhysician:k.target.value}),placeholder:"Enter attending physician's name",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"date",className:"text-sm font-medium",children:"Date"}),e.jsx(Ue,{id:"date",type:"date",value:X.date,onChange:k=>G({...X,date:k.target.value}),className:"mt-1"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[e.jsx(ie,{variant:"outline",onClick:()=>P(!1),className:"flex-1",children:"Cancel"}),e.jsx(ie,{onClick:H,className:"flex-1 bg-[#358E83] hover:bg-[#358E83]/90 text-white",children:"Add Service"})]})]})}),e.jsx(Gt,{open:S,onOpenChange:w,children:e.jsxs(Bt,{className:"max-w-md p-6",children:[e.jsxs(Ut,{children:[e.jsx(Ht,{className:"text-2xl font-semibold",children:"Add Medicine"}),e.jsx(dn,{children:"Enter the medicine details to add to the patient's record"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"medicineDescription",className:"text-sm font-medium",children:"Description"}),e.jsx(Ue,{id:"medicineDescription",value:J.description,onChange:k=>ue({...J,description:k.target.value}),placeholder:"Enter medicine description",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"quantity",className:"text-sm font-medium",children:"Quantity"}),e.jsx(Ue,{id:"quantity",type:"number",value:J.quantity,onChange:k=>ue({...J,quantity:k.target.value}),placeholder:"Enter quantity",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"unitPrice",className:"text-sm font-medium",children:"Unit Price"}),e.jsx(Ue,{id:"unitPrice",type:"number",value:J.unitPrice,onChange:k=>ue({...J,unitPrice:k.target.value}),placeholder:"Enter unit price",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"prescribedBy",className:"text-sm font-medium",children:"Prescribed By"}),e.jsx(Ue,{id:"prescribedBy",value:J.prescribedBy,onChange:k=>ue({...J,prescribedBy:k.target.value}),placeholder:"Enter prescriber's name",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"medicineDate",className:"text-sm font-medium",children:"Date"}),e.jsx(Ue,{id:"medicineDate",type:"date",value:J.date,onChange:k=>ue({...J,date:k.target.value}),className:"mt-1"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[e.jsx(ie,{variant:"outline",onClick:()=>w(!1),className:"flex-1",children:"Cancel"}),e.jsx(ie,{onClick:M,className:"flex-1 bg-[#358E83] hover:bg-[#358E83]/90 text-white",children:"Add Medicine"})]})]})})]})}function CD({onNavigateToView:n}){return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Appointments Module"}),e.jsxs(ie,{variant:"outline",onClick:()=>n?.("medicare-billing"),children:[e.jsx(cf,{className:"h-4 w-4 mr-2"}),"Back to Billing"]})]}),e.jsxs(Le,{children:[e.jsx(pt,{children:e.jsx(ht,{children:"Appointment Scheduling"})}),e.jsx(Be,{children:e.jsx("p",{className:"text-gray-600",children:"This module would contain appointment scheduling functionality including calendar views, doctor availability, patient booking, appointment reminders, and more."})})]})]})})}var td="Switch",[PD]=br(td),[ED,DD]=PD(td),Sv=p.forwardRef((n,s)=>{const{__scopeSwitch:a,name:i,checked:l,defaultChecked:d,required:u,disabled:f,value:y="on",onCheckedChange:x,form:v,...h}=n,[C,P]=p.useState(null),S=Pt(s,z=>P(z)),w=p.useRef(!1),b=C?v||!!C.closest("form"):!0,[E,T]=Ls({prop:l,defaultProp:d??!1,onChange:x,caller:td});return e.jsxs(ED,{scope:a,checked:E,disabled:f,children:[e.jsx(it.button,{type:"button",role:"switch","aria-checked":E,"aria-required":u,"data-state":Dv(E),"data-disabled":f?"":void 0,disabled:f,value:y,...h,ref:S,onClick:Ge(n.onClick,z=>{T(B=>!B),b&&(w.current=z.isPropagationStopped(),w.current||z.stopPropagation())})}),b&&e.jsx(Ev,{control:C,bubbles:!w.current,name:i,value:y,checked:E,required:u,disabled:f,form:v,style:{transform:"translateX(-100%)"}})]})});Sv.displayName=td;var Cv="SwitchThumb",Pv=p.forwardRef((n,s)=>{const{__scopeSwitch:a,...i}=n,l=DD(Cv,a);return e.jsx(it.span,{"data-state":Dv(l.checked),"data-disabled":l.disabled?"":void 0,...i,ref:s})});Pv.displayName=Cv;var kD="SwitchBubbleInput",Ev=p.forwardRef(({__scopeSwitch:n,control:s,checked:a,bubbles:i=!0,...l},d)=>{const u=p.useRef(null),f=Pt(u,d),y=J0(a),x=z0(s);return p.useEffect(()=>{const v=u.current;if(!v)return;const h=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(h,"checked").set;if(y!==a&&P){const S=new Event("click",{bubbles:i});P.call(v,a),v.dispatchEvent(S)}},[y,a,i]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...l,tabIndex:-1,ref:f,style:{...l.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ev.displayName=kD;function Dv(n){return n?"checked":"unchecked"}var AD=Sv,ID=Pv;function as({className:n,...s}){return e.jsx(AD,{"data-slot":"switch",className:rt("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),...s,children:e.jsx(ID,{"data-slot":"switch-thumb",className:rt("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function RD({onNavigateToView:n}){const[s,a]=p.useState({emr:{connected:!1,lastSync:null,lastError:null,totalSynced:0},pharmacy:{connected:!1,lastSync:null,lastError:null,totalSynced:0}}),[i,l]=p.useState({emr:!1,pharmacy:!1}),[d,u]=p.useState([]);p.useEffect(()=>{f();const P=S=>{switch(u(w=>[S,...w.slice(0,9)]),S.event){case"emr_sync_started":l(w=>({...w,emr:!0}));break;case"emr_sync_completed":case"emr_sync_failed":l(w=>({...w,emr:!1})),f();break;case"pharmacy_sync_started":l(w=>({...w,pharmacy:!0}));break;case"pharmacy_sync_completed":case"pharmacy_sync_failed":l(w=>({...w,pharmacy:!1})),f();break}};return Wt.addEventListener("emr_sync_started",P),Wt.addEventListener("emr_sync_completed",P),Wt.addEventListener("emr_sync_failed",P),Wt.addEventListener("pharmacy_sync_started",P),Wt.addEventListener("pharmacy_sync_completed",P),Wt.addEventListener("pharmacy_sync_failed",P),()=>{Wt.removeEventListener("emr_sync_started",P),Wt.removeEventListener("emr_sync_completed",P),Wt.removeEventListener("emr_sync_failed",P),Wt.removeEventListener("pharmacy_sync_started",P),Wt.removeEventListener("pharmacy_sync_completed",P),Wt.removeEventListener("pharmacy_sync_failed",P)}},[]);const f=()=>{const P=Wt.getIntegrationStatus();a(P)},y=async P=>{try{P==="emr"?await Wt.syncEMRData():await Wt.syncPharmacyData()}catch(S){console.error(`Manual sync failed for ${P}:`,S)}},x=P=>{if(!P)return"Never";const w=new Date().getTime()-P.getTime(),b=Math.floor(w/6e4);if(b<1)return"Just now";if(b<60)return`${b}m ago`;const E=Math.floor(b/60);return E<24?`${E}h ago`:`${Math.floor(E/24)}d ago`},v=(P,S)=>!P||S?e.jsx(hc,{className:"h-4 w-4 text-red-500"}):e.jsx(Br,{className:"h-4 w-4 text-green-500"}),h=(P,S)=>P?S?e.jsx(Nt,{variant:"destructive",children:"Error"}):e.jsx(Nt,{className:"bg-green-100 text-green-800",children:"Connected"}):e.jsx(Nt,{variant:"destructive",children:"Disconnected"}),C=P=>{switch(P){case"emr_sync_started":case"pharmacy_sync_started":return e.jsx(Bn,{className:"h-3 w-3 text-blue-500 animate-spin"});case"emr_sync_completed":case"pharmacy_sync_completed":return e.jsx(Br,{className:"h-3 w-3 text-green-500"});case"emr_sync_failed":case"pharmacy_sync_failed":return e.jsx(hc,{className:"h-3 w-3 text-red-500"});default:return e.jsx(ls,{className:"h-3 w-3 text-gray-500"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(Le,{children:[e.jsx(pt,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gc,{className:"h-5 w-5 text-blue-600"}),e.jsx(ht,{className:"text-lg",children:"EMR Integration"})]}),v(s.emr.connected,!!s.emr.lastError)]})}),e.jsxs(Be,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status"}),h(s.emr.connected,!!s.emr.lastError)]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Last Sync"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(vr,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-sm",children:x(s.emr.lastSync)})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Records Synced"}),e.jsx("span",{className:"text-sm font-medium",children:s.emr.totalSynced})]}),s.emr.lastError&&e.jsx("div",{className:"p-2 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-xs text-red-600",children:s.emr.lastError})}),e.jsx(ie,{size:"sm",variant:"outline",onClick:()=>y("emr"),disabled:i.emr,className:"w-full",children:i.emr?e.jsxs(e.Fragment,{children:[e.jsx(Bn,{className:"h-3 w-3 mr-2 animate-spin"}),"Syncing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bn,{className:"h-3 w-3 mr-2"}),"Manual Sync"]})})]})]}),e.jsxs(Le,{children:[e.jsx(pt,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Mr,{className:"h-5 w-5 text-green-600"}),e.jsx(ht,{className:"text-lg",children:"Pharmacy Integration"})]}),v(s.pharmacy.connected,!!s.pharmacy.lastError)]})}),e.jsxs(Be,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status"}),h(s.pharmacy.connected,!!s.pharmacy.lastError)]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Last Sync"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(vr,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-sm",children:x(s.pharmacy.lastSync)})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Transactions Synced"}),e.jsx("span",{className:"text-sm font-medium",children:s.pharmacy.totalSynced})]}),s.pharmacy.lastError&&e.jsx("div",{className:"p-2 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-xs text-red-600",children:s.pharmacy.lastError})}),e.jsx(ie,{size:"sm",variant:"outline",onClick:()=>y("pharmacy"),disabled:i.pharmacy,className:"w-full",children:i.pharmacy?e.jsxs(e.Fragment,{children:[e.jsx(Bn,{className:"h-3 w-3 mr-2 animate-spin"}),"Syncing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bn,{className:"h-3 w-3 mr-2"}),"Manual Sync"]})})]})]})]}),e.jsxs(Le,{children:[e.jsx(pt,{children:e.jsx(ht,{className:"text-lg",children:"Recent Integration Activity"})}),e.jsx(Be,{children:e.jsx("div",{className:"space-y-3",children:d.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No recent activity"}):d.map((P,S)=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-md hover:bg-gray-50",children:[C(P.event),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:P.event.replace(/_/g," ").replace(/\b\w/g,w=>w.toUpperCase())}),e.jsx("p",{className:"text-xs text-gray-500",children:P.timestamp.toLocaleTimeString()})]}),P.error&&e.jsx(ls,{className:"h-4 w-4 text-red-500"})]},S))})})]}),e.jsxs(Le,{children:[e.jsx(pt,{children:e.jsx(ht,{className:"text-lg",children:"Integration Management"})}),e.jsx(Be,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(ie,{variant:"outline",onClick:()=>n?.("settings"),className:"flex items-center space-x-2",children:[e.jsx(oi,{className:"h-4 w-4"}),e.jsx("span",{children:"Configure APIs"})]}),e.jsxs(ie,{variant:"outline",onClick:()=>n?.("history"),className:"flex items-center space-x-2",children:[e.jsx(gc,{className:"h-4 w-4"}),e.jsx("span",{children:"View History"})]}),e.jsxs(ie,{variant:"outline",onClick:f,className:"flex items-center space-x-2",children:[e.jsx(Bn,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh Status"})]})]})})]}),e.jsx(Le,{className:"border-l-4 border-l-blue-500",children:e.jsxs(Be,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-2",children:Wt.isConnected()?e.jsxs(e.Fragment,{children:[e.jsx(KS,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Integration Services Online"})]}):e.jsxs(e.Fragment,{children:[e.jsx(qS,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:"font-medium",children:"Integration Services Offline"})]})}),e.jsx(Nt,{variant:Wt.isConnected()?"default":"destructive",children:Wt.isConnected()?"Active":"Inactive"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:Wt.isConnected()?"External systems are connected and syncing automatically.":"Check API configurations and network connectivity."})]})})]})}function TD({onNavigateToView:n}){const[s,a]=p.useState({baseUrl:"",apiKey:"",syncInterval:15,enabled:!0}),[i,l]=p.useState({baseUrl:"",apiKey:"",syncInterval:5,enabled:!0}),[d,u]=p.useState({currency:"PHP",timezone:"Asia/Manila",dateFormat:"MM/DD/YYYY",notifications:!0,autoSync:!0,backupEnabled:!0}),[f,y]=p.useState({emr:null,pharmacy:null}),[x,v]=p.useState({emr:!1,pharmacy:!1});p.useEffect(()=>{const b=yn.getConfig();a({baseUrl:b.emr.baseUrl,apiKey:b.emr.apiKey,syncInterval:b.emr.syncInterval,enabled:!0}),l({baseUrl:b.pharmacy.baseUrl,apiKey:b.pharmacy.apiKey,syncInterval:b.pharmacy.syncInterval,enabled:!0}),u({currency:b.billing.currency,timezone:"Asia/Manila",dateFormat:"MM/DD/YYYY",notifications:!0,autoSync:!0,backupEnabled:!0})},[]);const h=async b=>{y(E=>({...E,[b]:null})),v(E=>({...E,[b]:!0}));try{b==="emr"?yn.updateEMRConfig({baseUrl:s.baseUrl,apiKey:s.apiKey,syncInterval:s.syncInterval}):yn.updatePharmacyConfig({baseUrl:i.baseUrl,apiKey:i.apiKey,syncInterval:i.syncInterval});const T=(await yn.testConfiguration())[b];y(z=>({...z,[b]:T.success})),T.success?se.success(`${b.toUpperCase()} connection successful`):se.error(`${b.toUpperCase()} connection failed: ${T.error}`)}catch{y(T=>({...T,[b]:!1})),se.error(`Failed to test ${b.toUpperCase()} connection`)}finally{v(E=>({...E,[b]:!1}))}},C=()=>{try{yn.updateEMRConfig({baseUrl:s.baseUrl,apiKey:s.apiKey,syncInterval:s.syncInterval}),yn.updatePharmacyConfig({baseUrl:i.baseUrl,apiKey:i.apiKey,syncInterval:i.syncInterval}),yn.updateBillingConfig({currency:d.currency});const b=yn.validateConfig();b.valid?se.success("Settings saved successfully"):se.error(`Configuration errors: ${b.errors.join(", ")}`)}catch{se.error("Failed to save settings")}},P=()=>{try{const b=yn.exportConfig(),E=new Blob([b],{type:"application/json"}),T=URL.createObjectURL(E),z=document.createElement("a");z.href=T,z.download="hims-integration-config.json",z.click(),URL.revokeObjectURL(T),se.success("Configuration exported successfully")}catch{se.error("Failed to export configuration")}},S=b=>{const E=b.target.files?.[0];if(!E)return;const T=new FileReader;T.onload=z=>{try{const B=z.target?.result,Q=yn.importConfig(B);if(Q.success){const X=yn.getConfig();a({baseUrl:X.emr.baseUrl,apiKey:X.emr.apiKey,syncInterval:X.emr.syncInterval,enabled:s.enabled}),l({baseUrl:X.pharmacy.baseUrl,apiKey:X.pharmacy.apiKey,syncInterval:X.pharmacy.syncInterval,enabled:i.enabled}),se.success("Configuration imported successfully")}else se.error(`Import failed: ${Q.error}`)}catch{se.error("Failed to import configuration")}},T.readAsText(E)},w=()=>{if(confirm("Are you sure you want to reset all settings to defaults? This cannot be undone.")){yn.resetToDefaults();const b=yn.getConfig();a({baseUrl:b.emr.baseUrl,apiKey:b.emr.apiKey,syncInterval:b.emr.syncInterval,enabled:!0}),l({baseUrl:b.pharmacy.baseUrl,apiKey:b.pharmacy.apiKey,syncInterval:b.pharmacy.syncInterval,enabled:!0}),se.success("Configuration reset to defaults")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Co,{defaultValue:"integration",className:"w-full",children:[e.jsxs(Po,{className:"grid w-full grid-cols-4",children:[e.jsx(Jn,{value:"integration",children:"Integration"}),e.jsx(Jn,{value:"system",children:"System"}),e.jsx(Jn,{value:"security",children:"Security"}),e.jsx(Jn,{value:"status",children:"Status"})]}),e.jsx(Qn,{value:"integration",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(Le,{children:[e.jsx(pt,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gc,{className:"h-5 w-5 text-blue-600"}),e.jsx(ht,{children:"EMR Integration"}),e.jsx(Nt,{variant:s.enabled?"default":"secondary",children:s.enabled?"Enabled":"Disabled"})]})}),e.jsxs(Be,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ye,{htmlFor:"emr-enabled",children:"Enable EMR Integration"}),e.jsx(as,{id:"emr-enabled",checked:s.enabled,onCheckedChange:b=>a(E=>({...E,enabled:b}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"emr-url",children:"EMR API Base URL"}),e.jsx(Ue,{id:"emr-url",value:s.baseUrl,onChange:b=>a(E=>({...E,baseUrl:b.target.value})),disabled:!s.enabled})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"emr-key",children:"API Key"}),e.jsx(Ue,{id:"emr-key",type:"password",value:s.apiKey,onChange:b=>a(E=>({...E,apiKey:b.target.value})),disabled:!s.enabled})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"emr-interval",children:"Sync Interval (minutes)"}),e.jsx(Ue,{id:"emr-interval",type:"number",value:s.syncInterval,onChange:b=>a(E=>({...E,syncInterval:parseInt(b.target.value)})),disabled:!s.enabled})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>h("emr"),disabled:!s.enabled||x.emr,className:"flex-1",children:[x.emr?e.jsx(Bn,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Yg,{className:"h-4 w-4 mr-2"}),x.emr?"Testing...":"Test Connection"]}),f.emr!==null&&!x.emr&&e.jsx("div",{className:"flex items-center",children:f.emr?e.jsx(Br,{className:"h-4 w-4 text-green-500"}):e.jsx(hc,{className:"h-4 w-4 text-red-500"})})]})]})]}),e.jsxs(Le,{children:[e.jsx(pt,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Mr,{className:"h-5 w-5 text-green-600"}),e.jsx(ht,{children:"Pharmacy Integration"}),e.jsx(Nt,{variant:i.enabled?"default":"secondary",children:i.enabled?"Enabled":"Disabled"})]})}),e.jsxs(Be,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ye,{htmlFor:"pharmacy-enabled",children:"Enable Pharmacy Integration"}),e.jsx(as,{id:"pharmacy-enabled",checked:i.enabled,onCheckedChange:b=>l(E=>({...E,enabled:b}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"pharmacy-url",children:"Pharmacy API Base URL"}),e.jsx(Ue,{id:"pharmacy-url",value:i.baseUrl,onChange:b=>l(E=>({...E,baseUrl:b.target.value})),disabled:!i.enabled})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"pharmacy-key",children:"API Key"}),e.jsx(Ue,{id:"pharmacy-key",type:"password",value:i.apiKey,onChange:b=>l(E=>({...E,apiKey:b.target.value})),disabled:!i.enabled})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"pharmacy-interval",children:"Sync Interval (minutes)"}),e.jsx(Ue,{id:"pharmacy-interval",type:"number",value:i.syncInterval,onChange:b=>l(E=>({...E,syncInterval:parseInt(b.target.value)})),disabled:!i.enabled})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>h("pharmacy"),disabled:!i.enabled||x.pharmacy,className:"flex-1",children:[x.pharmacy?e.jsx(Bn,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Yg,{className:"h-4 w-4 mr-2"}),x.pharmacy?"Testing...":"Test Connection"]}),f.pharmacy!==null&&!x.pharmacy&&e.jsx("div",{className:"flex items-center",children:f.pharmacy?e.jsx(Br,{className:"h-4 w-4 text-green-500"}):e.jsx(hc,{className:"h-4 w-4 text-red-500"})})]})]})]})]})}),e.jsx(Qn,{value:"system",className:"space-y-6",children:e.jsxs(Le,{children:[e.jsx(pt,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oi,{className:"h-5 w-5"}),e.jsx(ht,{children:"System Configuration"})]})}),e.jsxs(Be,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"currency",children:"Currency"}),e.jsx(Ue,{id:"currency",value:d.currency,onChange:b=>u(E=>({...E,currency:b.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"timezone",children:"Timezone"}),e.jsx(Ue,{id:"timezone",value:d.timezone,onChange:b=>u(E=>({...E,timezone:b.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"date-format",children:"Date Format"}),e.jsx(Ue,{id:"date-format",value:d.dateFormat,onChange:b=>u(E=>({...E,dateFormat:b.target.value}))})]})]}),e.jsx(Un,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Preferences"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"notifications",children:"Enable Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive system notifications and alerts"})]}),e.jsx(as,{id:"notifications",checked:d.notifications,onCheckedChange:b=>u(E=>({...E,notifications:b}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"auto-sync",children:"Auto Synchronization"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Automatically sync with external systems"})]}),e.jsx(as,{id:"auto-sync",checked:d.autoSync,onCheckedChange:b=>u(E=>({...E,autoSync:b}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"backup",children:"Automatic Backups"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enable automatic data backups"})]}),e.jsx(as,{id:"backup",checked:d.backupEnabled,onCheckedChange:b=>u(E=>({...E,backupEnabled:b}))})]})]})]})]})}),e.jsx(Qn,{value:"security",className:"space-y-6",children:e.jsxs(Le,{children:[e.jsx(pt,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ny,{className:"h-5 w-5"}),e.jsx(ht,{children:"Security Settings"})]})}),e.jsx(Be,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:[e.jsx("h4",{className:"font-medium text-yellow-800",children:"Security Notice"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"API keys and sensitive configuration should be stored securely and rotated regularly. Never share API keys or store them in plain text."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Best Practices"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:" Use environment variables for API keys in production"}),e.jsx("li",{children:" Enable HTTPS for all API communications"}),e.jsx("li",{children:" Regularly audit access logs and permissions"}),e.jsx("li",{children:" Implement proper authentication and authorization"}),e.jsx("li",{children:" Keep API credentials separate from application code"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 border rounded-md",children:[e.jsx("h5",{className:"font-medium text-sm",children:"EMR Security"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Patient data integration requires HIPAA compliance and secure transmission."})]}),e.jsxs("div",{className:"p-3 border rounded-md",children:[e.jsx("h5",{className:"font-medium text-sm",children:"Pharmacy Security"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Medication data must be encrypted and transmitted over secure channels."})]})]})]})})]})}),e.jsx(Qn,{value:"status",className:"space-y-6",children:e.jsx(RD,{onNavigateToView:n})})]}),e.jsxs(Le,{children:[e.jsx(pt,{children:e.jsx(ht,{children:"Configuration Management"})}),e.jsx(Be,{children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs(ie,{variant:"outline",onClick:P,children:[e.jsx(df,{className:"h-4 w-4 mr-2"}),"Export Config"]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:".json",onChange:S,className:"hidden",id:"import-config"}),e.jsxs(ie,{variant:"outline",onClick:()=>document.getElementById("import-config")?.click(),children:[e.jsx(MS,{className:"h-4 w-4 mr-2"}),"Import Config"]})]}),e.jsxs(ie,{variant:"outline",onClick:w,children:[e.jsx(Bn,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[e.jsx(ie,{variant:"outline",onClick:()=>n?.("dashboard"),children:"Cancel"}),e.jsxs(ie,{onClick:C,children:[e.jsx(gS,{className:"h-4 w-4 mr-2"}),"Save Settings"]})]})]})}function _D({onNavigateToView:n}){const[s,a]=p.useState(!1),[i,l]=p.useState(!1);p.useEffect(()=>{d()},[]);const d=async()=>{l(!0);try{const f=await Wt.getPharmacyConnectionStatus();a(f.isConnected)}catch(f){console.error("Failed to check pharmacy connection:",f),a(!1)}finally{l(!1)}},u=async()=>{l(!0);try{await Wt.syncPharmacyData(),se.success("Pharmacy data synchronized successfully"),d()}catch(f){se.error("Failed to sync pharmacy data"),console.error("Sync failed:",f)}finally{l(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-[#358E83] rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold text-white",children:"Pharmacy Integration"}),e.jsx("p",{className:"text-white/90 mt-2",children:"Connect and manage external pharmacy systems for seamless medication management and billing integration."})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center space-x-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx(Br,{className:"h-5 w-5 text-green-300"}),e.jsx("span",{className:"text-sm text-green-300",children:"Connected"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Pm,{className:"h-5 w-5 text-yellow-300"}),e.jsx("span",{className:"text-sm text-yellow-300",children:"Disconnected"})]})}),e.jsxs(ie,{onClick:u,disabled:i||!s,className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:[i?e.jsx(Bn,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Bn,{className:"h-4 w-4 mr-2"}),"Sync Data"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(Le,{children:e.jsx(Be,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Integration Status"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s?"Active":"Inactive"})]}),e.jsx(gc,{className:`h-8 w-8 ${s?"text-green-500":"text-gray-400"}`})]})})}),e.jsx(Le,{children:e.jsx(Be,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Connected Systems"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s?"1":"0"})]}),e.jsx(Hg,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(Le,{children:e.jsx(Be,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Last Sync"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s?"2 min ago":"Never"})]}),e.jsx(Bn,{className:"h-8 w-8 text-[#358E83]"})]})})})]}),e.jsxs(Le,{children:[e.jsx(pt,{children:e.jsxs(ht,{className:"flex items-center space-x-2",children:[e.jsx(Mr,{className:"h-5 w-5 text-[#358E83]"}),e.jsx("span",{children:"External Pharmacy System Integration"})]})}),e.jsxs(Be,{className:"space-y-6",children:[e.jsxs("div",{className:"text-center py-8",children:[e.jsx(eS,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Pharmacy System Integration"}),e.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:"This module connects to external pharmacy management systems to synchronize medication data, inventory levels, and prescription transactions with your billing system."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Data Integration"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Automatically sync medication inventory, pricing, and availability from external pharmacy systems."})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Billing Integration"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Seamlessly integrate pharmacy transactions with the hospital billing system for unified invoicing."})]})]})]}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsxs(ie,{onClick:()=>n("settings"),className:"bg-[#E94D61] hover:bg-[#d73c50]",children:[e.jsx(oi,{className:"h-4 w-4 mr-2"}),"Configure Integration"]}),e.jsxs(ie,{variant:"outline",onClick:()=>n("billing"),children:[e.jsx(Hg,{className:"h-4 w-4 mr-2"}),"View Billing System"]})]})]})]}),e.jsxs(Le,{children:[e.jsx(pt,{children:e.jsx(ht,{children:"Integration Benefits"})}),e.jsx(Be,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"For Billing Operations"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-[#358E83] rounded-full mt-2"}),e.jsx("span",{children:"Automated medication billing with real-time pricing"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-[#358E83] rounded-full mt-2"}),e.jsx("span",{children:"Unified patient invoices including pharmacy charges"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-[#358E83] rounded-full mt-2"}),e.jsx("span",{children:"Reduced manual data entry and billing errors"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"For Patient Care"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-[#358E83] rounded-full mt-2"}),e.jsx("span",{children:"Real-time medication availability checking"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-[#358E83] rounded-full mt-2"}),e.jsx("span",{children:"Seamless prescription-to-billing workflow"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-[#358E83] rounded-full mt-2"}),e.jsx("span",{children:"Improved patient discharge and billing efficiency"})]})]})]})]})})]})]})}function ha({className:n,...s}){return e.jsx("textarea",{"data-slot":"textarea",className:rt("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),...s})}var kv="AlertDialog",[MD]=br(kv,[By]),ms=By(),Av=n=>{const{__scopeAlertDialog:s,...a}=n,i=ms(s);return e.jsx(pf,{...i,...a,modal:!0})};Av.displayName=kv;var OD="AlertDialogTrigger",LD=p.forwardRef((n,s)=>{const{__scopeAlertDialog:a,...i}=n,l=ms(a);return e.jsx(r0,{...l,...i,ref:s})});LD.displayName=OD;var FD="AlertDialogPortal",Iv=n=>{const{__scopeAlertDialog:s,...a}=n,i=ms(s);return e.jsx(hf,{...i,...a})};Iv.displayName=FD;var $D="AlertDialogOverlay",Rv=p.forwardRef((n,s)=>{const{__scopeAlertDialog:a,...i}=n,l=ms(a);return e.jsx(Bc,{...l,...i,ref:s})});Rv.displayName=$D;var ai="AlertDialogContent",[zD,BD]=MD(ai),UD=J1("AlertDialogContent"),Tv=p.forwardRef((n,s)=>{const{__scopeAlertDialog:a,children:i,...l}=n,d=ms(a),u=p.useRef(null),f=Pt(s,u),y=p.useRef(null);return e.jsx(zC,{contentName:ai,titleName:_v,docsSlug:"alert-dialog",children:e.jsx(zD,{scope:a,cancelRef:y,children:e.jsxs(Uc,{role:"alertdialog",...d,...l,ref:f,onOpenAutoFocus:Ge(l.onOpenAutoFocus,x=>{x.preventDefault(),y.current?.focus({preventScroll:!0})}),onPointerDownOutside:x=>x.preventDefault(),onInteractOutside:x=>x.preventDefault(),children:[e.jsx(UD,{children:i}),e.jsx(VD,{contentRef:u})]})})})});Tv.displayName=ai;var _v="AlertDialogTitle",Mv=p.forwardRef((n,s)=>{const{__scopeAlertDialog:a,...i}=n,l=ms(a);return e.jsx(gf,{...l,...i,ref:s})});Mv.displayName=_v;var Ov="AlertDialogDescription",Lv=p.forwardRef((n,s)=>{const{__scopeAlertDialog:a,...i}=n,l=ms(a);return e.jsx(xf,{...l,...i,ref:s})});Lv.displayName=Ov;var HD="AlertDialogAction",Fv=p.forwardRef((n,s)=>{const{__scopeAlertDialog:a,...i}=n,l=ms(a);return e.jsx(yf,{...l,...i,ref:s})});Fv.displayName=HD;var $v="AlertDialogCancel",zv=p.forwardRef((n,s)=>{const{__scopeAlertDialog:a,...i}=n,{cancelRef:l}=BD($v,a),d=ms(a),u=Pt(s,l);return e.jsx(yf,{...d,...i,ref:u})});zv.displayName=$v;var VD=({contentRef:n})=>{const s=`\`${ai}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ai}\` by passing a \`${Ov}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ai}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{document.getElementById(n.current?.getAttribute("aria-describedby"))||console.warn(s)},[s,n]),null},qD=Av,WD=Iv,Bv=Rv,KD=Tv,GD=Fv,YD=zv,JD=Mv,QD=Lv;function zs({...n}){return e.jsx(qD,{"data-slot":"alert-dialog",...n})}function XD({...n}){return e.jsx(WD,{"data-slot":"alert-dialog-portal",...n})}const Uv=p.forwardRef(({className:n,...s},a)=>e.jsx(Bv,{ref:a,"data-slot":"alert-dialog-overlay",className:rt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...s}));Uv.displayName=Bv.displayName;function Bs({className:n,...s}){return e.jsxs(XD,{children:[e.jsx(Uv,{}),e.jsx(KD,{"data-slot":"alert-dialog-content",className:rt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),...s})]})}function Us({className:n,...s}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:rt("flex flex-col gap-2 text-center sm:text-left",n),...s})}function Hs({className:n,...s}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:rt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n),...s})}function Vs({className:n,...s}){return e.jsx(JD,{"data-slot":"alert-dialog-title",className:rt("text-lg font-semibold",n),...s})}function ba({className:n,...s}){return e.jsx(QD,{"data-slot":"alert-dialog-description",className:rt("text-muted-foreground text-sm",n),...s})}function qs({className:n,...s}){return e.jsx(GD,{className:rt(lf(),n),...s})}function Ws({className:n,...s}){return e.jsx(YD,{className:rt(lf({variant:"outline"}),n),...s})}var kx=1,ZD=.9,ek=.8,tk=.17,pm=.1,hm=.999,nk=.9999,rk=.99,sk=/[\\\/_+.#"@\[\(\{&]/,ak=/[\\\/_+.#"@\[\(\{&]/g,ik=/[\s-]/,Hv=/[\s-]/g;function $m(n,s,a,i,l,d,u){if(d===s.length)return l===n.length?kx:rk;var f=`${l},${d}`;if(u[f]!==void 0)return u[f];for(var y=i.charAt(d),x=a.indexOf(y,l),v=0,h,C,P,S;x>=0;)h=$m(n,s,a,i,x+1,d+1,u),h>v&&(x===l?h*=kx:sk.test(n.charAt(x-1))?(h*=ek,P=n.slice(l,x-1).match(ak),P&&l>0&&(h*=Math.pow(hm,P.length))):ik.test(n.charAt(x-1))?(h*=ZD,S=n.slice(l,x-1).match(Hv),S&&l>0&&(h*=Math.pow(hm,S.length))):(h*=tk,l>0&&(h*=Math.pow(hm,x-l))),n.charAt(x)!==s.charAt(d)&&(h*=nk)),(h<pm&&a.charAt(x-1)===i.charAt(d+1)||i.charAt(d+1)===i.charAt(d)&&a.charAt(x-1)!==i.charAt(d))&&(C=$m(n,s,a,i,x+1,d+2,u),C*pm>h&&(h=C*pm)),h>v&&(v=h),x=a.indexOf(y,x+1);return u[f]=v,v}function Ax(n){return n.toLowerCase().replace(Hv," ")}function ok(n,s,a){return n=a&&a.length>0?`${n+" "+a.join(" ")}`:n,$m(n,s,Ax(n),Ax(s),0,0,{})}var so='[cmdk-group=""]',gm='[cmdk-group-items=""]',lk='[cmdk-group-heading=""]',Vv='[cmdk-item=""]',Ix=`${Vv}:not([aria-disabled="true"])`,zm="cmdk-item-select",ei="data-value",ck=(n,s,a)=>ok(n,s,a),qv=p.createContext(void 0),Do=()=>p.useContext(qv),Wv=p.createContext(void 0),Mf=()=>p.useContext(Wv),Kv=p.createContext(void 0),Gv=p.forwardRef((n,s)=>{let a=ti(()=>{var R,H;return{search:"",value:(H=(R=n.value)!=null?R:n.defaultValue)!=null?H:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),i=ti(()=>new Set),l=ti(()=>new Map),d=ti(()=>new Map),u=ti(()=>new Set),f=Yv(n),{label:y,children:x,value:v,onValueChange:h,filter:C,shouldFilter:P,loop:S,disablePointerSelection:w=!1,vimBindings:b=!0,...E}=n,T=jn(),z=jn(),B=jn(),Q=p.useRef(null),X=wk();Na(()=>{if(v!==void 0){let R=v.trim();a.current.value=R,G.emit()}},[v]),Na(()=>{X(6,me)},[]);let G=p.useMemo(()=>({subscribe:R=>(u.current.add(R),()=>u.current.delete(R)),snapshot:()=>a.current,setState:(R,H,M)=>{var ee,U,q,le;if(!Object.is(a.current[R],H)){if(a.current[R]=H,R==="search")xe(),ge(),X(1,Ee);else if(R==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let he=document.getElementById(B);he?he.focus():(ee=document.getElementById(T))==null||ee.focus()}if(X(7,()=>{var he;a.current.selectedItemId=(he=fe())==null?void 0:he.id,G.emit()}),M||X(5,me),((U=f.current)==null?void 0:U.value)!==void 0){let he=H??"";(le=(q=f.current).onValueChange)==null||le.call(q,he);return}}G.emit()}},emit:()=>{u.current.forEach(R=>R())}}),[]),J=p.useMemo(()=>({value:(R,H,M)=>{var ee;H!==((ee=d.current.get(R))==null?void 0:ee.value)&&(d.current.set(R,{value:H,keywords:M}),a.current.filtered.items.set(R,ue(H,M)),X(2,()=>{ge(),G.emit()}))},item:(R,H)=>(i.current.add(R),H&&(l.current.has(H)?l.current.get(H).add(R):l.current.set(H,new Set([R]))),X(3,()=>{xe(),ge(),a.current.value||Ee(),G.emit()}),()=>{d.current.delete(R),i.current.delete(R),a.current.filtered.items.delete(R);let M=fe();X(4,()=>{xe(),M?.getAttribute("id")===R&&Ee(),G.emit()})}),group:R=>(l.current.has(R)||l.current.set(R,new Set),()=>{d.current.delete(R),l.current.delete(R)}),filter:()=>f.current.shouldFilter,label:y||n["aria-label"],getDisablePointerSelection:()=>f.current.disablePointerSelection,listId:T,inputId:B,labelId:z,listInnerRef:Q}),[]);function ue(R,H){var M,ee;let U=(ee=(M=f.current)==null?void 0:M.filter)!=null?ee:ck;return R?U(R,a.current.search,H):0}function ge(){if(!a.current.search||f.current.shouldFilter===!1)return;let R=a.current.filtered.items,H=[];a.current.filtered.groups.forEach(ee=>{let U=l.current.get(ee),q=0;U.forEach(le=>{let he=R.get(le);q=Math.max(he,q)}),H.push([ee,q])});let M=Q.current;F().sort((ee,U)=>{var q,le;let he=ee.getAttribute("id"),ve=U.getAttribute("id");return((q=R.get(ve))!=null?q:0)-((le=R.get(he))!=null?le:0)}).forEach(ee=>{let U=ee.closest(gm);U?U.appendChild(ee.parentElement===U?ee:ee.closest(`${gm} > *`)):M.appendChild(ee.parentElement===M?ee:ee.closest(`${gm} > *`))}),H.sort((ee,U)=>U[1]-ee[1]).forEach(ee=>{var U;let q=(U=Q.current)==null?void 0:U.querySelector(`${so}[${ei}="${encodeURIComponent(ee[0])}"]`);q?.parentElement.appendChild(q)})}function Ee(){let R=F().find(M=>M.getAttribute("aria-disabled")!=="true"),H=R?.getAttribute(ei);G.setState("value",H||void 0)}function xe(){var R,H,M,ee;if(!a.current.search||f.current.shouldFilter===!1){a.current.filtered.count=i.current.size;return}a.current.filtered.groups=new Set;let U=0;for(let q of i.current){let le=(H=(R=d.current.get(q))==null?void 0:R.value)!=null?H:"",he=(ee=(M=d.current.get(q))==null?void 0:M.keywords)!=null?ee:[],ve=ue(le,he);a.current.filtered.items.set(q,ve),ve>0&&U++}for(let[q,le]of l.current)for(let he of le)if(a.current.filtered.items.get(he)>0){a.current.filtered.groups.add(q);break}a.current.filtered.count=U}function me(){var R,H,M;let ee=fe();ee&&(((R=ee.parentElement)==null?void 0:R.firstChild)===ee&&((M=(H=ee.closest(so))==null?void 0:H.querySelector(lk))==null||M.scrollIntoView({block:"nearest"})),ee.scrollIntoView({block:"nearest"}))}function fe(){var R;return(R=Q.current)==null?void 0:R.querySelector(`${Vv}[aria-selected="true"]`)}function F(){var R;return Array.from(((R=Q.current)==null?void 0:R.querySelectorAll(Ix))||[])}function ne(R){let H=F()[R];H&&G.setState("value",H.getAttribute(ei))}function te(R){var H;let M=fe(),ee=F(),U=ee.findIndex(le=>le===M),q=ee[U+R];(H=f.current)!=null&&H.loop&&(q=U+R<0?ee[ee.length-1]:U+R===ee.length?ee[0]:ee[U+R]),q&&G.setState("value",q.getAttribute(ei))}function D(R){let H=fe(),M=H?.closest(so),ee;for(;M&&!ee;)M=R>0?yk(M,so):vk(M,so),ee=M?.querySelector(Ix);ee?G.setState("value",ee.getAttribute(ei)):te(R)}let L=()=>ne(F().length-1),ce=R=>{R.preventDefault(),R.metaKey?L():R.altKey?D(1):te(1)},A=R=>{R.preventDefault(),R.metaKey?ne(0):R.altKey?D(-1):te(-1)};return p.createElement(it.div,{ref:s,tabIndex:-1,...E,"cmdk-root":"",onKeyDown:R=>{var H;(H=E.onKeyDown)==null||H.call(E,R);let M=R.nativeEvent.isComposing||R.keyCode===229;if(!(R.defaultPrevented||M))switch(R.key){case"n":case"j":{b&&R.ctrlKey&&ce(R);break}case"ArrowDown":{ce(R);break}case"p":case"k":{b&&R.ctrlKey&&A(R);break}case"ArrowUp":{A(R);break}case"Home":{R.preventDefault(),ne(0);break}case"End":{R.preventDefault(),L();break}case"Enter":{R.preventDefault();let ee=fe();if(ee){let U=new Event(zm);ee.dispatchEvent(U)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:J.inputId,id:J.labelId,style:bk},y),nd(n,R=>p.createElement(Wv.Provider,{value:G},p.createElement(qv.Provider,{value:J},R))))}),dk=p.forwardRef((n,s)=>{var a,i;let l=jn(),d=p.useRef(null),u=p.useContext(Kv),f=Do(),y=Yv(n),x=(i=(a=y.current)==null?void 0:a.forceMount)!=null?i:u?.forceMount;Na(()=>{if(!x)return f.item(l,u?.id)},[x]);let v=Jv(l,d,[n.value,n.children,d],n.keywords),h=Mf(),C=Ks(X=>X.value&&X.value===v.current),P=Ks(X=>x||f.filter()===!1?!0:X.search?X.filtered.items.get(l)>0:!0);p.useEffect(()=>{let X=d.current;if(!(!X||n.disabled))return X.addEventListener(zm,S),()=>X.removeEventListener(zm,S)},[P,n.onSelect,n.disabled]);function S(){var X,G;w(),(G=(X=y.current).onSelect)==null||G.call(X,v.current)}function w(){h.setState("value",v.current,!0)}if(!P)return null;let{disabled:b,value:E,onSelect:T,forceMount:z,keywords:B,...Q}=n;return p.createElement(it.div,{ref:os(d,s),...Q,id:l,"cmdk-item":"",role:"option","aria-disabled":!!b,"aria-selected":!!C,"data-disabled":!!b,"data-selected":!!C,onPointerMove:b||f.getDisablePointerSelection()?void 0:w,onClick:b?void 0:S},n.children)}),uk=p.forwardRef((n,s)=>{let{heading:a,children:i,forceMount:l,...d}=n,u=jn(),f=p.useRef(null),y=p.useRef(null),x=jn(),v=Do(),h=Ks(P=>l||v.filter()===!1?!0:P.search?P.filtered.groups.has(u):!0);Na(()=>v.group(u),[]),Jv(u,f,[n.value,n.heading,y]);let C=p.useMemo(()=>({id:u,forceMount:l}),[l]);return p.createElement(it.div,{ref:os(f,s),...d,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},a&&p.createElement("div",{ref:y,"cmdk-group-heading":"","aria-hidden":!0,id:x},a),nd(n,P=>p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":a?x:void 0},p.createElement(Kv.Provider,{value:C},P))))}),mk=p.forwardRef((n,s)=>{let{alwaysRender:a,...i}=n,l=p.useRef(null),d=Ks(u=>!u.search);return!a&&!d?null:p.createElement(it.div,{ref:os(l,s),...i,"cmdk-separator":"",role:"separator"})}),fk=p.forwardRef((n,s)=>{let{onValueChange:a,...i}=n,l=n.value!=null,d=Mf(),u=Ks(x=>x.search),f=Ks(x=>x.selectedItemId),y=Do();return p.useEffect(()=>{n.value!=null&&d.setState("search",n.value)},[n.value]),p.createElement(it.input,{ref:s,...i,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":y.listId,"aria-labelledby":y.labelId,"aria-activedescendant":f,id:y.inputId,type:"text",value:l?n.value:u,onChange:x=>{l||d.setState("search",x.target.value),a?.(x.target.value)}})}),pk=p.forwardRef((n,s)=>{let{children:a,label:i="Suggestions",...l}=n,d=p.useRef(null),u=p.useRef(null),f=Ks(x=>x.selectedItemId),y=Do();return p.useEffect(()=>{if(u.current&&d.current){let x=u.current,v=d.current,h,C=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let P=x.offsetHeight;v.style.setProperty("--cmdk-list-height",P.toFixed(1)+"px")})});return C.observe(x),()=>{cancelAnimationFrame(h),C.unobserve(x)}}},[]),p.createElement(it.div,{ref:os(d,s),...l,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":f,"aria-label":i,id:y.listId},nd(n,x=>p.createElement("div",{ref:os(u,y.listInnerRef),"cmdk-list-sizer":""},x)))}),hk=p.forwardRef((n,s)=>{let{open:a,onOpenChange:i,overlayClassName:l,contentClassName:d,container:u,...f}=n;return p.createElement(pf,{open:a,onOpenChange:i},p.createElement(hf,{container:u},p.createElement(Bc,{"cmdk-overlay":"",className:l}),p.createElement(Uc,{"aria-label":n.label,"cmdk-dialog":"",className:d},p.createElement(Gv,{ref:s,...f}))))}),gk=p.forwardRef((n,s)=>Ks(a=>a.filtered.count===0)?p.createElement(it.div,{ref:s,...n,"cmdk-empty":"",role:"presentation"}):null),xk=p.forwardRef((n,s)=>{let{progress:a,children:i,label:l="Loading...",...d}=n;return p.createElement(it.div,{ref:s,...d,"cmdk-loading":"",role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100,"aria-label":l},nd(n,u=>p.createElement("div",{"aria-hidden":!0},u)))}),yi=Object.assign(Gv,{List:pk,Item:dk,Input:fk,Group:uk,Separator:mk,Dialog:hk,Empty:gk,Loading:xk});function yk(n,s){let a=n.nextElementSibling;for(;a;){if(a.matches(s))return a;a=a.nextElementSibling}}function vk(n,s){let a=n.previousElementSibling;for(;a;){if(a.matches(s))return a;a=a.previousElementSibling}}function Yv(n){let s=p.useRef(n);return Na(()=>{s.current=n}),s}var Na=typeof window>"u"?p.useEffect:p.useLayoutEffect;function ti(n){let s=p.useRef();return s.current===void 0&&(s.current=n()),s}function Ks(n){let s=Mf(),a=()=>n(s.snapshot());return p.useSyncExternalStore(s.subscribe,a,a)}function Jv(n,s,a,i=[]){let l=p.useRef(),d=Do();return Na(()=>{var u;let f=(()=>{var x;for(let v of a){if(typeof v=="string")return v.trim();if(typeof v=="object"&&"current"in v)return v.current?(x=v.current.textContent)==null?void 0:x.trim():l.current}})(),y=i.map(x=>x.trim());d.value(n,f,y),(u=s.current)==null||u.setAttribute(ei,f),l.current=f}),l}var wk=()=>{let[n,s]=p.useState(),a=ti(()=>new Map);return Na(()=>{a.current.forEach(i=>i()),a.current=new Map},[n]),(i,l)=>{a.current.set(i,l),s({})}};function jk(n){let s=n.type;return typeof s=="function"?s(n.props):"render"in s?s.render(n.props):n}function nd({asChild:n,children:s},a){return n&&p.isValidElement(s)?p.cloneElement(jk(s),{ref:s.ref},a(s.props.children)):a(s)}var bk={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Bm({className:n,...s}){return e.jsx(yi,{"data-slot":"command",className:rt("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",n),...s})}function Um({className:n,...s}){return e.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[e.jsx(us,{className:"size-4 shrink-0 opacity-50"}),e.jsx(yi.Input,{"data-slot":"command-input",className:rt("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",n),...s})]})}function Hm({className:n,...s}){return e.jsx(yi.List,{"data-slot":"command-list",className:rt("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",n),...s})}function Vm({...n}){return e.jsx(yi.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...n})}function lc({className:n,...s}){return e.jsx(yi.Group,{"data-slot":"command-group",className:rt("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",n),...s})}function cc({className:n,...s}){return e.jsx(yi.Item,{"data-slot":"command-item",className:rt("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...s})}var rd="Popover",[Qv]=br(rd,[gi]),ko=gi(),[Nk,Js]=Qv(rd),Xv=n=>{const{__scopePopover:s,children:a,open:i,defaultOpen:l,onOpenChange:d,modal:u=!1}=n,f=ko(s),y=p.useRef(null),[x,v]=p.useState(!1),[h,C]=Ls({prop:i,defaultProp:l??!1,onChange:d,caller:rd});return e.jsx(kf,{...f,children:e.jsx(Nk,{scope:s,contentId:jn(),triggerRef:y,open:h,onOpenChange:C,onOpenToggle:p.useCallback(()=>C(P=>!P),[C]),hasCustomAnchor:x,onCustomAnchorAdd:p.useCallback(()=>v(!0),[]),onCustomAnchorRemove:p.useCallback(()=>v(!1),[]),modal:u,children:a})})};Xv.displayName=rd;var Zv="PopoverAnchor",Sk=p.forwardRef((n,s)=>{const{__scopePopover:a,...i}=n,l=Js(Zv,a),d=ko(a),{onCustomAnchorAdd:u,onCustomAnchorRemove:f}=l;return p.useEffect(()=>(u(),()=>f()),[u,f]),e.jsx(Qc,{...d,...i,ref:s})});Sk.displayName=Zv;var ew="PopoverTrigger",tw=p.forwardRef((n,s)=>{const{__scopePopover:a,...i}=n,l=Js(ew,a),d=ko(a),u=Pt(s,l.triggerRef),f=e.jsx(it.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":iw(l.open),...i,ref:u,onClick:Ge(n.onClick,l.onOpenToggle)});return l.hasCustomAnchor?f:e.jsx(Qc,{asChild:!0,...d,children:f})});tw.displayName=ew;var Of="PopoverPortal",[Ck,Pk]=Qv(Of,{forceMount:void 0}),nw=n=>{const{__scopePopover:s,forceMount:a,children:i,container:l}=n,d=Js(Of,s);return e.jsx(Ck,{scope:s,forceMount:a,children:e.jsx(Nr,{present:a||d.open,children:e.jsx(bo,{asChild:!0,container:l,children:i})})})};nw.displayName=Of;var di="PopoverContent",rw=p.forwardRef((n,s)=>{const a=Pk(di,n.__scopePopover),{forceMount:i=a.forceMount,...l}=n,d=Js(di,n.__scopePopover);return e.jsx(Nr,{present:i||d.open,children:d.modal?e.jsx(Dk,{...l,ref:s}):e.jsx(kk,{...l,ref:s})})});rw.displayName=di;var Ek=Os("PopoverContent.RemoveScroll"),Dk=p.forwardRef((n,s)=>{const a=Js(di,n.__scopePopover),i=p.useRef(null),l=Pt(s,i),d=p.useRef(!1);return p.useEffect(()=>{const u=i.current;if(u)return $c(u)},[]),e.jsx(No,{as:Ek,allowPinchZoom:!0,children:e.jsx(sw,{...n,ref:l,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ge(n.onCloseAutoFocus,u=>{u.preventDefault(),d.current||a.triggerRef.current?.focus()}),onPointerDownOutside:Ge(n.onPointerDownOutside,u=>{const f=u.detail.originalEvent,y=f.button===0&&f.ctrlKey===!0,x=f.button===2||y;d.current=x},{checkForDefaultPrevented:!1}),onFocusOutside:Ge(n.onFocusOutside,u=>u.preventDefault(),{checkForDefaultPrevented:!1})})})}),kk=p.forwardRef((n,s)=>{const a=Js(di,n.__scopePopover),i=p.useRef(!1),l=p.useRef(!1);return e.jsx(sw,{...n,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:d=>{n.onCloseAutoFocus?.(d),d.defaultPrevented||(i.current||a.triggerRef.current?.focus(),d.preventDefault()),i.current=!1,l.current=!1},onInteractOutside:d=>{n.onInteractOutside?.(d),d.defaultPrevented||(i.current=!0,d.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const u=d.target;a.triggerRef.current?.contains(u)&&d.preventDefault(),d.detail.originalEvent.type==="focusin"&&l.current&&d.preventDefault()}})}),sw=p.forwardRef((n,s)=>{const{__scopePopover:a,trapFocus:i,onOpenAutoFocus:l,onCloseAutoFocus:d,disableOutsidePointerEvents:u,onEscapeKeyDown:f,onPointerDownOutside:y,onFocusOutside:x,onInteractOutside:v,...h}=n,C=Js(di,a),P=ko(a);return Lc(),e.jsx(jo,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:l,onUnmountAutoFocus:d,children:e.jsx(wo,{asChild:!0,disableOutsidePointerEvents:u,onInteractOutside:v,onEscapeKeyDown:f,onPointerDownOutside:y,onFocusOutside:x,onDismiss:()=>C.onOpenChange(!1),children:e.jsx(Af,{"data-state":iw(C.open),role:"dialog",id:C.contentId,...P,...h,ref:s,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),aw="PopoverClose",Ak=p.forwardRef((n,s)=>{const{__scopePopover:a,...i}=n,l=Js(aw,a);return e.jsx(it.button,{type:"button",...i,ref:s,onClick:Ge(n.onClick,()=>l.onOpenChange(!1))})});Ak.displayName=aw;var Ik="PopoverArrow",Rk=p.forwardRef((n,s)=>{const{__scopePopover:a,...i}=n,l=ko(a);return e.jsx(If,{...l,...i,ref:s})});Rk.displayName=Ik;function iw(n){return n?"open":"closed"}var Tk=Xv,_k=tw,Mk=nw,Ok=rw;function qm({...n}){return e.jsx(Tk,{"data-slot":"popover",...n})}function Wm({...n}){return e.jsx(_k,{"data-slot":"popover-trigger",...n})}function Km({className:n,align:s="center",sideOffset:a=4,...i}){return e.jsx(Mk,{children:e.jsx(Ok,{"data-slot":"popover-content",align:s,sideOffset:a,className:rt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",n),...i})})}function ow(n,s){return function(){return n.apply(s,arguments)}}const{toString:Lk}=Object.prototype,{getPrototypeOf:Lf}=Object,{iterator:sd,toStringTag:lw}=Symbol,ad=(n=>s=>{const a=Lk.call(s);return n[a]||(n[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Cr=n=>(n=n.toLowerCase(),s=>ad(s)===n),id=n=>s=>typeof s===n,{isArray:vi}=Array,ui=id("undefined");function Ao(n){return n!==null&&!ui(n)&&n.constructor!==null&&!ui(n.constructor)&&Hn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const cw=Cr("ArrayBuffer");function Fk(n){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(n):s=n&&n.buffer&&cw(n.buffer),s}const $k=id("string"),Hn=id("function"),dw=id("number"),Io=n=>n!==null&&typeof n=="object",zk=n=>n===!0||n===!1,dc=n=>{if(ad(n)!=="object")return!1;const s=Lf(n);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(lw in n)&&!(sd in n)},Bk=n=>{if(!Io(n)||Ao(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},Uk=Cr("Date"),Hk=Cr("File"),Vk=Cr("Blob"),qk=Cr("FileList"),Wk=n=>Io(n)&&Hn(n.pipe),Kk=n=>{let s;return n&&(typeof FormData=="function"&&n instanceof FormData||Hn(n.append)&&((s=ad(n))==="formdata"||s==="object"&&Hn(n.toString)&&n.toString()==="[object FormData]"))},Gk=Cr("URLSearchParams"),[Yk,Jk,Qk,Xk]=["ReadableStream","Request","Response","Headers"].map(Cr),Zk=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ro(n,s,{allOwnKeys:a=!1}={}){if(n===null||typeof n>"u")return;let i,l;if(typeof n!="object"&&(n=[n]),vi(n))for(i=0,l=n.length;i<l;i++)s.call(null,n[i],i,n);else{if(Ao(n))return;const d=a?Object.getOwnPropertyNames(n):Object.keys(n),u=d.length;let f;for(i=0;i<u;i++)f=d[i],s.call(null,n[f],f,n)}}function uw(n,s){if(Ao(n))return null;s=s.toLowerCase();const a=Object.keys(n);let i=a.length,l;for(;i-- >0;)if(l=a[i],s===l.toLowerCase())return l;return null}const fa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,mw=n=>!ui(n)&&n!==fa;function Gm(){const{caseless:n,skipUndefined:s}=mw(this)&&this||{},a={},i=(l,d)=>{const u=n&&uw(a,d)||d;dc(a[u])&&dc(l)?a[u]=Gm(a[u],l):dc(l)?a[u]=Gm({},l):vi(l)?a[u]=l.slice():(!s||!ui(l))&&(a[u]=l)};for(let l=0,d=arguments.length;l<d;l++)arguments[l]&&Ro(arguments[l],i);return a}const eA=(n,s,a,{allOwnKeys:i}={})=>(Ro(s,(l,d)=>{a&&Hn(l)?n[d]=ow(l,a):n[d]=l},{allOwnKeys:i}),n),tA=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),nA=(n,s,a,i)=>{n.prototype=Object.create(s.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:s.prototype}),a&&Object.assign(n.prototype,a)},rA=(n,s,a,i)=>{let l,d,u;const f={};if(s=s||{},n==null)return s;do{for(l=Object.getOwnPropertyNames(n),d=l.length;d-- >0;)u=l[d],(!i||i(u,n,s))&&!f[u]&&(s[u]=n[u],f[u]=!0);n=a!==!1&&Lf(n)}while(n&&(!a||a(n,s))&&n!==Object.prototype);return s},sA=(n,s,a)=>{n=String(n),(a===void 0||a>n.length)&&(a=n.length),a-=s.length;const i=n.indexOf(s,a);return i!==-1&&i===a},aA=n=>{if(!n)return null;if(vi(n))return n;let s=n.length;if(!dw(s))return null;const a=new Array(s);for(;s-- >0;)a[s]=n[s];return a},iA=(n=>s=>n&&s instanceof n)(typeof Uint8Array<"u"&&Lf(Uint8Array)),oA=(n,s)=>{const i=(n&&n[sd]).call(n);let l;for(;(l=i.next())&&!l.done;){const d=l.value;s.call(n,d[0],d[1])}},lA=(n,s)=>{let a;const i=[];for(;(a=n.exec(s))!==null;)i.push(a);return i},cA=Cr("HTMLFormElement"),dA=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,i,l){return i.toUpperCase()+l}),Rx=(({hasOwnProperty:n})=>(s,a)=>n.call(s,a))(Object.prototype),uA=Cr("RegExp"),fw=(n,s)=>{const a=Object.getOwnPropertyDescriptors(n),i={};Ro(a,(l,d)=>{let u;(u=s(l,d,n))!==!1&&(i[d]=u||l)}),Object.defineProperties(n,i)},mA=n=>{fw(n,(s,a)=>{if(Hn(n)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const i=n[a];if(Hn(i)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},fA=(n,s)=>{const a={},i=l=>{l.forEach(d=>{a[d]=!0})};return vi(n)?i(n):i(String(n).split(s)),a},pA=()=>{},hA=(n,s)=>n!=null&&Number.isFinite(n=+n)?n:s;function gA(n){return!!(n&&Hn(n.append)&&n[lw]==="FormData"&&n[sd])}const xA=n=>{const s=new Array(10),a=(i,l)=>{if(Io(i)){if(s.indexOf(i)>=0)return;if(Ao(i))return i;if(!("toJSON"in i)){s[l]=i;const d=vi(i)?[]:{};return Ro(i,(u,f)=>{const y=a(u,l+1);!ui(y)&&(d[f]=y)}),s[l]=void 0,d}}return i};return a(n,0)},yA=Cr("AsyncFunction"),vA=n=>n&&(Io(n)||Hn(n))&&Hn(n.then)&&Hn(n.catch),pw=((n,s)=>n?setImmediate:s?((a,i)=>(fa.addEventListener("message",({source:l,data:d})=>{l===fa&&d===a&&i.length&&i.shift()()},!1),l=>{i.push(l),fa.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",Hn(fa.postMessage)),wA=typeof queueMicrotask<"u"?queueMicrotask.bind(fa):typeof process<"u"&&process.nextTick||pw,jA=n=>n!=null&&Hn(n[sd]),de={isArray:vi,isArrayBuffer:cw,isBuffer:Ao,isFormData:Kk,isArrayBufferView:Fk,isString:$k,isNumber:dw,isBoolean:zk,isObject:Io,isPlainObject:dc,isEmptyObject:Bk,isReadableStream:Yk,isRequest:Jk,isResponse:Qk,isHeaders:Xk,isUndefined:ui,isDate:Uk,isFile:Hk,isBlob:Vk,isRegExp:uA,isFunction:Hn,isStream:Wk,isURLSearchParams:Gk,isTypedArray:iA,isFileList:qk,forEach:Ro,merge:Gm,extend:eA,trim:Zk,stripBOM:tA,inherits:nA,toFlatObject:rA,kindOf:ad,kindOfTest:Cr,endsWith:sA,toArray:aA,forEachEntry:oA,matchAll:lA,isHTMLForm:cA,hasOwnProperty:Rx,hasOwnProp:Rx,reduceDescriptors:fw,freezeMethods:mA,toObjectSet:fA,toCamelCase:dA,noop:pA,toFiniteNumber:hA,findKey:uw,global:fa,isContextDefined:mw,isSpecCompliantForm:gA,toJSONObject:xA,isAsyncFn:yA,isThenable:vA,setImmediate:pw,asap:wA,isIterable:jA};function vt(n,s,a,i,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",s&&(this.code=s),a&&(this.config=a),i&&(this.request=i),l&&(this.response=l,this.status=l.status?l.status:null)}de.inherits(vt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:de.toJSONObject(this.config),code:this.code,status:this.status}}});const hw=vt.prototype,gw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{gw[n]={value:n}});Object.defineProperties(vt,gw);Object.defineProperty(hw,"isAxiosError",{value:!0});vt.from=(n,s,a,i,l,d)=>{const u=Object.create(hw);de.toFlatObject(n,u,function(v){return v!==Error.prototype},x=>x!=="isAxiosError");const f=n&&n.message?n.message:"Error",y=s==null&&n?n.code:s;return vt.call(u,f,y,a,i,l),n&&u.cause==null&&Object.defineProperty(u,"cause",{value:n,configurable:!0}),u.name=n&&n.name||"Error",d&&Object.assign(u,d),u};const bA=null;function Ym(n){return de.isPlainObject(n)||de.isArray(n)}function xw(n){return de.endsWith(n,"[]")?n.slice(0,-2):n}function Tx(n,s,a){return n?n.concat(s).map(function(l,d){return l=xw(l),!a&&d?"["+l+"]":l}).join(a?".":""):s}function NA(n){return de.isArray(n)&&!n.some(Ym)}const SA=de.toFlatObject(de,{},null,function(s){return/^is[A-Z]/.test(s)});function od(n,s,a){if(!de.isObject(n))throw new TypeError("target must be an object");s=s||new FormData,a=de.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,b){return!de.isUndefined(b[w])});const i=a.metaTokens,l=a.visitor||v,d=a.dots,u=a.indexes,y=(a.Blob||typeof Blob<"u"&&Blob)&&de.isSpecCompliantForm(s);if(!de.isFunction(l))throw new TypeError("visitor must be a function");function x(S){if(S===null)return"";if(de.isDate(S))return S.toISOString();if(de.isBoolean(S))return S.toString();if(!y&&de.isBlob(S))throw new vt("Blob is not supported. Use a Buffer instead.");return de.isArrayBuffer(S)||de.isTypedArray(S)?y&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function v(S,w,b){let E=S;if(S&&!b&&typeof S=="object"){if(de.endsWith(w,"{}"))w=i?w:w.slice(0,-2),S=JSON.stringify(S);else if(de.isArray(S)&&NA(S)||(de.isFileList(S)||de.endsWith(w,"[]"))&&(E=de.toArray(S)))return w=xw(w),E.forEach(function(z,B){!(de.isUndefined(z)||z===null)&&s.append(u===!0?Tx([w],B,d):u===null?w:w+"[]",x(z))}),!1}return Ym(S)?!0:(s.append(Tx(b,w,d),x(S)),!1)}const h=[],C=Object.assign(SA,{defaultVisitor:v,convertValue:x,isVisitable:Ym});function P(S,w){if(!de.isUndefined(S)){if(h.indexOf(S)!==-1)throw Error("Circular reference detected in "+w.join("."));h.push(S),de.forEach(S,function(E,T){(!(de.isUndefined(E)||E===null)&&l.call(s,E,de.isString(T)?T.trim():T,w,C))===!0&&P(E,w?w.concat(T):[T])}),h.pop()}}if(!de.isObject(n))throw new TypeError("data must be an object");return P(n),s}function _x(n){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return s[i]})}function Ff(n,s){this._pairs=[],n&&od(n,this,s)}const yw=Ff.prototype;yw.append=function(s,a){this._pairs.push([s,a])};yw.toString=function(s){const a=s?function(i){return s.call(this,i,_x)}:_x;return this._pairs.map(function(l){return a(l[0])+"="+a(l[1])},"").join("&")};function CA(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function vw(n,s,a){if(!s)return n;const i=a&&a.encode||CA;de.isFunction(a)&&(a={serialize:a});const l=a&&a.serialize;let d;if(l?d=l(s,a):d=de.isURLSearchParams(s)?s.toString():new Ff(s,a).toString(i),d){const u=n.indexOf("#");u!==-1&&(n=n.slice(0,u)),n+=(n.indexOf("?")===-1?"?":"&")+d}return n}class Mx{constructor(){this.handlers=[]}use(s,a,i){return this.handlers.push({fulfilled:s,rejected:a,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){de.forEach(this.handlers,function(i){i!==null&&s(i)})}}const ww={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},PA=typeof URLSearchParams<"u"?URLSearchParams:Ff,EA=typeof FormData<"u"?FormData:null,DA=typeof Blob<"u"?Blob:null,kA={isBrowser:!0,classes:{URLSearchParams:PA,FormData:EA,Blob:DA},protocols:["http","https","file","blob","url","data"]},$f=typeof window<"u"&&typeof document<"u",Jm=typeof navigator=="object"&&navigator||void 0,AA=$f&&(!Jm||["ReactNative","NativeScript","NS"].indexOf(Jm.product)<0),IA=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",RA=$f&&window.location.href||"http://localhost",TA=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$f,hasStandardBrowserEnv:AA,hasStandardBrowserWebWorkerEnv:IA,navigator:Jm,origin:RA},Symbol.toStringTag,{value:"Module"})),Pn={...TA,...kA};function _A(n,s){return od(n,new Pn.classes.URLSearchParams,{visitor:function(a,i,l,d){return Pn.isNode&&de.isBuffer(a)?(this.append(i,a.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...s})}function MA(n){return de.matchAll(/\w+|\[(\w*)]/g,n).map(s=>s[0]==="[]"?"":s[1]||s[0])}function OA(n){const s={},a=Object.keys(n);let i;const l=a.length;let d;for(i=0;i<l;i++)d=a[i],s[d]=n[d];return s}function jw(n){function s(a,i,l,d){let u=a[d++];if(u==="__proto__")return!0;const f=Number.isFinite(+u),y=d>=a.length;return u=!u&&de.isArray(l)?l.length:u,y?(de.hasOwnProp(l,u)?l[u]=[l[u],i]:l[u]=i,!f):((!l[u]||!de.isObject(l[u]))&&(l[u]=[]),s(a,i,l[u],d)&&de.isArray(l[u])&&(l[u]=OA(l[u])),!f)}if(de.isFormData(n)&&de.isFunction(n.entries)){const a={};return de.forEachEntry(n,(i,l)=>{s(MA(i),l,a,0)}),a}return null}function LA(n,s,a){if(de.isString(n))try{return(s||JSON.parse)(n),de.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(a||JSON.stringify)(n)}const To={transitional:ww,adapter:["xhr","http","fetch"],transformRequest:[function(s,a){const i=a.getContentType()||"",l=i.indexOf("application/json")>-1,d=de.isObject(s);if(d&&de.isHTMLForm(s)&&(s=new FormData(s)),de.isFormData(s))return l?JSON.stringify(jw(s)):s;if(de.isArrayBuffer(s)||de.isBuffer(s)||de.isStream(s)||de.isFile(s)||de.isBlob(s)||de.isReadableStream(s))return s;if(de.isArrayBufferView(s))return s.buffer;if(de.isURLSearchParams(s))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let f;if(d){if(i.indexOf("application/x-www-form-urlencoded")>-1)return _A(s,this.formSerializer).toString();if((f=de.isFileList(s))||i.indexOf("multipart/form-data")>-1){const y=this.env&&this.env.FormData;return od(f?{"files[]":s}:s,y&&new y,this.formSerializer)}}return d||l?(a.setContentType("application/json",!1),LA(s)):s}],transformResponse:[function(s){const a=this.transitional||To.transitional,i=a&&a.forcedJSONParsing,l=this.responseType==="json";if(de.isResponse(s)||de.isReadableStream(s))return s;if(s&&de.isString(s)&&(i&&!this.responseType||l)){const u=!(a&&a.silentJSONParsing)&&l;try{return JSON.parse(s,this.parseReviver)}catch(f){if(u)throw f.name==="SyntaxError"?vt.from(f,vt.ERR_BAD_RESPONSE,this,null,this.response):f}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pn.classes.FormData,Blob:Pn.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};de.forEach(["delete","get","head","post","put","patch"],n=>{To.headers[n]={}});const FA=de.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$A=n=>{const s={};let a,i,l;return n&&n.split(`
`).forEach(function(u){l=u.indexOf(":"),a=u.substring(0,l).trim().toLowerCase(),i=u.substring(l+1).trim(),!(!a||s[a]&&FA[a])&&(a==="set-cookie"?s[a]?s[a].push(i):s[a]=[i]:s[a]=s[a]?s[a]+", "+i:i)}),s},Ox=Symbol("internals");function ao(n){return n&&String(n).trim().toLowerCase()}function uc(n){return n===!1||n==null?n:de.isArray(n)?n.map(uc):String(n)}function zA(n){const s=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=a.exec(n);)s[i[1]]=i[2];return s}const BA=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function xm(n,s,a,i,l){if(de.isFunction(i))return i.call(this,s,a);if(l&&(s=a),!!de.isString(s)){if(de.isString(i))return s.indexOf(i)!==-1;if(de.isRegExp(i))return i.test(s)}}function UA(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,a,i)=>a.toUpperCase()+i)}function HA(n,s){const a=de.toCamelCase(" "+s);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+a,{value:function(l,d,u){return this[i].call(this,s,l,d,u)},configurable:!0})})}let Vn=class{constructor(s){s&&this.set(s)}set(s,a,i){const l=this;function d(f,y,x){const v=ao(y);if(!v)throw new Error("header name must be a non-empty string");const h=de.findKey(l,v);(!h||l[h]===void 0||x===!0||x===void 0&&l[h]!==!1)&&(l[h||y]=uc(f))}const u=(f,y)=>de.forEach(f,(x,v)=>d(x,v,y));if(de.isPlainObject(s)||s instanceof this.constructor)u(s,a);else if(de.isString(s)&&(s=s.trim())&&!BA(s))u($A(s),a);else if(de.isObject(s)&&de.isIterable(s)){let f={},y,x;for(const v of s){if(!de.isArray(v))throw TypeError("Object iterator must return a key-value pair");f[x=v[0]]=(y=f[x])?de.isArray(y)?[...y,v[1]]:[y,v[1]]:v[1]}u(f,a)}else s!=null&&d(a,s,i);return this}get(s,a){if(s=ao(s),s){const i=de.findKey(this,s);if(i){const l=this[i];if(!a)return l;if(a===!0)return zA(l);if(de.isFunction(a))return a.call(this,l,i);if(de.isRegExp(a))return a.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,a){if(s=ao(s),s){const i=de.findKey(this,s);return!!(i&&this[i]!==void 0&&(!a||xm(this,this[i],i,a)))}return!1}delete(s,a){const i=this;let l=!1;function d(u){if(u=ao(u),u){const f=de.findKey(i,u);f&&(!a||xm(i,i[f],f,a))&&(delete i[f],l=!0)}}return de.isArray(s)?s.forEach(d):d(s),l}clear(s){const a=Object.keys(this);let i=a.length,l=!1;for(;i--;){const d=a[i];(!s||xm(this,this[d],d,s,!0))&&(delete this[d],l=!0)}return l}normalize(s){const a=this,i={};return de.forEach(this,(l,d)=>{const u=de.findKey(i,d);if(u){a[u]=uc(l),delete a[d];return}const f=s?UA(d):String(d).trim();f!==d&&delete a[d],a[f]=uc(l),i[f]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const a=Object.create(null);return de.forEach(this,(i,l)=>{i!=null&&i!==!1&&(a[l]=s&&de.isArray(i)?i.join(", "):i)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,a])=>s+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...a){const i=new this(s);return a.forEach(l=>i.set(l)),i}static accessor(s){const i=(this[Ox]=this[Ox]={accessors:{}}).accessors,l=this.prototype;function d(u){const f=ao(u);i[f]||(HA(l,u),i[f]=!0)}return de.isArray(s)?s.forEach(d):d(s),this}};Vn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);de.reduceDescriptors(Vn.prototype,({value:n},s)=>{let a=s[0].toUpperCase()+s.slice(1);return{get:()=>n,set(i){this[a]=i}}});de.freezeMethods(Vn);function ym(n,s){const a=this||To,i=s||a,l=Vn.from(i.headers);let d=i.data;return de.forEach(n,function(f){d=f.call(a,d,l.normalize(),s?s.status:void 0)}),l.normalize(),d}function bw(n){return!!(n&&n.__CANCEL__)}function wi(n,s,a){vt.call(this,n??"canceled",vt.ERR_CANCELED,s,a),this.name="CanceledError"}de.inherits(wi,vt,{__CANCEL__:!0});function Nw(n,s,a){const i=a.config.validateStatus;!a.status||!i||i(a.status)?n(a):s(new vt("Request failed with status code "+a.status,[vt.ERR_BAD_REQUEST,vt.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function VA(n){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return s&&s[1]||""}function qA(n,s){n=n||10;const a=new Array(n),i=new Array(n);let l=0,d=0,u;return s=s!==void 0?s:1e3,function(y){const x=Date.now(),v=i[d];u||(u=x),a[l]=y,i[l]=x;let h=d,C=0;for(;h!==l;)C+=a[h++],h=h%n;if(l=(l+1)%n,l===d&&(d=(d+1)%n),x-u<s)return;const P=v&&x-v;return P?Math.round(C*1e3/P):void 0}}function WA(n,s){let a=0,i=1e3/s,l,d;const u=(x,v=Date.now())=>{a=v,l=null,d&&(clearTimeout(d),d=null),n(...x)};return[(...x)=>{const v=Date.now(),h=v-a;h>=i?u(x,v):(l=x,d||(d=setTimeout(()=>{d=null,u(l)},i-h)))},()=>l&&u(l)]}const Dc=(n,s,a=3)=>{let i=0;const l=qA(50,250);return WA(d=>{const u=d.loaded,f=d.lengthComputable?d.total:void 0,y=u-i,x=l(y),v=u<=f;i=u;const h={loaded:u,total:f,progress:f?u/f:void 0,bytes:y,rate:x||void 0,estimated:x&&f&&v?(f-u)/x:void 0,event:d,lengthComputable:f!=null,[s?"download":"upload"]:!0};n(h)},a)},Lx=(n,s)=>{const a=n!=null;return[i=>s[0]({lengthComputable:a,total:n,loaded:i}),s[1]]},Fx=n=>(...s)=>de.asap(()=>n(...s)),KA=Pn.hasStandardBrowserEnv?((n,s)=>a=>(a=new URL(a,Pn.origin),n.protocol===a.protocol&&n.host===a.host&&(s||n.port===a.port)))(new URL(Pn.origin),Pn.navigator&&/(msie|trident)/i.test(Pn.navigator.userAgent)):()=>!0,GA=Pn.hasStandardBrowserEnv?{write(n,s,a,i,l,d){const u=[n+"="+encodeURIComponent(s)];de.isNumber(a)&&u.push("expires="+new Date(a).toGMTString()),de.isString(i)&&u.push("path="+i),de.isString(l)&&u.push("domain="+l),d===!0&&u.push("secure"),document.cookie=u.join("; ")},read(n){const s=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function YA(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function JA(n,s){return s?n.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):n}function Sw(n,s,a){let i=!YA(s);return n&&(i||a==!1)?JA(n,s):s}const $x=n=>n instanceof Vn?{...n}:n;function Sa(n,s){s=s||{};const a={};function i(x,v,h,C){return de.isPlainObject(x)&&de.isPlainObject(v)?de.merge.call({caseless:C},x,v):de.isPlainObject(v)?de.merge({},v):de.isArray(v)?v.slice():v}function l(x,v,h,C){if(de.isUndefined(v)){if(!de.isUndefined(x))return i(void 0,x,h,C)}else return i(x,v,h,C)}function d(x,v){if(!de.isUndefined(v))return i(void 0,v)}function u(x,v){if(de.isUndefined(v)){if(!de.isUndefined(x))return i(void 0,x)}else return i(void 0,v)}function f(x,v,h){if(h in s)return i(x,v);if(h in n)return i(void 0,x)}const y={url:d,method:d,data:d,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:f,headers:(x,v,h)=>l($x(x),$x(v),h,!0)};return de.forEach(Object.keys({...n,...s}),function(v){const h=y[v]||l,C=h(n[v],s[v],v);de.isUndefined(C)&&h!==f||(a[v]=C)}),a}const Cw=n=>{const s=Sa({},n);let{data:a,withXSRFToken:i,xsrfHeaderName:l,xsrfCookieName:d,headers:u,auth:f}=s;if(s.headers=u=Vn.from(u),s.url=vw(Sw(s.baseURL,s.url,s.allowAbsoluteUrls),n.params,n.paramsSerializer),f&&u.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):""))),de.isFormData(a)){if(Pn.hasStandardBrowserEnv||Pn.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(de.isFunction(a.getHeaders)){const y=a.getHeaders(),x=["content-type","content-length"];Object.entries(y).forEach(([v,h])=>{x.includes(v.toLowerCase())&&u.set(v,h)})}}if(Pn.hasStandardBrowserEnv&&(i&&de.isFunction(i)&&(i=i(s)),i||i!==!1&&KA(s.url))){const y=l&&d&&GA.read(d);y&&u.set(l,y)}return s},QA=typeof XMLHttpRequest<"u",XA=QA&&function(n){return new Promise(function(a,i){const l=Cw(n);let d=l.data;const u=Vn.from(l.headers).normalize();let{responseType:f,onUploadProgress:y,onDownloadProgress:x}=l,v,h,C,P,S;function w(){P&&P(),S&&S(),l.cancelToken&&l.cancelToken.unsubscribe(v),l.signal&&l.signal.removeEventListener("abort",v)}let b=new XMLHttpRequest;b.open(l.method.toUpperCase(),l.url,!0),b.timeout=l.timeout;function E(){if(!b)return;const z=Vn.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),Q={data:!f||f==="text"||f==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:z,config:n,request:b};Nw(function(G){a(G),w()},function(G){i(G),w()},Q),b=null}"onloadend"in b?b.onloadend=E:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(E)},b.onabort=function(){b&&(i(new vt("Request aborted",vt.ECONNABORTED,n,b)),b=null)},b.onerror=function(B){const Q=B&&B.message?B.message:"Network Error",X=new vt(Q,vt.ERR_NETWORK,n,b);X.event=B||null,i(X),b=null},b.ontimeout=function(){let B=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const Q=l.transitional||ww;l.timeoutErrorMessage&&(B=l.timeoutErrorMessage),i(new vt(B,Q.clarifyTimeoutError?vt.ETIMEDOUT:vt.ECONNABORTED,n,b)),b=null},d===void 0&&u.setContentType(null),"setRequestHeader"in b&&de.forEach(u.toJSON(),function(B,Q){b.setRequestHeader(Q,B)}),de.isUndefined(l.withCredentials)||(b.withCredentials=!!l.withCredentials),f&&f!=="json"&&(b.responseType=l.responseType),x&&([C,S]=Dc(x,!0),b.addEventListener("progress",C)),y&&b.upload&&([h,P]=Dc(y),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",P)),(l.cancelToken||l.signal)&&(v=z=>{b&&(i(!z||z.type?new wi(null,n,b):z),b.abort(),b=null)},l.cancelToken&&l.cancelToken.subscribe(v),l.signal&&(l.signal.aborted?v():l.signal.addEventListener("abort",v)));const T=VA(l.url);if(T&&Pn.protocols.indexOf(T)===-1){i(new vt("Unsupported protocol "+T+":",vt.ERR_BAD_REQUEST,n));return}b.send(d||null)})},ZA=(n,s)=>{const{length:a}=n=n?n.filter(Boolean):[];if(s||a){let i=new AbortController,l;const d=function(x){if(!l){l=!0,f();const v=x instanceof Error?x:this.reason;i.abort(v instanceof vt?v:new wi(v instanceof Error?v.message:v))}};let u=s&&setTimeout(()=>{u=null,d(new vt(`timeout ${s} of ms exceeded`,vt.ETIMEDOUT))},s);const f=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(x=>{x.unsubscribe?x.unsubscribe(d):x.removeEventListener("abort",d)}),n=null)};n.forEach(x=>x.addEventListener("abort",d));const{signal:y}=i;return y.unsubscribe=()=>de.asap(f),y}},eI=function*(n,s){let a=n.byteLength;if(a<s){yield n;return}let i=0,l;for(;i<a;)l=i+s,yield n.slice(i,l),i=l},tI=async function*(n,s){for await(const a of nI(n))yield*eI(a,s)},nI=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const s=n.getReader();try{for(;;){const{done:a,value:i}=await s.read();if(a)break;yield i}}finally{await s.cancel()}},zx=(n,s,a,i)=>{const l=tI(n,s);let d=0,u,f=y=>{u||(u=!0,i&&i(y))};return new ReadableStream({async pull(y){try{const{done:x,value:v}=await l.next();if(x){f(),y.close();return}let h=v.byteLength;if(a){let C=d+=h;a(C)}y.enqueue(new Uint8Array(v))}catch(x){throw f(x),x}},cancel(y){return f(y),l.return()}},{highWaterMark:2})},Bx=64*1024,{isFunction:tc}=de,rI=(({Request:n,Response:s})=>({Request:n,Response:s}))(de.global),{ReadableStream:Ux,TextEncoder:Hx}=de.global,Vx=(n,...s)=>{try{return!!n(...s)}catch{return!1}},sI=n=>{n=de.merge.call({skipUndefined:!0},rI,n);const{fetch:s,Request:a,Response:i}=n,l=s?tc(s):typeof fetch=="function",d=tc(a),u=tc(i);if(!l)return!1;const f=l&&tc(Ux),y=l&&(typeof Hx=="function"?(S=>w=>S.encode(w))(new Hx):async S=>new Uint8Array(await new a(S).arrayBuffer())),x=d&&f&&Vx(()=>{let S=!1;const w=new a(Pn.origin,{body:new Ux,method:"POST",get duplex(){return S=!0,"half"}}).headers.has("Content-Type");return S&&!w}),v=u&&f&&Vx(()=>de.isReadableStream(new i("").body)),h={stream:v&&(S=>S.body)};l&&["text","arrayBuffer","blob","formData","stream"].forEach(S=>{!h[S]&&(h[S]=(w,b)=>{let E=w&&w[S];if(E)return E.call(w);throw new vt(`Response type '${S}' is not supported`,vt.ERR_NOT_SUPPORT,b)})});const C=async S=>{if(S==null)return 0;if(de.isBlob(S))return S.size;if(de.isSpecCompliantForm(S))return(await new a(Pn.origin,{method:"POST",body:S}).arrayBuffer()).byteLength;if(de.isArrayBufferView(S)||de.isArrayBuffer(S))return S.byteLength;if(de.isURLSearchParams(S)&&(S=S+""),de.isString(S))return(await y(S)).byteLength},P=async(S,w)=>{const b=de.toFiniteNumber(S.getContentLength());return b??C(w)};return async S=>{let{url:w,method:b,data:E,signal:T,cancelToken:z,timeout:B,onDownloadProgress:Q,onUploadProgress:X,responseType:G,headers:J,withCredentials:ue="same-origin",fetchOptions:ge}=Cw(S),Ee=s||fetch;G=G?(G+"").toLowerCase():"text";let xe=ZA([T,z&&z.toAbortSignal()],B),me=null;const fe=xe&&xe.unsubscribe&&(()=>{xe.unsubscribe()});let F;try{if(X&&x&&b!=="get"&&b!=="head"&&(F=await P(J,E))!==0){let A=new a(w,{method:"POST",body:E,duplex:"half"}),R;if(de.isFormData(E)&&(R=A.headers.get("content-type"))&&J.setContentType(R),A.body){const[H,M]=Lx(F,Dc(Fx(X)));E=zx(A.body,Bx,H,M)}}de.isString(ue)||(ue=ue?"include":"omit");const ne=d&&"credentials"in a.prototype,te={...ge,signal:xe,method:b.toUpperCase(),headers:J.normalize().toJSON(),body:E,duplex:"half",credentials:ne?ue:void 0};me=d&&new a(w,te);let D=await(d?Ee(me,ge):Ee(w,te));const L=v&&(G==="stream"||G==="response");if(v&&(Q||L&&fe)){const A={};["status","statusText","headers"].forEach(ee=>{A[ee]=D[ee]});const R=de.toFiniteNumber(D.headers.get("content-length")),[H,M]=Q&&Lx(R,Dc(Fx(Q),!0))||[];D=new i(zx(D.body,Bx,H,()=>{M&&M(),fe&&fe()}),A)}G=G||"text";let ce=await h[de.findKey(h,G)||"text"](D,S);return!L&&fe&&fe(),await new Promise((A,R)=>{Nw(A,R,{data:ce,headers:Vn.from(D.headers),status:D.status,statusText:D.statusText,config:S,request:me})})}catch(ne){throw fe&&fe(),ne&&ne.name==="TypeError"&&/Load failed|fetch/i.test(ne.message)?Object.assign(new vt("Network Error",vt.ERR_NETWORK,S,me),{cause:ne.cause||ne}):vt.from(ne,ne&&ne.code,S,me)}}},aI=new Map,Pw=n=>{let s=n?n.env:{};const{fetch:a,Request:i,Response:l}=s,d=[i,l,a];let u=d.length,f=u,y,x,v=aI;for(;f--;)y=d[f],x=v.get(y),x===void 0&&v.set(y,x=f?new Map:sI(s)),v=x;return x};Pw();const Qm={http:bA,xhr:XA,fetch:{get:Pw}};de.forEach(Qm,(n,s)=>{if(n){try{Object.defineProperty(n,"name",{value:s})}catch{}Object.defineProperty(n,"adapterName",{value:s})}});const qx=n=>`- ${n}`,iI=n=>de.isFunction(n)||n===null||n===!1,Ew={getAdapter:(n,s)=>{n=de.isArray(n)?n:[n];const{length:a}=n;let i,l;const d={};for(let u=0;u<a;u++){i=n[u];let f;if(l=i,!iI(i)&&(l=Qm[(f=String(i)).toLowerCase()],l===void 0))throw new vt(`Unknown adapter '${f}'`);if(l&&(de.isFunction(l)||(l=l.get(s))))break;d[f||"#"+u]=l}if(!l){const u=Object.entries(d).map(([y,x])=>`adapter ${y} `+(x===!1?"is not supported by the environment":"is not available in the build"));let f=a?u.length>1?`since :
`+u.map(qx).join(`
`):" "+qx(u[0]):"as no adapter specified";throw new vt("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return l},adapters:Qm};function vm(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new wi(null,n)}function Wx(n){return vm(n),n.headers=Vn.from(n.headers),n.data=ym.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Ew.getAdapter(n.adapter||To.adapter,n)(n).then(function(i){return vm(n),i.data=ym.call(n,n.transformResponse,i),i.headers=Vn.from(i.headers),i},function(i){return bw(i)||(vm(n),i&&i.response&&(i.response.data=ym.call(n,n.transformResponse,i.response),i.response.headers=Vn.from(i.response.headers))),Promise.reject(i)})}const Dw="1.12.2",ld={};["object","boolean","number","function","string","symbol"].forEach((n,s)=>{ld[n]=function(i){return typeof i===n||"a"+(s<1?"n ":" ")+n}});const Kx={};ld.transitional=function(s,a,i){function l(d,u){return"[Axios v"+Dw+"] Transitional option '"+d+"'"+u+(i?". "+i:"")}return(d,u,f)=>{if(s===!1)throw new vt(l(u," has been removed"+(a?" in "+a:"")),vt.ERR_DEPRECATED);return a&&!Kx[u]&&(Kx[u]=!0,console.warn(l(u," has been deprecated since v"+a+" and will be removed in the near future"))),s?s(d,u,f):!0}};ld.spelling=function(s){return(a,i)=>(console.warn(`${i} is likely a misspelling of ${s}`),!0)};function oI(n,s,a){if(typeof n!="object")throw new vt("options must be an object",vt.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let l=i.length;for(;l-- >0;){const d=i[l],u=s[d];if(u){const f=n[d],y=f===void 0||u(f,d,n);if(y!==!0)throw new vt("option "+d+" must be "+y,vt.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new vt("Unknown option "+d,vt.ERR_BAD_OPTION)}}const mc={assertOptions:oI,validators:ld},_r=mc.validators;let ga=class{constructor(s){this.defaults=s||{},this.interceptors={request:new Mx,response:new Mx}}async request(s,a){try{return await this._request(s,a)}catch(i){if(i instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const d=l.stack?l.stack.replace(/^.+\n/,""):"";try{i.stack?d&&!String(i.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+d):i.stack=d}catch{}}throw i}}_request(s,a){typeof s=="string"?(a=a||{},a.url=s):a=s||{},a=Sa(this.defaults,a);const{transitional:i,paramsSerializer:l,headers:d}=a;i!==void 0&&mc.assertOptions(i,{silentJSONParsing:_r.transitional(_r.boolean),forcedJSONParsing:_r.transitional(_r.boolean),clarifyTimeoutError:_r.transitional(_r.boolean)},!1),l!=null&&(de.isFunction(l)?a.paramsSerializer={serialize:l}:mc.assertOptions(l,{encode:_r.function,serialize:_r.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),mc.assertOptions(a,{baseUrl:_r.spelling("baseURL"),withXsrfToken:_r.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let u=d&&de.merge(d.common,d[a.method]);d&&de.forEach(["delete","get","head","post","put","patch","common"],S=>{delete d[S]}),a.headers=Vn.concat(u,d);const f=[];let y=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(a)===!1||(y=y&&w.synchronous,f.unshift(w.fulfilled,w.rejected))});const x=[];this.interceptors.response.forEach(function(w){x.push(w.fulfilled,w.rejected)});let v,h=0,C;if(!y){const S=[Wx.bind(this),void 0];for(S.unshift(...f),S.push(...x),C=S.length,v=Promise.resolve(a);h<C;)v=v.then(S[h++],S[h++]);return v}C=f.length;let P=a;for(;h<C;){const S=f[h++],w=f[h++];try{P=S(P)}catch(b){w.call(this,b);break}}try{v=Wx.call(this,P)}catch(S){return Promise.reject(S)}for(h=0,C=x.length;h<C;)v=v.then(x[h++],x[h++]);return v}getUri(s){s=Sa(this.defaults,s);const a=Sw(s.baseURL,s.url,s.allowAbsoluteUrls);return vw(a,s.params,s.paramsSerializer)}};de.forEach(["delete","get","head","options"],function(s){ga.prototype[s]=function(a,i){return this.request(Sa(i||{},{method:s,url:a,data:(i||{}).data}))}});de.forEach(["post","put","patch"],function(s){function a(i){return function(d,u,f){return this.request(Sa(f||{},{method:s,headers:i?{"Content-Type":"multipart/form-data"}:{},url:d,data:u}))}}ga.prototype[s]=a(),ga.prototype[s+"Form"]=a(!0)});let lI=class kw{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(d){a=d});const i=this;this.promise.then(l=>{if(!i._listeners)return;let d=i._listeners.length;for(;d-- >0;)i._listeners[d](l);i._listeners=null}),this.promise.then=l=>{let d;const u=new Promise(f=>{i.subscribe(f),d=f}).then(l);return u.cancel=function(){i.unsubscribe(d)},u},s(function(d,u,f){i.reason||(i.reason=new wi(d,u,f),a(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const a=this._listeners.indexOf(s);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const s=new AbortController,a=i=>{s.abort(i)};return this.subscribe(a),s.signal.unsubscribe=()=>this.unsubscribe(a),s.signal}static source(){let s;return{token:new kw(function(l){s=l}),cancel:s}}};function cI(n){return function(a){return n.apply(null,a)}}function dI(n){return de.isObject(n)&&n.isAxiosError===!0}const Xm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xm).forEach(([n,s])=>{Xm[s]=n});function Aw(n){const s=new ga(n),a=ow(ga.prototype.request,s);return de.extend(a,ga.prototype,s,{allOwnKeys:!0}),de.extend(a,s,null,{allOwnKeys:!0}),a.create=function(l){return Aw(Sa(n,l))},a}const jt=Aw(To);jt.Axios=ga;jt.CanceledError=wi;jt.CancelToken=lI;jt.isCancel=bw;jt.VERSION=Dw;jt.toFormData=od;jt.AxiosError=vt;jt.Cancel=jt.CanceledError;jt.all=function(s){return Promise.all(s)};jt.spread=cI;jt.isAxiosError=dI;jt.mergeConfig=Sa;jt.AxiosHeaders=Vn;jt.formToJSON=n=>jw(de.isHTMLForm(n)?new FormData(n):n);jt.getAdapter=Ew.getAdapter;jt.HttpStatusCode=Xm;jt.default=jt;const{Axios:J5,AxiosError:Q5,CanceledError:X5,isCancel:Z5,CancelToken:eR,VERSION:tR,all:nR,Cancel:rR,isAxiosError:sR,spread:aR,toFormData:iR,AxiosHeaders:oR,HttpStatusCode:lR,formToJSON:cR,getAdapter:dR,mergeConfig:uR}=jt;class kc{static getActiveDiscounts(){return wn.getActiveDiscounts().map(s=>({id:s.id,code:s.code,name:s.name,type:s.type,value:s.value,description:s.description,category:s.category,isActive:s.isActive,conditions:s.conditions,applicableServices:s.applicableServices}))}static getDiscountByCode(s){const a=wn.getDiscountByCode(s);return!a||!a.isActive?null:{id:a.id,code:a.code,name:a.name,type:a.type,value:a.value,description:a.description,category:a.category,isActive:a.isActive,conditions:a.conditions,applicableServices:a.applicableServices}}static getDiscountById(s){const a=wn.getDiscountById(s);return!a||!a.isActive?null:{id:a.id,code:a.code,name:a.name,type:a.type,value:a.value,description:a.description,category:a.category,isActive:a.isActive,conditions:a.conditions,applicableServices:a.applicableServices}}static searchDiscounts(s){return wn.searchDiscounts(s).filter(a=>a.isActive).map(a=>({id:a.id,code:a.code,name:a.name,type:a.type,value:a.value,description:a.description,category:a.category,isActive:a.isActive,conditions:a.conditions,applicableServices:a.applicableServices}))}static getDiscountsByCategory(s){return wn.getDiscountsByCategory(s).filter(a=>a.isActive).map(a=>({id:a.id,code:a.code,name:a.name,type:a.type,value:a.value,description:a.description,category:a.category,isActive:a.isActive,conditions:a.conditions,applicableServices:a.applicableServices}))}static calculateDiscount(s,a){return a.type==="percentage"?s*a.value/100:a.value}static validateDiscount(s){const a=wn.validateDiscount(s);return a.valid?a.discount?{valid:!0,discount:{id:a.discount.id,code:a.discount.code,name:a.discount.name,type:a.discount.type,value:a.discount.value,description:a.discount.description,category:a.discount.category,isActive:a.discount.isActive,conditions:a.discount.conditions,applicableServices:a.discount.applicableServices}}:{valid:!1,message:"Unknown error"}:{valid:!1,message:a.message}}static getCategories(){return[{value:"senior",label:"Senior Citizen",color:"bg-blue-100 text-blue-800"},{value:"pwd",label:"PWD",color:"bg-green-100 text-green-800"},{value:"employee",label:"Employee",color:"bg-purple-100 text-purple-800"},{value:"insurance",label:"Insurance",color:"bg-orange-100 text-orange-800"},{value:"promotional",label:"Promotional",color:"bg-pink-100 text-pink-800"},{value:"seasonal",label:"Seasonal",color:"bg-yellow-100 text-yellow-800"}]}static getCategoryInfo(s){return this.getCategories().find(a=>a.value===s)||null}}const Gx={"Consultation Services":["General Consultation","Specialist Consultation","Emergency Consultation","Telemedicine Consultation"],"Diagnostic Services":["Blood Test","X-Ray","CT Scan","MRI","Ultrasound","ECG","Endoscopy"],"Laboratory Services":["Complete Blood Count","Blood Chemistry","Urinalysis","Microbiology","Pathology"],"Surgical Services":["Minor Surgery","Major Surgery","Outpatient Surgery","Emergency Surgery"],"Therapeutic Services":["Physical Therapy","Occupational Therapy","Speech Therapy","Chemotherapy","Dialysis"],"Room & Board":["Private Room","Semi-Private Room","ICU","Emergency Room","Day Care"],Pharmacy:["Prescription Medication","Over-the-Counter","Injectable Medication","IV Fluids"],"Medical Equipment":["Wheelchair Rental","Medical Device Rental","Oxygen Tank","CPAP Machine"]},wm=[{label:"Senior Citizen (20%)",value:"senior",percentage:20},{label:"PWD (20%)",value:"pwd",percentage:20},{label:"Employee (15%)",value:"employee",percentage:15},{label:"Insurance Coverage (Variable)",value:"insurance",percentage:0},{label:"Charity Care (50%)",value:"charity",percentage:50},{label:"Prompt Payment (5%)",value:"prompt",percentage:5}],uI=[{id:"P001",name:"Maria Santos",fullDisplay:"Maria Santos (P001)"},{id:"P002",name:"Juan Dela Cruz",fullDisplay:"Juan Dela Cruz (P002)"},{id:"P003",name:"Anna Reyes",fullDisplay:"Anna Reyes (P003)"},{id:"P004",name:"Roberto Cruz",fullDisplay:"Roberto Cruz (P004)"},{id:"P005",name:"Carmen Flores",fullDisplay:"Carmen Flores (P005)"},{id:"P006",name:"Miguel Torres",fullDisplay:"Miguel Torres (P006)"},{id:"P007",name:"Sofia Garcia",fullDisplay:"Sofia Garcia (P007)"},{id:"P008",name:"Pedro Gonzales",fullDisplay:"Pedro Gonzales (P008)"},{id:"P009",name:"Elena Ramirez",fullDisplay:"Elena Ramirez (P009)"},{id:"P010",name:"Carlos Mendoza",fullDisplay:"Carlos Mendoza (P010)"},{id:"P011",name:"Isabella Lopez",fullDisplay:"Isabella Lopez (P011)"},{id:"P012",name:"Francisco Ramos",fullDisplay:"Francisco Ramos (P012)"},{id:"P013",name:"Gabriela Santos",fullDisplay:"Gabriela Santos (P013)"},{id:"P014",name:"Antonio Fernandez",fullDisplay:"Antonio Fernandez (P014)"},{id:"P015",name:"Valentina Castro",fullDisplay:"Valentina Castro (P015)"}],io="http://localhost:5000/api";function mI({onNavigateToView:n}){const[s,a]=p.useState([]),[i,l]=p.useState([]),[d,u]=p.useState([]),[f,y]=p.useState(!1),[x,v]=p.useState(""),[h,C]=p.useState([]),[P,S]=p.useState(""),[w,b]=p.useState(""),[E,T]=p.useState([]),[z,B]=p.useState(!1),[Q,X]=p.useState(!1),[G,J]=p.useState(!1),[ue,ge]=p.useState(null),[Ee,xe]=p.useState(null),[me,fe]=p.useState(!1),[F,ne]=p.useState(!1),[te,D]=p.useState(null),[L,ce]=p.useState(""),[A,R]=p.useState("active"),[H,M]=p.useState(""),ee=async()=>{try{const[I,Te]=await Promise.all([jt.get(`${io}/invoices`).catch(()=>({data:[]})),jt.get(`${io}/payments`).catch(()=>({data:[]}))]),qe=I?.data,ft=Te?.data,gt=Array.isArray(ft)?ft:ft?.data||[],St=(Array.isArray(qe)?qe:qe?.data||[]).map(Ce=>{const kt=Ce._id||Ce.id,dt=Ce.number||Ce.invoiceNumber||`INV-${kt?.toString().slice(-6)||Date.now()}`,Mt=gt.find(Tn=>Tn.invoiceId&&kt&&String(Tn.invoiceId)===String(kt)||Tn.invoiceNumber&&dt&&String(Tn.invoiceNumber)===String(dt)||Tn.invoiceNo&&dt&&String(Tn.invoiceNo)===String(dt));let tt=(Ce.status||Ce.state||"").toString().toLowerCase();(!tt||tt==="draft"||tt==="unpaid")&&Mt&&(tt=(Mt.status||"paid").toString().toLowerCase());const kn=tt==="paid"||tt==="completed"||tt==="processed"?"paid":tt==="sent"||tt==="pending"?"sent":tt==="overdue"?"overdue":"draft";return{id:kt,number:dt,patientName:Ce.patientName||Ce.patient||"Unknown",patientId:Ce.patientId||Ce.accountId||"N/A",date:Ce.date||Ce.issuedDate||new Date().toISOString(),dueDate:Ce.dueDate||new Date().toISOString(),status:kn,subtotal:Ce.subtotal||Ce.amount||Ce.totalBeforeTax||0,discount:Ce.discount||0,discountType:Ce.discountType||Ce.discountMode||"none",discountPercentage:Ce.discountPercentage||0,tax:Ce.tax||Ce.vat||0,total:Ce.total||Ce.amount||0,items:Ce.items||[],generatedBy:Ce.generatedBy||"Billing Department",generatedAt:Ce.generatedAt||Ce.date||new Date().toISOString(),notes:Ce.notes||"",isArchived:!!Ce.isArchived,createdAt:Ce.createdAt||Ce.generatedAt||new Date().toISOString()}});a(St)}catch(I){console.error("Error fetching invoices:",I),se.error("Failed to connect to backend")}};p.useEffect(()=>{(async()=>{try{const I=await li(),Te=Array.isArray(I)?I:I?.data||[];u(go?go(Te):Te)}catch(I){console.warn("Failed to load patients",I)}try{const I=kc.getDiscounts?.()||[];T(I)}catch{}})()},[]),p.useEffect(()=>{ee()},[]);const[U,q]=p.useState({patientName:"",patientId:"",dueDate:new Date().toISOString(),notes:""}),[le,he]=p.useState(""),ve=I=>{if(!I)return null;const Te=I.dateOfBirth||I.dob||I.birthDate;if(!Te)return null;try{const qe=_f.calculateAge(Te);return typeof qe=="number"?qe:null}catch(qe){return console.warn("Failed to calculate age",qe),null}},k=I=>{const Te=ve(I);if(Te!==null&&Te>=60){const qe=E.find(ft=>(ft.name||"").toLowerCase().includes("senior"))||wm.find(ft=>ft.value==="senior");if(qe){const ft=qe.id||"senior";return S(ft),M(`Senior Citizen (Age: ${Te})`),se.success(`Senior citizen discount applied (Age: ${Te})`),!0}}else Te!==null&&M("");return!1};p.useEffect(()=>{const I=Te=>{try{const qe=Te?.detail||{},ft=Array.isArray(qe.items)?qe.items:[],gt=qe.patientId||qe.patientKey||"";if(!ft||ft.length===0)return;const hn=ft.map((St,Ce)=>{const kt=St.description||St.service||St.name||"Item",dt=Number(St.quantity||St.qty||1),Mt=Number(St.rate||ni.getPrice?.(kt,St.category||St.group||"Pharmacy")||0);return{id:St.id||`emr-${Date.now()}-${Ce}`,description:kt,quantity:dt,rate:Mt,amount:dt*Mt,category:St.category||"Pharmacy"}});if(l(St=>[...hn,...St]),gt){he(gt);const St=d.find(Ce=>Tt(Ce)===gt||Ce.id===gt||Ce._id===gt||Ce.patientId===gt);St&&q(Ce=>({...Ce,patientName:St.name||Ce.patientName,patientId:Tt(St)||gt}))}X(!0),se.success(`Added ${hn.length} item(s) to invoice draft`)}catch(qe){console.error("emr-add-to-invoice handler error",qe),se.error("Failed to add items to invoice")}};return window.addEventListener("emr-add-to-invoice",I),()=>window.removeEventListener("emr-add-to-invoice",I)},[d]);const[Y,Ie]=p.useState({description:"",quantity:1,rate:0,category:""}),Fe=()=>{if(Y.description&&Y.rate>0){const I={id:Date.now().toString(),description:Y.description,quantity:Y.quantity,rate:Y.rate,amount:Y.quantity*Y.rate,category:Y.category};l([...i,I]),Ie({description:"",quantity:1,rate:0,category:""}),se.success("Service added to invoice")}},O=I=>{l(i.filter(Te=>Te.id!==I)),se.info("Service removed from invoice")},ze=()=>i.reduce((I,Te)=>I+Te.amount,0),W=()=>{const I=ze();if(!P)return 0;if(P==="custom")return parseFloat(w)||0;const Te=E.find(qe=>qe.id===P);if(Te)try{return kc.calculateDiscount(I,Te)}catch(qe){return console.error("Error calculating dynamic discount",qe),0}if(P&&P!=="insurance"){const qe=wm.find(ft=>ft.value===P);return qe?I*qe.percentage/100:0}return 0},Ve=I=>{const Te=["Pharmacy"],qe=["medication","medicine","prescription","drug","pharmaceutical"];if(Te.includes(I.category))return!0;const ft=I.description.toLowerCase();return qe.some(gt=>ft.includes(gt))},Re=()=>{const I=ze(),Te=i.filter(gt=>Ve(gt)).reduce((gt,hn)=>gt+hn.amount,0);if(Te===0)return 0;const qe=W();return(Te-qe*(Te/I))*.12},$e=()=>{const I=ze(),Te=W(),qe=Re();return I-Te+qe},ot=I=>{switch(I){case"paid":return"bg-green-100 text-green-800";case"sent":return"bg-blue-100 text-blue-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},V=I=>{switch(I){case"paid":return e.jsx(Br,{className:"h-4 w-4 text-green-600"});case"sent":return e.jsx(by,{className:"h-4 w-4 text-blue-600"});case"overdue":return e.jsx(ls,{className:"h-4 w-4 text-red-600"});default:return e.jsx(vr,{className:"h-4 w-4 text-gray-600"})}},pe=I=>{if(!I)return"-";const Te=new Date(I);return isNaN(Te.getTime())?"-":Te.toLocaleDateString("en-PH",{year:"numeric",month:"long",day:"numeric"})},we=async()=>{if(i.length===0){se.error("Please add at least one service item.");return}if(!U.patientName||!U.patientId){se.error("Please select a patient.");return}B(!0);try{const I=ze(),Te=W(),qe=Re(),ft=$e(),gt={id:Date.now().toString(),number:`INV-${Date.now()}`,patientName:U.patientName,patientId:U.patientId,date:new Date().toISOString(),dueDate:new Date().toISOString(),status:"draft",subtotal:I,discount:Te,total:ft,items:i,discountType:P||"none",generatedBy:"Billing Department",generatedAt:new Date().toISOString(),notes:U.notes,createdAt:new Date().toISOString()},hn=d.find(Ce=>Tt(Ce)===U.patientId);hn&&(gt.patientNumber=tn(hn)||U.patientId);const St=await jt.post(`${io}/invoices`,gt);if(St.data.success){se.success("Invoice created successfully!");const Ce=St.data?.data||gt;Ce.id=Ce._id||Ce.id||gt.id,Ce.number=Ce.number||Ce.invoiceNumber||gt.number;const kt=d.find(dt=>{const Mt=Tt(dt);return Mt&&String(Mt)===String(Ce.patientId)});kt&&(Ce.patient=kt,Ce.patientId=tn(kt)||Ce.patientId),a(dt=>[Ce,...dt]);try{const dt={invoiceNumber:Ce.number||Ce.invoiceNumber||gt.number,patientName:Ce.patientName||gt.patientName,total:Ce.total||gt.total,timestamp:new Date().toISOString()};localStorage.setItem("lastAdminInvoiceCreated",JSON.stringify(dt)),window.dispatchEvent(new CustomEvent("admin-invoice-created",{detail:dt}))}catch{}try{const dt=Array.isArray(Ce.items)?Ce.items.map(tt=>({id:tt.id||tt._id||Date.now().toString(),description:tt.description||tt.service||tt.name||"Item",quantity:tt.quantity||tt.qty||1,unitPrice:tt.rate||tt.unitPrice||tt.price||0,totalPrice:tt.amount||tt.totalPrice||(tt.quantity||1)*(tt.rate||tt.unitPrice||0),category:tt.category||tt.group||"General"})):[],Mt=vn.addInvoiceRecord({invoiceNumber:Ce.number||Ce.invoiceNumber||gt.number,patientName:Ce.patientName||gt.patientName,patientId:Ce.patientId||gt.patientId,amount:Ce.total||Ce.amount||gt.total,description:Ce.notes||gt.notes||"",date:Ce.date||new Date().toISOString(),time:Ce.time||new Date(Ce.date||Date.now()).toLocaleTimeString(),subtotal:Ce.subtotal||Ce.amount||0,discount:Ce.discount||0,discountType:Ce.discountType||Ce.discountMode||"none",discountPercentage:Ce.discountPercentage||0,tax:Ce.tax||Ce.vat||0,taxRate:Ce.taxRate||0,totalBeforeTax:Ce.totalBeforeTax||void 0,items:dt});try{window.dispatchEvent(new CustomEvent("billing-updated",{detail:{record:Mt}}))}catch{}}catch(dt){console.warn("Failed to push invoice into billingService",dt)}ge(Ce),xe(Ce),fe(!0),J(!1),X(!1)}else se.error("Failed to create invoice")}catch(I){console.error("Error creating invoice:",I),se.error("Server error while creating invoice")}finally{B(!1)}},mt=I=>{ge(I),xe(I),fe(!0)},ct=I=>{D(I),ne(!0)},Dt=async()=>{if(te)try{(await jt.post(`${io}/archive/invoices/${te}/archive`,{archivedBy:"admin"}))?.data?.success?(a(Te=>Te.map(qe=>qe.id===te?{...qe,isArchived:!0}:qe)),se.success("Invoice moved to archive")):se.error("Failed to move invoice to archive")}catch(I){console.error("Error archiving invoice:",I),se.error("Server error while archiving invoice")}finally{ne(!1),D(null)}},xt=s.filter(I=>A==="active"?!I.isArchived:!!I.isArchived).filter(I=>I.number.toLowerCase().includes(L.toLowerCase())||I.patientName.toLowerCase().includes(L.toLowerCase())||I.patientId.toLowerCase().includes(L.toLowerCase())),Xt=()=>{const I=window.open("","_blank");if(!I)return;const Te=document.getElementById("invoice-receipt-print");Te&&(I.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Invoice Receipt - ${Ee?.number}</title>
          <style>
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body { font-family: Arial, sans-serif; padding: 20px; color: #000; }
            table { width: 100%; border-collapse: collapse; margin-top: 15px; }
            th, td { border: 1px solid #e5e7eb; padding: 8px; text-align: left; }
            th { background-color: #f9fafb; font-weight: 600; }
            .text-right { text-align: right; }
            .font-bold { font-weight: bold; }
            .border-b { border-bottom: 1px solid #e5e7eb; padding-bottom: 15px; }
          </style>
        </head>
        <body>
          ${Te.innerHTML}
        </body>
      </html>
    `),I.document.close(),I.focus(),setTimeout(()=>{I.print(),I.close()},250))};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs(ie,{onClick:()=>X(!0),className:"bg-[#E94D61] hover:bg-[#E94D61]/90 text-white",children:[e.jsx(ii,{className:"mr-2",size:16}),"Create Invoice"]})}),Q&&e.jsxs(Le,{children:[e.jsxs(pt,{className:"bg-[#358E83] text-white",children:[e.jsxs(ht,{className:"flex items-center",children:[e.jsx(or,{className:"mr-2",size:20}),"Create New Invoice"]}),e.jsx(pn,{className:"text-white/80",children:"Generate a new invoice for patient services"})]}),e.jsxs(Be,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(ye,{htmlFor:"patientSelect",children:"Select Patient"}),e.jsxs(qm,{open:f,onOpenChange:y,children:[e.jsx(Wm,{asChild:!0,children:e.jsxs(ie,{variant:"outline",role:"combobox","aria-expanded":f,className:"w-full justify-between",children:[le?uI.find(I=>I.id===le)?.fullDisplay:"Search and select a patient...",e.jsx(vy,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(Km,{className:"w-screen max-w-[95vw] p-0 left-1/2 transform -translate-x-1/2",children:e.jsxs(Bm,{children:[e.jsx(Um,{placeholder:"Search by patient name or ID...",value:x,onChange:I=>v(I.target.value)}),e.jsxs(Hm,{children:[e.jsx(Vm,{children:"No patient found."}),e.jsx(lc,{children:d.filter(I=>{const Te=(x||"").toLowerCase(),qe=(tn(I)||"").toString().toLowerCase(),ft=(I.name||"").toLowerCase();return Te===""||ft.includes(Te)||qe.includes(Te)}).map(I=>{const Te=Tt(I),qe=tn(I)||Te,ft=`${I.name} (${qe})`,gt=ve(I),hn=gt!==null&&gt>=60;return e.jsxs(cc,{value:ft,onSelect:async()=>{const St=Te;he(St),q({...U,patientName:I.name,patientId:St});const Ce=Tf.getPatientServices(St);if(Ce.length>0){const kt=Ce.map((dt,Mt)=>{const tt=ni.getPrice(dt.service,dt.category);return{id:`emr-${dt.serviceId}-${Date.now()}-${Mt}`,description:dt.service,quantity:dt.quantity,rate:tt,amount:tt*dt.quantity,category:dt.category}});l(kt),se.success(`Patient ${I.name} selected - ${Ce.length} services loaded from EMR`)}else l([]),se.success(`Patient ${I.name} selected - no pending services in EMR`);try{const kt=await yr.getTransactions(St);if(Array.isArray(kt)&&kt.length>0){C(kt);const dt=kt.flatMap(Mt=>Mt.items||[]);if(dt.length>0){const Mt=dt.map((tt,kn)=>({id:`pharm-${tt.id||kn}-${Date.now()}`,description:`${tt.medicationName} ${tt.strength?`(${tt.strength})`:""}`,quantity:tt.quantity||1,rate:tt.unitPrice||tt.totalPrice||0,amount:tt.totalPrice||(tt.unitPrice||0)*(tt.quantity||1),category:"Pharmacy"}));l(tt=>[...Mt,...tt]),se.success(`Loaded ${Mt.length} medicine items from pharmacy`)}}}catch(kt){console.error("Failed to fetch pharmacy transactions",kt)}k(I),y(!1),v("")},children:[e.jsx(fc,{className:`mr-2 h-4 w-4 ${le===Te?"opacity-100":"opacity-0"}`}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:ft}),hn&&e.jsxs(Nt,{className:"bg-yellow-100 text-yellow-800 text-xs",children:["Senior (Age ",gt,")"]})]})})]},ft)})})]})]})})]})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"notes",children:"Invoice Notes (Optional)"}),e.jsx(ha,{id:"notes",value:U.notes,onChange:I=>q({...U,notes:I.target.value}),placeholder:"Additional notes for this invoice...",className:"min-h-[80px]"})]})]}),e.jsx(Un,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-4 text-lg",children:"Add Services"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(ye,{htmlFor:"serviceCategory",children:"Service Category"}),e.jsxs(nn,{value:Y.category,onValueChange:I=>Ie({...Y,category:I,description:""}),children:[e.jsx(sn,{children:e.jsx(rn,{placeholder:"Select category"})}),e.jsx(an,{children:Object.keys(Gx).map(I=>e.jsx(lt,{value:I,children:I},I))})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(ye,{htmlFor:"service",children:"Service Description"}),e.jsxs(nn,{value:Y.description,onValueChange:I=>{const Te=ni.getPrice(I,Y.category);Ie({...Y,description:I,rate:Te})},disabled:!Y.category,children:[e.jsx(sn,{children:e.jsx(rn,{placeholder:"Select service"})}),e.jsx(an,{children:Y.category&&Gx[Y.category]?.map(I=>{const Te=ni.getPrice(I,Y.category);return e.jsx(lt,{value:I,children:e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx("span",{children:I}),e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["",Te.toLocaleString()]})]})},I)})})]})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"quantity",children:"Quantity"}),e.jsx(Ue,{id:"quantity",type:"number",min:"1",value:Y.quantity,onChange:I=>Ie({...Y,quantity:parseInt(I.target.value)||1})})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"rate",children:"Rate ()"}),e.jsx(Ue,{id:"rate",type:"number",min:"0",step:"0.01",value:Y.rate,onChange:I=>Ie({...Y,rate:parseFloat(I.target.value)||0})})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(ie,{type:"button",onClick:Fe,className:"w-full bg-[#E94D61] hover:bg-[#E94D61]/90 text-white",children:[e.jsx(ii,{className:"mr-2",size:16}),"Add"]})})]}),i.length>0&&e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Service"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Qty"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Rate"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Action"})]})}),e.jsx("tbody",{children:i.map(I=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-3",children:I.description}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:I.category}),e.jsx("td",{className:"px-4 py-3 text-center",children:I.quantity}),e.jsxs("td",{className:"px-4 py-3 text-right",children:["",I.rate.toLocaleString()]}),e.jsxs("td",{className:"px-4 py-3 text-right",children:["",I.amount.toLocaleString()]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>O(I.id),className:"text-red-600 hover:text-red-800",children:e.jsx(Ur,{size:16})})})]},I.id))})]})})]}),e.jsx(Un,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-4",children:"Discount"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"discount",children:"Discount Type"}),e.jsxs(nn,{value:P,onValueChange:I=>{S(I),b("")},children:[e.jsx(sn,{children:e.jsx(rn,{placeholder:"Select discount type"})}),e.jsx(an,{children:(()=>{const I=E.map(qe=>e.jsxs(lt,{value:qe.id,children:[qe.name," ",qe.type==="percentage"?`(${qe.value}%)`:`(${qe.value})`]},qe.id)),Te=wm.filter(qe=>{const ft=qe.label.split("(")[0].trim().toLowerCase();return!E.some(gt=>(gt.name||"").toLowerCase().includes(ft))}).map(qe=>e.jsx(lt,{value:qe.value,children:qe.label},`legacy-${qe.value}`));return[...I,...Te,e.jsx(lt,{value:"custom",children:"Custom Amount"},"custom")]})()})]})]}),P==="custom"&&e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"customDiscount",children:"Custom Discount Amount ()"}),e.jsx(Ue,{id:"customDiscount",type:"number",min:"0",step:"0.01",value:w,onChange:I=>b(I.target.value),placeholder:"Enter discount amount"})]})]})]}),e.jsx(Un,{}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["",ze().toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Discount:"}),e.jsxs("span",{children:["-",W().toLocaleString()]})]}),Re()>0&&e.jsxs("div",{className:"flex justify-between text-blue-600",children:[e.jsx("span",{children:"VAT on Medicines (12%):"}),e.jsxs("span",{children:["",Re().toLocaleString()]})]}),e.jsx(Un,{}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["",$e().toLocaleString()]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(ie,{variant:"outline",onClick:()=>{X(!1),l([]),he(""),q({patientName:"",patientId:"",dueDate:new Date().toISOString().split("T")[0],notes:""})},children:"Cancel"}),e.jsx(ie,{onClick:we,disabled:z||i.length===0,className:"bg-[#358E83] hover:bg-[#358E83]/90 text-white",children:z?"Creating...":"Create Invoice"})]})]})]}),e.jsx(Gt,{open:me,onOpenChange:fe,children:e.jsxs(Bt,{className:"max-w-[420px] w-[420px] max-h-[85vh] overflow-auto receipt-dialog p-4 text-sm",children:[e.jsx(Ut,{children:e.jsx(Ht,{children:"Invoice Details"})}),ue&&e.jsxs("div",{id:"invoice-receipt-print",className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Invoice Number"}),e.jsx("p",{className:"font-semibold",children:ue.number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Patient"}),e.jsx("p",{className:"font-semibold",children:ue.patientName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Invoice Date"}),e.jsx("p",{children:pe(ue.date)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("p",{className:"font-semibold capitalize",children:ue.status})]})]}),e.jsx(Un,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Services"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs",children:"Description"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs",children:"Qty"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs",children:"Rate"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs",children:"Amount"})]})}),e.jsx("tbody",{children:ue?.items?.map(I=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-2 text-xs",children:I.description}),e.jsx("td",{className:"px-4 py-2 text-center text-xs",children:I.quantity}),e.jsxs("td",{className:"px-4 py-2 text-right text-xs",children:["",I.rate.toLocaleString()]}),e.jsxs("td",{className:"px-4 py-2 text-right text-xs",children:["",I.amount.toLocaleString()]})]},I.id))})]})})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["",(ue.subtotal||0).toLocaleString()]})]}),ue.discount&&e.jsxs("div",{className:"flex justify-between text-green-600 text-sm",children:[e.jsx("span",{children:"Discount:"}),e.jsxs("span",{children:["-",ue.discount.toLocaleString()]})]}),ue.tax&&ue.tax>0&&e.jsxs("div",{className:"flex justify-between text-blue-600 text-sm",children:[e.jsx("span",{children:"VAT on Medicines (12%):"}),e.jsxs("span",{children:["",ue.tax.toLocaleString()]})]}),e.jsx(Un,{}),e.jsxs("div",{className:"flex justify-between font-semibold text-sm",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["",ue.total.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[e.jsx(ie,{variant:"outline",size:"sm",onClick:()=>fe(!1),children:"Close"}),e.jsxs(ie,{size:"sm",onClick:Xt,className:"bg-[#358E83] hover:bg-[#358E83]/90 text-white",children:[e.jsx(xc,{className:"mr-2 h-4 w-4"}),"Print"]})]})]})}),e.jsxs(Le,{children:[e.jsxs(pt,{className:"bg-[#358E83] text-white",children:[e.jsx(ht,{children:"All Invoices"}),e.jsx(pn,{className:"text-white/80",children:"Manage invoices created by admin"})]}),e.jsxs(Be,{className:"p-6",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx(Ue,{placeholder:"Search invoices by number, patient name, or ID...",value:L,onChange:I=>ce(I.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex rounded-md bg-white border",children:[e.jsx("button",{onClick:()=>R("active"),className:`px-3 py-1 ${A==="active"?"bg-[#358E83] text-white":"text-gray-700"}`,children:"Active"}),e.jsx("button",{onClick:()=>R("archived"),className:`px-3 py-1 ${A==="archived"?"bg-[#358E83] text-white":"text-gray-700"}`,children:"Archived"})]})]}),e.jsx("div",{className:"space-y-4",children:xt.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No invoices found for this view."}):xt.map(I=>e.jsx(Le,{className:"border",children:e.jsx(Be,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(or,{className:"text-[#358E83]",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:I.number}),e.jsx("p",{className:"text-sm text-gray-600",children:I.patientName})]})]})}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Amount"}),e.jsxs("p",{className:"font-semibold",children:["",I.total.toLocaleString()]})]}),e.jsx("div",{children:e.jsx(Nt,{className:ot(I.status),children:e.jsxs("span",{className:"flex items-center space-x-1",children:[V(I.status),e.jsx("span",{children:I.status.toUpperCase()})]})})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ie,{variant:"outline",size:"sm",onClick:()=>mt(I),children:e.jsx($r,{size:16})}),A==="active"?e.jsx(ie,{variant:"outline",size:"sm",onClick:()=>ct(I.id),className:"text-red-600 hover:text-red-800",children:e.jsx(Ur,{size:16})}):e.jsx(ie,{variant:"outline",size:"sm",onClick:async()=>{try{(await jt.post(`${io}/archive/invoices/${I.id}/restore`))?.data?.success?(a(qe=>qe.map(ft=>ft.id===I.id?{...ft,isArchived:!1}:ft)),se.success("Invoice restored")):se.error("Failed to restore invoice")}catch(Te){console.error("Error restoring invoice:",Te),se.error("Server error while restoring invoice")}},className:"text-green-700 hover:text-green-900",children:e.jsx(fc,{className:"h-4 w-4"})})]})]})]})})},I.id))})]})]}),e.jsx(zs,{open:F,onOpenChange:ne,children:e.jsxs(Bs,{children:[e.jsxs(Us,{children:[e.jsx(Vs,{children:"Move Invoice to Archive?"}),e.jsx(ba,{children:"Are you sure you want to move this invoice to the archive?"})]}),e.jsxs(Hs,{children:[e.jsx(Ws,{children:"Cancel"}),e.jsx(qs,{onClick:Dt,className:"bg-red-600 hover:bg-red-700",children:"Move to Archive"})]})]})})]})}SMTP_USER="galope.markchristopher.noya@gmail.com";SMTP_PASS="qwerty123";EMAIL_FROM="Hospital Billing <galope.markchristopher.noya@gmail.com>";const Yx="http://localhost:5000/api";function Jx({onNavigateToView:n}){const[s,a]=p.useState([]),[i,l]=p.useState([]),[d,u]=p.useState(null),[f,y]=p.useState(!1),[x,v]=p.useState(""),[h,C]=p.useState(!0),[P,S]=p.useState(!1),[w,b]=p.useState([]),[E,T]=p.useState([]),[z,B]=p.useState(null),[Q,X]=p.useState(0),[G,J]=p.useState(0),[ue,ge]=p.useState(0),[Ee,xe]=p.useState([]),[me,fe]=p.useState(!1),F=async()=>{try{const[U,q,le]=await Promise.all([jt.get(`${Yx}/invoices`).catch(()=>({data:[]})),jt.get(`${Yx}/payments`).catch(()=>({data:[]})),li().catch(()=>[])]),he=U?.data,ve=q?.data,k=Array.isArray(ve)?ve:ve?.data||[],Ie=(Array.isArray(he)?he:he?.data||[]).map(W=>{const Ve=W._id||W.id,Re=W.number||W.invoiceNumber||`INV-${Ve?.toString().slice(-6)||Date.now()}`,$e=k.find(we=>we.invoiceId&&Ve&&String(we.invoiceId)===String(Ve)||we.invoiceNumber&&Re&&String(we.invoiceNumber)===String(Re)||we.invoiceNo&&Re&&String(we.invoiceNo)===String(Re));let ot=(W.status||W.state||"unpaid").toString().toLowerCase();$e&&($e.status==="completed"||$e.status==="paid")&&(ot="paid");const V=ot==="paid"||ot==="completed"?"paid":ot==="draft"||ot==="unpaid"||ot==="sent"?"pending":ot;let pe=W.patientNumber||W.accountId||"N/A";return pe==="N/A"&&W.patientId&&(/^P\d{3,}$/i.test(W.patientId)?pe=W.patientId:pe=""),{id:Ve,number:Re,patientName:W.patientName||W.patient||"Unknown",patientId:pe,internalPatientId:W.patientId,date:W.date||W.issuedDate||new Date().toISOString(),dueDate:W.dueDate||new Date().toISOString(),status:V,subtotal:W.subtotal||W.amount||0,discount:W.discount||0,discountType:W.discountType||"none",discountPercentage:W.discountPercentage||0,tax:W.tax||W.vat||0,total:W.total||W.amount||0,items:W.items||[],generatedBy:W.generatedBy||"Billing Department",generatedAt:W.generatedAt||W.date||new Date().toISOString(),notes:W.notes||"",createdAt:W.createdAt||new Date().toISOString()}}),Fe=Array.isArray(le)?le:le?.data||[];l(Fe);const O=Ie.filter(W=>{const Ve=!W.createdAt||!W.createdAt.includes("archived"),Re=W.status==="pending"||W.status==="draft"||W.status==="sent";return Ve&&Re}),ze=O.map(W=>{if(Fe.length>0&&(!W.patientId||W.patientId==="N/A")){const Ve=Fe.find(Re=>{const $e=Re.id||Re._id;return String($e)===String(W.patientId)});if(Ve){const Re=Ve.patientId||`P${Fe.indexOf(Ve)+1}`;W.patientId=Re}}return W});if(a(ze),Q>0&&O.length>Q){const W=O.length-Q,Ve=`${W} new invoice${W>1?"s":""} received from Admin system`;se.success(` ${Ve}`,{duration:5e3}),xe(Re=>[...Re,{id:Date.now().toString(),message:Ve,type:"invoice",timestamp:new Date}])}X(O.length),C(!1)}catch(U){console.error("Error fetching invoices:",U),se.error("Failed to load invoices"),C(!1)}},ne=async()=>{try{let U=0;try{if(U=(await xr.getAppointments()).filter(he=>he.status!=="cancelled").length,G>0&&U>G){const he=U-G,ve=`${he} new service${he>1?"s":""} available from EMR system`;se.success(` ${ve}`,{duration:5e3}),xe(k=>[...k,{id:Date.now().toString()+"-emr",message:ve,type:"emr",timestamp:new Date}])}J(U)}catch(le){console.warn("Failed to check EMR services",le)}let q=0;try{const le=await yr.getTransactions("");if(q=Array.isArray(le)?le.length:0,ue>0&&q>ue){const he=q-ue,ve=`${he} new transaction${he>1?"s":""} available from Pharmacy system`;se.success(` ${ve}`,{duration:5e3}),xe(k=>[...k,{id:Date.now().toString()+"-pharmacy",message:ve,type:"pharmacy",timestamp:new Date}])}ge(q)}catch(le){console.warn("Failed to check pharmacy data",le)}}catch(U){console.error("Error checking external systems:",U)}};p.useEffect(()=>{F(),ne();const U=he=>{const{invoiceNumber:ve,patientName:k,total:Y}=he.detail,Ie=`New invoice #${ve} created for ${k} (${Y.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})})`;xe(Fe=>[...Fe,{id:Date.now().toString(),message:Ie,type:"invoice",timestamp:new Date}]),se.success(` ${Ie}`,{duration:5e3}),F()};window.addEventListener("admin-invoice-created",U);const q=he=>{if(he.key==="lastAdminInvoiceCreated"&&he.newValue)try{const ve=JSON.parse(he.newValue),k=`New invoice #${ve.invoiceNumber} created for ${ve.patientName} (${ve.total.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})})`;xe(Y=>[...Y,{id:Date.now().toString(),message:k,type:"invoice",timestamp:new Date(ve.timestamp)}]),se.success(` ${k}`,{duration:5e3}),F()}catch(ve){console.warn("Error parsing invoice notification",ve)}};window.addEventListener("storage",q);try{const he=localStorage.getItem("lastAdminInvoiceCreated");if(he){const ve=JSON.parse(he),k=localStorage.getItem("lastNotificationId"),Y=`${ve.timestamp}-${ve.invoiceNumber}`;if(k!==Y){const Ie=`New invoice #${ve.invoiceNumber} created for ${ve.patientName} (${ve.total.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})})`;xe(Fe=>[...Fe,{id:Date.now().toString(),message:Ie,type:"invoice",timestamp:new Date(ve.timestamp)}]),localStorage.setItem("lastNotificationId",Y),se.success(` ${Ie}`,{duration:5e3}),F()}}}catch(he){console.warn("Error checking pending notifications",he)}const le=setInterval(()=>{F(),ne()},3e4);return()=>{clearInterval(le),window.removeEventListener("admin-invoice-created",U),window.removeEventListener("storage",q)}},[]);const te=async U=>{u(U),b([]),T([]),B(null),S(!0);try{try{const le=(await xr.getAppointments()).filter(he=>String(he.patientId||he.patient||"").toLowerCase()===String(U.patientId).toLowerCase());le.length>0&&(b(le),B("emr"))}catch(q){console.warn("Failed to fetch EMR services",q)}try{const q=await yr.getTransactions(U.patientId);Array.isArray(q)&&q.length>0&&(T(q),z||B("pharmacy"))}catch(q){console.warn("Failed to fetch pharmacy data",q)}w.length===0&&E.length===0&&B("admin")}catch(q){console.error("Error fetching EMR/Pharmacy data",q)}finally{S(!1)}y(!0)},D=U=>{try{const q=U.id||U._id||"",le=U.number||U.invoiceNumber||"";q&&window.localStorage.setItem("selectedInvoiceForProcessing",String(q)),le&&window.localStorage.setItem("selectedInvoiceForProcessingNumber",String(le));try{window.dispatchEvent(new CustomEvent("navigate-to",{detail:{view:"payment",invoiceId:q,invoiceNumber:le}}))}catch{}}catch{}if(n)n("payment");else try{window.history.pushState({},"","/payment"),window.dispatchEvent(new PopStateEvent("popstate"))}catch{}},L=U=>{switch(U){case"paid":return"bg-green-100 text-green-800";case"sent":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ce=U=>{switch(U){case"paid":return e.jsx(Br,{className:"h-4 w-4 text-green-600"});case"sent":return e.jsx(by,{className:"h-4 w-4 text-blue-600"});case"pending":return e.jsx(vr,{className:"h-4 w-4 text-yellow-600"});case"overdue":return e.jsx(ls,{className:"h-4 w-4 text-red-600"});default:return e.jsx(vr,{className:"h-4 w-4 text-gray-600"})}},A=U=>{if(!U)return"-";const q=new Date(U);return isNaN(q.getTime())?"-":q.toLocaleDateString("en-PH",{year:"numeric",month:"long",day:"numeric"})},R=U=>{const le=new Date().getTime()-new Date(U).getTime(),he=Math.floor(le/6e4),ve=Math.floor(he/60),k=Math.floor(ve/24);return he<1?"just now":he<60?`${he}m ago`:ve<24?`${ve}h ago`:`${k}d ago`},H=U=>{switch(U){case"invoice":return"";case"emr":return"";case"pharmacy":return"";default:return""}},M=U=>{const q={emr:!1,pharmacy:!1};return!U.items||U.items.length===0||U.items.forEach(le=>{const he=(le.category||"").toLowerCase(),ve=(le.description||"").toLowerCase(),Y=["pharmacy","medicine","medication","drug","pills","tablet","injection","iv fluids","injectable"].some(O=>he.includes(O)||ve.includes(O)),Fe=["consultation","diagnostic","laboratory","service","procedure","surgery","therapy","test","scan","x-ray","ultrasound","endoscopy"].some(O=>he.includes(O)||ve.includes(O));Y&&(q.pharmacy=!0),Fe&&(q.emr=!0)}),q},ee=s.filter(U=>U.number.toLowerCase().includes(x.toLowerCase())||U.patientName.toLowerCase().includes(x.toLowerCase())||U.patientId.toLowerCase().includes(x.toLowerCase()));return h?e.jsx("div",{className:"p-6",children:"Loading invoices..."}):e.jsxs("div",{className:"space-y-6 flex flex-col h-full",children:[e.jsx(Le,{className:"flex-shrink-0",children:e.jsx(pt,{className:"bg-[#358E83] text-white",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ht,{children:"Available Invoices"}),e.jsx(pn,{className:"text-white/80",children:"View invoices fetched from EMR and Pharmacy systems. Select an invoice and click Process to proceed with payment."})]}),e.jsx("div",{className:"relative",children:e.jsxs(ie,{variant:"ghost",size:"icon",onClick:()=>fe(!0),className:"text-white hover:bg-white/20 relative ml-4",children:[e.jsx(uN,{className:"h-5 w-5"}),Ee.length>0&&e.jsx("span",{className:"absolute top-0 right-0 h-5 w-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-semibold",children:Ee.length>9?"9+":Ee.length})]})})]})})}),e.jsx(Gt,{open:me,onOpenChange:fe,children:e.jsxs(Bt,{className:"max-w-lg",children:[e.jsx(Ut,{children:e.jsx(Ht,{children:"Notifications"})}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:Ee.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{className:"text-sm",children:"No notifications yet"})}):Ee.map(U=>e.jsx("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-lg",children:H(U.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900 break-words",children:U.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:R(U.timestamp)})]})]})},U.id))}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx(ie,{variant:"outline",size:"sm",onClick:()=>xe([]),className:"flex-1",children:"Clear All"}),e.jsx(ie,{variant:"outline",size:"sm",onClick:()=>fe(!1),className:"flex-1",children:"Close"})]})]})}),e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx(us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx(Ue,{placeholder:"Search invoices by number, patient name, or ID...",value:x,onChange:U=>v(U.target.value),className:"pl-10"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-6",children:ee.length===0?e.jsx(Le,{children:e.jsxs(Be,{className:"p-8 text-center text-gray-500",children:[e.jsx(ls,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium",children:"No invoices found"}),e.jsx("p",{className:"text-sm mt-2",children:s.length===0?"No invoices available for billing.":"No invoices match your search criteria."})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ee.map(U=>e.jsxs("div",{className:"group relative bg-white rounded-2xl border-2 border-gray-200 hover:border-[#358E83] shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden cursor-pointer",onClick:()=>te(U),children:[e.jsxs("div",{className:"relative h-32 bg-[#358E83] p-6 text-white",children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(Nt,{className:`${L(U.status)} text-xs font-semibold`,children:e.jsxs("span",{className:"flex items-center space-x-1",children:[ce(U.status),e.jsx("span",{children:U.status.toUpperCase()})]})})}),e.jsxs("p",{className:"text-sm font-medium opacity-90",children:["Invoice #",U.number.split("-")[1]?.slice(-6)||U.number]}),e.jsxs("p",{className:"text-3xl font-bold mt-2",children:["",U.total.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 font-semibold uppercase tracking-wide",children:"Patient"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:U.patientName}),U.patientId&&e.jsx("p",{className:"text-sm text-gray-600",children:U.patientId})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4 border-y border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-semibold uppercase",children:"Items"}),e.jsx("p",{className:"text-2xl font-bold text-[#358E83]",children:U.items?.length||0})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 font-semibold uppercase",children:"Date"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:A(U.createdAt||U.date)})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{className:"font-medium",children:["",U.subtotal.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),U.discount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Discount:"}),e.jsxs("span",{className:"font-medium",children:["-",U.discount.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),U.tax&&U.tax>0&&e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Tax:"}),e.jsxs("span",{className:"font-medium",children:["",(U.tax||0).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3",children:[e.jsxs(ie,{variant:"outline",size:"sm",onClick:q=>{q.stopPropagation(),te(U)},className:"flex-1 border-gray-300 hover:bg-gray-100 text-gray-700",children:[e.jsx($r,{size:16}),e.jsx("span",{className:"ml-1",children:"View"})]}),e.jsxs(ie,{onClick:q=>{q.stopPropagation(),D(U)},className:"flex-1 bg-[#358E83] hover:bg-[#358E83]/90 text-white",size:"sm",children:[e.jsx(xa,{size:16}),e.jsx("span",{className:"ml-1",children:"Process"})]})]}),e.jsx("div",{className:"absolute inset-0 bg-[#358E83]/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none rounded-2xl"})]},U.id))})}),e.jsx(Gt,{open:f,onOpenChange:y,children:e.jsxs(Bt,{className:"max-w-xl max-h-[90vh] overflow-auto p-4",children:[e.jsxs(Ut,{className:"pb-2",children:[e.jsx(Ht,{className:"text-lg",children:d?.number}),e.jsx(dn,{className:"text-xs",children:"Detailed invoice information"})]}),d&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-0.5",children:"Invoice Number"}),e.jsx("p",{className:"font-semibold text-sm",children:d.number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-0.5",children:"Patient"}),e.jsx("p",{className:"font-semibold",children:d.patientName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-0.5",children:"Invoice Date"}),e.jsx("p",{className:"text-sm",children:A(d.date)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-0.5",children:"Status"}),e.jsx(Nt,{className:`${L(d.status)} text-xs`,children:d.status.toUpperCase()})]})]}),e.jsx(Un,{className:"my-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Services & Items"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-1.5 text-left text-xs",children:"Description"}),e.jsx("th",{className:"px-3 py-1.5 text-center text-xs",children:"Category"}),e.jsx("th",{className:"px-3 py-1.5 text-center text-xs",children:"Qty"}),e.jsx("th",{className:"px-3 py-1.5 text-right text-xs",children:"Rate"}),e.jsx("th",{className:"px-3 py-1.5 text-right text-xs",children:"Amount"})]})}),e.jsx("tbody",{children:d?.items?.map(U=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-1.5 text-xs",children:U.description}),e.jsx("td",{className:"px-3 py-1.5 text-center text-xs text-gray-600",children:U.category}),e.jsx("td",{className:"px-3 py-1.5 text-center text-xs",children:U.quantity}),e.jsxs("td",{className:"px-3 py-1.5 text-right text-xs",children:["",U.rate.toLocaleString()]}),e.jsxs("td",{className:"px-3 py-1.5 text-right font-medium text-xs",children:["",U.amount.toLocaleString()]})]},U.id))})]})})]}),e.jsx(Un,{className:"my-2"}),(()=>{const U=M(d);return U.emr||U.pharmacy?e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Data Sources"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[U.emr&&e.jsx(Le,{className:"border-green-200 bg-green-50",children:e.jsxs(Be,{className:"p-2",children:[e.jsx("p",{className:"font-medium text-green-900 text-xs mb-1",children:" EMR Services"}),e.jsx("p",{className:"text-xs text-green-800",children:"Services from Electronic Medical Records"})]})}),U.pharmacy&&e.jsx(Le,{className:"border-blue-200 bg-blue-50",children:e.jsxs(Be,{className:"p-2",children:[e.jsx("p",{className:"font-medium text-blue-900 text-xs mb-1",children:" Pharmacy Records"}),e.jsx("p",{className:"text-xs text-blue-800",children:"Medicines and pharmacy items"})]})})]})]}):null})(),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["",(d.subtotal||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),d.discount>0&&e.jsxs("div",{className:"flex justify-between text-xs text-green-600",children:[e.jsxs("span",{children:["Discount (",d.discountType,"):"]}),e.jsxs("span",{children:["-",d.discount.toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),d.tax&&d.tax>0&&e.jsxs("div",{className:"flex justify-between text-xs text-blue-600",children:[e.jsx("span",{children:"VAT (12%):"}),e.jsxs("span",{children:["",d.tax.toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),e.jsx(Un,{className:"my-1"}),e.jsxs("div",{className:"flex justify-between font-semibold text-sm",children:[e.jsx("span",{children:"Total Due:"}),e.jsxs("span",{className:"text-[#358E83]",children:["",d.total.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),d.notes&&e.jsxs(e.Fragment,{children:[e.jsx(Un,{className:"my-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-xs mb-1",children:"Notes"}),e.jsx("p",{className:"text-xs text-gray-700 bg-gray-50 p-2 rounded",children:d.notes})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[e.jsx(ie,{variant:"outline",onClick:()=>y(!1),size:"sm",children:"Close"}),e.jsxs(ie,{onClick:()=>{D(d),y(!1)},className:"bg-[#358E83] hover:bg-[#358E83]/90 text-white",size:"sm",children:[e.jsx(xa,{className:"mr-1 h-3 w-3"}),"Process Payment"]})]})]})]})})]})}function nc(n){if(!n)return 0;const s=i=>{if(i==null)return;const l=Number(i);return Number.isFinite(l)?l:void 0},a=[n.subtotal,n.amount,n.total,n.totalAmount,n.totalBeforeTax,n.total_price,n.price];for(const i of a){const l=s(i);if(l!==void 0)return l}return Array.isArray(n.items)&&n.items.length>0?n.items.reduce((i,l)=>i+Number(l.totalPrice??l.amount??l.price??l.unitPrice??0),0):Array.isArray(n.lines)&&n.lines.length>0?n.lines.reduce((i,l)=>i+Number(l.totalPrice??l.amount??l.price??0),0):0}const ir="http://localhost:5000/api",Qx=[{id:"cash",name:"Cash Payment",icon:cN,color:"text-green-600"},{id:"gcash",name:"GCash",icon:Wg,color:"text-blue-500"},{id:"paymaya",name:"PayMaya",icon:Wg,color:"text-green-500"}];function fI({userSession:n}){const[s,a]=p.useState(""),[i,l]=p.useState(!1),[d,u]=p.useState(""),[f,y]=p.useState(""),[x,v]=p.useState("all"),[h,C]=p.useState(!1),[P,S]=p.useState([]),[w,b]=p.useState(!1),[E,T]=p.useState(!1),[z,B]=p.useState(null),[Q,X]=p.useState(""),[G,J]=p.useState([]),[ue,ge]=p.useState(""),[Ee,xe]=p.useState(""),[me,fe]=p.useState("percentage"),[F,ne]=p.useState(""),[te,D]=p.useState(""),[L,ce]=p.useState(""),[A,R]=p.useState({invoiceNumber:"",patientName:"",patientId:"",amount:"",method:"",reference:""}),[H,M]=p.useState(null),[ee,U]=p.useState(!1),[q,le]=p.useState(!1),[he,ve]=p.useState(null),[k,Y]=p.useState(null),[Ie,Fe]=p.useState(!1),[O,ze]=p.useState([]),[W,Ve]=p.useState([]),[Re,$e]=p.useState(null),ot=N=>{const ae=N.createdBy||N.createdByName||n?.name||"system",Ne=N.createdByRole||n?.role||"user",Ae=N._id||N.id||N.paymentId||"",Me=N.invoiceNumber||N.invoiceNo||N.number||N.ref||N.reference||"";let je=N.patientName||N.patient||N.name||"",_e=N.patientId||N.accountId||N.patient_id||"";const Oe=N.patient&&typeof N.patient=="object"?N.patient:N.patientInfo&&typeof N.patientInfo=="object"?N.patientInfo:null;if(Oe)try{const fs=tn(Oe),ji=Tt(Oe);fs&&fs!==""?_e=fs:ji&&ji!==""&&(_e=ji),je=je||Oe.name||`${Oe.firstName||""} ${Oe.lastName||""}`.trim()}catch{}const nt=Number(N.amount??N.total??N.paymentAmount??N.paid??0)||0,Ye=Number(N.subtotal??N.amount??N.total??0)||0,At=Number(N.discount??N.discountAmount??0)||0,It=Number(N.tax??0)||0,yt=N.method||N.paymentMethod||"",Rt=(N.status||"completed").toString().toLowerCase();let Zt=N.paymentDate||N.date||N.createdAt||new Date().toISOString();try{Zt=Zt instanceof Date?Zt.toISOString():new Date(Zt).toISOString()}catch{Zt=new Date().toISOString()}const Pr=Zt,Qs=N.time||(Pr?new Date(Pr).toLocaleTimeString():""),Wr=N.reference||N.ref||"",Oo=Array.isArray(N.items)?N.items:Array.isArray(N.lines)?N.lines:[];return{_id:N._id,id:Ae,invoiceNumber:Me,patientName:je,patientId:_e,amount:nt,subtotal:Ye,discount:At,tax:It,method:yt,status:Rt,date:Pr,time:Qs,reference:Wr,items:Oo,createdBy:ae,createdByRole:Ne,raw:N}},V=async N=>{try{return await jt.post(`${ir}/payments`,N)}catch{return await jt.post(`${ir}/billing/payments`,N)}},pe=async N=>{try{return typeof V=="function"?await V(N):await jt.post(`${ir}/payments`,N)}catch{try{return await jt.post(`${ir}/billing/payments`,N)}catch(Ne){throw Ne}}},we=async()=>{try{if(typeof wc=="function"){const Me=await wc(),_e=(Array.isArray(Me)?Me:Me?.data||[]).map(Oe=>{const nt=Oe.patientId||Oe.accountId||Oe.patient||"",Ye=Array.isArray(O)?O.find(At=>String(Tt(At))===String(nt)):null;return Ye&&(Oe.patientId=tn(Ye)||Tt(Ye)||Oe.patientId),Oe});S(_e);return}const ae=(await jt.get(`${ir}/invoices`))?.data,Ae=(Array.isArray(ae)?ae:ae?.data||[]).map(Me=>{const je=Me.patientId||Me.accountId||Me.patient||"",_e=Array.isArray(O)?O.find(Oe=>String(Tt(Oe))===String(je)):null;return _e&&(Me.patientId=tn(_e)||Tt(_e)||Me.patientId),Me});S(Ae)}catch(N){console.error("Error fetching invoices",N),S([]),se.error("Failed to load invoices")}},mt=async()=>{try{if(typeof jc=="function"){const je=await jc(),nt=(Array.isArray(je)?je:je?.data||[]).map(Ye=>{const At=Ye.patientId||Ye.accountId||Ye.patient||"",It=Array.isArray(O)?O.find(yt=>String(Tt(yt))===String(At)):null;return It&&(Ye.patientId=tn(It)||Tt(It)||Ye.patientId),Ye}).map(Ye=>ot(Ye));nt.sort((Ye,At)=>{const It=new Date(Ye.date||Ye.createdAt||0).getTime();return new Date(At.date||At.createdAt||0).getTime()-It}),J(nt);return}const ae=(await jt.get(`${ir}/payments`))?.data,Me=(Array.isArray(ae)?ae:ae?.data||[]).map(je=>{const _e=je.patientId||je.accountId||je.patient||"",Oe=Array.isArray(O)?O.find(nt=>String(Tt(nt))===String(_e)):null;return Oe&&(je.patientId=tn(Oe)||Tt(Oe)||je.patientId),je}).map(je=>ot(je));Me.sort((je,_e)=>{const Oe=new Date(je.date||je.createdAt||0).getTime();return new Date(_e.date||_e.createdAt||0).getTime()-Oe}),J(Me)}catch(N){console.error("Error fetching payments",N),J([]),se.error("Failed to load payments")}},ct=async N=>{try{return await jt.delete(`${ir}/payments/${N}`)}catch{return await jt.delete(`${ir}/billing/payments/${N}`)}},Dt=async()=>{try{if(typeof li=="function"){const Ne=await li();ze(Array.isArray(Ne)?go(Ne):Ne?.data||[]);return}const ae=(await jt.get(`${ir}/patients`))?.data;ze(Array.isArray(ae)?go(ae):ae?.data||[])}catch(N){console.warn("Failed to fetch patients list:",N),ze([])}};p.useEffect(()=>{(async()=>{try{vn.isRemoteSyncSuppressed&&vn.isRemoteSyncSuppressed()?await Dt():await Promise.all([mt(),we(),Dt()])}catch(Ne){console.error("PaymentProcessing load error",Ne)}})();try{let Ne=window.localStorage.getItem("selectedInvoiceForProcessing");if(Ne||(Ne=window.localStorage.getItem("selectedInvoiceForProcessingNumber")),Ne){ve(Ne),l(!0);try{(async()=>{try{const Ae=await ex(String(Ne));if(Ae){const Me=Array.isArray(Ae)?Ae[0]:Ae?.data?Ae.data:Ae;Me&&S(je=>je.find(Oe=>Oe._id&&Oe._id===(Me._id||Me.id)||Oe.id&&Oe.id===(Me._id||Me.id)||Oe.number&&(Oe.number===Me.number||Oe.number===String(Ne)))?je:[Me,...je]);return}}catch{}try{const Me=(await jt.get(`${ir}/invoices`))?.data,je=Array.isArray(Me)?Me:Me?.data||[];if(je&&je.length>0){const _e=je.find(Oe=>String(Oe._id)===String(Ne)||String(Oe.id)===String(Ne)||String(Oe.number)===String(Ne)||String(Oe.invoiceNumber)===String(Ne));_e&&S(Oe=>Oe.find(Ye=>Ye._id&&Ye._id===(_e._id||_e.id)||Ye.id&&Ye.id===(_e._id||_e.id)||Ye.number&&(Ye.number===_e.number||Ye.number===String(Ne)))?Oe:[_e,...Oe])}}catch{}})()}catch{}try{window.localStorage.removeItem("selectedInvoiceForProcessing")}catch{}try{window.localStorage.removeItem("selectedInvoiceForProcessingNumber")}catch{}}}catch{}const ae=Ne=>{try{const Ae=Ne?.detail||{};if(!Ae)return;if(Ae.view==="payment-processing"||Ae.view==="payment"||Ae.action==="process-invoice"){const Me=Ae.invoiceId||Ae.invoiceNumber||Ae.selectedInvoice||Ae.invoice||null;if(Me){ve(String(Me)),l(!0);try{(async()=>{try{const je=await ex(String(Me));if(je){const _e=Array.isArray(je)?je[0]:je?.data?je.data:je;_e&&S(Oe=>Oe.find(Ye=>Ye._id&&Ye._id===(_e._id||_e.id)||Ye.id&&Ye.id===(_e._id||_e.id)||Ye.number&&(Ye.number===_e.number||Ye.number===String(Me)))?Oe:[_e,...Oe]);return}}catch{}try{const _e=(await jt.get(`${ir}/invoices`))?.data,Oe=Array.isArray(_e)?_e:_e?.data||[];if(Oe&&Oe.length>0){const nt=Oe.find(Ye=>String(Ye._id)===String(Me)||String(Ye.id)===String(Me)||String(Ye.number)===String(Me)||String(Ye.invoiceNumber)===String(Me));nt&&S(Ye=>Ye.find(It=>It._id&&It._id===(nt._id||nt.id)||It.id&&It.id===(nt._id||nt.id)||It.number&&(It.number===nt.number||It.number===String(Me)))?Ye:[nt,...Ye])}}catch{}})()}catch{}try{window.localStorage.setItem("selectedInvoiceForProcessing",String(Me))}catch{}try{window.localStorage.setItem("selectedInvoiceForProcessingNumber",String(Ae.invoiceNumber||Ae.invoiceNo||Ae.number||Me))}catch{}}}}catch{}};return window.addEventListener("navigate-to",ae),()=>{window.removeEventListener("navigate-to",ae)}},[]),p.useEffect(()=>{try{const N=A.patientId||"";if(!N){$e(null);return}const ae=Tf.getPatientEmrData(N);$e(ae)}catch(N){console.warn("Failed to load EMR data for patient",N),$e(null)}},[A.patientId,ue]),p.useEffect(()=>{if(!he||!P||P.length===0)return;const N=he,ae=P.find(Ne=>Ne._id&&String(Ne._id)===String(N)||Ne.id&&String(Ne.id)===String(N)||Ne.number&&String(Ne.number)===String(N)||Ne.invoiceNumber&&String(Ne.invoiceNumber)===String(N));if(ae){const Ne=ae.number||ae.invoiceNumber||ae.invoiceNo||ae._id||ae.id||"",Ae=ae.patientId||ae.patient||ae.accountId||"",Me=Array.isArray(O)?O.find(nt=>String(Tt(nt))===String(Ae)):null,je=Me?Tt(Me):Ae,_e=ae.patientName||(Me?Me.name:ae.patient||"");ge(Ne),R(nt=>({...nt,invoiceNumber:Ne,patientName:_e,patientId:je}));const Oe=nc(ae);Oe&&Oe>0&&(ce(String(Oe)),R(nt=>({...nt,amount:String(Oe)}))),ae.discount&&ae.discount>0&&(ae.discountPercentage?(fe("percentage"),ne(String(ae.discountPercentage))):(fe("fixed"),ne(String(ae.discount))),D(ae.discountType||"")),se.success(`Invoice ${Ne} selected for processing`),ve(null)}},[P,he]),p.useEffect(()=>{const N=()=>{try{const Ne=kc.getActiveDiscounts();Ve(Ne||[])}catch(Ne){console.error("Failed to load discounts",Ne)}};N();const ae=()=>N();return window.addEventListener("discounts-updated",ae),()=>window.removeEventListener("discounts-updated",ae)},[]);const xt=N=>{if(!N)return{age:0,sex:"Unknown"};const ae=O.find(je=>String(Tt(je))===String(N)||tn(je)===String(N));if(!ae)return{age:0,sex:"Unknown"};const Ne=ae.birthDate||ae.dateOfBirth||ae.birthdate;let Ae=0;if(Ne){const je=new Date(Ne),_e=new Date;Ae=_e.getFullYear()-je.getFullYear();const Oe=_e.getMonth()-je.getMonth();(Oe<0||Oe===0&&_e.getDate()<je.getDate())&&Ae--}const Me=ae.gender||ae.sex||ae.sex||"Unknown";return{age:Ae,sex:Me}},Xt=N=>{if(!N)return{age:0,sex:"Unknown"};const ae=N.raw&&(N.raw.patient||N.raw.patientInfo||N.raw.patientDetails)||N.raw;if(ae&&typeof ae=="object"){const Ae=ae.dateOfBirth||ae.birthDate||ae.dob||ae.birth_date||ae.birthdate;let Me=0;if(Ae){const _e=new Date(Ae);if(!isNaN(_e.getTime())){const Oe=new Date;Me=Oe.getFullYear()-_e.getFullYear();const nt=Oe.getMonth()-_e.getMonth();(nt<0||nt===0&&Oe.getDate()<_e.getDate())&&Me--}}const je=ae.gender||ae.sex||ae.sexAssignedAtBirth||ae.gender_identity||"Unknown";if(Me||je!=="Unknown")return{age:Me||0,sex:je}}const Ne=xt(N.patientId||"");if(Ne&&(Ne.age&&Ne.age>0||Ne.sex&&Ne.sex!=="Unknown"))return Ne;if(N.patientName){const Ae=O.find(Me=>{const je=(Me.name||`${Me.firstName||""} ${Me.lastName||""}`).toString().toLowerCase();return je&&je.includes((N.patientName||"").toString().toLowerCase())});if(Ae){const Me=Ae.birthDate||Ae.dateOfBirth||Ae.birthdate;let je=0;if(Me){const Oe=new Date(Me);if(!isNaN(Oe.getTime())){const nt=new Date;je=nt.getFullYear()-Oe.getFullYear();const Ye=nt.getMonth()-Oe.getMonth();(Ye<0||Ye===0&&nt.getDate()<Oe.getDate())&&je--}}const _e=Ae.gender||Ae.sex||"Unknown";return{age:je||0,sex:_e}}}return{age:0,sex:"Unknown"}},I=N=>{if(!N)return"N/A";const ae=N.raw||{},Ne=[ae.invoiceDate,ae.dateIssued,ae.issuedAt,ae.paymentDate,N.date,ae.createdAt,ae.date];for(const Ae of Ne){if(!Ae)continue;const Me=new Date(Ae);if(!isNaN(Me.getTime()))return Me.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}return"N/A"};p.useEffect(()=>{if(!L){R(je=>({...je,amount:""}));return}const N=parseFloat(L)||0;let ae=0;z?ae=kc.calculateDiscount(N,z):F&&(ae=me==="percentage"?N*(parseFloat(F)||0)/100:parseFloat(F)||0);let Ne=0;const Ae=P.find(je=>je.number===ue||je.invoiceNumber===ue||je._id===ue);if(Ae&&Array.isArray(Ae.items)){const je=Ae.items.filter(_e=>kn(_e)).reduce((_e,Oe)=>_e+Number(Oe.totalPrice||Oe.amount||Oe.price||0),0);je>0&&(Ne=(N>0?Math.max(0,je-ae*(je/N)):je)*.12)}const Me=Math.max(0,N-ae+Ne);R(je=>({...je,amount:Me.toFixed(2)}))},[L,F,me,z,ue,P]);const Te=G.reduce((N,ae)=>N+(ae.amount||0),0),qe=G.filter(N=>N.status==="completed"),ft=G.filter(N=>N.status==="processing"),gt=G.filter(N=>N.status==="failed"),hn=()=>{if(!s){se.error("Please select a payment method.");return}if(!A.amount||parseFloat(A.amount||"0")<=0){se.error("Invalid payment amount.");return}if(s==="cash"){const N=parseFloat(Q||"0"),ae=parseFloat(A.amount||"0");if(!Q||isNaN(N)||N<ae){se.error("Cash received must be equal or greater than amount.");return}}U(!0)},St=async()=>{try{const N=P.find(Rt=>Rt._id&&Rt._id===ue||Rt.id&&Rt.id===ue||Rt.number&&Rt.number===ue||Rt.invoiceNumber&&Rt.invoiceNumber===ue);if(!N&&!ue){console.error("handleProcessPayment: no selected invoice"),se.error("No invoice selected");return}const ae=N?._id||N?.id||ue;if(!ae){console.error("handleProcessPayment: invoice id missing",N),se.error("Invalid invoice selected");return}let Ne=parseFloat(String(A.amount||""))||parseFloat(L||"0")||0;(!Ne||Ne===0)&&N&&(Ne=(Array.isArray(N.items)?N.items:N.lines||[]).reduce((Pr,Qs)=>Pr+Number(Qs.totalPrice??Qs.amount??Qs.price??0),0)||Ne);const Ae=s||A.method||"cash",Me=(A.reference||"").toString(),je={invoiceId:ae,invoiceNumber:ue||N?.number||N?.invoiceNumber,patientId:A.patientId||N&&(N.patientId||N.accountId)||void 0,patientName:A.patientName||(()=>{if(!N)return"";if(N.patientName)return N.patientName;if(N.patient&&typeof N.patient=="string")return N.patient;if(N.patient&&typeof N.patient=="object")return N.patient.name||`${N.patient.firstName||""} ${N.patient.lastName||""}`.trim();const Rt=N.patientId||N.accountId||N.patient&&N.patient._id,Zt=O.find(Pr=>String(Tt(Pr))===String(Rt)||tn(Pr)===String(Rt));return Zt?Zt.name||`${Zt.firstName||""} ${Zt.lastName||""}`.trim():N.patientName||N.patient||""})(),amount:Ne,method:Ae,status:"completed",paymentDate:new Date().toISOString(),reference:A.reference||void 0,note:Me},_e=N?Array.isArray(N.items)?N.items:N.lines||[]:[],Oe=_e&&_e.length>0?_e.reduce((Rt,Zt)=>Rt+Number(Zt.totalPrice??Zt.amount??Zt.price??0),0):parseFloat(L||"0")||Ne||0,nt={...je,items:_e,subtotal:Oe},Ye=await pe(nt),At=Ye?.data||Ye;if(console.debug("Payment create response:",At),!(Ye?.status===200||Ye?.status===201||At?.success)&&(!At||!At._id&&!At.id&&!At.data))throw new Error("Payment creation failed");try{await jt.put(`${ir}/invoices/${ae}`,{status:"paid"})}catch(Rt){console.warn("updateInvoice failed (non-fatal):",Rt)}const It=At.data?At.data:(At._id,At),yt=ot(It);if(Array.isArray(yt.items)&&yt.items.length===0&&_e&&_e.length>0&&(yt.items=_e),(!yt.subtotal||yt.subtotal===0)&&(yt.subtotal=Oe),!yt.patientId&&nt.patientId&&(yt.patientId=nt.patientId),(!yt.patientName||yt.patientName==="")&&nt.patientName&&(yt.patientName=nt.patientName),Ae==="cash"){const Rt=Number(Q||0);yt.cashReceived=yt.cashReceived||Rt;const Zt=Number(yt.amount||yt.subtotal||0);yt.change=Math.max(0,Rt-Zt)}J(Rt=>[yt,...Rt]),M(yt);try{vn.addPaymentRecord({invoiceNumber:yt.invoiceNumber||"",patientName:yt.patientName||"",patientId:yt.patientId||"",amount:Number(yt.amount)||0,method:yt.method||"",reference:yt.reference||yt.ref||"",date:yt.date||new Date().toISOString(),time:yt.time||(yt.date?new Date(yt.date).toLocaleTimeString():void 0),status:yt.status||"completed"})}catch(Rt){console.warn("billingService.addPaymentRecord failed",Rt)}try{window.dispatchEvent(new CustomEvent("billing-updated",{detail:{source:"payment-processing",id:yt.id||yt._id}}))}catch{}await mt(),await we(),se.success("Payment processed"),U(!1),l(!1),le(!0)}catch(N){console.error("process payment error",N),se.error("Payment failed")}},Ce=()=>{if(!H){se.error("No processed payment to print");return}const N=document.getElementById("payment-receipt-print");if(!N){se.error("Receipt content not found");return}const ae=window.open("","_blank");ae&&(ae.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <meta charset="utf-8" />
          <title>Payment Receipt - MediCare Hospital</title>
          <style>
            @page { size: A4 landscape; margin: 18mm; }
            /* Printed typography tuned to match hospital receipt */
            body {
              font-family: 'Times New Roman', Georgia, serif;
              color: #000;
              background: #fff;
              font-size: 12px;
              margin: 0;
              padding: 0;
              -webkit-print-color-adjust: exact;
            }
            .receipt-container {
              max-width: 1100px;
              margin: 0 auto;
              padding: 8px 12px;
            }
            header .hospital-name { font-size: 22px; font-weight: 700; letter-spacing: 0.5px; }
            header .hospital-meta { font-size: 11px; color: #333; margin-top: 4px; }

            table { width: 100%; border-collapse: collapse; margin-top: 10px; }
            thead th { padding: 8px 6px; border-bottom: 2px solid #000; font-weight: 700; text-transform: uppercase; font-size: 12px; }
            tbody td { padding: 8px 6px; border-bottom: 1px solid #ddd; vertical-align: middle; }
            td.description { font-size: 12px; }
            td.amount, .text-right { text-align: right; }

            .category-row td { font-weight: 600; }
            .totals-row td { font-weight: 700; border-top: 2px solid #000; }

            .grand-total { margin-top: 10px; text-align: right; font-size: 18px; font-weight: 800; }

            .meta-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
            .meta-grid .left, .meta-grid .right { font-size: 12px; }

            .payment-details { margin-top: 14px; border-top: 1px solid #ccc; padding-top: 8px; font-size: 12px; }
            .payment-details .label { color: #333; font-weight: 600; }
            .payment-details .value { text-align: right; }

            .footer { margin-top: 18px; text-align: center; font-size: 11px; color: #333; }
          </style>
        </head>
        <body>
          <div class="receipt-container small" style="max-width:1100px; margin:0 auto;">
            ${N.innerHTML}
          </div>
        </body>
      </html>
    `),ae.document.close(),ae.focus(),setTimeout(()=>{ae.print(),ae.close()},300))},kt=async()=>{if(k)try{const N=await ct(k);N?.data?.success||N.status===200||N.status===204?(J(Ne=>Ne.filter(Ae=>(Ae._id||Ae.id)!==k)),se.success("Payment deleted")):se.error("Failed to delete payment")}catch(N){console.error("Delete error",N),se.error("Server error while deleting payment")}finally{Fe(!1),Y(null)}},dt=G.filter(N=>{const ae=(N.invoiceNumber||"").toLowerCase().includes(d.toLowerCase())||(N.patientName||"").toLowerCase().includes(d.toLowerCase())||(N.reference||"").toLowerCase().includes(d.toLowerCase()),Ne=x==="all"||N.status===x;return ae&&Ne}),Mt=N=>{switch(N){case"completed":return"bg-green-100 text-green-800";case"processing":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-blue-100 text-blue-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},tt=N=>{switch(N){case"completed":return e.jsx(Br,{className:"text-green-600",size:16});case"processing":return e.jsx(vr,{className:"text-yellow-600",size:16});case"pending":return e.jsx(vr,{className:"text-blue-600",size:16});case"failed":return e.jsx(ls,{className:"text-red-600",size:16});default:return e.jsx(vr,{className:"text-gray-600",size:16})}},kn=N=>{if(!N||typeof N!="object")return!1;const ae=(N.category||"").toLowerCase();return!["consultation","laboratory","diagnostic","service","procedure"].some(Ae=>ae.includes(Ae))},Tn=N=>{const ae=Qx.find(Ae=>Ae.id===N);if(!ae)return e.jsx(or,{className:"text-gray-600",size:20});const Ne=ae.icon;return e.jsx(Ne,{className:ae.color,size:20})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(Le,{children:e.jsx(Be,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Payments"}),e.jsxs("p",{className:"text-2xl font-bold",children:["",Number(Te||0).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsx(or,{className:"text-[#358E83]",size:32})]})})}),e.jsx(Le,{children:e.jsx(Be,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:qe.length})]}),e.jsx(Br,{className:"text-green-600",size:32})]})})}),e.jsx(Le,{children:e.jsx(Be,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Processing"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:ft.length})]}),e.jsx(vr,{className:"text-yellow-600",size:32})]})})}),e.jsx(Le,{children:e.jsx(Be,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Failed"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:gt.length})]}),e.jsx(ls,{className:"text-red-600",size:32})]})})})]}),!i&&e.jsx("div",{className:"flex justify-end",children:e.jsxs(ie,{onClick:()=>l(!0),className:"bg-[#E94D61] hover:bg-[#E94D61]/90 text-white",children:[e.jsx(ii,{className:"mr-2",size:16})," Process New Payment"]})}),!i&&e.jsxs(Le,{children:[e.jsx(pt,{className:"bg-[#358E83] text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ht,{className:"flex items-center",children:[e.jsx(or,{className:"mr-2",size:20})," Recent Payments"]}),e.jsx(pn,{className:"text-white/80",children:"View and manage payment transactions"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"relative flex items-center",children:[e.jsx(us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx(Ue,{placeholder:"Search payments...",value:d,onChange:N=>u(N.target.value),className:"pl-10 w-64 bg-white text-gray-900 placeholder:text-gray-500"}),e.jsx("span",{className:"ml-3 text-sm text-white/80 bg-black/10 px-2 py-1 rounded",children:x==="all"?"All":x})]}),e.jsxs(nn,{value:x,onValueChange:v,children:[e.jsx(sn,{className:"w-40 bg-white text-gray-900",children:e.jsx(rn,{placeholder:"Filter by status"})}),e.jsxs(an,{children:[e.jsx(lt,{value:"all",children:"All Status"}),e.jsx(lt,{value:"completed",children:"Completed"}),e.jsx(lt,{value:"processing",children:"Processing"}),e.jsx(lt,{value:"pending",children:"Pending"}),e.jsx(lt,{value:"failed",children:"Failed"})]})]})]})]})}),e.jsx(Be,{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:dt.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(or,{className:"mx-auto mb-3 opacity-50",size:48}),e.jsx("p",{children:"No payments found"})]}):dt.map(N=>e.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[Tn(N.method),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:N.invoiceNumber}),e.jsx("p",{className:"text-sm text-gray-600",children:(()=>{const ae=ss(O,N.patientId||N.id||N._id);return ae&&ae!=="N/A"?ae:N.patientName&&String(N.patientName).trim()!==""?`${N.patientName}`:"N/A"})()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Amount"}),e.jsxs("p",{className:"font-semibold",children:["",Number(N.amount||0).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Method"}),e.jsx("p",{className:"font-medium capitalize",children:N.method})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Date & Time"}),e.jsxs("p",{className:"font-medium",children:[new Date(N.date).toLocaleDateString("en-PH")," ",N.time]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Reference"}),e.jsx("p",{className:"font-medium",children:N.reference})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2 ml-4",children:[e.jsx(Nt,{className:Mt(N.status),children:e.jsxs("span",{className:"flex items-center space-x-1",children:[tt(N.status),e.jsx("span",{className:"ml-1 capitalize",children:N.status})]})}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(ie,{variant:"outline",size:"sm",onClick:async()=>{if(M(N),(!N.items||N.items.length===0)&&N.invoiceNumber)try{const ae=P.find(Ne=>Ne.number===N.invoiceNumber||Ne.invoiceNumber===N.invoiceNumber);ae&&Array.isArray(ae.items)&&ae.items.length>0&&(N.items=ae.items)}catch(ae){console.warn("Failed to fetch invoice items",ae)}le(!0)},children:e.jsx($r,{className:"h-4 w-4"})})})]})]})},N._id||N.id||N.reference))})})]}),i&&e.jsxs(Le,{children:[e.jsxs(pt,{className:"bg-[#358E83] text-white",children:[e.jsxs(ht,{className:"flex items-center",children:[e.jsx(xa,{className:"mr-2",size:20})," Process Payment"]}),e.jsx(pn,{className:"text-white/80",children:"Accept payment for patient invoices"})]}),e.jsxs(Be,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(ye,{children:"Select Invoice"}),e.jsxs(qm,{open:w,onOpenChange:b,children:[e.jsx(Wm,{asChild:!0,children:e.jsxs(ie,{variant:"outline",role:"combobox","aria-expanded":w,className:"w-full justify-between",children:[(()=>{const N=P.find(ae=>ae.number===ue||ae.invoiceNumber===ue||ae._id===ue);if(N){const Ne=(nc(N)||0).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2}),Ae=N.patientName||N.patient||"";return`${N.number||N.invoiceNumber||N._id||""} - ${Ae} (${Ne})`}return"Search and select an invoice..."})(),e.jsx(vy,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(Km,{className:"w-screen max-w-[95vw] p-0 left-1/2 transform -translate-x-1/2",children:e.jsxs(Bm,{children:[e.jsx(Um,{className:"w-full text-lg py-3",placeholder:"Search by invoice number or patient...",value:f,onChange:N=>y(N.target.value)}),e.jsxs(Hm,{children:[e.jsx(Vm,{children:"No invoice found."}),e.jsx(lc,{children:P.filter(N=>{const ae=(f||"").toLowerCase(),Ne=(N.number||N.invoiceNumber||N._id||"").toString().toLowerCase(),Ae=(N.patientName||N.patient||"").toString().toLowerCase();return ae===""||Ne.includes(ae)||Ae.includes(ae)}).map(N=>e.jsxs(cc,{value:`${N.number||N.invoiceNumber||N._id||""} ${N.patientName||N.patient||""}`,onSelect:()=>{const ae=N.number||N.invoiceNumber||N.invoiceNo||N._id||N.id||"",Ne=N.patientId||N.patient||N.accountId||"",Ae=N.patientName||N.patient||"";ge(ae),R(je=>({...je,invoiceNumber:ae,patientName:Ae,patientId:Ne}));const Me=nc(N);Me&&Me>0?(ce(String(Me)),R(je=>({...je,amount:String(Me)}))):(ce(""),R(je=>({...je,amount:""}))),N.discount&&N.discount>0?(N.discountPercentage?(fe("percentage"),ne(String(N.discountPercentage))):(fe("fixed"),ne(String(N.discount))),D(N.discountType||"")):(ne(""),D("")),b(!1),y(""),se.success(`Invoice ${ae} selected`)},children:[e.jsx(fc,{className:`mr-2 h-4 w-4 ${ue===(N.number||N.invoiceNumber||N._id||"")?"opacity-100":"opacity-0"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:N.number||N.invoiceNumber||N.id||"N/A"}),e.jsxs("div",{className:"text-sm text-gray-500",children:[N.patientName||N.patient&&(typeof N.patient=="string"?N.patient:N.patient.name)," (",ss(O,N.patientId||N.patient||N.accountId),") - ",(nc(N)||0).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]},N.number||N.invoiceNumber||N._id||N.id))})]})]})})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Search from ",P.length," available invoices"]})]}),e.jsxs("div",{children:[e.jsx(ye,{children:"Patient Name"}),e.jsx(Ue,{value:A.patientName,disabled:!0,placeholder:"Auto-filled from invoice",className:"bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx(ye,{children:"Subtotal Amount ()"}),e.jsx(Ue,{type:"number",value:L,onChange:N=>ce(N.target.value),placeholder:"Enter subtotal amount"})]})]}),L&&L!==""&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 space-y-4",children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Payment Breakdown"}),e.jsxs("div",{children:[e.jsx(ye,{children:"Select Discount/Promotion"}),e.jsxs(qm,{open:E,onOpenChange:T,children:[e.jsx(Wm,{asChild:!0,children:e.jsx(ie,{variant:"outline",role:"combobox","aria-expanded":E,className:"w-full justify-between bg-white",children:z?`${z.name} (${z.type==="percentage"?`${z.value}%`:`${z.value}`})`:"Search discounts (PWD, Senior, etc.)..."})}),e.jsx(Km,{className:"w-full p-0",children:e.jsxs(Bm,{children:[e.jsx(Um,{placeholder:"Search by name, code, or category..."}),e.jsxs(Hm,{children:[e.jsx(Vm,{children:"No discount found."}),e.jsx(lc,{children:W.map(N=>e.jsx(cc,{value:`${N.name} ${N.code}`,onSelect:()=>{B(N),T(!1),se.success(`${N.name} selected`)},children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:N.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[N.code,"  ",N.description]})]}),e.jsx("div",{className:"font-semibold text-green-600",children:N.type==="percentage"?`${N.value}%`:`${N.value}`})]})},N.id))}),e.jsx(lc,{children:e.jsxs(cc,{value:"custom-discount-manual-entry",onSelect:()=>{B(null),ne(""),D(""),T(!1),se.info("Enter custom discount manually")},children:[e.jsx(oo,{className:"mr-2 h-4 w-4 text-gray-500"}),e.jsx("span",{children:"Enter Custom Discount"})]})})]})]})})]})]}),e.jsxs("div",{className:"border-t border-blue-300 pt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),e.jsxs("span",{className:"font-medium",children:["",parseFloat(L||"0").toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),F&&F!==""&&e.jsxs("div",{className:"flex justify-between text-sm text-green-700",children:[e.jsxs("span",{children:["Discount",te?` (${te})`:"",me==="percentage"?` - ${F}%`:"",":"]}),e.jsxs("span",{className:"font-medium",children:["-",(()=>{const N=parseFloat(L)||0;return(me==="percentage"?N*parseFloat(F)/100:parseFloat(F)).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})})()]})]}),e.jsx("div",{className:"border-t border-blue-300 pt-2 mt-2"}),e.jsxs("div",{className:"flex justify-between font-semibold text-blue-900",children:[e.jsx("span",{children:"Total Amount to Pay:"}),e.jsxs("span",{className:"text-lg",children:["",parseFloat(A.amount||"0").toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),e.jsx(Un,{}),e.jsxs("div",{children:[e.jsx(ye,{className:"mb-3 block",children:"Select Payment Method"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-3",children:Qx.map(N=>{const ae=N.icon;return e.jsxs("button",{onClick:()=>a(N.id),className:`p-4 border-2 rounded-lg transition-all ${s===N.id?"border-[#E94D61] bg-[#E94D61]/5":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(ae,{className:`mx-auto mb-2 ${N.color}`,size:32}),e.jsx("p",{className:"text-sm font-medium text-center",children:N.name})]},N.id)})})]}),s==="cash"&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 space-y-3",children:[e.jsx("h4",{className:"font-medium text-green-900",children:"Cash Payment Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(ye,{children:"Amount to Pay ()"}),e.jsx(Ue,{type:"number",value:A.amount,disabled:!0,className:"bg-white"})]}),e.jsxs("div",{children:[e.jsx(ye,{children:"Cash Received ()"}),e.jsx(Ue,{type:"number",value:Q,onChange:N=>X(N.target.value),placeholder:"Enter cash received",className:"bg-white"})]}),e.jsxs("div",{children:[e.jsx(ye,{children:"Change ()"}),e.jsx(Ue,{type:"number",value:Q&&A.amount?Math.max(0,parseFloat(Q)-parseFloat(A.amount)).toFixed(2):"0.00",disabled:!0,className:"bg-white font-semibold text-green-600"})]})]})]}),s==="gcash"&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 space-y-3",children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"GCash Payment Instructions"}),e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[e.jsx("div",{className:"bg-white p-3 rounded-lg border-2 border-blue-300 shadow-sm w-48",children:e.jsx("img",{src:"/gcash-qr.svg",alt:"GCash QR Code",className:"w-full h-auto"})}),e.jsxs("div",{className:"text-center text-xs text-blue-900",children:[e.jsx("p",{className:"font-medium mb-1",children:"Scan with your GCash app"}),e.jsxs("p",{className:"text-blue-700",children:["Amount: ",e.jsxs("span",{className:"font-bold",children:["",Number(A.amount||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]})]})]}),s==="paymaya"&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 space-y-3",children:[e.jsx("h4",{className:"font-medium text-green-900",children:"PayMaya Payment Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(ye,{children:"Amount to Pay ()"}),e.jsx(Ue,{type:"number",value:A.amount,disabled:!0,className:"bg-white"})]}),e.jsxs("div",{className:"bg-green-100 border border-green-300 rounded p-3 text-sm text-green-900",children:[e.jsx("p",{className:"font-medium mb-1",children:"Transaction Details:"}),e.jsx("p",{children:"Please proceed with PayMaya app to complete the payment"}),e.jsxs("p",{className:"mt-2 text-xs text-green-700",children:["Reference: ",A.invoiceNumber||"INV-"+Date.now()]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(ie,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(ie,{onClick:hn,disabled:h||!s||!A.amount,className:"bg-[#358E83] hover:bg-[#358E83]/90 text-white",children:"Confirm Payment"})]})]})]}),e.jsx(zs,{open:ee,onOpenChange:U,children:e.jsxs(Bs,{children:[e.jsx(Us,{children:e.jsx(Vs,{children:"Confirm Payment Processing"})}),e.jsxs("div",{className:"px-6 pb-4 text-sm",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Please review the payment details before confirming:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsx("div",{className:"text-gray-600",children:"Invoice Number:"}),e.jsx("div",{className:"text-right font-medium",children:A.invoiceNumber||ue||H?.invoiceNumber||""}),e.jsx("div",{className:"text-gray-600",children:"Patient:"}),e.jsx("div",{className:"text-right font-medium",children:A.patientName||H?.patientName||""}),e.jsx("div",{className:"text-gray-600",children:"Payment Method:"}),e.jsx("div",{className:"text-right font-medium capitalize",children:s||A.method||"cash"})]}),e.jsx("hr",{className:"my-3"}),e.jsxs("div",{className:"grid grid-cols-2 items-center",children:[e.jsx("div",{className:"text-gray-600",children:"Subtotal:"}),e.jsxs("div",{className:"text-right font-medium",children:["",Number(H?.subtotal||L||A.amount||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"mt-4 flex items-end justify-between",children:[e.jsx("div",{children:e.jsx("div",{className:"text-sm text-gray-600",children:"Amount:"})}),e.jsxs("div",{className:"text-2xl font-bold text-[#358E83]",children:["",Number(A.amount||H?.amount||L||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),s==="cash"&&e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsx("div",{className:"text-gray-600",children:"Cash Received:"}),e.jsxs("div",{className:"text-right",children:["",Number(Q||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),e.jsx("div",{className:"text-gray-600",children:"Change:"}),e.jsxs("div",{className:"text-right text-green-600 font-medium",children:["",(()=>{const N=Number(A.amount||H?.amount||L||0),ae=Number(Q||0);return Math.max(0,ae-N).toLocaleString("en-PH",{minimumFractionDigits:2})})()]})]})]}),e.jsxs(Hs,{children:[e.jsx(Ws,{onClick:()=>U(!1),children:"Cancel"}),e.jsx(qs,{onClick:St,children:h?"Processing...":"Confirm & Process"})]})]})}),e.jsx(Gt,{open:q,onOpenChange:le,children:e.jsxs(Bt,{className:"max-w-full w-[min(1100px,80vw)] max-h-[90vh] overflow-y-auto receipt-dialog p-6 mx-auto",children:[e.jsxs(Ut,{children:[e.jsxs(Ht,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Payment Receipt"}),e.jsxs(ie,{variant:"outline",size:"sm",onClick:Ce,className:"ml-4",children:[e.jsx(xc,{className:"mr-2 h-4 w-4"}),"Print Receipt"]})]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Receipt generated successfully. Review the details below."})]}),e.jsx("div",{id:"payment-receipt-print",className:"space-y-6 print:p-8",children:H?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-[#358E83]",children:"MediCare Hospital"}),e.jsx("p",{className:"text-sm text-gray-600",children:"123 Health Street, Medical District, Philippines"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Tel: (02) 1234-5678 | Email: billing@medicare.ph"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-gray-600 text-xs",children:"Invoice Number"}),e.jsx("p",{className:"font-semibold",children:H.invoiceNumber})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-gray-600 text-xs",children:"Date Issued"}),e.jsx("p",{className:"font-semibold",children:I(H)})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-gray-600 text-xs",children:"Patient"}),e.jsx("p",{className:"font-semibold",children:H.patientName})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-gray-600 text-xs",children:"Patient ID"}),e.jsx("p",{className:"font-semibold",children:ss(O,H?.patientId||H?.id||H?._id)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-xs",children:"Age / Sex"}),e.jsxs("p",{className:"font-semibold",children:[Xt(H).age," / ",Xt(H).sex]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-xs",children:"Status"}),e.jsx(Nt,{className:Mt(H.status),children:(H.status||"paid").toUpperCase()})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Services Rendered"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Description"}),e.jsx("th",{className:"px-4 py-2 text-center",children:"Qty"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:Array.isArray(H.items)&&H.items.length>0?H.items.map((N,ae)=>e.jsxs("tr",{className:"border-t",children:[e.jsxs("td",{className:"px-4 py-2",children:[e.jsx("div",{children:N.description||N.name||N.medicationName||"Item"}),e.jsx("div",{className:"text-xs text-gray-500",children:N.category||N.group||""})]}),e.jsx("td",{className:"px-4 py-2 text-center",children:N.quantity??N.qty??1}),e.jsxs("td",{className:"px-4 py-2 text-right",children:["",Number(N.rate??N.unitPrice??N.price??N.totalPrice??0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"px-4 py-2 text-right",children:["",Number(N.amount??N.totalPrice??(N.quantity??1)*(N.rate??N.unitPrice??N.price??0)).toLocaleString("en-PH",{minimumFractionDigits:2})]})]},N.id||ae)):e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:"No items"}),e.jsx("td",{className:"px-4 py-2"}),e.jsx("td",{className:"px-4 py-2"}),e.jsx("td",{className:"px-4 py-2 text-right",children:"0.00"})]})})]})})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"w-96 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["",Number(H.subtotal||H.amount||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),H.discount&&Number(H.discount)>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Discount:"}),e.jsxs("span",{children:["-",Number(H.discount).toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),H.tax&&Number(H.tax)>0&&e.jsxs("div",{className:"flex justify-between text-blue-600 text-sm",children:[e.jsx("span",{children:"VAT on Medicines (12%):"}),e.jsxs("span",{children:["",Number(H.tax).toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),e.jsx("div",{className:"border-t my-2"}),e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total Amount Paid:"}),e.jsxs("span",{children:["",Number(H.amount||H.subtotal||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]})})}),e.jsx("div",{className:"border-t pt-4 space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Payment Method:"}),e.jsx("p",{className:"font-semibold capitalize",children:H.method||"Cash"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Reference Number:"}),e.jsx("p",{className:"font-semibold",children:H.reference||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Processed By:"}),e.jsx("p",{className:"font-semibold",children:H.createdBy||n?.name||"System"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Processed At:"}),e.jsx("p",{className:"font-semibold",children:new Date(H.date||H.createdAt||Date.now()).toLocaleString("en-PH")})]})]})}),e.jsxs("div",{className:"text-center text-sm text-gray-600 border-t pt-4",children:[e.jsx("p",{children:"Thank you for choosing MediCare Hospital!"}),e.jsx("p",{className:"mt-2",children:"For inquiries, please contact our billing department."}),e.jsxs("p",{className:"mt-4",children:["Generated on ",new Date().toLocaleString("en-PH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}):e.jsx("p",{children:"No receipt available."})}),e.jsxs("div",{className:"flex justify-end space-x-3 print:hidden",children:[e.jsx(ie,{variant:"outline",onClick:()=>le(!1),children:"Close"}),e.jsxs(ie,{className:"bg-[#E94D61] hover:bg-[#E94D61]/90 text-white",onClick:Ce,children:[e.jsx(xc,{className:"mr-2 h-4 w-4"}),"Print"]})]})]})}),e.jsx(Gt,{open:Ie,onOpenChange:Fe,children:e.jsxs(Bt,{children:[e.jsx(Ut,{children:e.jsx(Ht,{children:"Confirm Delete"})}),e.jsx("p",{children:"Are you sure you want to delete this payment?"}),e.jsxs(Hc,{children:[e.jsx(ie,{variant:"outline",onClick:()=>Fe(!1),children:"Cancel"}),e.jsx(ie,{className:"bg-red-500 text-white",onClick:kt,children:"Delete"})]})]})})]})}function pI({onNavigateToView:n}){const[s,a]=p.useState("all"),[i,l]=p.useState(""),{userSession:d}=sf(),u=d?.role==="admin",[f,y]=p.useState([]);p.useEffect(()=>{x()},[]);const x=()=>{const pe=(_f.getAllPatients()||[]).map(we=>({id:Tt(we),name:we.name,fullDisplay:`${we.name} (${tn(we)||Tt(we)})`}));y(pe)},[v,h]=p.useState(""),[C,P]=p.useState([]),[S,w]=p.useState(!1),[b,E]=p.useState(!1),[T,z]=p.useState([]),[B,Q]=p.useState(vn.isRemoteSyncSuppressed?vn.isRemoteSyncSuppressed():!1),X=p.useRef(B),[G,J]=p.useState("today"),[ue,ge]=p.useState([]),[Ee,xe]=p.useState([]),[me,fe]=p.useState(!1),[F,ne]=p.useState(null),[te,D]=p.useState(!1);p.useEffect(()=>{const V=vn.subscribe(pe=>{z(pe)});return()=>V()},[]);const L=async()=>{try{if(localStorage.getItem(CLEARED_FLAG)==="true"){z([]);return}}catch{}if(!(X.current||vn.isRemoteSyncSuppressed()))try{const[V,pe]=await Promise.all([wc().catch(()=>[]),jc().catch(()=>[])]),we=(V||[]).map(I=>({id:I._id||I.id||I.invoiceNumber||I.number||String(Math.random()),type:"invoice",number:I.invoiceNumber||I.number||I._id||I.id||"",patientName:I.patientName||I.patient||I.patientInfo&&I.patientInfo.name||"",patientId:I.patientId||I.accountId||I.patientInfo&&(I.patientInfo.patientId||I.patientInfo.id)||"",date:I.date||I.invoiceDate||(I.createdAt?new Date(I.createdAt).toISOString().split("T")[0]:""),time:I.time||(I.createdAt?new Date(I.createdAt).toLocaleTimeString():""),amount:Number(I.total??I.amount??I.subtotal??0)||0,status:(I.status||"pending").toString().toLowerCase(),description:I.description||I.notes||"",paymentMethod:I.paymentMethod||void 0,department:I.department||void 0,items:I.items||I.lines||[]})),mt=(pe||[]).map(I=>({id:I._id||I.id||I.reference||I.number||String(Math.random()),type:"payment",number:I.number||I.paymentNumber||I._id||I.id||"",patientName:I.patientName||I.patient||I.patientInfo&&I.patientInfo.name||"",patientId:I.patientId||I.accountId||I.patientInfo&&(I.patientInfo.patientId||I.patientInfo.id)||"",date:I.paymentDate||I.date||(I.createdAt?new Date(I.createdAt).toISOString().split("T")[0]:""),time:I.time||(I.createdAt?new Date(I.createdAt).toLocaleTimeString():""),amount:Number(I.amount??I.total??I.paid??0)||0,status:(I.status||"completed").toString().toLowerCase(),description:I.description||`Payment for ${I.invoiceNumber||I.reference||""}`,paymentMethod:I.method||I.paymentMethod||void 0,items:I.items||[]})),Dt=vn.getAllRecords().map(I=>({id:I.id,type:I.type,number:I.number,patientName:I.patientName,patientId:I.patientId,date:I.date,time:I.time,amount:I.amount,status:I.status,description:I.description,paymentMethod:I.paymentMethod,department:I.department,items:I.items||[]})),xt=new Map;[...Dt,...we,...mt].forEach(I=>{const Te=I.number||I.id||`${I.type}:${I.date}:${I.amount}:${I.patientId}`;xt.has(Te)||xt.set(Te,I)});const Xt=Array.from(xt.values()).sort((I,Te)=>new Date(Te.date).getTime()-new Date(I.date).getTime());z(Xt)}catch(V){console.warn("Failed to load remote billing data",V)}};p.useEffect(()=>{L();const V=vn.subscribe(()=>{L().catch(we=>console.warn("billingService-triggered loadRemote failed",we))}),pe=we=>{try{l(""),a("all"),h(""),L().catch(()=>{})}catch{}};return window.addEventListener("billing-updated",pe),()=>{V(),window.removeEventListener("billing-updated",pe)}},[]),p.useEffect(()=>{(()=>{const pe=ce(),we=new Date;if(G==="today"){const mt=we.toISOString().split("T")[0],ct=pe.filter(Dt=>Dt.status==="completed"&&(Dt.type==="invoice"||Dt.type==="service"||Dt.type==="pharmacy"||Dt.type==="payment")).filter(Dt=>(Dt.date||"").toString().startsWith(mt)).reduce((Dt,xt)=>Dt+(Number(xt.amount)||0),0);xe([we.toLocaleDateString("en-PH")]),ge([ct]);return}if(G==="monthly"){const mt=we.getFullYear(),ct=we.getMonth(),Dt=new Date(mt,ct+1,0).getDate(),xt=[],Xt=[];for(let I=1;I<=Dt;I++){const Te=`${mt}-${String(ct+1).padStart(2,"0")}-${String(I).padStart(2,"0")}`;xt.push(String(I));const qe=pe.filter(ft=>ft.status==="completed").filter(ft=>(ft.date||"").startsWith(Te)).reduce((ft,gt)=>ft+(Number(gt.amount)||0),0);Xt.push(qe)}xe(xt),ge(Xt);return}if(G==="yearly"){const mt=we.getFullYear(),ct=[],Dt=[];for(let xt=0;xt<12;xt++){const Xt=`${mt}-${String(xt+1).padStart(2,"0")}`;ct.push(new Date(mt,xt,1).toLocaleString("en-US",{month:"short"}));const I=pe.filter(Te=>Te.status==="completed").filter(Te=>(Te.date||"").startsWith(Xt)).reduce((Te,qe)=>Te+(Number(qe.amount)||0),0);Dt.push(I)}xe(ct),ge(Dt)}})()},[T,G]),p.useEffect(()=>{(async()=>{try{if(w(!0),yr.getStatus().connected){E(!0);const we=await yr.getTransactions(v||void 0);P(we)}}catch(pe){console.error("Failed to load pharmacy data:",pe),E(!1)}finally{w(!1)}})()},[v]);const ce=()=>{const V=[...T];if(b&&C.length>0){const pe=C.map(we=>({id:`pharmacy_${we.id}`,type:"pharmacy",number:we.transactionId,patientName:we.patientName,patientId:we.patientId,date:we.transactionDate,time:we.transactionTime,amount:we.totalAmount,status:we.paymentStatus==="Paid"?"completed":we.paymentStatus==="Pending"?"pending":"cancelled",description:`Pharmacy Purchase - ${we.pharmacyName}`,department:"Pharmacy",paymentMethod:we.paymentMethod,pharmacyData:we,items:we.items.map(mt=>({id:mt.id,description:`${mt.medicationName} (${mt.strength}) - ${mt.brand}`,quantity:mt.quantity,unitPrice:mt.unitPrice,totalPrice:mt.totalPrice}))}));V.push(...pe)}return V.sort((pe,we)=>new Date(we.date).getTime()-new Date(pe.date).getTime())},A=V=>{switch(V){case"invoice":return e.jsx(pa,{className:"text-blue-600",size:20});case"payment":return e.jsx(xa,{className:"text-green-600",size:20});case"pharmacy":return e.jsx(Mr,{className:"text-purple-600",size:20});case"service":return e.jsx(or,{className:"text-orange-600",size:20});default:return e.jsx(or,{className:"text-gray-600",size:20})}},R=V=>{switch(V){case"invoice":return"bg-blue-100 text-blue-800";case"payment":return"bg-green-100 text-green-800";case"pharmacy":return"bg-purple-100 text-purple-800";case"service":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},H=V=>{switch(V){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";case"refunded":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},M=ce().filter(V=>{const pe=i===""||V.patientName.toLowerCase().includes(i.toLowerCase())||V.number.toLowerCase().includes(i.toLowerCase())||V.patientId.toLowerCase().includes(i.toLowerCase()),we=s==="all"||V.type===s,mt=v===""||V.patientId===v;return pe&&we&&mt}),ee=ce(),U=ee.filter(V=>V.status==="completed"&&(V.type==="invoice"||V.type==="service"||V.type==="pharmacy")).reduce((V,pe)=>V+pe.amount,0),q=ee.filter(V=>V.status==="completed"&&V.type==="payment").reduce((V,pe)=>V+pe.amount,0),le=ee.filter(V=>V.status==="pending").reduce((V,pe)=>V+pe.amount,0),he=ee.filter(V=>V.status==="completed"&&V.type==="pharmacy").reduce((V,pe)=>V+pe.amount,0),k=(()=>{const V=ee.filter(we=>we.type==="payment"&&we.status==="completed"),pe={};return V.forEach(we=>{const mt=we.paymentMethod||we.method||"cash";pe[mt]=(pe[mt]||0)+we.amount}),pe})(),Y=Object.values(k).reduce((V,pe)=>V+pe,0),Ie=Object.entries(k).map(([V,pe])=>({method:V,amount:pe,percentage:Y>0?Math.round(pe/Y*100):0})),O=(()=>{const V={};return ee.filter(pe=>pe.status==="completed"&&(pe.type==="invoice"||pe.type==="service")).forEach(pe=>{const we=pe.department||"Other";V[we]=(V[we]||0)+pe.amount}),V})(),ze=()=>{try{const pe=[["Date","Time","Transaction #","Type","Patient Name","Patient ID","Description","Department","Payment Method","Amount","Status"].join(",")];M.forEach(xt=>{const Xt=[new Date(xt.date).toLocaleDateString("en-PH"),xt.time||"",xt.number,xt.type.charAt(0).toUpperCase()+xt.type.slice(1),`"${xt.patientName}"`,f.find(I=>I.id===xt.patientId)?.fullDisplay||ss(f,xt.patientId)||xt.patientName||xt.patientId||"N/A",`"${xt.description}"`,xt.department||"",xt.paymentMethod||"",xt.amount.toFixed(2),xt.status.charAt(0).toUpperCase()+xt.status.slice(1)];pe.push(Xt.join(","))});const we=pe.join(`
`),mt=new Blob([we],{type:"text/csv;charset=utf-8;"}),ct=document.createElement("a"),Dt=URL.createObjectURL(mt);ct.setAttribute("href",Dt),ct.setAttribute("download",`billing_history_${new Date().toISOString().split("T")[0]}.csv`),ct.style.visibility="hidden",document.body.appendChild(ct),ct.click(),document.body.removeChild(ct)}catch(V){console.error("Export failed:",V),alert("Failed to export data. Please try again.")}},W=async()=>{try{if(u){if(window.prompt("Type DELETE to permanently delete ALL invoices and payments from the server and local cache")!=="DELETE"){se.error("Clear cancelled: confirmation mismatch"),D(!1);return}if(!(await fetch(`${API_BASE}/invoices/clear-all`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to delete server invoices");if(!(await fetch(`${API_BASE}/payments/clear-all`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to delete server payments")}else if(!window.confirm("Clear local transaction history? This will remove all local records shown here. Click OK to proceed or Cancel to abort.")){se.error("Clear cancelled"),D(!1);return}try{localStorage.setItem(CLEARED_FLAG,"true")}catch{}Q(!0),X.current=!0,vn.setRemoteSyncSuppressed(!0),vn.clearAllRecords({notify:!0}),z([]),P([]);try{window.dispatchEvent(new CustomEvent("billing-cleared",{detail:{source:"billing-history"}}))}catch{}se.success("Transaction history cleared")}catch(V){console.error("Failed to clear billing records",V),se.error("Failed to clear transaction history")}finally{D(!1)}},Ve=async()=>{if(!u){se.error("Only admins can archive records on the server"),D(!1);return}if(window.prompt("Type ARCHIVE to confirm server-wide archive of invoices and payments")!=="ARCHIVE"){se.error("Archive cancelled: confirmation mismatch");return}D(!1);try{if(!(await fetch("/api/archive/invoices/clear-all",{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to archive invoices");if(!(await fetch("/api/archive/payments/clear-all",{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to archive payments");se.success("Invoices and payments archived on server"),Q(!1),X.current=!1,vn.setRemoteSyncSuppressed(!1),await L(),window.dispatchEvent(new CustomEvent("billing-updated",{detail:{source:"archive-all"}}))}catch(pe){console.error("Archive all on server failed",pe),se.error("Failed to archive records on server")}},Re=async()=>{if(!u){se.error("Only admins can restore records on the server"),D(!1);return}if(window.prompt("Type RESTORE to confirm server-wide restore of invoices and payments")!=="RESTORE"){se.error("Restore cancelled: confirmation mismatch");return}D(!1);try{if(!(await fetch("/api/archive/invoices/restore-all",{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to restore invoices");if(!(await fetch("/api/archive/payments/restore-all",{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to restore payments");se.success("Invoices and payments restored on server"),Q(!1),X.current=!1,vn.setRemoteSyncSuppressed(!1),await L(),window.dispatchEvent(new CustomEvent("billing-updated",{detail:{source:"restore-all"}}))}catch(pe){console.error("Restore all on server failed",pe),se.error("Failed to restore records on server")}},$e=()=>{try{const V=new Date().toLocaleDateString("en-PH",{year:"numeric",month:"long",day:"numeric"}),pe=v?f.find(ct=>ct.id===v)?.fullDisplay||ss(f,v)||v:"",we=`
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="UTF-8">
          <title>Billing History Report - ${V}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 40px;
              color: #333;
            }
            .header {
              text-align: center;
              margin-bottom: 40px;
              padding-bottom: 20px;
              border-bottom: 3px solid #358E83;
            }
            .header h1 {
              color: #358E83;
              margin: 0;
            }
            .header p {
              margin: 5px 0;
              color: #666;
            }
            .summary {
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
              gap: 20px;
              margin-bottom: 40px;
            }
            .summary-card {
              padding: 20px;
              border: 2px solid #e5e7eb;
              border-radius: 8px;
              background: #f9fafb;
            }
            .summary-card h3 {
              margin: 0 0 10px 0;
              color: #666;
              font-size: 14px;
              text-transform: uppercase;
            }
            .summary-card .value {
              font-size: 24px;
              font-weight: bold;
              color: #358E83;
            }
            table {
              width: 100%;
              border-collapse: collapse;
              margin-bottom: 40px;
            }
            th {
              background: #358E83;
              color: white;
              padding: 12px;
              text-align: left;
              font-weight: 600;
            }
            td {
              padding: 10px 12px;
              border-bottom: 1px solid #e5e7eb;
            }
            tr:hover {
              background: #f9fafb;
            }
            .badge {
              display: inline-block;
              padding: 4px 8px;
              border-radius: 4px;
              font-size: 12px;
              font-weight: 600;
            }
            .badge-completed { background: #dcfce7; color: #166534; }
            .badge-pending { background: #fef3c7; color: #92400e; }
            .badge-cancelled { background: #fee2e2; color: #991b1b; }
            .badge-refunded { background: #f3f4f6; color: #374151; }
            .badge-invoice { background: #dbeafe; color: #1e40af; }
            .badge-payment { background: #dcfce7; color: #166534; }
            .badge-pharmacy { background: #f3e8ff; color: #6b21a8; }
            .badge-service { background: #fed7aa; color: #9a3412; }
            .footer {
              text-align: center;
              margin-top: 40px;
              padding-top: 20px;
              border-top: 2px solid #e5e7eb;
              color: #666;
              font-size: 12px;
            }
            @media print {
              body { margin: 20px; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>MEDICARE HOSPITAL</h1>
            <p>Billing History Report</p>
            <p>Generated on: ${V}</p>
            ${pe?`<p>Patient Filter: ${pe}</p>`:""}
            ${s!=="all"?`<p>Type Filter: ${s.charAt(0).toUpperCase()+s.slice(1)}</p>`:""}
          </div>

          <div class="summary">
            <div class="summary-card">
              <h3>Total Revenue</h3>
              <div class="value">${U.toLocaleString("en-PH",{minimumFractionDigits:2})}</div>
            </div>
            <div class="summary-card">
              <h3>Payments Received</h3>
              <div class="value">${q.toLocaleString("en-PH",{minimumFractionDigits:2})}</div>
            </div>
            <div class="summary-card">
              <h3>Pending Amount</h3>
              <div class="value">${le.toLocaleString("en-PH",{minimumFractionDigits:2})}</div>
            </div>
            <div class="summary-card">
              <h3>Pharmacy Revenue</h3>
              <div class="value">${he.toLocaleString("en-PH",{minimumFractionDigits:2})}</div>
            </div>
            <div class="summary-card">
              <h3>Total Transactions</h3>
              <div class="value">${M.length}</div>
            </div>
          </div>

          <h2 style="color: #358E83; margin-bottom: 20px;">Transaction Details</h2>
          <table>
            <thead>
              <tr>
                <th>Date</th>
                <th>Transaction #</th>
                <th>Type</th>
                <th>Patient</th>
                <th>Description</th>
                <th>Amount</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              ${M.map(ct=>`
                <tr>
                  <td>${new Date(ct.date).toLocaleDateString("en-PH")}${ct.time?` ${ct.time}`:""}</td>
                  <td>${ct.number}</td>
                  <td><span class="badge badge-${ct.type}">${ct.type.charAt(0).toUpperCase()+ct.type.slice(1)}</span></td>
            <td>${ct.patientName}<br/><small style="color: #666;">${f.find(Dt=>Dt.id===ct.patientId)?.fullDisplay||ss(f,ct.patientId)||ct.patientId||"N/A"}</small></td>
                  <td>${ct.description}${ct.department?`<br/><small style="color: #666;">${ct.department}</small>`:""}</td>
                  <td style="font-weight: 600;">${ct.amount.toLocaleString("en-PH",{minimumFractionDigits:2})}</td>
                  <td><span class="badge badge-${ct.status}">${ct.status.charAt(0).toUpperCase()+ct.status.slice(1)}</span></td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <div class="footer">
            <p>This is a computer-generated report from Medicare Hospital Billing System</p>
            <p>Report generated on ${new Date().toLocaleString("en-PH")}</p>
          </div>

          <div class="no-print" style="text-align: center; margin-top: 30px;">
            <button onclick="window.print()" style="
              background: #358E83;
              color: white;
              padding: 12px 24px;
              border: none;
              border-radius: 6px;
              font-size: 16px;
              cursor: pointer;
              margin-right: 10px;
            ">Print Report</button>
            <button onclick="window.close()" style="
              background: #6b7280;
              color: white;
              padding: 12px 24px;
              border: none;
              border-radius: 6px;
              font-size: 16px;
              cursor: pointer;
            ">Close</button>
          </div>
        </body>
        </html>
      `,mt=window.open("","_blank");mt?(mt.document.write(we),mt.document.close()):alert("Please allow pop-ups to generate the report.")}catch(V){console.error("Report generation failed:",V),alert("Failed to generate report. Please try again.")}},ot=()=>{if(!F)return;const V=window.open("","_blank");if(!V)return;const pe=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Transaction Record - ${F.number}</title>
          <style>
            * {
              margin: 0;
              padding: 0;
              box-sizing: border-box;
            }
            body {
              font-family: Arial, sans-serif;
              padding: 40px;
              color: #333;
            }
            .header {
              text-align: center;
              margin-bottom: 30px;
              padding-bottom: 20px;
              border-bottom: 3px solid #358E83;
            }
            .header h1 {
              color: #358E83;
              font-size: 28px;
              margin-bottom: 5px;
            }
            .header p {
              color: #666;
              font-size: 14px;
              margin: 2px 0;
            }
            .section {
              margin-bottom: 25px;
            }
            .section-title {
              font-size: 16px;
              font-weight: 600;
              color: #358E83;
              margin-bottom: 12px;
              padding-bottom: 8px;
              border-bottom: 2px solid #e5e7eb;
            }
            .info-grid {
              display: grid;
              grid-template-columns: repeat(2, 1fr);
              gap: 15px;
              margin-bottom: 15px;
            }
            .info-item {
              display: flex;
              flex-direction: column;
            }
            .info-label {
              font-size: 12px;
              color: #666;
              margin-bottom: 4px;
            }
            .info-value {
              font-size: 14px;
              font-weight: 600;
              color: #333;
            }
            .badge {
              display: inline-block;
              padding: 4px 10px;
              border-radius: 4px;
              font-size: 12px;
              font-weight: 600;
            }
            .badge-completed { background: #dcfce7; color: #166534; }
            .badge-pending { background: #fef3c7; color: #92400e; }
            .badge-cancelled { background: #fee2e2; color: #991b1b; }
            table {
              width: 100%;
              border-collapse: collapse;
              margin-top: 10px;
            }
            th {
              background: #f3f4f6;
              padding: 10px;
              text-align: left;
              font-size: 12px;
              font-weight: 600;
              color: #374151;
              border: 1px solid #e5e7eb;
            }
            td {
              padding: 10px;
              font-size: 13px;
              border: 1px solid #e5e7eb;
            }
            .amount-summary {
              background: #f9fafb;
              padding: 15px;
              border-radius: 8px;
              margin-top: 20px;
            }
            .amount-row {
              display: flex;
              justify-content: space-between;
              padding: 6px 0;
              font-size: 14px;
            }
            .amount-total {
              font-size: 18px;
              font-weight: bold;
              color: #358E83;
              padding-top: 10px;
              margin-top: 10px;
              border-top: 2px solid #e5e7eb;
            }
            .footer {
              margin-top: 40px;
              padding-top: 20px;
              border-top: 2px solid #e5e7eb;
              text-align: center;
              font-size: 11px;
              color: #666;
            }
            @media print {
              body { padding: 20px; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>MEDICARE HOSPITAL</h1>
            <p>123 Health Street, Medical District, Philippines</p>
            <p>Tel: (02) 1234-5678 | Email: billing@medicare.ph</p>
            <p style="margin-top: 10px; font-weight: 600; font-size: 16px;">Transaction Record</p>
          </div>

          <div class="section">
            <div class="section-title">Transaction Information</div>
            <div class="info-grid">
              <div class="info-item">
                <span class="info-label">Transaction Number</span>
                <span class="info-value">${F.number}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Type</span>
                <span class="info-value">${F.type.charAt(0).toUpperCase()+F.type.slice(1)}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Date & Time</span>
                <span class="info-value">${new Date(F.date).toLocaleDateString("en-PH",{year:"numeric",month:"long",day:"numeric"})}${F.time?`  ${F.time}`:""}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Status</span>
                <span class="badge badge-${F.status}">${F.status.charAt(0).toUpperCase()+F.status.slice(1)}</span>
              </div>
            </div>
          </div>

          <div class="section">
            <div class="section-title">Patient Information</div>
            <div class="info-grid">
              <div class="info-item">
                <span class="info-label">Patient Name</span>
                <span class="info-value">${F.patientName}</span>
              </div>
                <div class="info-item">
                  <span class="info-label">Patient ID</span>
                  <span class="info-value">${f.find(we=>we.id===F.patientId)?.fullDisplay||ss(f,F.patientId)||F.patientName||F.patientId||"N/A"}</span>
                </div>
              ${F.department?`
                <div class="info-item">
                  <span class="info-label">Department</span>
                  <span class="info-value">${F.department}</span>
                </div>
              `:""}
              ${F.paymentMethod?`
                <div class="info-item">
                  <span class="info-label">Payment Method</span>
                  <span class="info-value">${F.paymentMethod}</span>
                </div>
              `:""}
            </div>
          </div>

          <div class="section">
            <div class="section-title">Description</div>
            <p style="font-size: 14px; color: #333;">${F.description}</p>
          </div>

          ${F.items&&F.items.length>0?`
            <div class="section">
              <div class="section-title">Items / Services</div>
              <table>
                <thead>
                  <tr>
                    <th>Description</th>
                    <th style="text-align: right;">Qty</th>
                    <th style="text-align: right;">Unit Price</th>
                    <th style="text-align: right;">Total</th>
                  </tr>
                </thead>
                <tbody>
                  ${F.items.map(we=>`
                    <tr>
                      <td>${we.description}</td>
                      <td style="text-align: right;">${we.quantity}</td>
                      <td style="text-align: right;">${we.unitPrice.toLocaleString("en-PH",{minimumFractionDigits:2})}</td>
                      <td style="text-align: right; font-weight: 600;">${we.totalPrice.toLocaleString("en-PH",{minimumFractionDigits:2})}</td>
                    </tr>
                  `).join("")}
                </tbody>
              </table>
            </div>
          `:""}

          ${F.pharmacyData?`
            <div class="section">
              <div class="section-title">Pharmacy Information</div>
              <div class="info-grid">
                <div class="info-item">
                  <span class="info-label">Pharmacy Name</span>
                  <span class="info-value">${F.pharmacyData.pharmacyName}</span>
                </div>
                ${F.pharmacyData.doctorName?`
                  <div class="info-item">
                    <span class="info-label">Prescribed By</span>
                    <span class="info-value">${F.pharmacyData.doctorName}</span>
                  </div>
                `:""}
                <div class="info-item">
                  <span class="info-label">Tax (VAT)</span>
                  <span class="info-value">${F.pharmacyData.tax.toFixed(2)}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Payment Status</span>
                  <span class="info-value">${F.pharmacyData.paymentStatus}</span>
                </div>
              </div>
            </div>
          `:""}

          <div class="amount-summary">
            ${F.subtotal?`
              <div class="amount-row">
                <span>Subtotal:</span>
                <span style="font-weight: 600;">${F.subtotal.toLocaleString("en-PH",{minimumFractionDigits:2})}</span>
              </div>
            `:""}
            ${F.discount&&F.discount>0?`
              <div class="amount-row" style="color: #16a34a;">
                <span>Discount ${F.discountType?`(${F.discountType})`:""}:</span>
                <span style="font-weight: 600;">
                  -${F.discount.toLocaleString("en-PH",{minimumFractionDigits:2})}
                  ${F.discountPercentage?` (${F.discountPercentage}%)`:""}
                </span>
              </div>
            `:""}
            ${F.tax&&F.tax>0?`
              <div class="amount-row">
                <span>VAT ${F.taxRate?`(${F.taxRate}%)`:"(12%)"}:</span>
                <span style="font-weight: 600;">${F.tax.toLocaleString("en-PH",{minimumFractionDigits:2})}</span>
              </div>
            `:""}
            <div class="amount-row amount-total">
              <span>Total Amount:</span>
              <span>${F.amount.toLocaleString("en-PH",{minimumFractionDigits:2})}</span>
            </div>
          </div>

          <div class="footer">
            <p>This is a computer-generated document from Medicare Hospital Billing System</p>
            <p>Printed on: ${new Date().toLocaleString("en-PH")}</p>
          </div>
        </body>
      </html>
    `;V.document.write(pe),V.document.close(),V.focus(),setTimeout(()=>{V.print(),V.close()},250)};return e.jsxs("div",{className:"space-y-6",children:[B&&e.jsx("div",{className:"p-4 bg-yellow-50 border-l-4 border-yellow-300 rounded",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-yellow-800",children:"Local transaction history cleared. Server-side records are hidden until you refresh."}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{variant:"ghost",onClick:()=>{Q(!1),X.current=!1,vn.setRemoteSyncSuppressed(!1),L().catch(()=>{})},children:"Show Server Records"}),e.jsx(ie,{onClick:()=>{Q(!1),X.current=!1,vn.setRemoteSyncSuppressed(!1),l(""),a("all"),L().catch(()=>{})},className:"bg-[#358E83] text-white",children:"Refresh"})]})]})}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ie,{variant:"outline",onClick:ze,children:[e.jsx(df,{className:"mr-2",size:16}),"Export"]}),e.jsxs(ie,{className:"bg-[#E94D61] hover:bg-[#E94D61]/90 text-white",onClick:$e,children:[e.jsx(pa,{className:"mr-2",size:16}),"Generate Report"]}),e.jsxs(ie,{variant:"destructive",onClick:()=>D(!0),className:"ml-2",children:[e.jsx(sc,{className:"mr-2",size:16}),"Clear Records"]})]})}),b&&e.jsx(Le,{children:e.jsx(Be,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ua,{className:"text-[#358E83]",size:20}),e.jsx("span",{className:"font-medium",children:"Integration Status:"}),e.jsx(Nt,{className:"bg-green-100 text-green-800",children:"Pharmacy Connected"})]}),e.jsx("div",{className:"flex-1",children:e.jsxs(nn,{value:v,onValueChange:h,children:[e.jsx(sn,{className:"w-60",children:e.jsx(rn,{placeholder:"Filter by patient (optional)"})}),e.jsxs(an,{children:[e.jsx(lt,{value:"",children:"All Patients"}),f.map(V=>e.jsx(lt,{value:V.id,children:V.fullDisplay},V.id))]})]})}),S&&e.jsx(Nt,{className:"bg-blue-100 text-blue-800",children:"Syncing..."})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(Le,{children:e.jsx(Be,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",U.toLocaleString()]})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(or,{className:"text-green-600",size:24})})]})})}),e.jsx(Le,{children:e.jsx(Be,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Payments Received"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["",q.toLocaleString()]})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(xa,{className:"text-blue-600",size:24})})]})})}),e.jsx(Le,{children:e.jsx(Be,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:["",le.toLocaleString()]})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:e.jsx(sc,{className:"text-yellow-600",size:24})})]})})}),e.jsx(Le,{children:e.jsx(Be,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pharmacy Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["",he.toLocaleString()]})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:e.jsx(Mr,{className:"text-purple-600",size:24})})]})})}),e.jsx(Le,{children:e.jsx(Be,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Transactions"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:ee.length})]}),e.jsx("div",{className:"p-3 bg-indigo-100 rounded-full",children:e.jsx(pa,{className:"text-indigo-600",size:24})})]})})})]}),e.jsxs(Le,{children:[e.jsx(pt,{children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(ht,{children:"Transaction History"}),e.jsx(pn,{children:"Complete record of all billing transactions"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[e.jsxs("div",{className:"flex items-center bg-white border rounded-lg px-3 py-2",children:[e.jsx(us,{className:"mr-2 text-gray-400",size:16}),e.jsx(Ue,{placeholder:"Search records...",className:"border-0 p-0 focus-visible:ring-0 text-gray-900 placeholder:text-gray-500",value:i,onChange:V=>l(V.target.value)})]}),e.jsxs(nn,{value:s,onValueChange:a,children:[e.jsx(sn,{className:"w-40 text-gray-900",children:e.jsx(rn,{placeholder:"Filter by type"})}),e.jsxs(an,{children:[e.jsx(lt,{value:"all",children:"All Types"}),e.jsx(lt,{value:"invoice",children:"Invoices"}),e.jsx(lt,{value:"payment",children:"Payments"}),e.jsx(lt,{value:"pharmacy",children:"Pharmacy"}),e.jsx(lt,{value:"service",children:"Services"})]})]})]})]})}),e.jsx(Be,{children:e.jsxs(Co,{defaultValue:"list",className:"space-y-6",children:[e.jsxs(Po,{children:[e.jsx(Jn,{value:"list",children:"List View"}),e.jsx(Jn,{value:"summary",children:"Monthly Summary"})]}),e.jsx(Qn,{value:"list",children:e.jsxs("div",{className:"space-y-4",children:[M.map(V=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-[#358E83]/10 rounded-lg",children:A(V.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold",children:V.number}),e.jsx(Nt,{className:R(V.type),children:V.type.charAt(0).toUpperCase()+V.type.slice(1)}),e.jsx(Nt,{className:H(V.status),children:V.status.charAt(0).toUpperCase()+V.status.slice(1)})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(vc,{size:14}),e.jsx("span",{children:ss(f,V.patientId)||V.patientName||V.patientId||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(mo,{size:14}),e.jsxs("span",{children:[new Date(V.date).toLocaleDateString(),V.time&&e.jsxs("span",{className:"ml-1 text-gray-500",children:[" ",V.time]})]})]}),V.department&&e.jsx(Nt,{variant:"outline",children:V.department}),V.paymentMethod&&e.jsx(Nt,{variant:"outline",children:V.paymentMethod})]}),e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:V.description}),V.type==="pharmacy"&&V.items&&V.items.length>0&&e.jsxs("div",{className:"mt-3 p-3 bg-purple-50 rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-purple-800 mb-2 flex items-center gap-1",children:[e.jsx(Mr,{size:14}),"Medications Purchased:"]}),e.jsx("div",{className:"space-y-1",children:V.items.map(pe=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-purple-700",children:[pe.description," (Qty: ",pe.quantity,")"]}),e.jsxs("span",{className:"font-medium text-purple-800",children:["",pe.totalPrice.toLocaleString()]})]},pe.id))}),V.pharmacyData&&e.jsx("div",{className:"mt-2 pt-2 border-t border-purple-200",children:e.jsxs("div",{className:"flex justify-between text-xs text-purple-600",children:[e.jsxs("span",{children:["Pharmacy: ",V.pharmacyData.pharmacyName]}),V.pharmacyData.doctorName&&e.jsxs("span",{children:["Prescribed by: ",V.pharmacyData.doctorName]})]})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-lg",children:["",V.amount.toLocaleString()]}),V.type==="pharmacy"&&V.pharmacyData&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Tax: ",V.pharmacyData.tax.toFixed(2)]})]}),e.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>{ne(V),fe(!0)},children:e.jsx($r,{size:16})})]})]})},V.id)),M.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(sc,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No records found"}),e.jsx("p",{className:"text-gray-600",children:v?"No billing records found for the selected patient.":"Try adjusting your search criteria or filters."}),b&&S&&e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[e.jsx(ua,{className:"animate-spin text-[#358E83]",size:16}),e.jsx("span",{className:"text-sm text-gray-600",children:"Loading pharmacy data..."})]})]})]})}),e.jsx(Qn,{value:"summary",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(Le,{children:[e.jsxs(pt,{children:[e.jsx(ht,{children:"Monthly Revenue Trend"}),e.jsx(pn,{children:"Revenue comparison over time"})]}),e.jsx(Be,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{size:"sm",variant:G==="today"?void 0:"outline",onClick:()=>J("today"),children:"Today"}),e.jsx(ie,{size:"sm",variant:G==="monthly"?void 0:"outline",onClick:()=>J("monthly"),children:"Monthly"}),e.jsx(ie,{size:"sm",variant:G==="yearly"?void 0:"outline",onClick:()=>J("yearly"),children:"Yearly"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Total: ",e.jsxs("span",{className:"font-semibold",children:["",ue.reduce((V,pe)=>V+pe,0).toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]}),e.jsx("div",{className:"h-64 w-full p-4 flex flex-col",children:ue.length===0||ue.every(V=>V===0)?e.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(or,{className:"mx-auto text-gray-400 mb-2",size:32}),e.jsx("p",{className:"text-gray-600",children:"No revenue data for the selected range"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 flex items-end justify-around gap-1 px-2 py-4",children:(()=>{const V=Math.max(...ue,1);return ue.map((pe,we)=>{const mt=pe/V*100;return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsx("div",{className:"w-full h-full flex items-end justify-center min-h-12",children:e.jsx("div",{title:`${pe.toLocaleString("en-PH",{minimumFractionDigits:2})}`,style:{height:`${Math.max(mt,5)}%`},className:"w-3/4 bg-[#358E83] rounded-t-md hover:bg-[#2a6f68] transition-colors"})}),pe>0&&e.jsxs("div",{className:"text-xs font-semibold text-gray-700 whitespace-nowrap",children:["",(pe/1e3).toFixed(0),"k"]})]},we)})})()}),e.jsx("div",{className:"flex items-start justify-around gap-1 px-2 border-t pt-2",children:Ee.map((V,pe)=>e.jsx("div",{className:"flex-1 flex justify-center",children:e.jsx("span",{className:"text-xs text-gray-600 text-center",children:V})},pe))})]})})]})})]}),e.jsxs(Le,{children:[e.jsxs(pt,{children:[e.jsx(ht,{children:"Payment Methods"}),e.jsx(pn,{children:"Distribution of payment methods used"})]}),e.jsx(Be,{children:e.jsx("div",{className:"space-y-3",children:Ie.length>0?Ie.map((V,pe)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:["#3B82F6","#10B981","#F59E0B","#8B5CF6"][pe%4]}}),e.jsx("span",{className:"capitalize",children:V.method})]}),e.jsxs("span",{className:"font-medium",children:[V.percentage,"%"]})]},pe)):e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No payment data available"})})})]}),e.jsxs(Le,{className:"md:col-span-2",children:[e.jsxs(pt,{children:[e.jsx(ht,{children:"Revenue by Department"}),e.jsx(pn,{children:"Breakdown of revenue by hospital departments"})]}),e.jsx(Be,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Object.entries(O).length>0?Object.entries(O).map(([V,pe],we)=>e.jsxs("div",{className:"text-center p-4 rounded-lg",style:{backgroundColor:["bg-blue-50","bg-green-50","bg-orange-50","bg-purple-50"][we%4]},children:[e.jsxs("div",{className:"text-2xl font-bold",style:{color:["#2563EB","#059669","#EA580C","#7C3AED"][we%4]},children:["",pe.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("div",{className:"text-sm text-gray-600",children:V})]},we)):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"0.00"}),e.jsx("div",{className:"text-sm text-gray-600",children:"No Data"})]})}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["",he.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center justify-center gap-1",children:[e.jsx(Mr,{size:14}),"Pharmacy",b&&e.jsx(Nt,{className:"bg-green-100 text-green-600 text-xs ml-1",children:"Live"})]})]})]})})]})]})})]})})]}),e.jsx(Gt,{open:me,onOpenChange:fe,children:e.jsxs(Bt,{className:"max-w-2xl",children:[e.jsxs(Ut,{children:[e.jsx(Ht,{children:"Transaction Details"}),e.jsx(dn,{children:"Complete information about this billing transaction"})]}),F&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Transaction Number"}),e.jsx("p",{className:"font-semibold",children:F.number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Type"}),e.jsx(Nt,{className:R(F.type),children:F.type.charAt(0).toUpperCase()+F.type.slice(1)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Patient"}),e.jsx("p",{className:"font-semibold",children:ss(f,F.patientId)||F.patientName||F.patientId||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Date"}),e.jsxs("p",{className:"font-semibold",children:[new Date(F.date).toLocaleDateString("en-PH",{year:"numeric",month:"long",day:"numeric"}),F.time&&`  ${F.time}`]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx(Nt,{className:H(F.status),children:F.status.charAt(0).toUpperCase()+F.status.slice(1)})]}),F.department&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Department"}),e.jsx("p",{className:"font-semibold",children:F.department})]}),F.paymentMethod&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Payment Method"}),e.jsx("p",{className:"font-semibold",children:F.paymentMethod})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Description"}),e.jsx("p",{className:"text-gray-900",children:F.description})]}),F.items&&F.items.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Items"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-700",children:"Description"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-700",children:"Qty"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-700",children:"Unit Price"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-700",children:"Total"})]})}),e.jsx("tbody",{children:F.items.map(V=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-2 text-sm",children:V.description}),e.jsx("td",{className:"px-4 py-2 text-sm text-right",children:V.quantity}),e.jsxs("td",{className:"px-4 py-2 text-sm text-right",children:["",V.unitPrice.toLocaleString()]}),e.jsxs("td",{className:"px-4 py-2 text-sm text-right font-medium",children:["",V.totalPrice.toLocaleString()]})]},V.id))})]})})]}),F.pharmacyData&&e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg space-y-2",children:[e.jsxs("h4",{className:"font-semibold text-purple-900 flex items-center gap-2",children:[e.jsx(Mr,{size:16}),"Pharmacy Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-700",children:"Pharmacy Name"}),e.jsx("p",{className:"font-medium text-purple-900",children:F.pharmacyData.pharmacyName})]}),F.pharmacyData.doctorName&&e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-700",children:"Prescribed By"}),e.jsx("p",{className:"font-medium text-purple-900",children:F.pharmacyData.doctorName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-700",children:"Tax"}),e.jsxs("p",{className:"font-medium text-purple-900",children:["",F.pharmacyData.tax.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-700",children:"Payment Status"}),e.jsx("p",{className:"font-medium text-purple-900",children:F.pharmacyData.paymentStatus})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[F.subtotal&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),e.jsxs("span",{className:"font-medium",children:["",F.subtotal.toLocaleString()]})]}),F.discount&&F.discount>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-700",children:["Discount ",F.discountType&&`(${F.discountType})`,":"]}),e.jsxs("span",{className:"font-medium text-green-600",children:["-",F.discount.toLocaleString(),F.discountPercentage&&` (${F.discountPercentage}%)`]})]}),F.tax&&F.tax>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-700",children:["VAT ",F.taxRate&&`(${F.taxRate}%)`,":"]}),e.jsxs("span",{className:"font-medium",children:["",F.tax.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-200",children:[e.jsx("span",{className:"text-gray-900 font-medium",children:"Total Amount:"}),e.jsxs("span",{className:"font-bold text-lg text-[#358E83]",children:["",F.amount.toLocaleString()]})]})]}),e.jsx("div",{className:"flex justify-end space-x-3",children:e.jsxs(ie,{className:"bg-[#E94D61] hover:bg-[#E94D61]/90 text-white",onClick:ot,children:[e.jsx(xc,{className:"mr-2",size:16}),"Print Record"]})})]})]})}),e.jsx(Gt,{open:te,onOpenChange:D,children:e.jsxs(Bt,{className:"max-w-md",children:[e.jsx(Ut,{children:e.jsx(Ht,{children:"Clear Transaction History"})}),e.jsx("div",{className:"p-4 text-sm text-gray-700",children:"This will permanently remove all transaction history shown in the Billing History (local in-memory records). This does not delete data from the backend. Are you sure you want to continue?"}),e.jsxs("div",{className:"flex items-center justify-between p-4 gap-4",children:[e.jsx("div",{children:e.jsx(ie,{variant:"outline",onClick:()=>D(!1),children:"Cancel"})}),e.jsx("div",{className:"flex-1 flex items-center justify-center gap-2 flex-wrap",children:u?e.jsxs(e.Fragment,{children:[e.jsx(ie,{variant:"outline",size:"sm",onClick:Ve,children:"Archive all on server"}),e.jsx(ie,{variant:"outline",size:"sm",onClick:Re,children:"Restore all from server"})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"Server archive/restore actions are restricted to administrators."})}),e.jsx("div",{children:e.jsx(ie,{className:"bg-red-600 text-white",onClick:W,children:"Clear Records"})})]})]})})]})}const rc=[{value:"senior",label:"Senior Citizen",color:"bg-blue-100 text-blue-800"},{value:"pwd",label:"PWD",color:"bg-green-100 text-green-800"},{value:"employee",label:"Employee",color:"bg-purple-100 text-purple-800"},{value:"insurance",label:"Insurance",color:"bg-orange-100 text-orange-800"},{value:"promotional",label:"Promotional",color:"bg-pink-100 text-pink-800"},{value:"seasonal",label:"Seasonal",color:"bg-yellow-100 text-yellow-800"}],Xx=[{id:"P001",name:"Maria Santos",fullDisplay:"Maria Santos (P001)"},{id:"P002",name:"Juan Dela Cruz",fullDisplay:"Juan Dela Cruz (P002)"},{id:"P003",name:"Anna Reyes",fullDisplay:"Anna Reyes (P003)"},{id:"P004",name:"Roberto Cruz",fullDisplay:"Roberto Cruz (P004)"},{id:"P005",name:"Carmen Flores",fullDisplay:"Carmen Flores (P005)"},{id:"P006",name:"Miguel Torres",fullDisplay:"Miguel Torres (P006)"},{id:"P007",name:"Sofia Garcia",fullDisplay:"Sofia Garcia (P007)"},{id:"P008",name:"Pedro Gonzales",fullDisplay:"Pedro Gonzales (P008)"},{id:"P009",name:"Elena Ramirez",fullDisplay:"Elena Ramirez (P009)"},{id:"P010",name:"Carlos Mendoza",fullDisplay:"Carlos Mendoza (P010)"}];function hI({onNavigateToView:n}){const[s,a]=p.useState(!1),[i,l]=p.useState(!1),[d,u]=p.useState(!1),[f,y]=p.useState(""),[x,v]=p.useState("all"),[h,C]=p.useState(!1),[P,S]=p.useState(null),[w,b]=p.useState(!1),[E,T]=p.useState(null),[z,B]=p.useState(!1),[Q,X]=p.useState(!1),[G,J]=p.useState([{id:"1",code:"SENIOR20",name:"Senior Citizen Discount",type:"percentage",value:20,description:"20% discount for senior citizens (60 years and above)",category:"senior",startDate:"2025-01-01",endDate:"2025-12-31",isActive:!0,usageCount:145,conditions:"Valid ID required. Cannot be combined with other offers."},{id:"2",code:"PWD20",name:"PWD Discount",type:"percentage",value:20,description:"20% discount for Persons with Disabilities",category:"pwd",startDate:"2025-01-01",endDate:"2025-12-31",isActive:!0,usageCount:89,conditions:"Valid PWD ID required."},{id:"3",code:"EMP15",name:"Employee Discount",type:"percentage",value:15,description:"15% discount for hospital employees and their families",category:"employee",startDate:"2025-01-01",endDate:"2025-12-31",isActive:!0,usageCount:67,conditions:"Valid employee ID required."},{id:"4",code:"NEWYEAR2025",name:"New Year Health Check",type:"percentage",value:30,description:"30% off all diagnostic tests for January",category:"seasonal",startDate:"2025-01-01",endDate:"2025-01-31",isActive:!0,usageCount:23,maxUsage:100,applicableServices:["Blood Test","X-Ray","ECG","Ultrasound"]}]),[ue,ge]=p.useState([{id:"app_001",discountCode:"SENIOR20",patientId:"P001",patientName:"Maria Santos",originalAmount:5e3,discountAmount:1e3,finalAmount:4e3,appliedDate:"2025-01-05",invoiceNumber:"INV-2025-001",status:"applied"},{id:"app_002",discountCode:"PWD20",patientId:"P003",patientName:"Anna Reyes",originalAmount:3500,discountAmount:700,finalAmount:2800,appliedDate:"2025-01-04",invoiceNumber:"INV-2025-003",status:"applied"}]),[Ee,xe]=p.useState([{id:"1",title:"New Year Health Package",description:"Start your year right with our comprehensive health check package at 30% off!",discountCode:"NEWYEAR2025",validFrom:"2025-01-01",validTo:"2025-01-31",isActive:!0,targetAudience:"General Public"},{id:"2",title:"Valentine's Couple Checkup",description:"Bring your loved one for a health screening and save 25% on both consultations.",discountCode:"VALENTINE25",validFrom:"2025-02-01",validTo:"2025-02-28",isActive:!1,targetAudience:"Couples"}]),[me,fe]=p.useState({code:"",name:"",type:"percentage",value:0,description:"",category:"",startDate:"",endDate:"",conditions:""}),[F,ne]=p.useState({patientId:"",discountCode:"",originalAmount:"",invoiceNumber:""}),[te,D]=p.useState({title:"",description:"",discountCode:"",validFrom:"",validTo:"",targetAudience:""}),L=O=>{J(G.map(ze=>ze.id===O?{...ze,isActive:!ze.isActive}:ze))},ce=()=>{if(!me.code||!me.name||!me.category||!me.startDate||!me.endDate){alert("Please fill in all required fields");return}const O={id:Date.now().toString(),code:me.code,name:me.name,type:me.type,value:me.value,description:me.description,category:me.category,startDate:me.startDate,endDate:me.endDate,isActive:!0,usageCount:0,conditions:me.conditions};J([...G,O]),fe({code:"",name:"",type:"percentage",value:0,description:"",category:"",startDate:"",endDate:"",conditions:""}),a(!1),alert(`Discount code "${O.code}" created successfully!`)},A=O=>{S(O),C(!0)},R=()=>{P&&(J(G.filter(O=>O.id!==P)),se.success("Discount deleted successfully"),C(!1),S(null))},H=()=>{if(!F.patientId||!F.discountCode||!F.originalAmount){se.error("Please fill in all required fields");return}const O=G.find($e=>$e.code===F.discountCode&&$e.isActive);if(!O){se.error("Invalid or inactive discount code");return}const ze=parseFloat(F.originalAmount);if(ze<=0){se.error("Please enter a valid amount");return}const W=Xx.find($e=>$e.id===F.patientId);if(!W){se.error("Please select a valid patient");return}let Ve=0;O.type==="percentage"?Ve=ze*O.value/100:O.type==="fixed"&&(Ve=Math.min(O.value,ze));const Re={id:Date.now().toString(),discountCode:O.code,patientId:W.id,patientName:W.name,originalAmount:ze,discountAmount:Ve,finalAmount:ze-Ve,appliedDate:new Date().toISOString().split("T")[0],invoiceNumber:F.invoiceNumber||`INV-${Date.now()}`,status:"applied"};ge([...ue,Re]),J(G.map($e=>$e.id===O.id?{...$e,usageCount:$e.usageCount+1}:$e)),ne({patientId:"",discountCode:"",originalAmount:"",invoiceNumber:""}),u(!1),se.success(`Discount applied successfully! Saved ${Ve.toLocaleString()}`)},M=()=>{if(!F.discountCode||!F.originalAmount)return null;const O=G.find(Ve=>Ve.code===F.discountCode&&Ve.isActive);if(!O)return null;const ze=parseFloat(F.originalAmount);if(ze<=0)return null;let W=0;return O.type==="percentage"?W=ze*O.value/100:O.type==="fixed"&&(W=Math.min(O.value,ze)),{original:ze,discount:W,final:ze-W}},ee=async()=>{if(!te.title||!te.discountCode||!te.validFrom||!te.validTo){se.error("Please fill in all required fields");return}X(!0),await new Promise(ze=>setTimeout(ze,1500));const O={id:Date.now().toString(),title:te.title,description:te.description,discountCode:te.discountCode,validFrom:te.validFrom,validTo:te.validTo,isActive:new Date(te.validFrom)<=new Date&&new Date(te.validTo)>=new Date,targetAudience:te.targetAudience};xe([...Ee,O]),D({title:"",description:"",discountCode:"",validFrom:"",validTo:"",targetAudience:""}),X(!1),l(!1),se.success(`Promotion "${O.title}" created successfully!`)},U=O=>{T(O),b(!0)},q=()=>{E&&(xe(Ee.filter(O=>O.id!==E)),se.success("Promotion deleted successfully"),b(!1),T(null))},le=O=>rc.find(ze=>ze.value===O)||rc[0],he=G.filter(O=>{const ze=O.code.toLowerCase().includes(f.toLowerCase())||O.name.toLowerCase().includes(f.toLowerCase())||O.description.toLowerCase().includes(f.toLowerCase()),W=x==="all"||O.category===x;return ze&&W}),ve=O=>{switch(O.type){case"percentage":return`${O.value}%`;case"fixed":return`${O.value.toLocaleString()}`;case"service":return"Service Specific";default:return O.value.toString()}},k=G.filter(O=>O.isActive).length,Y=G.reduce((O,ze)=>O+ze.usageCount,0),Ie=G.reduce((O,ze)=>O+(ze.type==="percentage"?ze.value:0),0)/G.filter(O=>O.type==="percentage").length,Fe=ue.reduce((O,ze)=>O+ze.discountAmount,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ie,{onClick:()=>u(!0),variant:"outline",className:"border-[#358E83] text-[#358E83] hover:bg-[#358E83] hover:text-white",children:[e.jsx(oo,{className:"mr-2",size:16}),"Apply Discount"]}),e.jsxs(ie,{onClick:()=>l(!0),variant:"outline",className:"border-[#E94D61] text-[#E94D61] hover:bg-[#E94D61] hover:text-white",children:[e.jsx(ma,{className:"mr-2",size:16}),"Create Promotion"]}),e.jsxs(ie,{onClick:()=>a(!0),className:"bg-[#E94D61] hover:bg-[#E94D61]/90 text-white",children:[e.jsx(ii,{className:"mr-2",size:16}),"Create Discount"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(Le,{children:e.jsx(Be,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Discounts"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:k})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(Or,{className:"text-green-600",size:24})})]})})}),e.jsx(Le,{children:e.jsx(Be,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Usage"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Y})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(En,{className:"text-blue-600",size:24})})]})})}),e.jsx(Le,{children:e.jsx(Be,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg. Discount"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[Ie.toFixed(1),"%"]})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:e.jsx(jy,{className:"text-purple-600",size:24})})]})})}),e.jsx(Le,{children:e.jsx(Be,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Savings"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",Fe.toLocaleString()]})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(oo,{className:"text-green-600",size:24})})]})})}),e.jsx(Le,{children:e.jsx(Be,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Promos"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:Ee.filter(O=>O.isActive).length})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:e.jsx(ma,{className:"text-orange-600",size:24})})]})})})]}),e.jsx(Gt,{open:d,onOpenChange:u,children:e.jsxs(Bt,{className:"max-w-md",children:[e.jsxs(Ut,{children:[e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(oo,{className:"text-[#358E83]",size:20}),"Apply Discount"]}),e.jsx(dn,{children:"Apply a discount code to a patient's bill"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"patientSelect",children:"Select Patient"}),e.jsxs(nn,{value:F.patientId,onValueChange:O=>ne({...F,patientId:O}),children:[e.jsx(sn,{children:e.jsx(rn,{placeholder:"Select a patient"})}),e.jsx(an,{children:Xx.map(O=>e.jsx(lt,{value:O.id,children:O.fullDisplay},O.id))})]})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"discountCodeSelect",children:"Discount Code"}),e.jsxs(nn,{value:F.discountCode,onValueChange:O=>ne({...F,discountCode:O}),children:[e.jsx(sn,{children:e.jsx(rn,{placeholder:"Select discount code"})}),e.jsx(an,{children:G.filter(O=>O.isActive).map(O=>e.jsxs(lt,{value:O.code,children:[O.code," - ",ve(O)," OFF"]},O.code))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"originalAmount",children:"Original Amount ()"}),e.jsx(Ue,{id:"originalAmount",type:"number",min:"0",step:"0.01",value:F.originalAmount,onChange:O=>ne({...F,originalAmount:O.target.value}),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"invoiceNumberApply",children:"Invoice Number"}),e.jsx(Ue,{id:"invoiceNumberApply",value:F.invoiceNumber,onChange:O=>ne({...F,invoiceNumber:O.target.value}),placeholder:"INV-XXXX-XXX"})]})]}),(()=>{const O=M();return O?e.jsxs("div",{className:"bg-[#358E83]/10 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-[#358E83] mb-2",children:"Discount Preview:"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Original Amount:"}),e.jsxs("span",{children:["",O.original.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Discount:"}),e.jsxs("span",{children:["-",O.discount.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg border-t pt-1",children:[e.jsx("span",{children:"Final Amount:"}),e.jsxs("span",{children:["",O.final.toLocaleString()]})]})]})]}):null})(),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(ie,{className:"bg-[#358E83] hover:bg-[#358E83]/90 flex-1",onClick:H,children:"Apply Discount"}),e.jsx(ie,{variant:"outline",onClick:()=>u(!1),children:"Cancel"})]})]})]})}),i&&e.jsxs(Le,{children:[e.jsxs(pt,{className:"bg-[#E94D61] text-white",children:[e.jsxs(ht,{className:"flex items-center",children:[e.jsx(ma,{className:"mr-2",size:20}),"Create New Promotion"]}),e.jsx(pn,{className:"text-white/80",children:"Set up a new promotional campaign"})]}),e.jsxs(Be,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"promotionTitle",children:"Promotion Title"}),e.jsx(Ue,{id:"promotionTitle",value:te.title,onChange:O=>D({...te,title:O.target.value}),placeholder:"e.g., New Year Health Package"})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"targetAudience",children:"Target Audience"}),e.jsx(Ue,{id:"targetAudience",value:te.targetAudience,onChange:O=>D({...te,targetAudience:O.target.value}),placeholder:"e.g., General Public, Couples"})]})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"promotionDescription",children:"Description"}),e.jsx(ha,{id:"promotionDescription",value:te.description,onChange:O=>D({...te,description:O.target.value}),placeholder:"Describe the promotional offer and its benefits",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"promotionDiscountCode",children:"Associated Discount Code"}),e.jsxs(nn,{value:te.discountCode,onValueChange:O=>D({...te,discountCode:O}),children:[e.jsx(sn,{children:e.jsx(rn,{placeholder:"Select discount code"})}),e.jsx(an,{children:G.map(O=>e.jsxs(lt,{value:O.code,children:[O.code," - ",ve(O)," OFF"]},O.code))})]})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"promotionValidFrom",children:"Valid From"}),e.jsx(Ue,{id:"promotionValidFrom",type:"date",value:te.validFrom,onChange:O=>D({...te,validFrom:O.target.value})})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"promotionValidTo",children:"Valid To"}),e.jsx(Ue,{id:"promotionValidTo",type:"date",value:te.validTo,onChange:O=>D({...te,validTo:O.target.value})})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(ie,{className:"bg-[#E94D61] hover:bg-[#E94D61]/90",onClick:ee,children:"Create Promotion"}),e.jsx(ie,{variant:"outline",onClick:()=>l(!1),children:"Cancel"})]})]})]}),s&&e.jsxs(Le,{children:[e.jsxs(pt,{className:"bg-[#358E83] text-white",children:[e.jsxs(ht,{className:"flex items-center",children:[e.jsx(Or,{className:"mr-2",size:20}),"Create New Discount"]}),e.jsx(pn,{className:"text-white/80",children:"Set up a new discount code for patients"})]}),e.jsxs(Be,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"discountCode",children:"Discount Code"}),e.jsx(Ue,{id:"discountCode",value:me.code,onChange:O=>fe({...me,code:O.target.value.toUpperCase()}),placeholder:"e.g., SENIOR20, PWD15"})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"discountName",children:"Discount Name"}),e.jsx(Ue,{id:"discountName",value:me.name,onChange:O=>fe({...me,name:O.target.value}),placeholder:"e.g., Senior Citizen Discount"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"discountCategory",children:"Category"}),e.jsxs(nn,{value:me.category,onValueChange:O=>fe({...me,category:O}),children:[e.jsx(sn,{children:e.jsx(rn,{placeholder:"Select category"})}),e.jsx(an,{children:rc.map(O=>e.jsx(lt,{value:O.value,children:O.label},O.value))})]})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"discountType",children:"Discount Type"}),e.jsxs(nn,{value:me.type,onValueChange:O=>fe({...me,type:O}),children:[e.jsx(sn,{children:e.jsx(rn,{placeholder:"Select type"})}),e.jsxs(an,{children:[e.jsx(lt,{value:"percentage",children:"Percentage (%)"}),e.jsx(lt,{value:"fixed",children:"Fixed Amount ()"}),e.jsx(lt,{value:"service",children:"Service Specific"})]})]})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"discountValue",children:me.type==="percentage"?"Percentage (%)":me.type==="fixed"?"Amount ()":"Value"}),e.jsx(Ue,{id:"discountValue",type:"number",min:"0",max:me.type==="percentage"?"100":void 0,value:me.value,onChange:O=>fe({...me,value:parseFloat(O.target.value)||0}),placeholder:me.type==="percentage"?"20":"1000"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"startDate",children:"Start Date"}),e.jsx(Ue,{id:"startDate",type:"date",value:me.startDate,onChange:O=>fe({...me,startDate:O.target.value})})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"endDate",children:"End Date"}),e.jsx(Ue,{id:"endDate",type:"date",value:me.endDate,onChange:O=>fe({...me,endDate:O.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"description",children:"Description"}),e.jsx(ha,{id:"description",value:me.description,onChange:O=>fe({...me,description:O.target.value}),placeholder:"Describe the discount and its purpose",rows:3})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"conditions",children:"Terms & Conditions"}),e.jsx(ha,{id:"conditions",value:me.conditions,onChange:O=>fe({...me,conditions:O.target.value}),placeholder:"List any conditions or requirements for this discount",rows:2})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(ie,{className:"bg-[#358E83] hover:bg-[#358E83]/90",onClick:ce,children:"Create Discount"}),e.jsx(ie,{variant:"outline",onClick:()=>a(!1),children:"Cancel"})]})]})]}),e.jsxs(Co,{defaultValue:"discounts",className:"space-y-6",children:[e.jsxs(Po,{children:[e.jsx(Jn,{value:"discounts",children:"Discount Codes"}),e.jsx(Jn,{value:"applications",children:"Applications"}),e.jsx(Jn,{value:"promotions",children:"Promotions"})]}),e.jsx(Qn,{value:"discounts",children:e.jsxs(Le,{children:[e.jsx(pt,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ht,{children:"Discount Codes"}),e.jsx(pn,{children:"Manage available discount codes and their usage"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center bg-white border rounded-lg px-3 py-2",children:[e.jsx(us,{className:"mr-2 text-gray-400",size:16}),e.jsx(Ue,{placeholder:"Search discounts...",className:"border-0 p-0 focus-visible:ring-0",value:f,onChange:O=>y(O.target.value)})]}),e.jsxs(nn,{value:x,onValueChange:v,children:[e.jsx(sn,{className:"w-40",children:e.jsx(rn,{placeholder:"All Categories"})}),e.jsxs(an,{children:[e.jsx(lt,{value:"all",children:"All Categories"}),rc.map(O=>e.jsx(lt,{value:O.value,children:O.label},O.value))]})]})]})]})}),e.jsx(Be,{children:e.jsx("div",{className:"space-y-4",children:he.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Or,{className:"mx-auto mb-4 text-gray-400",size:48}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No discounts found"}),e.jsx("p",{className:"text-gray-600",children:f||x!=="all"?"Try adjusting your search criteria or filters.":"Create your first discount code to get started."})]}):he.map(O=>{const ze=le(O.category);return e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-[#358E83]/10 rounded-lg",children:e.jsx(Or,{className:"text-[#358E83]",size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:O.code}),e.jsx(Nt,{className:ze.color,children:ze.label}),e.jsxs(Nt,{variant:"outline",className:"font-bold",children:[ve(O)," OFF"]}),O.isActive?e.jsx(Nt,{className:"bg-green-100 text-green-800",children:"Active"}):e.jsx(Nt,{className:"bg-gray-100 text-gray-800",children:"Inactive"})]}),e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:O.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:O.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(mo,{size:12}),e.jsxs("span",{children:[new Date(O.startDate).toLocaleDateString()," - ",new Date(O.endDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(En,{size:12}),e.jsxs("span",{children:["Used ",O.usageCount," times"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{htmlFor:`toggle-${O.id}`,className:"text-sm",children:O.isActive?"Active":"Inactive"}),e.jsx(as,{id:`toggle-${O.id}`,checked:O.isActive,onCheckedChange:()=>L(O.id)})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(ie,{variant:"ghost",size:"sm",children:e.jsx($r,{size:16})}),e.jsx(ie,{variant:"ghost",size:"sm",children:e.jsx(yc,{size:16})}),e.jsx(ie,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-800",onClick:()=>A(O.id),children:e.jsx(Ur,{size:16})})]})]})]})},O.id)})})})]})}),e.jsx(Qn,{value:"applications",children:e.jsxs(Le,{children:[e.jsx(pt,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(ht,{children:"Discount Applications"}),e.jsx(pn,{children:"Track applied discounts and patient savings"})]})})}),e.jsx(Be,{children:e.jsx("div",{className:"space-y-4",children:ue.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(FN,{className:"mx-auto mb-4 text-gray-400",size:48}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No discount applications"}),e.jsx("p",{className:"text-gray-600",children:"Start applying discounts to patient bills to see them here."})]}):ue.map(O=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-[#358E83]/10 rounded-lg",children:e.jsx(oo,{className:"text-[#358E83]",size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:O.discountCode}),e.jsx(Nt,{className:"bg-green-100 text-green-800",children:"Applied"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(vc,{size:14}),e.jsxs("span",{children:[O.patientName," (",O.patientId,")"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(mo,{size:14}),e.jsx("span",{children:new Date(O.appliedDate).toLocaleDateString()})]}),e.jsx(Nt,{variant:"outline",children:O.invoiceNumber})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Original:"}),e.jsxs("div",{className:"font-medium",children:["",O.originalAmount.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Discount:"}),e.jsxs("div",{className:"font-medium text-green-600",children:["-",O.discountAmount.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Final:"}),e.jsxs("div",{className:"font-bold",children:["",O.finalAmount.toLocaleString()]})]})]})]})]}),e.jsx("div",{className:"flex gap-1",children:e.jsx(ie,{variant:"ghost",size:"sm",children:e.jsx($r,{size:16})})})]})},O.id))})})]})}),e.jsx(Qn,{value:"promotions",children:e.jsxs(Le,{children:[e.jsx(pt,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(ht,{children:"Active Promotions"}),e.jsx(pn,{children:"Manage promotional campaigns and offers"})]})})}),e.jsx(Be,{children:e.jsx("div",{className:"space-y-4",children:Ee.map(O=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-[#E94D61]/10 rounded-lg",children:e.jsx(ma,{className:"text-[#E94D61]",size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:O.title}),O.isActive?e.jsx(Nt,{className:"bg-green-100 text-green-800",children:"Active"}):e.jsx(Nt,{className:"bg-gray-100 text-gray-800",children:"Scheduled"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:O.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Or,{size:12}),e.jsxs("span",{children:["Code: ",O.discountCode]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(mo,{size:12}),e.jsxs("span",{children:[new Date(O.validFrom).toLocaleDateString()," - ",new Date(O.validTo).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(En,{size:12}),e.jsx("span",{children:O.targetAudience})]})]})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(ie,{variant:"ghost",size:"sm",children:e.jsx($r,{size:16})}),e.jsx(ie,{variant:"ghost",size:"sm",children:e.jsx(yc,{size:16})}),e.jsx(ie,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-800",onClick:()=>U(O.id),children:e.jsx(Ur,{size:16})})]})]})},O.id))})})]})})]}),e.jsx(zs,{open:h,onOpenChange:C,children:e.jsxs(Bs,{children:[e.jsxs(Us,{children:[e.jsx(Vs,{children:"Delete Discount"}),e.jsx(ba,{children:"Are you sure you want to delete this discount code? This action cannot be undone and may affect existing applications."})]}),e.jsxs(Hs,{children:[e.jsx(Ws,{children:"Cancel"}),e.jsx(qs,{onClick:R,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),e.jsx(zs,{open:w,onOpenChange:b,children:e.jsxs(Bs,{children:[e.jsxs(Us,{children:[e.jsx(Vs,{children:"Delete Promotion"}),e.jsx(ba,{children:"Are you sure you want to delete this promotion? This action cannot be undone."})]}),e.jsxs(Hs,{children:[e.jsx(Ws,{children:"Cancel"}),e.jsx(qs,{onClick:q,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),e.jsx(Gt,{open:z,onOpenChange:()=>{},children:e.jsxs(Bt,{className:"sm:max-w-md [&>button]:hidden",children:[e.jsxs(Ut,{children:[e.jsx(Ht,{className:"sr-only",children:"Creating Discount"}),e.jsx(dn,{className:"sr-only",children:"Please wait while we create the discount code"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-[#358E83] border-t-transparent rounded-full animate-spin mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Creating Discount"}),e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Please wait while we create the discount code..."})]})]})}),e.jsx(Gt,{open:Q,onOpenChange:()=>{},children:e.jsxs(Bt,{className:"sm:max-w-md [&>button]:hidden",children:[e.jsxs(Ut,{children:[e.jsx(Ht,{className:"sr-only",children:"Creating Promotion"}),e.jsx(dn,{className:"sr-only",children:"Please wait while we create the promotion"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-[#E94D61] border-t-transparent rounded-full animate-spin mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Creating Promotion"}),e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Please wait while we create the promotion..."})]})]})})]})}const jm=[{value:"senior",label:"Senior Citizen",color:"bg-blue-100 text-blue-800"},{value:"pwd",label:"PWD",color:"bg-green-100 text-green-800"},{value:"employee",label:"Employee",color:"bg-purple-100 text-purple-800"},{value:"insurance",label:"Insurance",color:"bg-orange-100 text-orange-800"},{value:"promotional",label:"Promotional",color:"bg-pink-100 text-pink-800"},{value:"seasonal",label:"Seasonal",color:"bg-yellow-100 text-yellow-800"}];function gI({onNavigateToView:n}){const[s,a]=p.useState(!1),[i,l]=p.useState(!1),[d,u]=p.useState(""),[f,y]=p.useState("all"),[x,v]=p.useState(!1),[h,C]=p.useState(null),[P,S]=p.useState(!1),[w,b]=p.useState(null),[E,T]=p.useState(!1),[z,B]=p.useState(!1),[Q,X]=p.useState([]),[G,J]=p.useState([]);p.useEffect(()=>{ue()},[]);const ue=()=>{X(wn.getAllDiscounts()),J(wn.getAllPromotions())},[ge,Ee]=p.useState({code:"",name:"",type:"percentage",value:0,description:"",startDate:"",endDate:"",conditions:""}),[xe,me]=p.useState({title:"",description:"",discountCode:"",validFrom:"",validTo:"",targetAudience:""}),fe=M=>{try{wn.toggleDiscountStatus(M),ue(),se.success("Discount status updated")}catch{se.error("Failed to update discount status")}},F=()=>{if(!ge.code||!ge.name||!ge.startDate||!ge.endDate){se.error("Please fill in all required fields");return}T(!0);try{const M=wn.createDiscount({code:ge.code,name:ge.name,type:ge.type,value:ge.value,description:ge.description,category:ge.category||"promotional",startDate:ge.startDate,endDate:ge.endDate,isActive:!0,conditions:ge.conditions},"Admin");ue(),Ee({code:"",name:"",type:"percentage",value:0,description:"",startDate:"",endDate:"",conditions:""}),a(!1),se.success(`Discount code "${M.code}" created successfully!`)}catch(M){se.error(M.message||"Failed to create discount")}finally{T(!1)}},ne=M=>{C(M),v(!0)},te=()=>{if(h){try{wn.archiveDiscount(h),ue(),se.success("Discount moved to archive")}catch{se.error("Failed to move discount to archive")}C(null)}v(!1)},D=()=>{if(!xe.title||!xe.discountCode||!xe.validFrom||!xe.validTo){se.error("Please fill in all required fields");return}B(!0);try{wn.createPromotion({title:xe.title,description:xe.description,discountCode:xe.discountCode,validFrom:xe.validFrom,validTo:xe.validTo,isActive:!0,targetAudience:xe.targetAudience},"Admin"),ue(),me({title:"",description:"",discountCode:"",validFrom:"",validTo:"",targetAudience:""}),l(!1),se.success("Promotion created successfully!")}catch(M){se.error(M.message||"Failed to create promotion")}finally{B(!1)}},L=M=>{b(M),S(!0)},ce=()=>{if(w){try{wn.archivePromotion(w),ue(),se.success("Promotion moved to archive")}catch{se.error("Failed to move promotion to archive")}b(null)}S(!1)},A=M=>{try{wn.togglePromotionStatus(M),ue(),se.success("Promotion status updated")}catch{se.error("Failed to update promotion status")}},R=Q.filter(M=>{if(M.isArchived)return!1;const ee=M.code.toLowerCase().includes(d.toLowerCase())||M.name.toLowerCase().includes(d.toLowerCase())||M.description.toLowerCase().includes(d.toLowerCase()),U=f==="all"||M.category===f;return ee&&U}),H=M=>{const ee=jm.find(U=>U.value===M);return ee?ee.color:"bg-gray-100 text-gray-800"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(Le,{children:e.jsx(Be,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Discounts"}),e.jsx("p",{className:"text-2xl font-bold",children:Q.length})]}),e.jsx(Or,{className:"text-[#358E83]",size:32})]})})}),e.jsx(Le,{children:e.jsx(Be,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Discounts"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:Q.filter(M=>M.isActive).length})]}),e.jsx(AS,{className:"text-green-600",size:32})]})})}),e.jsx(Le,{children:e.jsx(Be,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Usage"}),e.jsx("p",{className:"text-2xl font-bold",children:Q.reduce((M,ee)=>M+ee.usageCount,0)})]}),e.jsx(En,{className:"text-blue-600",size:32})]})})}),e.jsx(Le,{children:e.jsx(Be,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Promotions"}),e.jsx("p",{className:"text-2xl font-bold",children:G.length})]}),e.jsx(ma,{className:"text-purple-600",size:32})]})})})]}),e.jsxs(Co,{defaultValue:"discounts",className:"space-y-6",children:[e.jsxs(Po,{className:"grid w-full grid-cols-2",children:[e.jsx(Jn,{value:"discounts",children:"Discount Codes"}),e.jsx(Jn,{value:"promotions",children:"Promotional Campaigns"})]}),e.jsx(Qn,{value:"discounts",className:"space-y-4",children:e.jsxs(Le,{children:[e.jsx(pt,{className:"bg-[#358E83] text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ht,{className:"flex items-center",children:[e.jsx(Or,{className:"mr-2",size:20}),"Discount Management"]}),e.jsx(pn,{className:"text-white/80",children:"Create, manage, and track discount codes"})]}),e.jsxs(ie,{onClick:()=>a(!0),className:"bg-white text-[#358E83] hover:bg-gray-100",children:[e.jsx(ii,{className:"mr-2",size:16}),"Create Discount"]})]})}),e.jsxs(Be,{className:"p-6",children:[e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx(Ue,{placeholder:"Search discounts...",value:d,onChange:M=>u(M.target.value),className:"pl-10"})]}),e.jsxs(nn,{value:f,onValueChange:y,children:[e.jsx(sn,{className:"w-48",children:e.jsx(rn,{placeholder:"Filter by category"})}),e.jsxs(an,{children:[e.jsx(lt,{value:"all",children:"All Categories"}),jm.map(M=>e.jsx(lt,{value:M.value,children:M.label},M.value))]})]})]}),e.jsx("div",{className:"space-y-3",children:R.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Or,{className:"mx-auto mb-3 opacity-50",size:48}),e.jsx("p",{children:"No discounts found"})]}):R.map(M=>e.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"font-semibold",children:M.name}),e.jsx(Nt,{className:H(M.category),children:jm.find(ee=>ee.value===M.category)?.label}),M.isActive?e.jsx(Nt,{className:"bg-green-100 text-green-800",children:"Active"}):e.jsx(Nt,{variant:"secondary",children:"Inactive"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Code"}),e.jsx("p",{className:"font-mono font-semibold",children:M.code})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Discount"}),e.jsx("p",{className:"font-semibold",children:M.type==="percentage"?`${M.value}%`:`${M.value}`})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Usage"}),e.jsxs("p",{className:"font-semibold",children:[M.usageCount," times"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Valid Until"}),e.jsx("p",{className:"font-semibold",children:new Date(M.endDate).toLocaleDateString("en-PH")})]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:M.description}),M.conditions&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:M.conditions})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx(as,{checked:M.isActive,onCheckedChange:()=>fe(M.id)}),e.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>ne(M.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Ur,{size:16})})]})]})},M.id))})]})]})}),e.jsx(Qn,{value:"promotions",className:"space-y-4",children:e.jsxs(Le,{children:[e.jsx(pt,{className:"bg-[#358E83] text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ht,{className:"flex items-center",children:[e.jsx(ma,{className:"mr-2",size:20}),"Promotional Campaigns"]}),e.jsx(pn,{className:"text-white/80",children:"Manage marketing promotions and campaigns"})]}),e.jsxs(ie,{onClick:()=>l(!0),className:"bg-white text-[#358E83] hover:bg-gray-100",children:[e.jsx(ii,{className:"mr-2",size:16}),"Create Promotion"]})]})}),e.jsx(Be,{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:G.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ma,{className:"mx-auto mb-3 opacity-50",size:48}),e.jsx("p",{children:"No promotions found"})]}):G.map(M=>e.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"font-semibold",children:M.title}),M.isActive?e.jsx(Nt,{className:"bg-green-100 text-green-800",children:"Active"}):e.jsx(Nt,{variant:"secondary",children:"Inactive"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:M.description}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Discount Code"}),e.jsx("p",{className:"font-mono font-semibold",children:M.discountCode})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Valid Period"}),e.jsxs("p",{className:"font-semibold",children:[new Date(M.validFrom).toLocaleDateString("en-PH")," - ",new Date(M.validTo).toLocaleDateString("en-PH")]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Target Audience"}),e.jsx("p",{className:"font-semibold",children:M.targetAudience})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx(as,{checked:M.isActive,onCheckedChange:()=>A(M.id)}),e.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>L(M.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Ur,{size:16})})]})]})},M.id))})})]})})]}),e.jsx(Gt,{open:s,onOpenChange:a,children:e.jsxs(Bt,{className:"max-w-2xl",children:[e.jsxs(Ut,{children:[e.jsx(Ht,{children:"Create New Discount"}),e.jsx(dn,{children:"Set up a new discount code for patients"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"discount-code",children:"Discount Code *"}),e.jsx(Ue,{id:"discount-code",placeholder:"e.g., SENIOR20",value:ge.code,onChange:M=>Ee({...ge,code:M.target.value.toUpperCase()})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"discount-name",children:"Discount Name *"}),e.jsx(Ue,{id:"discount-name",placeholder:"e.g., Senior Citizen Discount",value:ge.name,onChange:M=>Ee({...ge,name:M.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"discount-type",children:"Type *"}),e.jsxs(nn,{value:ge.type,onValueChange:M=>Ee({...ge,type:M}),children:[e.jsx(sn,{children:e.jsx(rn,{})}),e.jsxs(an,{children:[e.jsx(lt,{value:"percentage",children:"Percentage"}),e.jsx(lt,{value:"fixed",children:"Fixed Amount"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"discount-value",children:"Value *"}),e.jsx(Ue,{id:"discount-value",type:"number",placeholder:ge.type==="percentage"?"20":"500",value:ge.value||"",onChange:M=>Ee({...ge,value:parseFloat(M.target.value)||0})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"discount-description",children:"Description"}),e.jsx(ha,{id:"discount-description",placeholder:"Describe the discount...",value:ge.description,onChange:M=>Ee({...ge,description:M.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"start-date",children:"Start Date *"}),e.jsx(Ue,{id:"start-date",type:"date",value:ge.startDate,onChange:M=>Ee({...ge,startDate:M.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"end-date",children:"End Date *"}),e.jsx(Ue,{id:"end-date",type:"date",value:ge.endDate,onChange:M=>Ee({...ge,endDate:M.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"conditions",children:"Terms and Conditions"}),e.jsx(ha,{id:"conditions",placeholder:"Enter any conditions or restrictions...",value:ge.conditions,onChange:M=>Ee({...ge,conditions:M.target.value})})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(ie,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(ie,{onClick:F,disabled:E,className:"bg-[#358E83] hover:bg-[#358E83]/90",children:E?"Creating...":"Create Discount"})]})]})]})}),e.jsx(Gt,{open:i,onOpenChange:l,children:e.jsxs(Bt,{className:"max-w-2xl",children:[e.jsxs(Ut,{children:[e.jsx(Ht,{children:"Create New Promotion"}),e.jsx(dn,{children:"Set up a promotional campaign"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"promo-title",children:"Promotion Title *"}),e.jsx(Ue,{id:"promo-title",placeholder:"e.g., New Year Health Package",value:xe.title,onChange:M=>me({...xe,title:M.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"promo-description",children:"Description *"}),e.jsx(ha,{id:"promo-description",placeholder:"Describe the promotion...",value:xe.description,onChange:M=>me({...xe,description:M.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"promo-code",children:"Discount Code *"}),e.jsx(Ue,{id:"promo-code",placeholder:"e.g., NEWYEAR2025",value:xe.discountCode,onChange:M=>me({...xe,discountCode:M.target.value.toUpperCase()})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"target-audience",children:"Target Audience"}),e.jsx(Ue,{id:"target-audience",placeholder:"e.g., General Public",value:xe.targetAudience,onChange:M=>me({...xe,targetAudience:M.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"promo-start",children:"Valid From *"}),e.jsx(Ue,{id:"promo-start",type:"date",value:xe.validFrom,onChange:M=>me({...xe,validFrom:M.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{htmlFor:"promo-end",children:"Valid To *"}),e.jsx(Ue,{id:"promo-end",type:"date",value:xe.validTo,onChange:M=>me({...xe,validTo:M.target.value})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(ie,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(ie,{onClick:D,disabled:z,className:"bg-[#358E83] hover:bg-[#358E83]/90",children:z?"Creating...":"Create Promotion"})]})]})]})}),e.jsx(zs,{open:x,onOpenChange:v,children:e.jsxs(Bs,{children:[e.jsxs(Us,{children:[e.jsx(Vs,{children:"Move Discount to Archive?"}),e.jsx(ba,{children:"This will move the discount code to the archive. You can restore it later from the Archive."})]}),e.jsxs(Hs,{children:[e.jsx(Ws,{children:"Cancel"}),e.jsx(qs,{onClick:te,className:"bg-red-600 hover:bg-red-700",children:"Move to Archive"})]})]})}),e.jsx(zs,{open:P,onOpenChange:S,children:e.jsxs(Bs,{children:[e.jsxs(Us,{children:[e.jsx(Vs,{children:"Move Promotion to Archive?"}),e.jsx(ba,{children:"This will move the promotional campaign to the archive. You can restore it later from the Archive."})]}),e.jsxs(Hs,{children:[e.jsx(Ws,{children:"Cancel"}),e.jsx(qs,{onClick:ce,className:"bg-red-600 hover:bg-red-700",children:"Move to Archive"})]})]})})]})}var Zm=["Enter"," "],xI=["ArrowDown","PageUp","Home"],Iw=["ArrowUp","PageDown","End"],yI=[...xI,...Iw],vI={ltr:[...Zm,"ArrowRight"],rtl:[...Zm,"ArrowLeft"]},wI={ltr:["ArrowLeft"],rtl:["ArrowRight"]},_o="Menu",[xo,jI,bI]=vf(_o),[Ca,Rw]=br(_o,[bI,gi,qc]),cd=gi(),Tw=qc(),[NI,Pa]=Ca(_o),[SI,Mo]=Ca(_o),_w=n=>{const{__scopeMenu:s,open:a=!1,children:i,dir:l,onOpenChange:d,modal:u=!0}=n,f=cd(s),[y,x]=p.useState(null),v=p.useRef(!1),h=Hr(d),C=Vc(l);return p.useEffect(()=>{const P=()=>{v.current=!0,document.addEventListener("pointerdown",S,{capture:!0,once:!0}),document.addEventListener("pointermove",S,{capture:!0,once:!0})},S=()=>v.current=!1;return document.addEventListener("keydown",P,{capture:!0}),()=>{document.removeEventListener("keydown",P,{capture:!0}),document.removeEventListener("pointerdown",S,{capture:!0}),document.removeEventListener("pointermove",S,{capture:!0})}},[]),e.jsx(kf,{...f,children:e.jsx(NI,{scope:s,open:a,onOpenChange:h,content:y,onContentChange:x,children:e.jsx(SI,{scope:s,onClose:p.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:v,dir:C,modal:u,children:i})})})};_w.displayName=_o;var CI="MenuAnchor",zf=p.forwardRef((n,s)=>{const{__scopeMenu:a,...i}=n,l=cd(a);return e.jsx(Qc,{...l,...i,ref:s})});zf.displayName=CI;var Bf="MenuPortal",[PI,Mw]=Ca(Bf,{forceMount:void 0}),Ow=n=>{const{__scopeMenu:s,forceMount:a,children:i,container:l}=n,d=Pa(Bf,s);return e.jsx(PI,{scope:s,forceMount:a,children:e.jsx(Nr,{present:a||d.open,children:e.jsx(bo,{asChild:!0,container:l,children:i})})})};Ow.displayName=Bf;var lr="MenuContent",[EI,Uf]=Ca(lr),Lw=p.forwardRef((n,s)=>{const a=Mw(lr,n.__scopeMenu),{forceMount:i=a.forceMount,...l}=n,d=Pa(lr,n.__scopeMenu),u=Mo(lr,n.__scopeMenu);return e.jsx(xo.Provider,{scope:n.__scopeMenu,children:e.jsx(Nr,{present:i||d.open,children:e.jsx(xo.Slot,{scope:n.__scopeMenu,children:u.modal?e.jsx(DI,{...l,ref:s}):e.jsx(kI,{...l,ref:s})})})})}),DI=p.forwardRef((n,s)=>{const a=Pa(lr,n.__scopeMenu),i=p.useRef(null),l=Pt(s,i);return p.useEffect(()=>{const d=i.current;if(d)return $c(d)},[]),e.jsx(Hf,{...n,ref:l,trapFocus:a.open,disableOutsidePointerEvents:a.open,disableOutsideScroll:!0,onFocusOutside:Ge(n.onFocusOutside,d=>d.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>a.onOpenChange(!1)})}),kI=p.forwardRef((n,s)=>{const a=Pa(lr,n.__scopeMenu);return e.jsx(Hf,{...n,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>a.onOpenChange(!1)})}),AI=Os("MenuContent.ScrollLock"),Hf=p.forwardRef((n,s)=>{const{__scopeMenu:a,loop:i=!1,trapFocus:l,onOpenAutoFocus:d,onCloseAutoFocus:u,disableOutsidePointerEvents:f,onEntryFocus:y,onEscapeKeyDown:x,onPointerDownOutside:v,onFocusOutside:h,onInteractOutside:C,onDismiss:P,disableOutsideScroll:S,...w}=n,b=Pa(lr,a),E=Mo(lr,a),T=cd(a),z=Tw(a),B=jI(a),[Q,X]=p.useState(null),G=p.useRef(null),J=Pt(s,G,b.onContentChange),ue=p.useRef(0),ge=p.useRef(""),Ee=p.useRef(0),xe=p.useRef(null),me=p.useRef("right"),fe=p.useRef(0),F=S?No:p.Fragment,ne=S?{as:AI,allowPinchZoom:!0}:void 0,te=L=>{const ce=ge.current+L,A=B().filter(q=>!q.disabled),R=document.activeElement,H=A.find(q=>q.ref.current===R)?.textValue,M=A.map(q=>q.textValue),ee=UI(M,ce,H),U=A.find(q=>q.textValue===ee)?.ref.current;(function q(le){ge.current=le,window.clearTimeout(ue.current),le!==""&&(ue.current=window.setTimeout(()=>q(""),1e3))})(ce),U&&setTimeout(()=>U.focus())};p.useEffect(()=>()=>window.clearTimeout(ue.current),[]),Lc();const D=p.useCallback(L=>me.current===xe.current?.side&&VI(L,xe.current?.area),[]);return e.jsx(EI,{scope:a,searchRef:ge,onItemEnter:p.useCallback(L=>{D(L)&&L.preventDefault()},[D]),onItemLeave:p.useCallback(L=>{D(L)||(G.current?.focus(),X(null))},[D]),onTriggerLeave:p.useCallback(L=>{D(L)&&L.preventDefault()},[D]),pointerGraceTimerRef:Ee,onPointerGraceIntentChange:p.useCallback(L=>{xe.current=L},[]),children:e.jsx(F,{...ne,children:e.jsx(jo,{asChild:!0,trapped:l,onMountAutoFocus:Ge(d,L=>{L.preventDefault(),G.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:u,children:e.jsx(wo,{asChild:!0,disableOutsidePointerEvents:f,onEscapeKeyDown:x,onPointerDownOutside:v,onFocusOutside:h,onInteractOutside:C,onDismiss:P,children:e.jsx(p0,{asChild:!0,...z,dir:E.dir,orientation:"vertical",loop:i,currentTabStopId:Q,onCurrentTabStopIdChange:X,onEntryFocus:Ge(y,L=>{E.isUsingKeyboardRef.current||L.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Af,{role:"menu","aria-orientation":"vertical","data-state":Zw(b.open),"data-radix-menu-content":"",dir:E.dir,...T,...w,ref:J,style:{outline:"none",...w.style},onKeyDown:Ge(w.onKeyDown,L=>{const A=L.target.closest("[data-radix-menu-content]")===L.currentTarget,R=L.ctrlKey||L.altKey||L.metaKey,H=L.key.length===1;A&&(L.key==="Tab"&&L.preventDefault(),!R&&H&&te(L.key));const M=G.current;if(L.target!==M||!yI.includes(L.key))return;L.preventDefault();const U=B().filter(q=>!q.disabled).map(q=>q.ref.current);Iw.includes(L.key)&&U.reverse(),zI(U)}),onBlur:Ge(n.onBlur,L=>{L.currentTarget.contains(L.target)||(window.clearTimeout(ue.current),ge.current="")}),onPointerMove:Ge(n.onPointerMove,yo(L=>{const ce=L.target,A=fe.current!==L.clientX;if(L.currentTarget.contains(ce)&&A){const R=L.clientX>fe.current?"right":"left";me.current=R,fe.current=L.clientX}}))})})})})})})});Lw.displayName=lr;var II="MenuGroup",Vf=p.forwardRef((n,s)=>{const{__scopeMenu:a,...i}=n;return e.jsx(it.div,{role:"group",...i,ref:s})});Vf.displayName=II;var RI="MenuLabel",Fw=p.forwardRef((n,s)=>{const{__scopeMenu:a,...i}=n;return e.jsx(it.div,{...i,ref:s})});Fw.displayName=RI;var Ac="MenuItem",Zx="menu.itemSelect",dd=p.forwardRef((n,s)=>{const{disabled:a=!1,onSelect:i,...l}=n,d=p.useRef(null),u=Mo(Ac,n.__scopeMenu),f=Uf(Ac,n.__scopeMenu),y=Pt(s,d),x=p.useRef(!1),v=()=>{const h=d.current;if(!a&&h){const C=new CustomEvent(Zx,{bubbles:!0,cancelable:!0});h.addEventListener(Zx,P=>i?.(P),{once:!0}),Dy(h,C),C.defaultPrevented?x.current=!1:u.onClose()}};return e.jsx($w,{...l,ref:y,disabled:a,onClick:Ge(n.onClick,v),onPointerDown:h=>{n.onPointerDown?.(h),x.current=!0},onPointerUp:Ge(n.onPointerUp,h=>{x.current||h.currentTarget?.click()}),onKeyDown:Ge(n.onKeyDown,h=>{const C=f.searchRef.current!=="";a||C&&h.key===" "||Zm.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});dd.displayName=Ac;var $w=p.forwardRef((n,s)=>{const{__scopeMenu:a,disabled:i=!1,textValue:l,...d}=n,u=Uf(Ac,a),f=Tw(a),y=p.useRef(null),x=Pt(s,y),[v,h]=p.useState(!1),[C,P]=p.useState("");return p.useEffect(()=>{const S=y.current;S&&P((S.textContent??"").trim())},[d.children]),e.jsx(xo.ItemSlot,{scope:a,disabled:i,textValue:l??C,children:e.jsx(h0,{asChild:!0,...f,focusable:!i,children:e.jsx(it.div,{role:"menuitem","data-highlighted":v?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...d,ref:x,onPointerMove:Ge(n.onPointerMove,yo(S=>{i?u.onItemLeave(S):(u.onItemEnter(S),S.defaultPrevented||S.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ge(n.onPointerLeave,yo(S=>u.onItemLeave(S))),onFocus:Ge(n.onFocus,()=>h(!0)),onBlur:Ge(n.onBlur,()=>h(!1))})})})}),TI="MenuCheckboxItem",zw=p.forwardRef((n,s)=>{const{checked:a=!1,onCheckedChange:i,...l}=n;return e.jsx(qw,{scope:n.__scopeMenu,checked:a,children:e.jsx(dd,{role:"menuitemcheckbox","aria-checked":Ic(a)?"mixed":a,...l,ref:s,"data-state":Wf(a),onSelect:Ge(l.onSelect,()=>i?.(Ic(a)?!0:!a),{checkForDefaultPrevented:!1})})})});zw.displayName=TI;var Bw="MenuRadioGroup",[_I,MI]=Ca(Bw,{value:void 0,onValueChange:()=>{}}),Uw=p.forwardRef((n,s)=>{const{value:a,onValueChange:i,...l}=n,d=Hr(i);return e.jsx(_I,{scope:n.__scopeMenu,value:a,onValueChange:d,children:e.jsx(Vf,{...l,ref:s})})});Uw.displayName=Bw;var Hw="MenuRadioItem",Vw=p.forwardRef((n,s)=>{const{value:a,...i}=n,l=MI(Hw,n.__scopeMenu),d=a===l.value;return e.jsx(qw,{scope:n.__scopeMenu,checked:d,children:e.jsx(dd,{role:"menuitemradio","aria-checked":d,...i,ref:s,"data-state":Wf(d),onSelect:Ge(i.onSelect,()=>l.onValueChange?.(a),{checkForDefaultPrevented:!1})})})});Vw.displayName=Hw;var qf="MenuItemIndicator",[qw,OI]=Ca(qf,{checked:!1}),Ww=p.forwardRef((n,s)=>{const{__scopeMenu:a,forceMount:i,...l}=n,d=OI(qf,a);return e.jsx(Nr,{present:i||Ic(d.checked)||d.checked===!0,children:e.jsx(it.span,{...l,ref:s,"data-state":Wf(d.checked)})})});Ww.displayName=qf;var LI="MenuSeparator",Kw=p.forwardRef((n,s)=>{const{__scopeMenu:a,...i}=n;return e.jsx(it.div,{role:"separator","aria-orientation":"horizontal",...i,ref:s})});Kw.displayName=LI;var FI="MenuArrow",Gw=p.forwardRef((n,s)=>{const{__scopeMenu:a,...i}=n,l=cd(a);return e.jsx(If,{...l,...i,ref:s})});Gw.displayName=FI;var $I="MenuSub",[mR,Yw]=Ca($I),co="MenuSubTrigger",Jw=p.forwardRef((n,s)=>{const a=Pa(co,n.__scopeMenu),i=Mo(co,n.__scopeMenu),l=Yw(co,n.__scopeMenu),d=Uf(co,n.__scopeMenu),u=p.useRef(null),{pointerGraceTimerRef:f,onPointerGraceIntentChange:y}=d,x={__scopeMenu:n.__scopeMenu},v=p.useCallback(()=>{u.current&&window.clearTimeout(u.current),u.current=null},[]);return p.useEffect(()=>v,[v]),p.useEffect(()=>{const h=f.current;return()=>{window.clearTimeout(h),y(null)}},[f,y]),e.jsx(zf,{asChild:!0,...x,children:e.jsx($w,{id:l.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":l.contentId,"data-state":Zw(a.open),...n,ref:os(s,l.onTriggerChange),onClick:h=>{n.onClick?.(h),!(n.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),a.open||a.onOpenChange(!0))},onPointerMove:Ge(n.onPointerMove,yo(h=>{d.onItemEnter(h),!h.defaultPrevented&&!n.disabled&&!a.open&&!u.current&&(d.onPointerGraceIntentChange(null),u.current=window.setTimeout(()=>{a.onOpenChange(!0),v()},100))})),onPointerLeave:Ge(n.onPointerLeave,yo(h=>{v();const C=a.content?.getBoundingClientRect();if(C){const P=a.content?.dataset.side,S=P==="right",w=S?-5:5,b=C[S?"left":"right"],E=C[S?"right":"left"];d.onPointerGraceIntentChange({area:[{x:h.clientX+w,y:h.clientY},{x:b,y:C.top},{x:E,y:C.top},{x:E,y:C.bottom},{x:b,y:C.bottom}],side:P}),window.clearTimeout(f.current),f.current=window.setTimeout(()=>d.onPointerGraceIntentChange(null),300)}else{if(d.onTriggerLeave(h),h.defaultPrevented)return;d.onPointerGraceIntentChange(null)}})),onKeyDown:Ge(n.onKeyDown,h=>{const C=d.searchRef.current!=="";n.disabled||C&&h.key===" "||vI[i.dir].includes(h.key)&&(a.onOpenChange(!0),a.content?.focus(),h.preventDefault())})})})});Jw.displayName=co;var Qw="MenuSubContent",Xw=p.forwardRef((n,s)=>{const a=Mw(lr,n.__scopeMenu),{forceMount:i=a.forceMount,...l}=n,d=Pa(lr,n.__scopeMenu),u=Mo(lr,n.__scopeMenu),f=Yw(Qw,n.__scopeMenu),y=p.useRef(null),x=Pt(s,y);return e.jsx(xo.Provider,{scope:n.__scopeMenu,children:e.jsx(Nr,{present:i||d.open,children:e.jsx(xo.Slot,{scope:n.__scopeMenu,children:e.jsx(Hf,{id:f.contentId,"aria-labelledby":f.triggerId,...l,ref:x,align:"start",side:u.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:v=>{u.isUsingKeyboardRef.current&&y.current?.focus(),v.preventDefault()},onCloseAutoFocus:v=>v.preventDefault(),onFocusOutside:Ge(n.onFocusOutside,v=>{v.target!==f.trigger&&d.onOpenChange(!1)}),onEscapeKeyDown:Ge(n.onEscapeKeyDown,v=>{u.onClose(),v.preventDefault()}),onKeyDown:Ge(n.onKeyDown,v=>{const h=v.currentTarget.contains(v.target),C=wI[u.dir].includes(v.key);h&&C&&(d.onOpenChange(!1),f.trigger?.focus(),v.preventDefault())})})})})})});Xw.displayName=Qw;function Zw(n){return n?"open":"closed"}function Ic(n){return n==="indeterminate"}function Wf(n){return Ic(n)?"indeterminate":n?"checked":"unchecked"}function zI(n){const s=document.activeElement;for(const a of n)if(a===s||(a.focus(),document.activeElement!==s))return}function BI(n,s){return n.map((a,i)=>n[(s+i)%n.length])}function UI(n,s,a){const l=s.length>1&&Array.from(s).every(x=>x===s[0])?s[0]:s,d=a?n.indexOf(a):-1;let u=BI(n,Math.max(d,0));l.length===1&&(u=u.filter(x=>x!==a));const y=u.find(x=>x.toLowerCase().startsWith(l.toLowerCase()));return y!==a?y:void 0}function HI(n,s){const{x:a,y:i}=n;let l=!1;for(let d=0,u=s.length-1;d<s.length;u=d++){const f=s[d],y=s[u],x=f.x,v=f.y,h=y.x,C=y.y;v>i!=C>i&&a<(h-x)*(i-v)/(C-v)+x&&(l=!l)}return l}function VI(n,s){if(!s)return!1;const a={x:n.clientX,y:n.clientY};return HI(a,s)}function yo(n){return s=>s.pointerType==="mouse"?n(s):void 0}var qI=_w,WI=zf,KI=Ow,GI=Lw,YI=Vf,JI=Fw,QI=dd,XI=zw,ZI=Uw,e5=Vw,t5=Ww,n5=Kw,r5=Gw,s5=Jw,a5=Xw,ud="DropdownMenu",[i5]=br(ud,[Rw]),Rn=Rw(),[o5,ej]=i5(ud),tj=n=>{const{__scopeDropdownMenu:s,children:a,dir:i,open:l,defaultOpen:d,onOpenChange:u,modal:f=!0}=n,y=Rn(s),x=p.useRef(null),[v,h]=Ls({prop:l,defaultProp:d??!1,onChange:u,caller:ud});return e.jsx(o5,{scope:s,triggerId:jn(),triggerRef:x,contentId:jn(),open:v,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(C=>!C),[h]),modal:f,children:e.jsx(qI,{...y,open:v,onOpenChange:h,dir:i,modal:f,children:a})})};tj.displayName=ud;var nj="DropdownMenuTrigger",rj=p.forwardRef((n,s)=>{const{__scopeDropdownMenu:a,disabled:i=!1,...l}=n,d=ej(nj,a),u=Rn(a);return e.jsx(WI,{asChild:!0,...u,children:e.jsx(it.button,{type:"button",id:d.triggerId,"aria-haspopup":"menu","aria-expanded":d.open,"aria-controls":d.open?d.contentId:void 0,"data-state":d.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...l,ref:os(s,d.triggerRef),onPointerDown:Ge(n.onPointerDown,f=>{!i&&f.button===0&&f.ctrlKey===!1&&(d.onOpenToggle(),d.open||f.preventDefault())}),onKeyDown:Ge(n.onKeyDown,f=>{i||(["Enter"," "].includes(f.key)&&d.onOpenToggle(),f.key==="ArrowDown"&&d.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(f.key)&&f.preventDefault())})})})});rj.displayName=nj;var l5="DropdownMenuPortal",sj=n=>{const{__scopeDropdownMenu:s,...a}=n,i=Rn(s);return e.jsx(KI,{...i,...a})};sj.displayName=l5;var aj="DropdownMenuContent",ij=p.forwardRef((n,s)=>{const{__scopeDropdownMenu:a,...i}=n,l=ej(aj,a),d=Rn(a),u=p.useRef(!1);return e.jsx(GI,{id:l.contentId,"aria-labelledby":l.triggerId,...d,...i,ref:s,onCloseAutoFocus:Ge(n.onCloseAutoFocus,f=>{u.current||l.triggerRef.current?.focus(),u.current=!1,f.preventDefault()}),onInteractOutside:Ge(n.onInteractOutside,f=>{const y=f.detail.originalEvent,x=y.button===0&&y.ctrlKey===!0,v=y.button===2||x;(!l.modal||v)&&(u.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ij.displayName=aj;var c5="DropdownMenuGroup",d5=p.forwardRef((n,s)=>{const{__scopeDropdownMenu:a,...i}=n,l=Rn(a);return e.jsx(YI,{...l,...i,ref:s})});d5.displayName=c5;var u5="DropdownMenuLabel",m5=p.forwardRef((n,s)=>{const{__scopeDropdownMenu:a,...i}=n,l=Rn(a);return e.jsx(JI,{...l,...i,ref:s})});m5.displayName=u5;var f5="DropdownMenuItem",oj=p.forwardRef((n,s)=>{const{__scopeDropdownMenu:a,...i}=n,l=Rn(a);return e.jsx(QI,{...l,...i,ref:s})});oj.displayName=f5;var p5="DropdownMenuCheckboxItem",h5=p.forwardRef((n,s)=>{const{__scopeDropdownMenu:a,...i}=n,l=Rn(a);return e.jsx(XI,{...l,...i,ref:s})});h5.displayName=p5;var g5="DropdownMenuRadioGroup",x5=p.forwardRef((n,s)=>{const{__scopeDropdownMenu:a,...i}=n,l=Rn(a);return e.jsx(ZI,{...l,...i,ref:s})});x5.displayName=g5;var y5="DropdownMenuRadioItem",v5=p.forwardRef((n,s)=>{const{__scopeDropdownMenu:a,...i}=n,l=Rn(a);return e.jsx(e5,{...l,...i,ref:s})});v5.displayName=y5;var w5="DropdownMenuItemIndicator",j5=p.forwardRef((n,s)=>{const{__scopeDropdownMenu:a,...i}=n,l=Rn(a);return e.jsx(t5,{...l,...i,ref:s})});j5.displayName=w5;var b5="DropdownMenuSeparator",N5=p.forwardRef((n,s)=>{const{__scopeDropdownMenu:a,...i}=n,l=Rn(a);return e.jsx(n5,{...l,...i,ref:s})});N5.displayName=b5;var S5="DropdownMenuArrow",C5=p.forwardRef((n,s)=>{const{__scopeDropdownMenu:a,...i}=n,l=Rn(a);return e.jsx(r5,{...l,...i,ref:s})});C5.displayName=S5;var P5="DropdownMenuSubTrigger",E5=p.forwardRef((n,s)=>{const{__scopeDropdownMenu:a,...i}=n,l=Rn(a);return e.jsx(s5,{...l,...i,ref:s})});E5.displayName=P5;var D5="DropdownMenuSubContent",k5=p.forwardRef((n,s)=>{const{__scopeDropdownMenu:a,...i}=n,l=Rn(a);return e.jsx(a5,{...l,...i,ref:s,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});k5.displayName=D5;var A5=tj,I5=rj,R5=sj,T5=ij,_5=oj;function ef({...n}){return e.jsx(A5,{"data-slot":"dropdown-menu",...n})}function tf({...n}){return e.jsx(I5,{"data-slot":"dropdown-menu-trigger",...n})}function nf({className:n,sideOffset:s=4,...a}){return e.jsx(R5,{children:e.jsx(T5,{"data-slot":"dropdown-menu-content",sideOffset:s,className:rt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",n),...a})})}function Ms({className:n,inset:s,variant:a="default",...i}){return e.jsx(_5,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":a,className:rt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...i})}function M5({onNavigateToView:n}){const[s,a]=p.useState(""),[i,l]=p.useState("all"),[d,u]=p.useState("all"),[f,y]=p.useState(!1),[x,v]=p.useState(!1),[h,C]=p.useState(null),[P,S]=p.useState({newPassword:"",confirmPassword:""}),[w,b]=p.useState([]),[E,T]=p.useState(!1),[z,B]=p.useState(!1),[Q,X]=p.useState(null),[G,J]=p.useState(!1),[ue,ge]=p.useState(null),[Ee,xe]=p.useState([]),[me,fe]=p.useState(!1),[F,ne]=p.useState(!1),[te,D]=p.useState([]),[L,ce]=p.useState({name:"",email:"",password:"",confirmPassword:"",role:"Cashier",permissions:[]}),A=te.filter(W=>{const Ve=W.email.toLowerCase().includes(s.toLowerCase())||W.role.toLowerCase().includes(s.toLowerCase())||W.name.toLowerCase().includes(s.toLowerCase()),Re=i==="all"||W.role===i,$e=d==="all"||W.status===d;return Ve&&Re&&$e}),R={Admin:["Full Access","User Management","System Settings","Billing Management","Invoice Generation","Payment Processing","Reports","Discounts Management"],Cashier:["Billing Management","Invoice Generation","Payment Processing","Reports"]},H=p.useCallback(async()=>{B(!0),X(null);try{const W=await fetch("/api/users"),Ve=await W.text(),Re=(W.headers.get("content-type")||"").toLowerCase();if(!W.ok){const pe=Ve?Ve.substring(0,400):"";throw new Error(`Server returned ${W.status}: ${pe}`)}if(!Re.includes("application/json")){const pe=Ve?Ve.substring(0,400):"";throw new Error(`Expected JSON but server returned '${Re}'. Response snippet: ${pe}`)}let $e;try{$e=JSON.parse(Ve)}catch(pe){throw new Error(`Failed to parse JSON response: ${pe instanceof Error?pe.message:String(pe)}. Response snippet: ${Ve.substring(0,400)}`)}const V=(Array.isArray($e)?$e:$e.users||$e.data||[]).map((pe,we)=>({id:pe._id&&String(pe._id)||pe.id&&String(pe.id)||String(Date.now()+we),name:pe.name||pe.fullName||pe.displayName||(pe.email?pe.email.split("@")[0]:"Unknown"),email:pe.email||"",role:pe.role&&typeof pe.role=="string"&&pe.role.toLowerCase()==="admin"?"Admin":"Cashier",status:pe.status==="Inactive"?"Inactive":"Active",lastLogin:pe.lastLogin||"Never",createdAt:pe.createdAt?new Date(pe.createdAt).toISOString().split("T")[0]:pe.createdAt||new Date().toISOString().split("T")[0],permissions:pe.permissions||[]}));D(V)}catch(W){X(W?.message||"Failed to fetch users"),se.error(W?.message||"Failed to fetch users")}finally{B(!1)}},[]);p.useEffect(()=>{H()},[H]);const M=()=>{if(!L.name)return se.error("Name is required");if(!L.email)return se.error("Email is required");if(!L.password)return se.error("Password is required");if(L.password.length<8)return se.error("Password must be at least 8 characters long");if(L.password!==L.confirmPassword)return se.error("Passwords do not match");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L.email))return se.error("Please enter a valid email address");if(te.some($e=>$e.email.toLowerCase()===L.email.toLowerCase()))return se.error("User with this email already exists");const Re={name:L.name,email:L.email.toLowerCase(),password:L.password,role:L.role.toLowerCase(),status:"Active"};fe(!0),(async()=>{try{const $e=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Re)}),ot=await $e.text(),V=($e.headers.get("content-type")||"").toLowerCase();if(!$e.ok)throw new Error(ot||`Server returned ${$e.status}`);const pe=V.includes("application/json")&&ot?JSON.parse(ot):{},we=pe.data||pe,mt={id:we._id&&String(we._id)||we.id&&String(we.id)||String(Date.now()),name:we.name||Re.name,email:we.email||Re.email,role:(we.role&&typeof we.role=="string"&&we.role.toLowerCase()==="admin"?"Admin":"Cashier")||(Re.role==="admin"?"Admin":"Cashier"),status:we.status||"Active",lastLogin:we.lastLogin||"Never",createdAt:we.createdAt?new Date(we.createdAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],permissions:we.permissions||(Re.role==="admin"?R.Admin:R.Cashier)};D(ct=>[...ct,mt]),ce({name:"",email:"",password:"",confirmPassword:"",role:"Cashier",permissions:[]}),y(!1),se.success(pe?.message||"User created successfully")}catch($e){se.error($e?.message||"Failed to create user")}finally{fe(!1)}})()},ee=W=>{C(W),S({newPassword:"",confirmPassword:""}),v(!0)},U=()=>{if(h){if(P.newPassword){if(P.newPassword.length<8)return se.error("Password must be at least 8 characters long");if(P.newPassword!==P.confirmPassword)return se.error("Passwords do not match")}ne(!0),(async()=>{try{const W={name:h.name,email:h.email,role:h.role.toLowerCase(),status:h.status};P.newPassword&&(W.password=P.newPassword);const Ve=await fetch(`/api/users/${h.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)}),Re=await Ve.text(),$e=(Ve.headers.get("content-type")||"").toLowerCase();if(!Ve.ok)throw new Error(Re||`Server returned ${Ve.status}`);const ot=$e.includes("application/json")&&Re?JSON.parse(Re):{},V=ot.data||ot,pe={id:V._id&&String(V._id)||V.id&&String(V.id)||h.id,name:V.name||h.name,email:V.email||h.email,role:(V.role&&typeof V.role=="string"&&V.role.toLowerCase()==="admin"?"Admin":"Cashier")||h.role,status:V.status||h.status,lastLogin:V.lastLogin||h.lastLogin,createdAt:V.createdAt?new Date(V.createdAt).toISOString().split("T")[0]:h.createdAt,permissions:V.permissions||h.permissions};D(we=>we.map(mt=>mt.id===pe.id?pe:mt)),v(!1),C(null),S({newPassword:"",confirmPassword:""}),se.success(ot?.message||"User updated successfully")}catch(W){se.error(W?.message||"Failed to update user")}finally{ne(!1)}})()}},q=W=>{const Ve=te.find(Re=>Re.id===W);if(Ve&&Ve.role==="Admin"&&Ve.status==="Active"&&te.filter($e=>$e.role==="Admin"&&$e.status==="Active").length<=1){se.error("Cannot deactivate the last active admin user");return}D(te.map(Re=>{if(Re.id===W){const $e=Re.status==="Active"?"Inactive":"Active";return se.success(`User ${Re.email} ${$e.toLowerCase()}`),{...Re,status:$e}}return Re}))},le=async W=>{if(!te.find($e=>$e.id===W))return;const Re=te;D($e=>$e.filter(ot=>ot.id!==W)),xe($e=>[...$e,W]);try{const $e=await fetch(`/api/archive/users/${W}/archive`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({archivedBy:"admin"})}),ot=await $e.text(),V=($e.headers.get("content-type")||"").toLowerCase();if(!$e.ok){const we=ot?ot.substring(0,400):"";throw new Error(`Server returned ${$e.status}: ${we}`)}let pe={};if(V.includes("application/json")&&ot)try{pe=JSON.parse(ot)}catch{}se.success(pe?.message||"User moved to archive")}catch($e){D(Re),se.error($e?.message||"Failed to move user to archive")}finally{xe($e=>$e.filter(ot=>ot!==W)),ge(null),J(!1)}},he=W=>W==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",ve=W=>W==="Admin"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800",k=W=>{b(Ve=>Ve.includes(W)?Ve.filter(Re=>Re!==W):[...Ve,W])},Y=()=>{w.length===A.length?b([]):b(A.map(W=>W.id))},Ie=()=>{D(te.map(W=>w.includes(W.id)?{...W,status:"Active"}:W)),b([]),se.success(`${w.length} users activated`)},Fe=()=>{const W=te.filter(Re=>Re.role==="Admin"&&Re.status==="Active").map(Re=>Re.id);if(w.filter(Re=>W.includes(Re)).length===W.length&&W.length>0){se.error("Cannot deactivate all admin users");return}D(te.map(Re=>w.includes(Re.id)?{...Re,status:"Inactive"}:Re)),b([]),se.success(`${w.length} users deactivated`)},O=()=>{const Ve=[["Name","Email","Role","Status","Last Login","Created","Permissions"],...A.map(V=>[V.name,V.email,V.role,V.status,V.lastLogin,V.createdAt,V.permissions.join("; ")])].map(V=>V.join(",")).join(`
`),Re=new Blob([Ve],{type:"text/csv"}),$e=URL.createObjectURL(Re),ot=document.createElement("a");ot.href=$e,ot.download="users-export.csv",ot.click(),URL.revokeObjectURL($e),se.success("User data exported successfully")},ze=W=>{(async()=>{try{const Ve=await fetch(`/api/users/${W.id}/reset`,{method:"POST"}),Re=await Ve.text(),$e=(Ve.headers.get("content-type")||"").toLowerCase();if(!Ve.ok){const V=Re?Re.substring(0,400):"";throw new Error(V||`Server returned ${Ve.status}`)}let ot={};if($e.includes("application/json")&&Re)try{ot=JSON.parse(Re)}catch{}ot?.previewUrl?(se.success(`Password reset email sent to ${W.email} (preview available)`),console.info("Password reset preview URL:",ot.previewUrl)):se.success(ot?.message||`Password reset email sent to ${W.email}`)}catch(Ve){se.error(Ve?.message||"Failed to send password reset email")}})()};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-[#358E83] rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-white",children:"User Management"}),e.jsx("p",{className:"text-white/90 mt-1",children:"Manage system users, roles, and permissions"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{variant:"outline",className:"text-white border-white/30",onClick:H,disabled:z,children:z?"Refreshing...":"Refresh"}),e.jsxs(Gt,{open:f,onOpenChange:y,children:[e.jsx(s0,{asChild:!0,children:e.jsxs(ie,{className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:[e.jsx(Sy,{className:"h-4 w-4 mr-2"}),"Add User"]})}),e.jsxs(Bt,{className:"sm:max-w-md",children:[e.jsxs(Ut,{children:[e.jsx(Ht,{children:"Create New User"}),e.jsx(dn,{children:"Add a new user to the billing system with appropriate role and permissions."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"name",children:"Full Name"}),e.jsx(Ue,{id:"name",type:"text",value:L.name,onChange:W=>ce({...L,name:W.target.value}),placeholder:"Enter full name"})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"email",children:"Email"}),e.jsx(Ue,{id:"email",type:"email",value:L.email,onChange:W=>ce({...L,email:W.target.value}),placeholder:"user@hospital.com"})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"password",children:"Password"}),e.jsx(Ue,{id:"password",type:"password",value:L.password,onChange:W=>ce({...L,password:W.target.value}),placeholder:"Enter a secure password"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must be at least 8 characters long"})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(Ue,{id:"confirmPassword",type:"password",value:L.confirmPassword,onChange:W=>ce({...L,confirmPassword:W.target.value}),placeholder:"Confirm your password"})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"role",children:"Role"}),e.jsxs(nn,{value:L.role,onValueChange:W=>ce({...L,role:W}),children:[e.jsx(sn,{children:e.jsx(rn,{})}),e.jsxs(an,{children:[e.jsx(lt,{value:"Admin",children:"Admin"}),e.jsx(lt,{value:"Cashier",children:"Cashier"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(ie,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsx(ie,{className:"bg-[#358E83] hover:bg-[#2a6f66]",onClick:M,children:"Create User"})]})]})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(Le,{children:[e.jsxs(pt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ht,{className:"text-sm font-medium",children:"Total Users"}),e.jsx(En,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Be,{children:[e.jsx("div",{className:"text-2xl font-bold",children:te.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+1 from last month"})]})]}),e.jsxs(Le,{children:[e.jsxs(pt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ht,{className:"text-sm font-medium",children:"Active Users"}),e.jsx(En,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(Be,{children:[e.jsx("div",{className:"text-2xl font-bold",children:te.filter(W=>W.status==="Active").length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(te.filter(W=>W.status==="Active").length/te.length*100),"% of total"]})]})]}),e.jsxs(Le,{children:[e.jsxs(pt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ht,{className:"text-sm font-medium",children:"Admins"}),e.jsx(En,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(Be,{children:[e.jsx("div",{className:"text-2xl font-bold",children:te.filter(W=>W.role==="Admin").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Full system access"})]})]}),e.jsxs(Le,{children:[e.jsxs(pt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ht,{className:"text-sm font-medium",children:"Cashiers"}),e.jsx(En,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(Be,{children:[e.jsx("div",{className:"text-2xl font-bold",children:te.filter(W=>W.role==="Cashier").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Billing system access"})]})]})]}),e.jsxs(Le,{children:[e.jsxs(pt,{children:[e.jsx(ht,{children:"User Directory"}),e.jsx(pn,{children:"Search and filter users in the system"})]}),e.jsxs(Be,{children:[Q&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"text-sm text-red-800",children:Q}),e.jsx("div",{children:e.jsx(ie,{size:"sm",variant:"outline",onClick:H,children:"Retry"})})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ue,{placeholder:"Search users by name, email, or role...",value:s,onChange:W=>a(W.target.value),className:"pl-10"})]}),e.jsxs(nn,{value:i,onValueChange:l,children:[e.jsx(sn,{className:"w-full sm:w-40",children:e.jsx(rn,{placeholder:"Filter by role"})}),e.jsxs(an,{children:[e.jsx(lt,{value:"all",children:"All Roles"}),e.jsx(lt,{value:"Admin",children:"Admin"}),e.jsx(lt,{value:"Cashier",children:"Cashier"})]})]}),e.jsxs(nn,{value:d,onValueChange:u,children:[e.jsx(sn,{className:"w-full sm:w-40",children:e.jsx(rn,{placeholder:"Filter by status"})}),e.jsxs(an,{children:[e.jsx(lt,{value:"all",children:"All Status"}),e.jsx(lt,{value:"Active",children:"Active"}),e.jsx(lt,{value:"Inactive",children:"Inactive"})]})]}),e.jsxs(ie,{variant:"outline",onClick:O,children:[e.jsx(df,{className:"h-4 w-4 mr-2"}),"Export"]})]}),w.length>0&&e.jsx("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-blue-800",children:[w.length," user",w.length>1?"s":""," selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ie,{size:"sm",variant:"outline",onClick:Ie,children:[e.jsx(LS,{className:"h-4 w-4 mr-1"}),"Activate"]}),e.jsxs(ie,{size:"sm",variant:"outline",onClick:Fe,children:[e.jsx(BS,{className:"h-4 w-4 mr-1"}),"Deactivate"]}),e.jsx(ie,{size:"sm",variant:"outline",onClick:()=>b([]),children:"Clear"})]})]})}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(_c,{children:[e.jsx(Mc,{children:e.jsxs(is,{children:[e.jsx(Kt,{className:"w-12",children:e.jsx(ie,{variant:"ghost",size:"sm",onClick:Y,className:"h-8 w-8 p-0",children:w.length===A.length&&A.length>0?e.jsx(Kg,{className:"h-4 w-4"}):e.jsx(Gg,{className:"h-4 w-4"})})}),e.jsx(Kt,{children:"User"}),e.jsx(Kt,{children:"Role"}),e.jsx(Kt,{children:"Status"}),e.jsx(Kt,{children:"Last Login"}),e.jsx(Kt,{children:"Created"}),e.jsx(Kt,{className:"text-right",children:"Actions"})]})}),e.jsx(Oc,{children:A.map(W=>e.jsxs(is,{children:[e.jsx(zt,{children:e.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>k(W.id),className:"h-8 w-8 p-0",children:w.includes(W.id)?e.jsx(Kg,{className:"h-4 w-4"}):e.jsx(Gg,{className:"h-4 w-4"})})}),e.jsx(zt,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-[#358E83] rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:W.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:W.name}),e.jsx("div",{className:"text-sm text-gray-500",children:W.email})]})]})}),e.jsx(zt,{children:e.jsx(Nt,{className:ve(W.role),children:W.role})}),e.jsx(zt,{children:e.jsx(Nt,{className:he(W.status),children:W.status})}),e.jsx(zt,{className:"text-sm text-gray-600",children:W.lastLogin}),e.jsx(zt,{className:"text-sm text-gray-600",children:W.createdAt}),e.jsx(zt,{className:"text-right",children:e.jsxs(ef,{children:[e.jsx(tf,{asChild:!0,children:e.jsx(ie,{variant:"ghost",size:"sm",children:e.jsx(RN,{className:"h-4 w-4"})})}),e.jsxs(nf,{align:"end",children:[e.jsxs(Ms,{onClick:()=>ee(W),children:[e.jsx(nS,{className:"mr-2 h-4 w-4"}),"Edit User"]}),e.jsxs(Ms,{onClick:()=>q(W.id),children:[e.jsx($r,{className:"mr-2 h-4 w-4"}),W.status==="Active"?"Deactivate":"Activate"]}),e.jsxs(Ms,{onClick:()=>ze(W),children:[e.jsx(GN,{className:"mr-2 h-4 w-4"}),"Reset Password"]}),Ee.includes(W.id)?e.jsxs(Ms,{className:"text-red-600 opacity-70",disabled:!0,children:[e.jsx(JN,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):e.jsxs(Ms,{onClick:()=>{ge(W),J(!0)},className:"text-red-600",children:[e.jsx(Ur,{className:"mr-2 h-4 w-4"}),"Delete User"]})]})]})})]},W.id))})]})})]})]}),e.jsx(Gt,{open:G,onOpenChange:J,children:e.jsxs(Bt,{className:"sm:max-w-md",children:[e.jsxs(Ut,{children:[e.jsx(Ht,{children:"Move User to Archive?"}),e.jsx(dn,{children:"Are you sure you want to move this user to the archive? You can restore the user later from the Archive."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-gray-700",children:ue?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-medium",children:[ue.name," (",ue.email,")"]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Role: ",ue.role,"  Status: ",ue.status]})]}):e.jsx("div",{className:"text-sm",children:"No user selected"})}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(ie,{variant:"outline",onClick:()=>J(!1),children:"Cancel"}),e.jsx(ie,{className:"bg-red-600 hover:bg-red-700",onClick:()=>ue&&le(ue.id),children:"Move to Archive"})]})]})]})}),e.jsx(Gt,{open:x,onOpenChange:v,children:e.jsxs(Bt,{className:"sm:max-w-md",children:[e.jsxs(Ut,{children:[e.jsx(Ht,{children:"Edit User"}),e.jsx(dn,{children:"Update user information and permissions."})]}),h&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"edit-name",children:"Full Name"}),e.jsx(Ue,{id:"edit-name",type:"text",value:h.name,onChange:W=>C({...h,name:W.target.value})})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"edit-email",children:"Email"}),e.jsx(Ue,{id:"edit-email",type:"email",value:h.email,onChange:W=>C({...h,email:W.target.value})})]}),e.jsxs("div",{children:[e.jsx(ye,{htmlFor:"edit-role",children:"Role"}),e.jsxs(nn,{value:h.role,onValueChange:W=>{const Ve=W==="Admin"?R.Admin:R.Cashier;C({...h,role:W,permissions:Ve})},children:[e.jsx(sn,{children:e.jsx(rn,{})}),e.jsxs(an,{children:[e.jsx(lt,{value:"Admin",children:"Admin"}),e.jsx(lt,{value:"Cashier",children:"Cashier"})]})]})]}),e.jsxs("div",{children:[e.jsx(ye,{children:"Status"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(as,{checked:h.status==="Active",onCheckedChange:W=>C({...h,status:W?"Active":"Inactive"})}),e.jsx("span",{className:"text-sm",children:h.status})]})]}),e.jsxs("div",{children:[e.jsx(ye,{children:"Permissions"}),e.jsx("div",{className:"mt-2 space-y-1",children:h.permissions.map((W,Ve)=>e.jsxs("div",{className:"text-sm text-gray-600 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-[#358E83] rounded-full mr-2"}),W]},Ve))})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(ie,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),e.jsx(ie,{className:"bg-[#358E83] hover:bg-[#2a6f66]",onClick:U,children:"Update User"})]})]})]})})]})}function O5({children:n,currentView:s,onNavigateToView:a,pageTitle:i,pageDescription:l,userSession:d}){const[u,f]=p.useState(!1),y=d?.system==="billing"||["medicare-billing","invoice","payment","history","discounts","user-management","discount-management","patients-management","archive"].includes(s),x=()=>{const T=[];return d?.role==="admin"?(T.push({id:"medicare-billing",label:"Dashboard",icon:ua,description:"Admin billing dashboard"}),T.push({id:"invoice",label:"Invoice Generation",icon:pa,description:"Create and manage invoices"}),T.push({id:"patients-management",label:"Patient Management",icon:fo,description:"Manage patient records"}),T.push({id:"discount-management",label:"Discount Management",icon:Or,description:"Manage discount codes and promotions"}),T.push({id:"user-management",label:"User Management",icon:En,description:"Manage system users and roles"}),T.push({id:"archive",label:"Archive",icon:Cm,description:"View and manage archived items"}),T.push({id:"settings",label:"Settings",icon:oi,description:"System configuration"}),T):(T.push({id:"medicare-billing",label:"Dashboard",icon:ua,description:"Billing overview and metrics"},{id:"invoice",label:"View Invoices",icon:pa,description:"View invoices from EMR and Pharmacy"},{id:"payment",label:"Payment Processing",icon:xa,description:"Process payments and transactions"},{id:"history",label:"Billing History",icon:sc,description:"View billing records and reports"},{id:"patients-management",label:"Patient Management",icon:fo,description:"View patient records and billing"},{id:"settings",label:"Settings",icon:oi,description:"System configuration"}),T)},h=d?.system==="pharmacy"?[{id:"pharmacy",label:"Pharmacy"},{id:"settings",label:"Settings"}]:d?.system==="emr"?[{id:"emr",label:"EMR"},{id:"settings",label:"Settings"}]:[{id:"dashboard",label:"Dashboard"},{id:"emr",label:"EMR"},{id:"pharmacy",label:"Pharmacy"},{id:"billing",label:"Billing"},{id:"settings",label:"Settings"}],C=x(),P=T=>!!(T==="dashboard"&&s==="dashboard"||T==="emr"&&(s==="patients"||s==="appointments")||T==="pharmacy"&&s==="pharmacy"||T==="billing"&&["medicare-billing","invoice","payment","history","discounts","user-management","discount-management","patients-management","archive"].includes(s)||T==="settings"&&s==="settings"),S=T=>s===T,w=T=>{if(!(d?.system==="billing"&&T!=="billing"&&T!=="settings")){{if(d?.system==="pharmacy"&&T!=="pharmacy"&&T!=="settings")return;if(d?.system==="emr"&&T!=="emr"&&T!=="settings")return}a(T==="dashboard"?"dashboard":T==="emr"?"patients":T==="pharmacy"?"pharmacy":T==="billing"?"medicare-billing":T)}},b=T=>{a(T)},E=()=>{a("dashboard")};return y?e.jsxs("div",{className:"min-h-screen bg-[#F7FAFC] flex",children:[e.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col flex-shrink-0 h-screen sticky top-0",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-[#358E83] rounded-md flex items-center justify-center",children:e.jsx(ua,{className:"h-5 w-5 text-white"})}),e.jsx("div",{children:e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:"HIMS"})}),e.jsxs(ie,{variant:"ghost",size:"sm",className:"ml-auto text-gray-400 hover:text-gray-600",onClick:E,children:[e.jsx(vN,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs ml-1",children:"Back to HIMS"})]})]})}),e.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-3",children:"NAVIGATION"}),e.jsx("nav",{className:"space-y-1",children:C.map(T=>{const z=T.icon,B=S(T.id);return e.jsxs("button",{onClick:()=>b(T.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors ${B?"text-white":"text-gray-700 hover:bg-gray-100"}`,style:B?{backgroundColor:"#358E83"}:{},children:[e.jsx(z,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-medium",children:T.label})]},T.id)})})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-medium text-gray-900 mb-1",children:i||"Billing System"}),e.jsx("p",{className:"text-gray-600",children:l||"Comprehensive billing management for hospital services"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(ef,{children:[e.jsx(tf,{asChild:!0,children:e.jsxs(ie,{variant:"ghost",className:"flex items-center space-x-2 hover:bg-gray-100",children:[e.jsx("div",{className:"w-8 h-8 bg-[#358E83] rounded-full flex items-center justify-center",children:e.jsx(vc,{className:"h-5 w-5 text-white"})}),d&&e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.role}),e.jsx("div",{className:"text-xs text-gray-500",children:d.system})]}),e.jsx(pc,{className:"h-4 w-4 text-gray-400"})]})}),e.jsxs(nf,{align:"end",className:"w-56",children:[d&&e.jsxs("div",{className:"px-3 py-2 border-b",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.email}),e.jsxs("p",{className:"text-xs text-gray-500 capitalize",children:[d.role," - ",d.system]})]}),e.jsxs(Ms,{onClick:()=>f(!0),className:"text-red-600 hover:text-red-700",children:[e.jsx(qg,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]})})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden p-6",children:n})]}),e.jsx(zs,{open:u,onOpenChange:f,children:e.jsxs(Bs,{children:[e.jsxs(Us,{children:[e.jsx(Vs,{children:"Confirm Logout"}),e.jsx(ba,{children:"Are you sure you want to sign out? Any unsaved changes will be lost."})]}),e.jsxs(Hs,{children:[e.jsx(Ws,{children:"Cancel"}),e.jsx(qs,{onClick:()=>a("logout"),className:"bg-red-600 hover:bg-red-700",children:"Sign Out"})]})]})})]}):e.jsxs("div",{className:"min-h-screen bg-[#F7FAFC]",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-[#358E83] rounded-md flex items-center justify-center",children:e.jsx(ua,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-900",children:"HIMS"}),d?.system&&e.jsx("span",{className:"text-xs text-[#358E83] capitalize font-medium",children:d.system==="emr"?"EMR System":`${d.system} System`})]})]}),e.jsx("nav",{className:"hidden md:flex space-x-6",children:h.map(T=>e.jsx("button",{onClick:()=>w(T.id),className:`px-3 py-2 text-sm font-medium transition-colors ${P(T.id)?"text-[#358E83] border-b-2 border-[#358E83]":"text-gray-600 hover:text-gray-900"}`,children:T.label},T.id))})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(ef,{children:[e.jsx(tf,{asChild:!0,children:e.jsxs(ie,{variant:"ghost",className:"flex items-center space-x-2 hover:bg-gray-100",children:[e.jsx("div",{className:"w-8 h-8 bg-[#358E83] rounded-full flex items-center justify-center",children:e.jsx(vc,{className:"h-5 w-5 text-white"})}),d&&e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.role}),e.jsx("div",{className:"text-xs text-gray-500",children:d.system})]}),e.jsx(pc,{className:"h-4 w-4 text-gray-400"})]})}),e.jsxs(nf,{align:"end",className:"w-56",children:[d&&e.jsxs("div",{className:"px-3 py-2 border-b",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.email}),e.jsxs("p",{className:"text-xs text-gray-500 capitalize",children:[d.role," - ",d.system]})]}),!d?.system&&e.jsx(Ms,{onClick:()=>a("settings"),children:"Settings"}),e.jsxs(Ms,{onClick:()=>f(!0),className:"text-red-600 hover:text-red-700",children:[e.jsx(qg,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]})})]})})}),e.jsxs("main",{className:"px-6 py-8",children:[i&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mb-2",children:i}),l&&e.jsx("p",{className:"text-gray-600",children:l})]}),n]}),e.jsx(zs,{open:u,onOpenChange:f,children:e.jsxs(Bs,{children:[e.jsxs(Us,{children:[e.jsx(Vs,{children:"Confirm Logout"}),e.jsx(ba,{children:"Are you sure you want to sign out? Any unsaved changes will be lost."})]}),e.jsxs(Hs,{children:[e.jsx(Ws,{children:"Cancel"}),e.jsx(qs,{onClick:()=>a("logout"),className:"bg-red-600 hover:bg-red-700",children:"Sign Out"})]})]})})]})}function L5(){const[n,s]=p.useState([]),[a,i]=p.useState(!1),l=async()=>{i(!0);try{const f=await fetch("/api/archive");if(!f.ok)throw new Error("Failed to fetch archive");const y=await f.json(),x=y.data?.users||[],v=y.data?.patients||[],h=y.data?.invoices||[];let C=[],P=[];try{const w=await uo(()=>Promise.resolve().then(()=>em),void 0),b=w.DiscountManagementService||w.default||w;C=b.getAllDiscounts().filter(E=>E.isArchived),P=b.getAllPromotions().filter(E=>E.isArchived)}catch{}const S=[...x.map(w=>({id:w._id||w.id,name:w.name||w.email||"Unnamed",type:"User",archivedAt:w.archivedAt?new Date(w.archivedAt).toLocaleString():"Unknown",originalData:w})),...v.map(w=>({id:w._id||w.id,name:w.name||"Unnamed",type:"Patient",archivedAt:w.archivedAt?new Date(w.archivedAt).toLocaleString():"Unknown",originalData:w})),...h.map(w=>({id:w._id||w.id,name:w.invoiceNumber||w.number||"Invoice",type:"Invoice",archivedAt:w.archivedAt?new Date(w.archivedAt).toLocaleString():"Unknown",originalData:w})),...C.map(w=>({id:w.id,name:w.name||w.code||"Discount",type:"Discount",archivedAt:w.updatedAt?new Date(w.updatedAt).toLocaleString():"Unknown",originalData:w})),...P.map(w=>({id:w.id,name:w.title||"Promotion",type:"Promotion",archivedAt:w.updatedAt?new Date(w.updatedAt).toLocaleString():"Unknown",originalData:w}))];s(S)}catch{se.error("Failed to fetch archived items")}finally{i(!1)}};p.useEffect(()=>{l()},[]);const d=async f=>{try{if(f.type==="Discount"||f.type==="Promotion")try{const h=await uo(()=>Promise.resolve().then(()=>em),void 0),C=h.DiscountManagementService||h.default||h;if(f.type==="Discount"){if(!C.restoreDiscount(f.id))throw new Error("Discount not found")}else if(!C.restorePromotion(f.id))throw new Error("Promotion not found");se.success(`${f.type} restored successfully`),l();return}catch(h){console.error("Client-side restore error",h),se.error(`Failed to restore ${f.type.toLowerCase()}`);return}const y=f.type.toLowerCase()==="user"?"users":f.type.toLowerCase()==="patient"?"patients":"invoices",x=[`/api/archive/${y}/${f.id}/restore`,`/api/${y}/${f.id}/restore`,`/${y}/${f.id}/restore`];let v=!1;for(const h of x)try{if((await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"}})).ok){v=!0;break}}catch{}if(!v)throw new Error("Failed to restore item");se.success(`${f.type} restored successfully`),l()}catch(y){console.error("Restore error",y),se.error(`Failed to restore ${f.type.toLowerCase()}`)}},u=async f=>{if(confirm(`Are you sure you want to permanently delete this ${f.type.toLowerCase()}? This action cannot be undone.`))try{if(f.type==="Discount"||f.type==="Promotion")try{const h=await uo(()=>Promise.resolve().then(()=>em),void 0),C=h.DiscountManagementService||h.default||h;let P=!1;if(f.type==="Discount"?P=C.deleteDiscount(f.id):P=C.deletePromotion(f.id),!P)throw new Error("Item not found");se.success(`${f.type} permanently deleted`),l();return}catch(h){console.error("Client-side delete error",h),se.error(`Failed to delete ${f.type.toLowerCase()}`);return}const y=f.type.toLowerCase()==="user"?"users":f.type.toLowerCase()==="patient"?"patients":"invoices",x=[`/api/archive/${y}/${f.id}/permanent`,`/api/${y}/${f.id}`,`/${y}/${f.id}`];let v=!1;for(const h of x)try{if((await fetch(h,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok){v=!0;break}}catch{}if(!v)throw new Error("Failed to delete item");se.success(`${f.type} permanently deleted`),l()}catch(y){console.error("Delete error",y),se.error(`Failed to delete ${f.type.toLowerCase()}`)}};return e.jsx("div",{className:"space-y-6",children:e.jsxs(Le,{children:[e.jsxs(pt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ht,{className:"text-2xl font-bold",children:"Archived Items"}),e.jsxs(ie,{variant:"outline",size:"sm",onClick:l,disabled:a,children:[a?e.jsx(Bn,{className:"h-4 w-4 animate-spin"}):e.jsx(Bn,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-2",children:"Refresh"})]})]}),e.jsx(Be,{children:e.jsxs(_c,{children:[e.jsx(Mc,{children:e.jsxs(is,{children:[e.jsx(Kt,{children:"Name"}),e.jsx(Kt,{children:"Type"}),e.jsx(Kt,{children:"Archived Date"}),e.jsx(Kt,{children:"Actions"})]})}),e.jsxs(Oc,{children:[n.map(f=>e.jsxs(is,{children:[e.jsx(zt,{children:f.name}),e.jsx(zt,{children:f.type}),e.jsx(zt,{children:f.archivedAt}),e.jsx(zt,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>d(f),children:[e.jsx(mS,{className:"h-4 w-4 mr-2"}),"Restore"]}),e.jsxs(ie,{variant:"destructive",size:"sm",onClick:()=>u(f),children:[e.jsx(Ur,{className:"h-4 w-4 mr-2"}),"Delete"]})]})})]},f.id)),n.length===0&&e.jsx(is,{children:e.jsx(zt,{colSpan:4,className:"text-center py-4",children:"No archived items found"})})]})]})})]})})}function F5({currentView:n,userSession:s,onNavigateToView:a}){const i=()=>{switch(n){case"dashboard":return{title:"Dashboard",description:"Welcome to the Hospital Information Management System (HIMS). This dashboard provides an overview of the system's key functionalities."};case"patients":return{title:"Patient Records",description:"Manage patient information, medical histories, and electronic medical records."};case"patients-management":return{title:"Patient Management",description:"View patient information, services, and pharmacy purchases with complete billing details."};case"appointments":return{title:"Appointments",description:"Schedule, manage, and track patient appointments with healthcare providers."};case"pharmacy":return{title:"Pharmacy Integration",description:"Manage integrated pharmacy systems, medication inventory, and patient prescriptions."};case"medicare-billing":return{title:"Billing Dashboard",description:"Overview of billing operations and key performance metrics"};case"invoice":return{title:"Invoice Generation",description:"Create and manage patient invoices for services rendered."};case"payment":return{title:"Payment Processing",description:"Process patient payments through various payment methods."};case"history":return{title:"Billing History",description:"View billing records, payment history, and pharmacy transactions."};case"discounts":return{title:"Discounts & Promotions",description:"Manage discount codes, promotional offers, and special pricing."};case"discount-management":return{title:"Discount Management",description:"Manage discount codes, promotional offers, and special pricing (Admin Only)."};case"user-management":return{title:"User Management",description:"Manage system users, roles, and permissions."};case"settings":return{title:"Settings",description:"Configure system settings and user preferences."};case"archive":return{title:"Archive",description:"View, restore, or permanently delete archived items."};default:return{title:"HIMS",description:"Hospital Information Management System."}}},l=["medicare-billing","payment","history","discounts"],d=["invoice","discount-management","user-management"],u=["patients-management"],f=l.includes(n),y=d.includes(n),x=u.includes(n),v=()=>{switch(n){case"medicare-billing":return e.jsx(tm,{onNavigateToView:a});case"payment":return e.jsx(fI,{onNavigateToView:a,userSession:s});case"history":return e.jsx(pI,{onNavigateToView:a});case"discounts":return e.jsx(hI,{onNavigateToView:a});default:return e.jsx(Jx,{onNavigateToView:a})}},h=()=>{switch(n){case"invoice":return e.jsx(mI,{onNavigateToView:a});case"discount-management":return e.jsx(gI,{onNavigateToView:a});case"user-management":return e.jsx(M5,{onNavigateToView:a});case"patients-management":return e.jsx(Dx,{onNavigateToView:a,userSession:s});default:return e.jsx(nm,{onNavigateToModule:a})}},C=()=>{if(x)return e.jsx(Dx,{onNavigateToView:a,userSession:s});if(y){if(s.role==="admin")return h();if(n==="invoice"&&s.role==="cashier")return e.jsx(Jx,{onNavigateToView:a})}if(f)return v();switch(n){case"dashboard":return s.role==="admin"?e.jsx(nm,{onNavigateToModule:a}):e.jsx(tm,{onNavigateToView:a});case"patients":return e.jsx(dP,{onNavigateToView:a});case"appointments":return e.jsx(CD,{onNavigateToView:a});case"pharmacy":return e.jsx(_D,{onNavigateToView:a});case"settings":return e.jsx(TD,{onNavigateToView:a});case"archive":return e.jsx(L5,{});default:return s.role==="admin"?e.jsx(nm,{onNavigateToModule:a}):e.jsx(tm,{onNavigateToView:a})}},P=i();return e.jsx(O5,{currentView:n,onNavigateToView:a,pageTitle:P.title,pageDescription:P.description,userSession:s,children:C()})}function $5({onNavigateToLogin:n}){return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[e.jsx("nav",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200/50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-20",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-[#358E83]/10 rounded-xl",children:e.jsx(Vg,{className:"text-[#358E83]",size:28})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-xl text-gray-900",children:"HIMS"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Hospital Information Management"})]})]}),e.jsxs(ie,{variant:"ghost",className:"text-[#358E83] hover:bg-[#358E83]/10 px-4 py-2 rounded-lg font-medium",children:[e.jsx(oi,{className:"mr-2",size:18}),"Settings"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 lg:px-8 py-16",children:[e.jsxs("div",{className:"text-center mb-20",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-[#358E83]/10 rounded-2xl mb-8",children:e.jsx(Vg,{className:"text-[#358E83]",size:40})}),e.jsxs("h1",{className:"text-5xl font-bold text-gray-900 mb-6 leading-tight",children:["Hospital Information",e.jsx("br",{}),e.jsx("span",{className:"text-[#358E83]",children:"Management System"})]}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Integrated healthcare solutions for modern hospitals. Streamline operations, enhance patient care, and optimize your healthcare workflows."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-16",children:[e.jsx("div",{className:"group bg-white rounded-2xl shadow-sm border border-gray-200/60 p-8 hover:shadow-xl hover:border-[#358E83]/20 transition-all duration-300 transform hover:-translate-y-1",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"p-4 bg-[#358E83]/10 rounded-xl mb-6 group-hover:bg-[#358E83]/20 transition-colors",children:e.jsx(BN,{className:"text-[#358E83]",size:32})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Pharmacy Management"}),e.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed",children:"Comprehensive medication management, inventory tracking, prescription processing, and pharmaceutical workflow optimization."}),e.jsx(ie,{onClick:()=>n("pharmacy"),className:"w-full bg-[#358E83] hover:bg-[#358E83]/90 text-white font-semibold py-3 rounded-xl transition-all duration-200 shadow-md hover:shadow-lg",children:"Access Pharmacy"})]})}),e.jsx("div",{className:"group bg-white rounded-2xl shadow-sm border border-gray-200/60 p-8 hover:shadow-xl hover:border-[#358E83]/20 transition-all duration-300 transform hover:-translate-y-1",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"p-4 bg-[#358E83]/10 rounded-xl mb-6 group-hover:bg-[#358E83]/20 transition-colors",children:e.jsx(VN,{className:"text-[#358E83]",size:32})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Electronic Medical Records"}),e.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed",children:"Secure patient data management, medical history tracking, clinical documentation, and healthcare information systems."}),e.jsx(ie,{onClick:()=>n("emr"),className:"w-full bg-[#358E83] hover:bg-[#358E83]/90 text-white font-semibold py-3 rounded-xl transition-all duration-200 shadow-md hover:shadow-lg",children:"Access EMR"})]})}),e.jsx("div",{className:"group bg-white rounded-2xl shadow-sm border border-gray-200/60 p-8 hover:shadow-xl hover:border-[#358E83]/20 transition-all duration-300 transform hover:-translate-y-1",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"p-4 bg-[#358E83]/10 rounded-xl mb-6 group-hover:bg-[#358E83]/20 transition-colors",children:e.jsx(xa,{className:"text-[#358E83]",size:32})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Billing & Payment"}),e.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed",children:"Streamlined financial processes, automated billing, payment processing, and comprehensive financial reporting tools."}),e.jsx(ie,{onClick:()=>n("billing"),className:"w-full bg-[#358E83] hover:bg-[#358E83]/90 text-white font-semibold py-3 rounded-xl transition-all duration-200 shadow-md hover:shadow-lg",children:"Access Billing"})]})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:" 2025 Hospital Information Management System. All rights reserved."}),e.jsxs("div",{className:"flex items-center justify-center space-x-6 mt-4",children:[e.jsx("a",{href:"#",className:"text-gray-500 hover:text-[#358E83] text-sm transition-colors",children:"Privacy Policy"}),e.jsx("a",{href:"#",className:"text-gray-500 hover:text-[#358E83] text-sm transition-colors",children:"Terms of Service"}),e.jsx("a",{href:"#",className:"text-gray-500 hover:text-[#358E83] text-sm transition-colors",children:"Support"})]})]})]})]})}function ey({onNavigateToLogin:n}){return e.jsx($5,{onNavigateToLogin:n})}function z5({system:n,onLogin:s,onBack:a}){const[i,l]=p.useState(""),[d,u]=p.useState(""),[f,y]=p.useState(!1),[x,v]=p.useState(!1),[h,C]=p.useState(()=>{const fe=localStorage.getItem("accountLocks");return fe?JSON.parse(fe):{}}),[P,S]=p.useState(!1),[w,b]=p.useState(""),[E,T]=p.useState(""),z="http://localhost:5000/api",B=3,Q="1818",X=fe=>{localStorage.setItem("accountLocks",JSON.stringify(fe)),C(fe)},G=fe=>{const F=h[fe];if(!F)return!1;if(F.isLocked&&F.lockedUntil){if(Date.now()<F.lockedUntil)return!0;{const te={...h};return delete te[fe],X(te),!1}}return F.isLocked},J=fe=>{const F={...h},ne=F[fe]||{failedAttempts:0,isLocked:!1};return ne.failedAttempts+=1,ne.failedAttempts>=B&&(ne.isLocked=!0,ne.lockedUntil=Date.now()+1800*1e3),F[fe]=ne,X(F),ne},ue=fe=>{const F={...h};delete F[fe],X(F)},ge=()=>{if(w!==Q){se.error(" Invalid SUPER PIN");return}const fe={...h};delete fe[E],X(fe),se.success(" Account unlocked successfully"),S(!1),b(""),T("")},Ee=async fe=>{if(fe.preventDefault(),!i||!d){se.error("Please enter both email and password");return}if(G(i)){const F=h[i],ne=F.lockedUntil?Math.ceil((F.lockedUntil-Date.now())/6e4):0;se.error(` Account is locked. Try again in ${ne} minutes or unlock with SUPER PIN.`),T(i),S(!0);return}v(!0);try{const ne=await(await fetch(`${z}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:d})})).json();if(ne.success)ue(i),se.success(" Login successful"),s({email:i,password:d,system:n,user:ne.user});else{const te=J(i),D=B-te.failedAttempts;te.isLocked?(se.error(` Account locked after ${B} failed attempts. Contact administrator or use SUPER PIN to unlock.`),T(i),S(!0)):se.error(` ${ne.message||"Invalid email or password"}. ${D} attempt(s) remaining.`)}}catch(F){J(i),se.error("Server connection failed"),console.error(F)}finally{v(!1)}},me=(()=>{switch(n){case"billing":return{title:"Billing & Payment System",subtitle:"Access your financial management dashboard",welcomeTitle:"Welcome to Billing HIMS",welcomeDescription:"Streamline your hospital's financial operations with our comprehensive billing and payment management platform. Handle invoices, process payments, and manage financial workflows efficiently.",department:"Billing & Finance Department"};case"pharmacy":return{title:"Pharmacy Management System",subtitle:"Access your pharmaceutical operations dashboard",welcomeTitle:"Welcome to Pharmacy HIMS",welcomeDescription:"Manage your pharmacy operations with precision and care. Our comprehensive platform handles inventory, prescriptions, dispensing, and pharmaceutical workflows seamlessly.",department:"Pharmacy Department"};case"emr":return{title:"Electronic Medical Records",subtitle:"Access secure patient information system",welcomeTitle:"Welcome to EMR HIMS",welcomeDescription:"Access and manage patient health information securely and efficiently. Our EMR system ensures comprehensive medical record keeping with the highest standards of data protection.",department:"Medical Records Department"};default:return{title:"HIMS Login",subtitle:"Access your hospital management system",welcomeTitle:"Welcome to HIMS",welcomeDescription:"Your comprehensive healthcare management platform.",department:"Hospital Information Management"}}})();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"w-full max-w-6xl bg-white rounded-3xl shadow-2xl overflow-hidden",children:e.jsxs("div",{className:"flex min-h-[600px]",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-[#358E83] to-[#2d7a70] text-white p-12 flex-col justify-center relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 border-2 border-white rounded-full"}),e.jsx("div",{className:"absolute bottom-20 right-10 w-24 h-24 border-2 border-white rounded-full"}),e.jsx("div",{className:"absolute top-1/2 right-20 w-16 h-16 border-2 border-white rounded-full"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h1",{className:"text-4xl font-bold mb-6 leading-tight",children:me.welcomeTitle}),e.jsx("p",{className:"text-xl opacity-90 leading-relaxed mb-8",children:me.welcomeDescription}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full mr-3"}),e.jsx("span",{className:"text-white/90",children:"Secure Authentication"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full mr-3"}),e.jsx("span",{className:"text-white/90",children:"Email-Based Role Detection"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full mr-3"}),e.jsx("span",{className:"text-white/90",children:"Enterprise Security"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full mr-3"}),e.jsx("span",{className:"text-white/90",children:"Account Lockout Protection"})]})]})]})]}),e.jsx("div",{className:"w-full lg:w-1/2 p-8 lg:p-12 flex flex-col justify-center",children:e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(ie,{variant:"ghost",onClick:a,className:"mb-6 p-0 h-auto text-[#358E83] hover:text-[#358E83]/80 font-medium",children:[e.jsx(cf,{className:"mr-2",size:20}),"Back to System Selection"]}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Sign In"}),e.jsx("p",{className:"text-gray-600",children:me.subtitle}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-blue-800 font-medium",children:me.department})})]})})]}),e.jsxs("form",{onSubmit:Ee,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(ye,{children:"Email Address"}),e.jsx(Ue,{type:"email",placeholder:"your.email@hospital.com",value:i,onChange:fe=>l(fe.target.value),required:!0}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Your role will be automatically detected from your email"})]}),e.jsxs("div",{children:[e.jsx(ye,{children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{type:f?"text":"password",placeholder:"Enter your password",value:d,onChange:fe=>u(fe.target.value),required:!0}),e.jsx("button",{type:"button",onClick:()=>y(!f),className:"absolute inset-y-0 right-0 flex items-center px-4 text-gray-400 hover:text-gray-600",children:f?e.jsx(MN,{size:20}):e.jsx($r,{size:20})})]})]}),e.jsx(ie,{type:"submit",disabled:!i||!d||x,className:"w-full bg-[#358E83] hover:bg-[#2b6f68] text-white font-semibold py-3 rounded-xl",children:x?"Signing In...":`Sign In to ${me.title}`})]})]})})]})}),e.jsx(Gt,{open:x,onOpenChange:()=>{},children:e.jsxs(Bt,{className:"sm:max-w-md [&>button]:hidden",children:[e.jsxs(Ut,{children:[e.jsx(Ht,{className:"sr-only",children:"Signing In"}),e.jsx(dn,{className:"sr-only",children:"Please wait while we authenticate your credentials"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-[#358E83] border-t-transparent rounded-full animate-spin mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Signing In"}),e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Please wait while we authenticate your credentials..."})]})]})}),e.jsx(Gt,{open:P,onOpenChange:S,children:e.jsxs(Bt,{className:"sm:max-w-md",children:[e.jsxs(Ut,{children:[e.jsxs(Ht,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(wy,{size:24}),"Account Locked"]}),e.jsx(dn,{children:"This account has been locked due to multiple failed login attempts. Enter the SUPER PIN provided by your system administrator to unlock."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["Locked Email: ",E]}),e.jsx(ye,{htmlFor:"super-pin",children:"SUPER PIN"}),e.jsx(Ue,{id:"super-pin",type:"password",placeholder:"Enter 4-digit SUPER PIN",value:w,onChange:fe=>b(fe.target.value.slice(0,4)),maxLength:4,className:"tracking-widest text-center text-2xl"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ie,{onClick:()=>{S(!1),b("")},variant:"outline",className:"flex-1",children:"Cancel"}),e.jsx(ie,{onClick:ge,disabled:w.length!==4,className:"flex-1 bg-[#358E83] hover:bg-[#2b6f68]",children:"Unlock Account"})]})]})]})})]})}function B5({system:n,onLogin:s,onBack:a}){return e.jsx(z5,{system:n,onLogin:s,onBack:a})}var U5=(n,s,a,i,l,d,u,f)=>{let y=document.documentElement,x=["light","dark"];function v(P){(Array.isArray(n)?n:[n]).forEach(S=>{let w=S==="class",b=w&&d?l.map(E=>d[E]||E):l;w?(y.classList.remove(...b),y.classList.add(d&&d[P]?d[P]:P)):y.setAttribute(S,P)}),h(P)}function h(P){f&&x.includes(P)&&(y.style.colorScheme=P)}function C(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(i)v(i);else try{let P=localStorage.getItem(s)||a,S=u&&P==="system"?C():P;v(S)}catch{}},H5=p.createContext(void 0),V5={setTheme:n=>{},themes:[]},q5=()=>{var n;return(n=p.useContext(H5))!=null?n:V5};p.memo(({forcedTheme:n,storageKey:s,attribute:a,enableSystem:i,enableColorScheme:l,defaultTheme:d,value:u,themes:f,nonce:y,scriptProps:x})=>{let v=JSON.stringify([a,s,d,n,f,u,i,l]).slice(1,-1);return p.createElement("script",{...x,suppressHydrationWarning:!0,nonce:typeof window>"u"?y:"",dangerouslySetInnerHTML:{__html:`(${U5.toString()})(${v})`}})});const W5=({...n})=>{const{theme:s="system"}=q5();return e.jsx(Ey,{theme:s,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...n})};function K5(){const[n,s]=p.useState(null),{userSession:a,login:i,logout:l,isAuthenticated:d}=sf(),{currentView:u,navigateToView:f,navigateToSystem:y,navigateToLanding:x,navigateToLogin:v}=d1();p.useEffect(()=>((async()=>{try{await _g.initialize()}catch(T){console.error("App initialization failed:",T)}})(),()=>{_g.cleanup()}),[]);const h=E=>{s(E),v()},C=E=>{const T=i(E);y(T),s(null)},P=()=>{l(),x()},S=()=>{s(null),x()},w=E=>{if(E==="logout"){P();return}if(E==="dashboard"){f("dashboard",null);return}f(E,a)},b=()=>u==="landing"&&!d?e.jsx(ey,{onNavigateToLogin:h}):u==="login"&&!d&&n?e.jsx(B5,{system:n,onLogin:C,onBack:S}):d&&a?e.jsx(F5,{currentView:u,userSession:a,onNavigateToView:w}):e.jsx(ey,{onNavigateToLogin:h});return e.jsxs(e.Fragment,{children:[b(),e.jsx(W5,{})]})}console.log("main.tsx loaded",new Date().toISOString());a1.createRoot(document.getElementById("root")).render(e.jsx(K5,{}));
